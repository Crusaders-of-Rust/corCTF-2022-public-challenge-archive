(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){var r,o;function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===i(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=n(1).Beautifier,o=n(5).Options;e.exports=function(e,t){return new r(e,t).beautify()},e.exports.defaultOptions=function(){return new o}},function(e,t,n){"use strict";var r=n(2).Output,o=n(3).Token,a=n(4),i=n(5).Options,s=n(7).Tokenizer,c=n(7).line_starters,u=n(7).positionable_operators,l=n(7).TOKEN;function p(e,t){return-1!==t.indexOf(e)}function f(e,t){return e&&e.type===l.RESERVED&&e.text===t}function d(e,t){return e&&e.type===l.RESERVED&&p(e.text,t)}var h=["case","return","do","if","throw","else","await","break","continue","async"],m=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}(["before-newline","after-newline","preserve-newline"]),y=[m.before_newline,m.preserve_newline],b="BlockStatement",g="Statement",_="ObjectLiteral",v="ArrayLiteral",E="ForInitializer",w="Conditional",O="Expression";function S(e,t){t.multiline_frame||t.mode===E||t.mode===w||e.remove_indent(t.start_line_index)}function N(e){return e===v}function D(e){return p(e,[O,E,w])}function R(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new i(t)}R.prototype.create_flags=function(e,t){var n=0;return e&&(n=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level)),{mode:t,parent:e,last_token:e?e.last_token:new o(l.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,alignment:0,line_indent_level:e?e.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},R.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new r(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(b);var n=new s(e,this._options);return this._tokens=n.tokenize(),e},R.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._reset(this._source_text),t=this._options.eol;"auto"===this._options.eol&&(t="\n",e&&a.lineBreak.test(e||"")&&(t=e.match(a.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(t)},R.prototype.handle_token=function(e,t){e.type===l.START_EXPR?this.handle_start_expr(e):e.type===l.END_EXPR?this.handle_end_expr(e):e.type===l.START_BLOCK?this.handle_start_block(e):e.type===l.END_BLOCK?this.handle_end_block(e):e.type===l.WORD||e.type===l.RESERVED?this.handle_word(e):e.type===l.SEMICOLON?this.handle_semicolon(e):e.type===l.STRING?this.handle_string(e):e.type===l.EQUALS?this.handle_equals(e):e.type===l.OPERATOR?this.handle_operator(e):e.type===l.COMMA?this.handle_comma(e):e.type===l.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===l.COMMENT?this.handle_comment(e,t):e.type===l.DOT?this.handle_dot(e):e.type===l.EOF?this.handle_eof(e):(e.type,l.UNKNOWN,this.handle_unknown(e,t))},R.prototype.handle_whitespace_and_comments=function(e,t){var n=e.newlines,r=this._options.keep_array_indentation&&N(this._flags.mode);if(e.comments_before)for(var o=e.comments_before.next();o;)this.handle_whitespace_and_comments(o,t),this.handle_token(o,t),o=e.comments_before.next();if(r)for(var a=0;a<n;a+=1)this.print_newline(a>0,t);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,t);for(var i=1;i<n;i+=1)this.print_newline(!0,t)}};var C=["async","break","continue","return","throw","yield"];R.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=void 0!==t&&t,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&e.newlines||t;if(p(this._flags.last_token.text,u)||p(e.text,u)){var r=p(this._flags.last_token.text,u)&&p(this._options.operator_position,y)||p(e.text,u);n=n&&r}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(d(this._flags.last_token,C))return;this._output.set_wrap_point()}}},R.prototype.print_newline=function(e,t){if(!t&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==l.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==g||this._flags.if_block&&f(n,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)},R.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&("["===e.text||N(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},R.prototype.print_token=function(e){if(this._output.raw)this._output.add_raw_token(e);else{if(this._options.comma_first&&e.previous&&e.previous.type===l.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},R.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},R.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},R.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},R.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===g&&S(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},R.prototype.start_of_object_property=function(){return this._flags.parent.mode===_&&this._flags.mode===g&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,["get","set"]))},R.prototype.start_of_statement=function(e){var t=!1;return!!(t=(t=(t=(t=(t=(t=(t=t||d(this._flags.last_token,["var","let","const"])&&e.type===l.WORD)||f(this._flags.last_token,"do"))||!(this._flags.parent.mode===_&&this._flags.mode===g)&&d(this._flags.last_token,C)&&!e.newlines)||f(this._flags.last_token,"else")&&!(f(e,"if")&&!e.comments_before))||this._flags.last_token.type===l.END_EXPR&&(this._previous_flags.mode===E||this._previous_flags.mode===w))||this._flags.last_token.type===l.WORD&&this._flags.mode===b&&!this._flags.in_case&&!("--"===e.text||"++"===e.text)&&"function"!==this._last_last_text&&e.type!==l.WORD&&e.type!==l.RESERVED)||this._flags.mode===_&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,["get","set"])))&&(this.set_mode(g),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,d(e,["do","for","if","while"])),!0)},R.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=O;if("["===e.text){if(this._flags.last_token.type===l.WORD||")"===this._flags.last_token.text)return d(this._flags.last_token,c)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));t=v,N(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),p(this._flags.last_token.type,[l.START_EXPR,l.END_EXPR,l.WORD,l.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===l.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,t=E):p(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,t=w):p(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===e.whitespace_before?this._output.space_before_token=!1:(p(this._flags.last_token.text,c)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===l.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var r=this._tokens.peek(-4);d(n,["async","function"])||"*"===n.text&&d(r,["async","function"])?this._output.space_before_token=!0:this._flags.mode===_&&("{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==r.text&&","!==r.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===l.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(p(this._last_last_text,["function","yield"])||this._flags.mode===_&&p(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===l.START_BLOCK?this.print_newline():this._flags.last_token.type!==l.END_EXPR&&this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==l.COMMA||this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},R.prototype.handle_end_expr=function(e){for(;this._flags.mode===g;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,"]"===e.text&&N(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==l.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(e),this.restore_mode(),S(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===w&&(this._previous_flags.mode=O,this._flags.do_block=!1,this._flags.do_while=!1)},R.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===l.END_EXPR?(this.set_mode(b),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(b):n&&(p(n.text,[":",","])&&p(t.type,[l.STRING,l.WORD,l.RESERVED])||p(t.text,["get","set","..."])&&p(n.type,[l.WORD,l.RESERVED]))?p(this._last_last_text,["class","interface"])?this.set_mode(b):this.set_mode(_):this._flags.last_token.type===l.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(b):p(this._flags.last_token.type,[l.EQUALS,l.START_EXPR,l.COMMA,l.OPERATOR])||d(this._flags.last_token,["return","throw","import","default"])?this.set_mode(_):this.set_mode(b);var r=!t.comments_before&&"}"===t.text,o=r&&"function"===this._flags.last_word&&this._flags.last_token.type===l.END_EXPR;if(this._options.brace_preserve_inline){var a=0,i=null;this._flags.inline_frame=!0;do{if(a+=1,(i=this._tokens.peek(a-1)).newlines){this._flags.inline_frame=!1;break}}while(i.type!==l.EOF&&(i.type!==l.END_BLOCK||i.opened!==e))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==l.OPERATOR&&(o||this._flags.last_token.type===l.EQUALS||d(this._flags.last_token,h)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!N(this._previous_flags.mode)||this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.COMMA||((this._flags.last_token.type===l.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==l.OPERATOR&&this._flags.last_token.type!==l.START_EXPR&&(this._flags.last_token.type!==l.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(e),this.indent(),r||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},R.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===g;)this.restore_mode();var t=this._flags.last_token.type===l.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:"expand"===this._options.brace_style?t||this.print_newline():t||(N(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)},R.prototype.handle_word=function(e){if(e.type===l.RESERVED&&(p(e.text,["set","get"])&&this._flags.mode!==_||"import"===e.text&&"("===this._tokens.peek().text||p(e.text,["as","from"])&&!this._flags.import_block||this._flags.mode===_&&":"===this._tokens.peek().text)&&(e.type=l.WORD),this.start_of_statement(e)?d(this._flags.last_token,["var","let","const"])&&e.type===l.WORD&&(this._flags.declaration_statement=!0):!e.newlines||D(this._flags.mode)||this._flags.last_token.type===l.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===l.EQUALS||!this._options.preserve_newlines&&d(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(e):(this.handle_whitespace_and_comments(e),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(f(e,"while"))return this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&f(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===g;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&d(e,["case","default"]))return this.print_newline(),this._flags.last_token.type!==l.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),void(this._flags.in_case=!0);if(this._flags.last_token.type!==l.COMMA&&this._flags.last_token.type!==l.START_EXPR&&this._flags.last_token.type!==l.EQUALS&&this._flags.last_token.type!==l.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e),f(e,"function"))return(p(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!p(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==l.OPERATOR)&&(this._output.just_added_blankline()||e.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD?d(this._flags.last_token,["get","set","new","export"])||d(this._flags.last_token,C)||f(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===l.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!D(this._flags.mode)&&!N(this._flags.mode))&&this.print_newline(),this.print_token(e),void(this._flags.last_word=e.text);var t="NONE";this._flags.last_token.type===l.END_BLOCK?this._previous_flags.inline_frame?t="SPACE":d(e,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines?t="NEWLINE":(t="SPACE",this._output.space_before_token=!0):t="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&this._flags.mode===b?t="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&D(this._flags.mode)?t="SPACE":this._flags.last_token.type===l.STRING?t="NEWLINE":this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||"*"===this._flags.last_token.text&&(p(this._last_last_text,["function","yield"])||this._flags.mode===_&&p(this._last_last_text,["{",","]))?t="SPACE":this._flags.last_token.type===l.START_BLOCK?t=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===l.END_EXPR&&(this._output.space_before_token=!0,t="NEWLINE"),d(e,c)&&")"!==this._flags.last_token.text&&(t=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),d(e,["else","catch","finally"])?(this._flags.last_token.type!==l.END_BLOCK||this._previous_flags.mode!==b||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&e.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===t?d(this._flags.last_token,h)||"declare"===this._flags.last_token.text&&d(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==l.END_EXPR?this._flags.last_token.type===l.START_EXPR&&d(e,["var","let","const"])||":"===this._flags.last_token.text||(f(e,"if")&&f(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):d(e,c)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&N(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===t&&(this._output.space_before_token=!0),!e.previous||e.previous.type!==l.WORD&&e.previous.type!==l.RESERVED||(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===l.RESERVED&&("do"===e.text?this._flags.do_block=!0:"if"===e.text?this._flags.if_block=!0:"import"===e.text?this._flags.import_block=!0:this._flags.import_block&&f(e,"from")&&(this._flags.import_block=!1))},R.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();!(this._flags.mode!==g||this._flags.if_block&&f(t,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)},R.prototype.handle_string=function(e){this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):this.print_newline()),this.print_token(e)},R.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0},R.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(D(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===_||this._flags.mode===g&&this._flags.parent.mode===_?(this._flags.mode===g&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)},R.prototype.handle_operator=function(e){var t="*"===e.text&&(d(this._flags.last_token,["function","yield"])||p(this._flags.last_token.type,[l.START_BLOCK,l.COMMA,l.END_BLOCK,l.SEMICOLON])),n=p(e.text,["-","+"])&&(p(this._flags.last_token.type,[l.START_BLOCK,l.START_EXPR,l.EQUALS,l.OPERATOR])||p(this._flags.last_token.text,c)||","===this._flags.last_token.text);if(this.start_of_statement(e));else{var r=!t;this.handle_whitespace_and_comments(e,r)}if(d(this._flags.last_token,h))return this._output.space_before_token=!0,void this.print_token(e);if("*"!==e.text||this._flags.last_token.type!==l.DOT)if("::"!==e.text){if(this._flags.last_token.type===l.OPERATOR&&p(this._options.operator_position,y)&&this.allow_wrap_or_preserved_newline(e),":"===e.text&&this._flags.in_case)return this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==l.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var o=!0,a=!0,i=!1;if(":"===e.text?0===this._flags.ternary_depth?o=!1:(this._flags.ternary_depth-=1,i=!0):"?"===e.text&&(this._flags.ternary_depth+=1),!n&&!t&&this._options.preserve_newlines&&p(e.text,u)){var s=":"===e.text,f=s&&i,_=s&&!i;switch(this._options.operator_position){case m.before_newline:return this._output.space_before_token=!_,this.print_token(e),s&&!f||this.allow_wrap_or_preserved_newline(e),void(this._output.space_before_token=!0);case m.after_newline:return this._output.space_before_token=!0,!s||f?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),void(this._output.space_before_token=!0);case m.preserve_newline:return _||this.allow_wrap_or_preserved_newline(e),o=!(this._output.just_added_newline()||_),this._output.space_before_token=o,this.print_token(e),void(this._output.space_before_token=!0)}}if(t){this.allow_wrap_or_preserved_newline(e),o=!1;var v=this._tokens.peek();a=v&&p(v.type,[l.WORD,l.RESERVED])}else"..."===e.text?(this.allow_wrap_or_preserved_newline(e),o=this._flags.last_token.type===l.START_BLOCK,a=!1):(p(e.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==l.COMMA&&this._flags.last_token.type!==l.START_EXPR||this.allow_wrap_or_preserved_newline(e),o=!1,a=!1,!e.newlines||"--"!==e.text&&"++"!==e.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&D(this._flags.mode)&&(o=!0),this._flags.last_token.type===l.RESERVED?o=!0:this._flags.last_token.type===l.END_EXPR?o=!("]"===this._flags.last_token.text&&("--"===e.text||"++"===e.text)):this._flags.last_token.type===l.OPERATOR&&(o=p(e.text,["--","-","++","+"])&&p(this._flags.last_token.text,["--","-","++","+"]),p(e.text,["+","-"])&&p(this._flags.last_token.text,["--","++"])&&(a=!0)),(this._flags.mode!==b||this._flags.inline_frame)&&this._flags.mode!==g||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||o,this.print_token(e),this._output.space_before_token=a}else this.print_token(e);else this.print_token(e)},R.prototype.handle_block_comment=function(e,t){return this._output.raw?(this._output.add_raw_token(e),void(e.directives&&"end"===e.directives.preserve&&(this._output.raw=this._options.test_output_raw))):e.directives?(this.print_newline(!1,t),this.print_token(e),"start"===e.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):a.newline.test(e.text)||e.newlines?void this.print_block_commment(e,t):(this._output.space_before_token=!0,this.print_token(e),void(this._output.space_before_token=!0))},R.prototype.print_block_commment=function(e,t){var n,r=function(e){for(var t=[],n=(e=e.replace(a.allLineBreaks,"\n")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),n=(e=e.substring(n+1)).indexOf("\n");return e.length&&t.push(e),t}(e.text),o=!1,i=!1,s=e.whitespace_before,c=s.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(r[0]),this.print_newline(!1,t),r.length>1){for(o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].trim().charAt(0)!==t)return!1;return!0}(r=r.slice(1),"*"),i=function(e,t){for(var n,r=0,o=e.length;r<o;r++)if((n=e[r])&&0!==n.indexOf(t))return!1;return!0}(r,s),o&&(this._flags.alignment=1),n=0;n<r.length;n++)o?(this.print_token_line_indentation(e),this._output.add_token(r[n].replace(/^\s+/g,""))):i&&r[n]?(this.print_token_line_indentation(e),this._output.add_token(r[n].substring(c))):(this._output.current_line.set_indent(-1),this._output.add_token(r[n])),this.print_newline(!1,t);this._flags.alignment=0}},R.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)},R.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),d(this._flags.last_token,h)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)},R.prototype.handle_unknown=function(e,t){this.print_token(e),"\n"===e.text[e.text.length-1]&&this.print_newline(!1,t)},R.prototype.handle_eof=function(e){for(;this._flags.mode===g;)this.restore_mode();this.handle_whitespace_and_comments(e)},e.exports.Beautifier=R},function(e,t,n){"use strict";function r(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function o(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}function a(e,t){this.__indent_cache=new o(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new r(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}r.prototype.clone_empty=function(){var e=new r(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e},r.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]},r.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1},r.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},r.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},r.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},r.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===e.__items[0]&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1},r.prototype.is_empty=function(){return 0===this.__items.length},r.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},r.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf("\n");-1!==t?this.__character_count=e.length-t:this.__character_count+=e.length},r.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e},r.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},r.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},r.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},r.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e},o.prototype.get_indent_size=function(e,t){var n=this.__base_string_length;return t=t||0,e<0&&(n=0),n+=e*this.__indent_size,n+=t},o.prototype.get_indent_string=function(e,t){var n=this.__base_string;return t=t||0,e<0&&(e=0,n=""),t+=e*this.__indent_size,this.__ensure_cache(t),n+=this.__cache[t]},o.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()},o.prototype.__add_column=function(){var e=this.__cache.length,t=0,n="";this.__indent_size&&e>=this.__indent_size&&(e-=(t=Math.floor(e/this.__indent_size))*this.__indent_size,n=new Array(t+1).join(this.__indent_string)),e&&(n+=new Array(e+1).join(" ")),this.__cache.push(n)},a.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},a.prototype.get_line_number=function(){return this.__lines.length},a.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)},a.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)},a.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},a.prototype.add_new_line=function(e){return!(this.is_empty()||!e&&this.just_added_newline()||(this.raw||this.__add_outputline(),0))},a.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&("\n"===t[t.length-1]&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==e&&(n=n.replace(/[\n]/g,e)),n},a.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},a.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)},a.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},a.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},a.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},a.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()},a.prototype.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},a.prototype.just_added_newline=function(){return this.current_line.is_empty()},a.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},a.prototype.ensure_empty_line_above=function(e,t){for(var n=this.__lines.length-2;n>=0;){var o=this.__lines[n];if(o.is_empty())break;if(0!==o.item(0).indexOf(e)&&o.item(-1)!==t){this.__lines.splice(n+1,0,new r(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},e.exports.Output=a},function(e,t,n){"use strict";e.exports.Token=function(e,t,n,r){this.type=e,this.text=t,this.comments_before=null,this.newlines=n||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(e,t,n){"use strict";var r="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",o="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",a="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+r+"])";t.identifier=new RegExp(a+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),t.identifierStart=new RegExp(a),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a"+r+o+"])+"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")},function(e,t,n){"use strict";var r=n(6).Options,o=["before-newline","after-newline","preserve-newline"];function a(e){r.call(this,e,"js");var t=this.raw_options.brace_style||null;"expand-strict"===t?this.raw_options.brace_style="expand":"collapse-preserve-inline"===t?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var a=0;a<n.length;a++)"preserve-inline"===n[a]?this.brace_preserve_inline=!0:this.brace_style=n[a];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",o),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}a.prototype=new r,e.exports.Options=a},function(e,t,n){"use strict";function r(e,t){this.raw_options=o(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php"],["auto"])}function o(e,t){var n,r={};for(n in e=a(e))n!==t&&(r[n]=e[n]);if(t&&e[t])for(n in e[t])r[n]=e[t][n];return r}function a(e){var t,n={};for(t in e)n[t.replace(/-/g,"_")]=e[t];return n}r.prototype._get_array=function(e,t){var n=this.raw_options[e],r=t||[];return"object"===i(n)?null!==n&&"function"==typeof n.concat&&(r=n.concat()):"string"==typeof n&&(r=n.split(/[^a-zA-Z0-9_\/\-]+/)),r},r.prototype._get_boolean=function(e,t){var n=this.raw_options[e];return void 0===n?!!t:!!n},r.prototype._get_characters=function(e,t){var n=this.raw_options[e],r=t||"";return"string"==typeof n&&(r=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),r},r.prototype._get_number=function(e,t){var n=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var r=parseInt(n,10);return isNaN(r)&&(r=t),r},r.prototype._get_selection=function(e,t,n){var r=this._get_selection_list(e,t,n);if(1!==r.length)throw new Error("Invalid Option Value: The option '"+e+"' can only be one of the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r[0]},r.prototype._get_selection_list=function(e,t,n){if(!t||0===t.length)throw new Error("Selection list cannot be empty.");if(n=n||[t[0]],!this._is_valid_selection(n,t))throw new Error("Invalid Default Value!");var r=this._get_array(e,n);if(!this._is_valid_selection(r,t))throw new Error("Invalid Option Value: The option '"+e+"' can contain only the following values:\n"+t+"\nYou passed in: '"+this.raw_options[e]+"'");return r},r.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some((function(e){return-1===t.indexOf(e)}))},e.exports.Options=r,e.exports.normalizeOpts=a,e.exports.mergeOpts=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(9).Tokenizer,a=n(9).TOKEN,i=n(13).Directives,s=n(4),c=n(12).Pattern,u=n(14).TemplatablePattern;function l(e,t){return-1!==t.indexOf(e)}var p={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:a.START,RAW:a.RAW,EOF:a.EOF},f=new i(/\/\*/,/\*\//),d=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/,h=/[0-9]/,m=/[^\d\.]/,y=">>> === !== << && >= ** != == <= >> || |> < / - + > : & % ? ^ | *".split(" "),b=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";b=(b="\\?\\.(?!\\d) "+(b=b.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var g,_=new RegExp(b),v="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),E=v.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),w=new RegExp("^(?:"+E.join("|")+")$"),O=function(e,t){o.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new c(this._input),r=new u(this._input).read_options(this._options);this.__patterns={template:r,identifier:r.starting_with(s.identifier).matching(s.identifierMatch),number:n.matching(d),punct:n.matching(_),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(s.lineBreak),shebang:n.starting_with(/#!/).until_after(s.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:r.until(/['\\\n\r\u2028\u2029]/),double_quote:r.until(/["\\\n\r\u2028\u2029]/),template_text:r.until(/[`\\$]/),template_expression:r.until(/[`}\\]/)}};(O.prototype=new o)._is_comment=function(e){return e.type===p.COMMENT||e.type===p.BLOCK_COMMENT||e.type===p.UNKNOWN},O.prototype._is_opening=function(e){return e.type===p.START_BLOCK||e.type===p.START_EXPR},O.prototype._is_closing=function(e,t){return(e.type===p.END_BLOCK||e.type===p.END_EXPR)&&t&&("]"===e.text&&"["===t.text||")"===e.text&&"("===t.text||"}"===e.text&&"{"===t.text)},O.prototype._reset=function(){g=!1},O.prototype._get_next_token=function(e,t){var n=null;this._readWhitespace();var r=this._input.peek();return null===r?this._create_token(p.EOF,""):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_non_javascript(r))||this._read_string(r))||this._read_word(e))||this._read_singles(r))||this._read_comment(r))||this._read_regexp(r,e))||this._read_xml(r,e))||this._read_punctuation())||this._create_token(p.UNKNOWN,this._input.next())},O.prototype._read_word=function(e){var t;return""!==(t=this.__patterns.identifier.read())?(t=t.replace(s.allLineBreaks,"\n"),e.type!==p.DOT&&(e.type!==p.RESERVED||"set"!==e.text&&"get"!==e.text)&&w.test(t)?"in"===t||"of"===t?this._create_token(p.OPERATOR,t):this._create_token(p.RESERVED,t):this._create_token(p.WORD,t)):""!==(t=this.__patterns.number.read())?this._create_token(p.WORD,t):void 0},O.prototype._read_singles=function(e){var t=null;return"("===e||"["===e?t=this._create_token(p.START_EXPR,e):")"===e||"]"===e?t=this._create_token(p.END_EXPR,e):"{"===e?t=this._create_token(p.START_BLOCK,e):"}"===e?t=this._create_token(p.END_BLOCK,e):";"===e?t=this._create_token(p.SEMICOLON,e):"."===e&&m.test(this._input.peek(1))?t=this._create_token(p.DOT,e):","===e&&(t=this._create_token(p.COMMA,e)),t&&this._input.next(),t},O.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(""!==e)return"="===e?this._create_token(p.EQUALS,e):"?."===e?this._create_token(p.DOT,e):this._create_token(p.OPERATOR,e)},O.prototype._read_non_javascript=function(e){var t="";if("#"===e){if(this._is_first_token()&&(t=this.__patterns.shebang.read()))return this._create_token(p.UNKNOWN,t.trim()+"\n");if(t=this.__patterns.include.read())return this._create_token(p.UNKNOWN,t.trim()+"\n");e=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(h)){do{n+=e=this._input.next()}while(this._input.hasNext()&&"#"!==e&&"="!==e);return"#"===e||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(p.WORD,n)}this._input.back()}else if("<"===e&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(s.newline);)t+=this._input.next();return g=!0,this._create_token(p.COMMENT,t)}}else if(g&&"-"===e&&(t=this.__patterns.html_comment_end.read()))return g=!1,this._create_token(p.COMMENT,t);return null},O.prototype._read_comment=function(e){var t=null;if("/"===e){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var r=f.get_directives(n);r&&"start"===r.ignore&&(n+=f.readIgnored(this._input)),n=n.replace(s.allLineBreaks,"\n"),(t=this._create_token(p.BLOCK_COMMENT,n)).directives=r}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),t=this._create_token(p.COMMENT,n))}return t},O.prototype._read_string=function(e){if("`"===e||"'"===e||'"'===e){var t=this._input.next();return this.has_char_escapes=!1,t+="`"===e?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=function(e){for(var t="",n=0,o=new r(e),a=null;o.hasNext();)if((a=o.match(/([\s]|[^\\]|\\\\)+/g))&&(t+=a[0]),"\\"===o.peek()){if(o.next(),"x"===o.peek())a=o.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==o.peek()){t+="\\",o.hasNext()&&(t+=o.next());continue}a=o.match(/u([0-9A-Fa-f]{4})/g)}if(!a)return e;if((n=parseInt(a[1],16))>126&&n<=255&&0===a[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+a[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(s.allLineBreaks,"\n"),this._create_token(p.STRING,t)}return null},O.prototype._allow_regexp_or_xml=function(e){return e.type===p.RESERVED&&l(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===p.END_EXPR&&")"===e.text&&e.opened.previous.type===p.RESERVED&&l(e.opened.previous.text,["if","while","for"])||l(e.type,[p.COMMENT,p.START_EXPR,p.START_BLOCK,p.START,p.END_BLOCK,p.OPERATOR,p.EQUALS,p.EOF,p.SEMICOLON,p.COMMA])},O.prototype._read_regexp=function(e,t){if("/"===e&&this._allow_regexp_or_xml(t)){for(var n=this._input.next(),r=!1,o=!1;this._input.hasNext()&&(r||o||this._input.peek()!==e)&&!this._input.testChar(s.newline);)n+=this._input.peek(),r?r=!1:(r="\\"===this._input.peek(),"["===this._input.peek()?o=!0:"]"===this._input.peek()&&(o=!1)),this._input.next();return this._input.peek()===e&&(n+=this._input.next(),n+=this._input.read(s.identifier)),this._create_token(p.STRING,n)}return null},O.prototype._read_xml=function(e,t){if(this._options.e4x&&"<"===e&&this._allow_regexp_or_xml(t)){var n="",r=this.__patterns.xml.read_match();if(r){for(var o=r[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),a=0===o.indexOf("{"),i=0;r;){var c=!!r[1],u=r[2];if(!(r[r.length-1]||"![CDATA["===u.slice(0,8))&&(u===o||a&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(c?--i:++i),n+=r[0],i<=0)break;r=this.__patterns.xml.read_match()}return r||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(s.allLineBreaks,"\n"),this._create_token(p.STRING,n)}}return null},O.prototype._read_string_recursive=function(e,t,n){var r,o;"'"===e?o=this.__patterns.single_quote:'"'===e?o=this.__patterns.double_quote:"`"===e?o=this.__patterns.template_text:"}"===e&&(o=this.__patterns.template_expression);for(var a=o.read(),i="";this._input.hasNext();){if((i=this._input.next())===e||!t&&s.newline.test(i)){this._input.back();break}"\\"===i&&this._input.hasNext()?("x"===(r=this._input.peek())||"u"===r?this.has_char_escapes=!0:"\r"===r&&"\n"===this._input.peek(1)&&this._input.next(),i+=this._input.next()):n&&("${"===n&&"$"===i&&"{"===this._input.peek()&&(i+=this._input.next()),n===i&&(i+="`"===e?this._read_string_recursive("}",t,"`"):this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(i+=this._input.next()))),a+=i+=o.read()}return a},e.exports.Tokenizer=O,e.exports.TOKEN=p,e.exports.positionable_operators=y.slice(),e.exports.line_starters=v.slice()},function(e,t,n){"use strict";var r=RegExp.prototype.hasOwnProperty("sticky");function o(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}o.prototype.restart=function(){this.__position=0},o.prototype.back=function(){this.__position>0&&(this.__position-=1)},o.prototype.hasNext=function(){return this.__position<this.__input_length},o.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e},o.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t},o.prototype.__match=function(e,t){e.lastIndex=t;var n=e.exec(this.__input);return!n||r&&e.sticky||n.index!==t&&(n=null),n},o.prototype.test=function(e,t){return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&!!this.__match(e,t)},o.prototype.testChar=function(e,t){var n=this.peek(t);return e.lastIndex=0,null!==n&&e.test(n)},o.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t},o.prototype.read=function(e,t,n){var r,o="";return e&&(r=this.match(e))&&(o+=r[0]),!t||!r&&e||(o+=this.readUntil(t,n)),o},o.prototype.readUntil=function(e,t){var n,r=this.__position;e.lastIndex=this.__position;var o=e.exec(this.__input);return o?(r=o.index,t&&(r+=o[0].length)):r=this.__input_length,n=this.__input.substring(this.__position,r),this.__position=r,n},o.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)},o.prototype.get_regexp=function(e,t){var n=null,o="g";return t&&r&&(o="y"),"string"==typeof e&&""!==e?n=new RegExp(e,o):e&&(n=new RegExp(e.source,o)),n},o.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},o.prototype.peekUntilAfter=function(e){var t=this.__position,n=this.readUntilAfter(e);return this.__position=t,n},o.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e},e.exports.InputScanner=o},function(e,t,n){"use strict";var r=n(8).InputScanner,o=n(3).Token,a=n(10).TokenStream,i=n(11).WhitespacePattern,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},c=function(e,t){this._input=new r(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new i(this._input)};c.prototype.tokenize=function(){var e;this._input.restart(),this.__tokens=new a,this._reset();for(var t=new o(s.START,""),n=null,r=[],i=new a;t.type!==s.EOF;){for(e=this._get_next_token(t,n);this._is_comment(e);)i.add(e),e=this._get_next_token(t,n);i.isEmpty()||(e.comments_before=i,i=new a),e.parent=n,this._is_opening(e)?(r.push(n),n=e):n&&this._is_closing(e,n)&&(e.opened=n,n.closed=e,n=r.pop(),e.parent=n),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens},c.prototype._is_first_token=function(){return this.__tokens.isEmpty()},c.prototype._reset=function(){},c.prototype._get_next_token=function(e,t){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(s.RAW,n):this._create_token(s.EOF,"")},c.prototype._is_comment=function(e){return!1},c.prototype._is_opening=function(e){return!1},c.prototype._is_closing=function(e,t){return!1},c.prototype._create_token=function(e,t){return new o(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},c.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},e.exports.Tokenizer=c,e.exports.TOKEN=s},function(e,t,n){"use strict";function r(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}r.prototype.restart=function(){this.__position=0},r.prototype.isEmpty=function(){return 0===this.__tokens_length},r.prototype.hasNext=function(){return this.__position<this.__tokens_length},r.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},r.prototype.peek=function(e){var t=null;return e=e||0,(e+=this.__position)>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},r.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},e.exports.TokenStream=r},function(e,t,n){"use strict";var r=n(12).Pattern;function o(e,t){r.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}o.prototype=new r,o.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")},o.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(" "===e)this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e},o.prototype.matching=function(e,t){var n=this._create();return n.__set_whitespace_patterns(e,t),n._update(),n},o.prototype._create=function(){return new o(this._input,this)},o.prototype.__split=function(e,t){e.lastIndex=0;for(var n=0,r=[],o=e.exec(t);o;)r.push(t.substring(n,o.index)),n=o.index+o[0].length,o=e.exec(t);return n<t.length?r.push(t.substring(n,t.length)):r.push(""),r},e.exports.WhitespacePattern=o},function(e,t,n){"use strict";function r(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}r.prototype.read=function(){var e=this._input.read(this._starting_pattern);return this._starting_pattern&&!e||(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},r.prototype.read_match=function(){return this._input.match(this._match_pattern)},r.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},r.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){},e.exports.Pattern=r},function(e,t,n){"use strict";function r(e,t){e="string"==typeof e?e:e.source,t="string"==typeof t?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}r.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)t[n[1]]=n[2],n=this.__directive_pattern.exec(e);return t},r.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},e.exports.Directives=r},function(e,t,n){"use strict";var r=n(12).Pattern,o={django:!1,erb:!1,handlebars:!1,php:!1};function i(e,t){r.call(this,e,t),this.__template_pattern=null,this._disabled=a({},o),this._excluded=a({},o),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=a(this._excluded,t._excluded),this._disabled=a(this._disabled,t._disabled));var n=new r(e);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[=]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/)}}i.prototype=new r,i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){this.__set_templated_pattern()},i.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t},i.prototype.read_options=function(e){var t=this._create();for(var n in o)t._disabled[n]=-1===e.templating.indexOf(n);return t._update(),t},i.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t},i.prototype.read=function(){var e="";e=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e},i.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")},i.prototype._read_template=function(){var e="",t=this._input.peek();if("<"===t){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(e=e||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(e=e||this.__patterns.erb.read())}else"{"===t&&(this._disabled.handlebars||this._excluded.handlebars||(e=(e=(e=e||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=(e=e||this.__patterns.django_comment.read())||this.__patterns.django.read())));return e},e.exports.TemplatablePattern=i}]),void 0===(r=function(){return{js_beautify:o}}.apply(t,[]))||(e.exports=r)},158:function(e,t){var n=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function e(e,t,n,r){t&&(n(e={a:t,d:e}),r.push.apply(r,e.e))}function t(t,r){var o,a={};!function(){for(var e=t.concat(r),i=[],s={},c=0,u=e.length;c<u;++c){var l=e[c],p=l[3];if(p)for(var f=p.length;--f>=0;)a[p.charAt(f)]=l;p=""+(l=l[1]),s.hasOwnProperty(p)||(i.push(l),s[p]=n)}i.push(/[\S\s]/),o=function(e){function t(e){var t=e.charCodeAt(0);if(92!==t)return t;var n=e.charAt(1);return(t=p[n])?t:"0"<=n&&n<="7"?parseInt(e.substring(1),8):"u"===n||"x"===n?parseInt(e.substring(2),16):e.charCodeAt(1)}function n(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):("\\"!==(e=String.fromCharCode(e))&&"-"!==e&&"["!==e&&"]"!==e||(e="\\"+e),e)}function r(e){for(var r=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),o=(e=[],[]),a="^"===r[0],i=a?1:0,s=r.length;i<s;++i){var c=r[i];if(/\\[bdsw]/i.test(c))e.push(c);else{var u;c=t(c);i+2<s&&"-"===r[i+1]?(u=t(r[i+2]),i+=2):u=c,o.push([c,u]),u<65||c>122||(u<65||c>90||o.push([32|Math.max(65,c),32|Math.min(u,90)]),u<97||c>122||o.push([-33&Math.max(97,c),-33&Math.min(u,122)]))}}for(o.sort((function(e,t){return e[0]-t[0]||t[1]-e[1]})),r=[],c=[NaN,NaN],i=0;i<o.length;++i)(s=o[i])[0]<=c[1]+1?c[1]=Math.max(c[1],s[1]):r.push(c=s);for(o=["["],a&&o.push("^"),o.push.apply(o,e),i=0;i<r.length;++i)s=r[i],o.push(n(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&o.push("-"),o.push(n(s[1])));return o.push("]"),o.join("")}function o(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),n=t.length,o=[],s=0,c=0;s<n;++s){var u=t[s];"("===u?++c:"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=c&&(o[u]=-1)}for(s=1;s<o.length;++s)-1===o[s]&&(o[s]=++a);for(c=s=0;s<n;++s)"("===(u=t[s])?void 0===o[++c]&&(t[s]="(?:"):"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=c&&(t[s]="\\"+o[c]);for(c=s=0;s<n;++s)"^"===t[s]&&"^"!==t[s+1]&&(t[s]="");if(e.ignoreCase&&i)for(s=0;s<n;++s)e=(u=t[s]).charAt(0),u.length>=2&&"["===e?t[s]=r(u):"\\"!==e&&(t[s]=u.replace(/[A-Za-z]/g,(function(e){return e=e.charCodeAt(0),"["+String.fromCharCode(-33&e,32|e)+"]"})));return t.join("")}for(var a=0,i=!1,s=!1,c=0,u=e.length;c<u;++c){var l=e[c];if(l.ignoreCase)s=!0;else if(/[a-z]/i.test(l.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){i=!0,s=!1;break}}var p={b:8,t:9,n:10,v:11,f:12,r:13},f=[];for(c=0,u=e.length;c<u;++c){if((l=e[c]).global||l.multiline)throw Error(""+l);f.push("(?:"+o(l)+")")}return RegExp(f.join("|"),s?"gi":"g")}(i)}();var s=r.length;return function t(n){for(var c=n.d,u=[c,"pln"],l=0,p=n.a.match(o)||[],f={},d=0,h=p.length;d<h;++d){var m,y=p[d],b=f[y],g=void 0;if("string"==typeof b)m=!1;else{var _=a[y.charAt(0)];if(_)g=y.match(_[1]),b=_[0];else{for(m=0;m<s;++m)if(_=r[m],g=y.match(_[1])){b=_[0];break}g||(b="pln")}!(m=b.length>=5&&"lang-"===b.substring(0,5))||g&&"string"==typeof g[1]||(m=!1,b="src"),m||(f[y]=b)}if(_=l,l+=y.length,m){m=g[1];var v=y.indexOf(m),E=v+m.length;g[2]&&(v=(E=y.length-g[2].length)-m.length),b=b.substring(5),e(c+_,y.substring(0,v),t,u),e(c+_+v,m,i(b,m),u),e(c+_+E,y.substring(E),t,u)}else u.push(c+_,b)}n.e=u}}function r(e){var r=[],o=[];e.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,n,"'\""]):e.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,n,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,n,"\"'"]),e.verbatimStrings&&o.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,n]);var a=e.hashComments;return a&&(e.cStyleComments?(a>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,n,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,n,"#"]),o.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,n])):r.push(["com",/^#[^\n\r]*/,n,"#"])),e.cStyleComments&&(o.push(["com",/^\/\/[^\n\r]*/,n]),o.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,n])),e.regexLiterals&&o.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(a=e.types)&&o.push(["typ",a]),(e=(""+e.keywords).replace(/^ | $/g,"")).length&&o.push(["kwd",RegExp("^(?:"+e.replace(/[\s,]+/g,"|")+")\\b"),n]),r.push(["pln",/^\s+/,n," \r\n\t"]),o.push(["lit",/^@[$_a-z][\w$@]*/i,n],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,n],["pln",/^[$_a-z][\w$@]*/i,n],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,n,"0123456789"],["pln",/^\\[\S\s]?/,n],["pun",/^.[^\s\w"-$'./@\\`]*/,n]),t(r,o)}function o(e,t){function r(e){switch(e.nodeType){case 1:if(i.test(e.className))break;if("BR"===e.nodeName)o(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)r(e);break;case 3:case 4:if(u){var t=e.nodeValue,n=t.match(s);if(n){var a=t.substring(0,n.index);e.nodeValue=a,(t=t.substring(n.index+n[0].length))&&e.parentNode.insertBefore(c.createTextNode(t),e.nextSibling),o(e),a||e.parentNode.removeChild(e)}}}}function o(e){for(;!e.nextSibling;)if(!(e=e.parentNode))return;var t;for(e=function e(t,n){var r=n?t.cloneNode(!1):t;if(o=t.parentNode){var o=e(o,1),a=t.nextSibling;o.appendChild(r);for(var i=a;i;i=a)a=i.nextSibling,o.appendChild(i)}return r}(e.nextSibling,0);(t=e.parentNode)&&1===t.nodeType;)e=t;l.push(e)}var a,i=/(?:^|\s)nocode(?:\s|$)/,s=/\r\n?|\n/,c=e.ownerDocument;e.currentStyle?a=e.currentStyle.whiteSpace:window.getComputedStyle&&(a=c.defaultView.getComputedStyle(e,n).getPropertyValue("white-space"));var u=a&&"pre"===a.substring(0,3);for(a=c.createElement("LI");e.firstChild;)a.appendChild(e.firstChild);for(var l=[a],p=0;p<l.length;++p)r(l[p]);t===(0|t)&&l[0].setAttribute("value",t);var f=c.createElement("OL");f.className="linenums";for(var d=Math.max(0,t-1|0)||0,h=(p=0,l.length);p<h;++p)(a=l[p]).className="L"+(p+d)%10,a.firstChild||a.appendChild(c.createTextNode("")),f.appendChild(a);e.appendChild(f)}function a(e,t){for(var n=t.length;--n>=0;){var r=t[n];g.hasOwnProperty(r)?window.console&&console.warn("cannot override language handler %s",r):g[r]=e}}function i(e,t){return e&&g.hasOwnProperty(e)||(e=/^\s*</.test(t)?"default-markup":"default-code"),g[e]}function s(e){var t=e.g;try{var r=(l=function(e){var t,r=/(?:^|\s)nocode(?:\s|$)/,o=[],a=0,i=[],s=0;e.currentStyle?t=e.currentStyle.whiteSpace:window.getComputedStyle&&(t=document.defaultView.getComputedStyle(e,n).getPropertyValue("white-space"));var c=t&&"pre"===t.substring(0,3);return function e(t){switch(t.nodeType){case 1:if(r.test(t.className))break;for(var n=t.firstChild;n;n=n.nextSibling)e(n);"BR"!==(n=t.nodeName)&&"LI"!==n||(o[s]="\n",i[s<<1]=a++,i[s++<<1|1]=t);break;case 3:case 4:(n=t.nodeValue).length&&(n=c?n.replace(/\r\n?/g,"\n"):n.replace(/[\t\n\r ]+/g," "),o[s]=n,i[s<<1]=a,a+=n.length,i[s++<<1|1]=t)}}(e),{a:o.join("").replace(/\n$/,""),c:i}}(e.h)).a;e.a=r,e.c=l.c,e.d=0,i(t,r)(e);var o,a,s=/\bMSIE\b/.test(navigator.userAgent),c=(t=/\n/g,e.a),u=c.length,l=0,p=e.c,f=p.length,d=(r=0,e.e),h=d.length;e=0;for(d[h]=u,a=o=0;a<h;)d[a]!==d[a+2]?(d[o++]=d[a++],d[o++]=d[a++]):a+=2;for(h=o,a=o=0;a<h;){for(var m=d[a],y=d[a+1],b=a+2;b+2<=h&&d[b+1]===y;)b+=2;d[o++]=m,d[o++]=y,a=b}for(d.length=o;r<f;){var g,_=p[r+2]||u,v=d[e+2]||u,E=(b=Math.min(_,v),p[r+1]);if(1!==E.nodeType&&(g=c.substring(l,b))){s&&(g=g.replace(t,"\r")),E.nodeValue=g;var w=E.ownerDocument,O=w.createElement("SPAN");O.className=d[e+1];var S=E.parentNode;S.replaceChild(O,E),O.appendChild(E),l<_&&(p[r+1]=E=w.createTextNode(c.substring(b,_)),S.insertBefore(E,O.nextSibling))}(l=b)>=_&&(r+=2),l>=v&&(e+=2)}}catch(e){"console"in window&&console.log(e&&e.stack?e.stack:e)}}var c,u,l=[c=[[u=["break,continue,do,else,for,if,return,while"],"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],p=[c,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],f=[p,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],d=[u,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],h=[u,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],m=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,y=/\S/,b=r({keywords:[l,f,c=[c,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+d,h,u=[u,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"]],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),g={};a(b,["default-code"]),a(t([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),a(t([["pln",/^\s+/,n," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,n,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),a(t([],[["atv",/^[\S\s]+/]]),["uq.val"]),a(r({keywords:l,hashComments:!0,cStyleComments:!0,types:m}),["c","cc","cpp","cxx","cyc","m"]),a(r({keywords:"null,true,false"}),["json"]),a(r({keywords:f,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:m}),["cs"]),a(r({keywords:p,cStyleComments:!0}),["java"]),a(r({keywords:u,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),a(r({keywords:d,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),a(r({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),a(r({keywords:h,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),a(r({keywords:c,cStyleComments:!0,regexLiterals:!0}),["js"]),a(r({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),a(t([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(e,t,n){var r=document.createElement("PRE");return r.innerHTML=e,n&&o(r,n),s({g:t,i:n,h:r}),r.innerHTML},window.prettyPrint=function(e){for(var t=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],r=[],a=0;a<t.length;++a)for(var i=0,c=t[a].length;i<c;++i)r.push(t[a][i]);t=n;var u=Date;u.now||(u={now:function(){return+new Date}});var l=0,p=/\blang(?:uage)?-([\w.]+)(?!\S)/;!function t(){for(var n=window.PR_SHOULD_USE_CONTINUATION?u.now()+250:1/0;l<r.length&&u.now()<n;l++){var a=r[l];if((i=a.className).indexOf("prettyprint")>=0){var i,c,f;if(f=!(i=i.match(p))){for(var d=void 0,h=(f=a).firstChild;h;h=h.nextSibling){var m=h.nodeType;d=1===m?d?f:h:3===m&&y.test(h.nodeValue)?f:d}f=(c=d===f?void 0:d)&&"CODE"===c.tagName}for(f&&(i=c.className.match(p)),i&&(i=i[1]),f=!1,d=a.parentNode;d;d=d.parentNode)if(("pre"===d.tagName||"code"===d.tagName||"xmp"===d.tagName)&&d.className&&d.className.indexOf("prettyprint")>=0){f=!0;break}f||((f=!!(f=a.className.match(/\blinenums\b(?::(\d+))?/))&&(!f[1]||!f[1].length||+f[1]))&&o(a,f),s({g:i,h:a,i:f}))}}l<r.length?setTimeout(t,250):e&&e()}()},window.PR={createSimpleLexer:t,registerLangHandler:a,sourceDecorator:r,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}()},232:function(e,t,n){n(233),n(264),n(267),n(269),n(301),n(304),n(315),e.exports=n(454)},346:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},437:function(e,t,n){},442:function(e,t,n){},443:function(e,t,n){},444:function(e,t,n){},445:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){},450:function(e,t,n){},451:function(e,t,n){},452:function(e,t,n){},453:function(e,t,n){},454:function(e,t,n){"use strict";n.r(t);var r=n(65),o=n.n(r),a={root:"/",version:"1.0",host:"../",i18n:{en_US:{"mango-descripton":"Mango is an easy way to find documents on predefined indexes.","new-mango-index":"Mango Indexes","mango-help-title":"Mango","run-query-with-mango":"Run A Query with Mango","mango-title-editor":"Mango Query","mango-descripton-index-editor":"Mango is an easy way to find documents on predefined indexes. <br/><br/>Create an Index to query it afterwards. The example in the editor shows how to create an index for the field '_id'. <br/><br/>The Indexes that you already created are listed on the right.","mango-additional-indexes-heading":"Your additional Indexes:","mango-indexeditor-title":"Mango","couchdb-productname":"Apache CouchDB","cors-disable-cors-prompt":"Are you sure? Disabling CORS will overwrite your specific origin domains.","cors-notice":"Cross-Origin Resource Sharing (CORS) lets you connect to remote servers directly from the browser, so you can host browser-based apps on static pages and talk directly with CouchDB to load your data.","replication-password-modal-header":"Enter Account Password.","replication-password-modal-text":"Replication requires authentication on your credentials.","replication-user-password-auth-label":"Username and password","replication-username-input-placeholder":"Username","replication-password-input-placeholder":"Password","auth-missing-credentials":"Username or password cannot be blank.","auth-logged-in":"You have been logged in.","auth-admin-created":"CouchDB admin created","auth-change-password":"Your password has been updated.","auth-admin-creation-failed-prefix":"Could not create admin.","auth-passwords-not-matching":"Passwords do not match.","create-db-partitioned-help":"This is an advanced feature. If you are unsure whether you need a partitioned database, you probably do not. A partitioned database requires a partition key for every document, where the document _id format is '&lt;partition_key&gt;:&lt;doc_key&gt;'. A partition is a logical grouping of documents. Partition queries are often faster than global ones."}}},i=n(9),s=n.n(i),c={MISC:{TRAY_TOGGLE_SPEED:250,DEFAULT_PAGE_SIZE:20},DATABASES:{DOCUMENT_LIMIT:100},EVENTS:{TRAY_OPENED:"tray:opened",NAVBAR_SIZE_CHANGED:"navbar:size_changed"},DOC_URLS:{GENERAL:"./docs/intro/api.html#documents",ALL_DBS:"./docs/api/server/common.html?highlight=all_dbs#get--_all_dbs",REPLICATION:"./docs/replication/replicator.html#basics",DESIGN_DOCS:"./docs/ddocs/ddocs.html#design-docs",DESIGN_DOC_METADATA:"./docs/api/ddoc/common.html#api-ddoc-view-index-info",VIEW_FUNCS:"./docs/ddocs/ddocs.html#view-functions",MAP_FUNCS:"./docs/ddocs/ddocs.html#map-functions",REDUCE_FUNCS:"./docs/ddocs/ddocs.html#reduce-and-rereduce-functions",API_REF:"./docs/http-api.html",DB_PERMISSION:"./docs/api/database/security.html#db-security",STATS:"./docs/api/server/common.html?highlight=stats#get--_stats",ACTIVE_TASKS:"./docs/api/server/common.html?highlight=stats#active-tasks",LOG:"./docs/api/server/common.html?highlight=stats#log",CONFIG:"./docs/config/index.html",VIEWS:"./docs/intro/overview.html#views",MANGO_INDEX:"./docs/intro/api.html#documents",MANGO_SEARCH:"./docs/intro/api.html#documents",CHANGES:"./docs/api/database/changes.html?highlight=changes#post--db-_changes",SETUP:"./docs/cluster/setup.html#the-cluster-setup-wizard",MEMBERSHIP:"./docs/cluster/nodes.html"}},u=n(162),l=n.n(u),p={getParams:function(e){e&&("?"===e.substring(0,1)?e=e.substring(1):e.indexOf("?")>-1&&(e=e.split("?")[1]));var t=window.location.hash.split("?")[1];e=e||t||window.location.search.substring(1);var n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))},i=e;if(e)for(var s;s=o.exec(i);)n[a(s[1])]=a(s[2]);return n},removeSpecialCharacters:function(e){return e.replace(/[^\w\s]/gi,"")},safeURLName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return encodeURIComponent(e)},queryParams:function(e){return l()(e)},queryString:function(e){return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),l()(e)},getDocTypeFromId:function(e){return e&&/^_design\//.test(e)?"design doc":"doc"},isSystemDatabase:function(e){return/^_/.test(e)},getSafeIdForDoc:function(e){if("design doc"===p.getDocTypeFromId(e)){var t=e.replace(/^_design\//,"");return"_design/"+p.safeURLName(t)}return p.safeURLName(e)},localStorageSet:function(e,t){(s.a.isObject(t)||s.a.isArray(t))&&(t=JSON.stringify(t));var n=!0;try{window.localStorage.setItem(e,t)}catch(e){n=!1}return n},localStorageGet:function(e){var t;if(s.a.has(window.localStorage,e)){t=window.localStorage[e];try{return JSON.parse(t)}catch(e){return t}}return t},stripHTML:function(e){if(!document)return e;var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText}},f=p,d=n(52),h=n.n(d),m=n(163),y=n.n(m),b=(n(194),n(224)),g=(n(333),new b.Subject),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(e,Object(i.defaultsDeep)({},n,{method:t,credentials:"include",headers:{accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"},cache:"no-cache"})).then((function(e){return g.next(e),n.raw?e:e.json()}))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(e,"GET",t)},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(e,"DELETE",t)},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),v(e,"POST",n)},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0!==t&&(n.rawBody?n.body=t:n.body=JSON.stringify(t)),v(e,"PUT",n)},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return v(e,t,Object(i.defaultsDeep)({},n,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}))},D={};D.removeSpecialCharacters=f.removeSpecialCharacters,D.safeURL=f.safeURLName,D.imageUrl=function(e){return e},D.getDocUrl=function(e){return s.a.has(c.DOC_URLS,e)?c.DOC_URLS[e]:"#"},D.formatSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=512;if(e<n)return e+" bytes";for(var r=["KB","MB","GB","TB","PB","EB","ZB","YB"],o=0;e>=n&&o<r.length;)o+=1,e/=1024;return e.toFixed(t)+" "+r[o-1]},D.formatDate=function(e){return h()(e,"X").format("MMM Do, h:mm:ss a")},D.getDateFromNow=function(e){return h()(e,"X").fromNow()},D.escapeJQuerySelector=function(e){return e&&e.replace(/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g,"\\$&")},D.getApiUrl=function(e){return a.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),y.a.resolve(window.location.href,a.host+e)},D.getServerUrl=function(e){return a.host.endsWith("/")&&e.startsWith("/")&&(e=e.substr(1)),a.host+e},D.getRootUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,t=e.origin,n=e.pathname;return y.a.resolve(t+n,a.host)},D.getUUID=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=D.getServerUrl("/_uuids?count=".concat(e));return E(t)},D.isIE1X=function(){return 11==document.documentMode||10==document.documentMode};var R=D,C=n(18),P=n.n(C);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A={router:{navigate:function(){}},masterLayout:{},addHeaderLink:function(e){A.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},showHeaderLinkBadge:function(e){A.reduxDispatch({type:"SHOW_NAVBAR_LINK_BADGE",link:e})},hideHeaderLinkBadge:function(e){A.reduxDispatch({type:"HIDE_NAVBAR_LINK_BADGE",link:e})},addNotification:function(e){e=I({msg:"Notification Event Triggered!",type:"info",escape:!0,clear:!1},e),A.reduxDispatch&&A.reduxDispatch({type:"ADD_NOTIFICATION",options:{info:e}})},showPermanentNotification:function(e){A.reduxDispatch({type:"SHOW_PERMANENT_NOTIFICATION",options:{msg:e}})},config:function(e){return s.a.extend(this,e)},Deferred:function(){return $.Deferred()},when:function(e){return e instanceof Array?$.when.apply(null,e):$.when(e)},addonExtensions:{initialize:function(){},RouteObjects:{},Views:{}},addon:function(e){return s.a.extend(s.a.clone(A.addonExtensions),e)}};A.View=P.a.View.extend({establish:function(){return null},loaderClassname:"loader",manage:!0,forceRender:function(){this.hasRendered=!1}});var j={fetchOnce:function(e){var t=s.a.extend({},e);return this._deferred&&"rejected"!==this._deferred.state()&&!t.forceFetch||(this._deferred=this.fetch()),this._deferred}};A.Model=P.a.Model.extend({}),A.Collection=P.a.Collection.extend({}),s.a.each([A.Model,A.Collection],(function(e){s.a.extend(e.prototype,j)}));var L=s.a.extend({},P.a.Events);A.registerExtension=function(e,t){L[e]||(L[e]=[]),L.trigger("add:"+e,t),L[e].push(t)},A.unRegisterExtension=function(e){var t=L[e];t&&(L.trigger("remove:"+e,t),delete L[e])},A.getExtensions=function(e){var t=L[e];return t||(t=[]),t},A.removeExtensionItem=function(e,t,n){var r=L[e];if(r){var o=arguments[arguments.length-1];s.a.isObject(t)&&!n&&(o=function(e){return s.a.isEqual(e,t)}),r=s.a.filter(r,(function(e){return!o(e)})),L[e]=r,L.trigger("removeItem:"+e,t)}},A.extensions=L,A.setSession=function(e){A.session=e},A.reducers={},A.addReducers=function(e){A.reducers=k(k({},A.reducers),e)},A.middlewares=[],A.addMiddleware=function(e){e&&"function"==typeof e&&A.middlewares.push(e)};var M=A,U=n(76),q=n.n(U),B=function(e,t){if(e.isAdminParty())return!0;if(e.matchesRoles(t))return!0;throw new Error("Unable to authenticate")},V=function(){var e=window.location.hash.replace("#","").replace("login?urlback=","");e&&M.navigate("/login?urlback=".concat(e),{replace:!0}),M.navigate("/login",{replace:!0})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new q.a((function(t,n){return M.session.getSession().then((function(){B(M.session,e)?t():n()})).catch((function(e){n(e),V()}))}))},K={},z=P.a.Router.extend({routes:{},originalPageTitle:window.document.title,beforeUnload:function(e,t){K[e]=t},removeBeforeUnload:function(e){delete K[e]},navigate:function(e,t){var n=!0,r=s.a.find(s.a.map(K,(function(e){return e()})),(function(e){if(e)return!0}));if(r&&(n=window.confirm(r)),t&&t.redirect)return window.location=e;n&&(P.a.Router.prototype.navigate(e,t),this.updateWindowTitle(e))},updateWindowTitle:function(e){e.startsWith("#/")?window.document.title=this.originalPageTitle+" - "+e.substring(2):e.startsWith("/")||e.startsWith("#")?window.document.title=this.originalPageTitle+" - "+e.substring(1):window.document.title=this.originalPageTitle+" - "+e},addModuleRouteObject:function(e){var t=this,n=this;e.prototype.getRouteUrls().forEach((function(r){t.route(r,r.toString(),(function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=e.prototype.getRouteRoles(r);F(s).then((function(){n.activeRouteObject&&n.activeRouteObject.hasRoute(r)||(n.activeRouteObject=new e(r,a));var o=n.activeRouteObject.routeCallback(r,a);n.currentRouteOptions={selectedHeader:t.activeRouteObject.selectedHeader,component:o,roles:s,route:r.toString()},n.trigger("new-component",t.currentRouteOptions)}),(function(){}))}))}))},setModuleRoutes:function(e){var t=this;s.a.each(e,(function(e){e&&(e.initialize(),e.RouteObjects&&s.a.each(e.RouteObjects,t.addModuleRouteObject.bind(t)))}))},initialize:function(e){this.addons=e,this.setModuleRoutes(e),this.lastPages=[],P.a.history.on("route",(function(){this.lastPages.push(P.a.history.fragment),this.lastPages.length>5&&this.lastPages.shift()}),this)}}),H=n(11),G=n.n(H);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var X=function(e){this._options=e,this.reactComponents={},this._configure(e||{}),this.initialize.apply(this,arguments)};X.extend=P.a.Model.extend;var Q=["routes","roles"];s.a.extend(X.prototype,{routes:{},route:function(){},roles:[],initialize:function(){}},{get:function(e){return s.a.isFunction(this[e])?this[e]():this[e]},_configure:function(e){var t=this;s.a.each(s.a.intersection(s.a.keys(e),Q),(function(n){t[n]=e[n]}))},getRouteUrls:function(){return s.a.keys(this.get("routes"))},hasRoute:function(e){return!!this.get("routes")[e]},routeCallback:function(e,t){var n,r=this.get("routes")[e];return n="object"===W(r)?this[r.route]:this[r],n.apply(this,t)},getRouteRoles:function(e){var t=this.get("routes")[e];return"object"===W(t)&&t.roles?t.roles:this.roles}});var J=X,Y=function(){this.initialize.apply(this,arguments),s.a.bindAll(this)};Y.extend=P.a.Model.extend,s.a.extend(Y.prototype,P.a.Events,{triggerChange:function(){this.trigger("change")},initialize:function(){}});var Z=Y,ee=[],te=0,ne={register:function(e){if("function"!=typeof e)throw new Error("Store dispatch method must be a function");return te+=1,ee.push(e),e.dispatchId=te,te},dispatch:function(e){ee.forEach((function(t){t(e)}))},unregister:function(e){var t=Object(i.findIndex)(ee,(function(t){return t.dispatchId===e}));-1!==t&&ee.splice(t,1)}};function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}P.a.$=o.a,P.a.ajax=function(){return P.a.$.ajax.apply(P.a.$,arguments)},re(M,{Router:z,RouteObject:J,utils:f,Store:Z,dispatcher:ne,Promise:q.a,Events:s.a.extend({},P.a.Events)}),M.constants=c,M.dispatch=ne.dispatch,M.navigate=function(e,t){var n=s.a.extend({trigger:!0},t);M.router.navigate(e,n),n.trigger&&M.router.trigger("trigger-update")},M.beforeUnload=function(){M.router.beforeUnload.apply(M.router,arguments)},M.removeBeforeUnload=function(){M.router.removeBeforeUnload.apply(M.router,arguments)},M.addRoute=function(e){M.router.route(e.route,e.name,e.callback)};var oe={};M.registerUrls=function(e,t){oe[e]=t},M.url={encode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?encodeURIComponent(e):e},decode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/[$+/]/g.test(e)?decodeURIComponent(e):e}},M.urls=function(e,t){var n,r=M.getExtensions("urls:interceptors"),o=arguments;return s.a.find(r,(function(e){var t=e.apply(null,o);return!!t&&(n=t,!0)})),s.a.isUndefined(n)?oe[e]?oe[e][t]?(o=Array.prototype.slice.call(arguments,2),n=oe[e][t].apply(null,o)):(console.error("could not find context ",t),""):(console.error("could not find name ",e),""):n},M.getIndexTypePropNames=function(){var e=M.getExtensions("IndexTypes:propNames");return e.push("views"),e};var ae=M;n(343),n(346);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}s.a.isUndefined(console)&&(console={log:function(){},trace:function(){},debug:function(){}}),ie(a,{utils:f,getParams:ae.utils.getParams,helpers:R}),ae.config({addHeaderLink:function(e){ae.reduxDispatch({type:"ADD_NAVBAR_LINK",link:e})},updateHeaderLink:function(e){ae.reduxDispatch({type:"UPDATE_NAVBAR_LINK",link:e})},removeHeaderLink:function(e){ae.reduxDispatch({type:"REMOVE_NAVBAR_LINK",link:e})},hideLogin:function(){ae.reduxDispatch({type:"NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",visible:!1})},showLogout:function(){ae.reduxDispatch({type:"NAVBAR_SHOW_LOGOUT_BUTTON"})},showLogin:function(){ae.reduxDispatch({type:"NAVBAR_SHOW_LOGIN_BUTTON"})}});var se=a,ce=n(0),ue=n.n(ce),le="ADD_NAVBAR_LINK",pe="TOGGLE_NAVBAR_MENU",fe="UPDATE_NAVBAR_LINK",de="REMOVE_NAVBAR_LINK",he="HIDE_NAVBAR_LINK_BADGE",me="SHOW_NAVBAR_LINK_BADGE",ye="NAVBAR_SET_VERSION_INFO",be="NAVBAR_ACTIVE_LINK",ge="NAVBAR_HIDE",_e="NAVBAR_SHOW",ve="NAVBAR_SHOW_HIDE_LOGIN_LOGOUT_SECTION",Ee="NAVBAR_SHOW_LOGIN_BUTTON",we="NAVBAR_SHOW_LOGOUT_BUTTON";function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De={isMinimized:!0,activeLink:null,version:null,navLinks:[],footerNavLinks:[],bottomNavLinks:[],navBarVisible:!0,loginSectionVisible:!1,loginVisibleInsteadOfLogout:!0};function Re(e,t){var n=Se({},e);return t.top&&!t.bottomNav?(n.navLinks=[].concat(n.navLinks),n.navLinks.unshift(t),n):t.top&&t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.unshift(t),n):t.bottomNav?(n.bottomNavLinks=[].concat(n.bottomNavLinks),n.bottomNavLinks.push(t),n):t.footerNav?(n.footerNavLinks=[].concat(n.footerNavLinks),n.footerNavLinks.push(t),n):(n.navLinks=[].concat(n.navLinks),n.navLinks.push(t),n)}function Ce(e,t){var n=ke(e,t),r=n.links,o=n.sectionName,a=r.filter((function(e){return e.id!==t.id}));if(a.length===r.length)return e;var i=Se({},e);return i[o]=a,i}function Pe(e,t){var n=ke(e,t),r=n.links,o=n.sectionName,a=!1,i=r.map((function(e){return e.id===t.id?(a=!0,Se(Se({},e),{},{title:t.title,href:t.href})):e}));if(!a)return e;var s=Se({},e);return s[o]=i,s}function Te(e,t,n){var r=ke(e,t),o=r.links,a=r.sectionName,i=!1,s=o.map((function(e){return e.title===t.title?(i=!0,Se(Se({},e),{},{badge:n})):e}));if(!i)return e;var c=Se({},e);return c[a]=s,c}function ke(e,t){var n=e.navLinks,r="navLinks";return t.bottomNav&&(n=e.bottomNavLinks,r="bottomNavLinks"),t.footerNav&&(n=e.footerNavLinks,r="footerNavLinks"),{links:n,sectionName:r}}var xe="ADD_NOTIFICATION",Ie="SHOW_NOTIFICATION_CENTER",Ae="HIDE_NOTIFICATION_CENTER",je="CLEAR_SINGLE_NOTIFICATION",Le="CLEAR_ALL_NOTIFICATIONS",Me="SELECT_NOTIFICATION_FILTER",Ue="SHOW_PERMANENT_NOTIFICATION",qe="HIDE_PERMANENT_NOTIFICATION",Be=n(54);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze={notifications:[],notificationCenterVisible:!1,selectedNotificationFilter:"all",permanentNotificationVisible:!1,permanentNotificationMessage:""},He=0,Ge=["success","error","info"],We=["all","success","error","info"];function Xe(e,t){var n=e.notifications,r=n.slice();if((t=Fe({},t)).toastId=++He,t.time=h()(),t.cleanMsg=se.utils.stripHTML(t.msg),!0!==t.escape&&!1!==t.escape&&(t.escape=!0),t.htmlMsg={__html:t.escape?_.escape(t.cleanMsg):t.cleanMsg},t.clear){var o=_.map(n,"toastId");setTimeout((function(){o.forEach((function(e){return Be.b.dismiss(e)}))}),800)}return r.unshift(t),Object(Be.b)(ue.a.createElement("span",{dangerouslySetInnerHTML:t.htmlMsg}),t),r}function Qe(e,t){var n=e.notifications,r=n.findIndex((function(e){return e.toastId===t}));if(-1===r)return n;var o=[].concat(n);return o.splice(r,1),Be.b.dismiss(t),o}n(349);var Je=ae.addon();Je.initialize=function(){var e=new Je.VersionInfo;e.fetch().then((function(){!function(e){ae.reduxDispatch({type:ye,version:e})}(e.get("version"))}))},Je.VersionInfo=Backbone.Model.extend({url:function(){return se.host}}),ae.addReducers({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Re(e,t.link);case pe:return Se(Se({},e),{},{isMinimized:!e.isMinimized});case fe:return Pe(e,t.link);case de:return Ce(e,t.link);case me:return Te(e,t.link,!0);case he:return Te(e,t.link,!1);case ye:return Se(Se({},e),{},{version:t.version});case be:return Se(Se({},e),{},{activeLink:t.name});case ge:return Se(Se({},e),{},{navBarVisible:!1});case _e:return Se(Se({},e),{},{navBarVisible:!0});case ve:return Se(Se({},e),{},{loginSectionVisible:t.visible});case Ee:return Se(Se({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!0});case we:return Se(Se({},e),{},{loginSectionVisible:!0,loginVisibleInsteadOfLogout:!1});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case xe:return-1===Ge.indexOf(n.info.type)?e:Fe(Fe({},e),{},{notifications:Xe(e,n.info)});case Le:return Be.b.dismiss(),Fe(Fe({},e),{},{notifications:[]});case je:return Fe(Fe({},e),{},{notifications:Qe(e,n.toastId)});case Ie:return Fe(Fe({},e),{},{notificationCenterVisible:!0});case Ae:return Fe(Fe({},e),{},{notificationCenterVisible:!1});case Me:return-1===We.indexOf(n.filter)?e:Fe(Fe({},e),{},{selectedNotificationFilter:n.filter});case Ue:return Fe(Fe({},e),{},{permanentNotificationVisible:!0,permanentNotificationMessage:n.msg});case qe:return Fe(Fe({},e),{},{permanentNotificationVisible:!1});default:return e}}});var Ye=Je,$e=(n(350),"DATABASES_SETPAGE"),Ze="DATABASES_SETLIMIT",et="DATABASES_SET_PROMPT_VISIBLE",tt="DATABASES_STARTLOADING",nt="DATABASES_LOADCOMPLETE",rt="DATABASES_UPDATE",ot="DATABASES_PARTITIONED_DB_AVAILABLE",at="DATABASES_FETCH_SELECTED_DB_METADATA",it="DATABASES_FETCH_SELECTED_DB_METADATA_SUCCESS",st=P.a.Collection.extend({constructor:function(){P.a.Collection.apply(this,arguments),this.configure.apply(this,arguments)},configure:function(e,t){var n=s.a.result(this,"url").split("?")[1]||"";this.paging=s.a.defaults(t.paging||{},{defaultParams:s.a.defaults({},t.params,this._parseQueryString(n)),hasNext:!1,hasPrevious:!1,params:{},pageSize:20,direction:void 0}),this.paging.params=s.a.clone(this.paging.defaultParams),this.updateUrlQuery(this.paging.defaultParams)},calculateParams:function(e,t,n){var r=s.a.clone(e);return r.skip=(parseInt(e.skip,10)||0)+t,this.paging.defaultParams.limit&&(r.limit=Math.min(this.paging.defaultParams.limit,r.limit)),r.limit=n+1,r.skip=Math.max(r.skip,0),r},pageSizeReset:function(e,t){var n=s.a.defaults(t||{},{fetch:!0});if(this.paging.direction=void 0,this.paging.pageSize=e,this.paging.params=this.paging.defaultParams,this.paging.params.limit=e,this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch()},_parseQueryString:function(e){var t=decodeURI(e).split(/&/);return s.a.reduce(t,(function(e,t){var n=t.split(/=/);return 2===n.length&&(e[n[0]]=n[1]),e}),{})},_iterate:function(e,t){var n=s.a.defaults(t||{},{fetch:!0});if(this.paging.params=this.calculateParams(this.paging.params,e,this.paging.pageSize),this.updateUrlQuery(this.paging.params),n.fetch)return this.fetch({reset:!0})},next:function(e){return this.paging.direction="next",this._iterate(this.paging.pageSize,e)},previous:function(e){return this.paging.direction="previous",this._iterate(0-this.paging.pageSize,e)},shouldStringify:function(e){try{return JSON.parse(e),!1}catch(e){return!0}},updateUrlQuery:function(e){var t=this,n=s.a.result(this,"url").split("?")[0];s.a.each(["startkey","endkey","key"],(function(n){s.a.has(e,n)&&t.shouldStringify(e[n])&&(e[n]=JSON.stringify(e[n]))})),this.url=n+"?"+se.utils.queryParams(e)},fetch:function(){return!this.paging.direction&&this.paging.params.limit>0&&(this.paging.direction="fetch",this.paging.params.limit=this.paging.params.limit+1,this.updateUrlQuery(this.paging.params)),P.a.Collection.prototype.fetch.apply(this,arguments)},parse:function(e){var t=e.rows;return this.paging.hasNext=this.paging.hasPrevious=!1,this.viewMeta={total_rows:e.total_rows,offset:e.offset,update_seq:e.update_seq},this.paging.params.skip>0&&(this.paging.hasPrevious=!0),t.length===this.paging.pageSize+1&&(this.paging.hasNext=!0,t.pop(),this.viewMeta.total_rows=this.viewMeta.total_rows-1),t},hasNext:function(){return this.paging.hasNext},hasPrevious:function(){return this.paging.hasPrevious}});function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ut=ae.addon();ut.Doc=ae.Model.extend({idAttribute:"_id",documentation:function(){return ae.constants.DOC_URLS.GENERAL},url:function(e){void 0===e&&(e="server");var t=this.safeID();t||(t="");var n=this.fetchConflicts?"?conflicts=true":"";return ae.urls("document",e,this.getDatabase().safeID(),t,n)},initialize:function(e,t){this.collection&&this.collection.database?this.database=this.collection.database:t.database&&(this.database=t.database),t.fetchConflicts&&(this.fetchConflicts=!0),this.partitionKey=t.partitionKey},getDatabase:function(){return this.database?this.database:this.collection.database},validate:function(e){if(this.id&&this.id!==e._id&&this.get("_rev"))return"Cannot change a documents id."},docType:function(){return se.utils.getDocTypeFromId(this.id)},isBulkDeletable:function(){return!!this.id&&!!this.get("_rev")},isDeletable:function(){return!!this.id},isFromView:function(){return!this.id},isMangoDoc:function(){return!!this.isDdoc()&&("query"===this.get("language")||!(!this.get("doc")||"query"!==this.get("doc").language))},isDdoc:function(){return"design doc"===this.docType()},setDDocPartitionedOption:function(e){if(!this.isDdoc())return!1;var t=this.get("options");return t||(t={}),t.partitioned=e,this.set({options:t}),!0},setDdocView:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("views");r||(r={},this.set({language:"javascript"}));var o=r[e]||{};return n?o.reduce=n:delete o.reduce,o.map=t,r[e]=o,this.set({views:r}),!0},removeDdocView:function(e){if(!this.isDdoc())return!1;var t=this.get("views");delete t[e],this.set({views:t})},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return e?(e._rev=this.get("_rev"),new ut.Doc(e,{database:this.database})):this},safeID:function(){return se.utils.getSafeIdForDoc(this.id)},destroy:function(){var e=this.url()+"?rev="+this.get("_rev");return w(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},parse:function(e){return e.rev&&(e._rev=e.rev,delete e.rev),e.id&&_.isUndefined(this.id)&&(e._id=e.id),e.ok&&(delete e.id,delete e.ok),e},prettyJSON:function(){var e=this.get("doc")?this.get("doc"):this.attributes;return JSON.stringify(e,null,"  ")},copy:function(e){var t=ct({},this.attributes,{_id:e});return delete t._rev,new this.constructor(t,{database:this.database}).save()},isNewDoc:function(){return!this.get("_rev")}}),ut.AllDocs=st.extend({model:ut.Doc,documentation:function(){return ae.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.viewMeta=t.viewMeta,this.database=t.database,this.params=_.clone(t.params),this.on("remove",this.decrementTotalRows,this),this.perPageLimit=t.perPageLimit||20,this.params.limit||(this.params.limit=this.perPageLimit)},isEditable:function(){return!0},urlRef:function(e,t){var n="";return t?n=_.isEmpty(t)?"":"?"+se.utils.queryParams(t):this.params&&(n="?"+se.utils.queryParams(this.params)),_.isUndefined(e)&&(e="server"),ae.urls("allDocs",e,this.database.safeID(),n)},url:function(){return this.urlRef.apply(this,arguments)},simple:function(){var e=this.map((function(e){return{_id:e.id,_rev:e.get("_rev")}}));return new ut.AllDocs(e,{database:this.database,params:this.params})},totalRows:function(){return this.viewMeta.total_rows||"unknown"},decrementTotalRows:function(){this.viewMeta.total_rows&&(this.viewMeta.total_rows=this.viewMeta.total_rows-1,this.trigger("totalRows:decrement"))},updateSeq:function(){return this.viewMeta&&this.viewMeta.update_seq||!1},parse:function(e){var t=e.rows,n=_.filter(t,(function(e){return e.value}));return e.rows=_.map(n,(function(e){var t={_id:e.id,_rev:e.value.rev,value:e.value,key:e.key};return e.doc&&(t.doc=e.doc),t})),st.prototype.parse.call(this,e)},clone:function(){return new this.constructor(this.models,{database:this.database,params:this.params,paging:this.paging})}});var lt,pt=ut;pt.QueryParams=(lt=function(e,t){var n=_.clone(e);return _.each(["startkey","endkey","key"],(function(e){_.has(n,e)&&(n[e]=t(n[e]))})),n},{parse:function(e){return lt(e,JSON.parse)},stringify:function(e){return lt(e,JSON.stringify)}}),pt.DdocInfo=ae.Model.extend({idAttribute:"_id",documentation:function(){return ae.constants.DOC_URLS.GENERAL},initialize:function(e,t){this.database=t.database},url:function(e){return e||(e="server"),ae.urls("designDocs",e,this.database.safeID(),this.safeID())},safeID:function(){return se.utils.getSafeIdForDoc(this.id)}}),pt.NewDoc=pt.Doc.extend({fetch:function(){var e=this,t=this.partitionKey?this.partitionKey+":":"";return R.getUUID().then((function(n){return n.uuids?e.set("_id",t+n.uuids[0]):e.set("_id",t+"enter_document_id"),n})).catch((function(){e.set("_id",t+"enter_document_id")}))}}),pt.BulkDeleteDoc=ae.Model.extend({idAttribute:"_id"}),pt.BulkDeleteDocCollection=ae.Collection.extend({model:pt.BulkDeleteDoc,sync:function(){},initialize:function(e,t){this.databaseId=t.databaseId},url:function(){return ae.urls("bulk_docs","server",this.databaseId,"")},bulkDelete:function(){var e=this,t=this.createPayload(this.toJSON());return new ae.Promise((function(n,r){O(e.url(),t).then((function(t){if(t.error)throw new Error(t.reason||t.error);e.handleResponse(t,n,r)})).catch((function(){var t=_.reduce(e.toArray(),(function(e,t){return e.push(t.id),e}),[]);e.trigger("error",t),r(t)}))}))},handleResponse:function(e,t,n){var r=_.reduce(e,(function(e,t){return t.error&&e.errorIds.push(t.id),t.error||e.successIds.push(t.id),e}),{errorIds:[],successIds:[]});this.removeDocuments(r.successIds),r.errorIds.length&&this.trigger("error",r.errorIds),_.isEmpty(r.successIds)?n(r.errorIds):t(r),this.trigger("updated")},removeDocuments:function(e){var t=this;_.each(e,(function(e){t.remove(t.get(e))})),this.trigger("removed",e)},createPayload:function(e){return{docs:e}}}),pt.MangoBulkDeleteDocCollection=pt.BulkDeleteDocCollection.extend({url:function(){return R.getServerUrl("/".concat(this.databaseId,"/_index/_bulk_delete"))},createPayload:function(e){return{docids:e.filter((function(e){return"_all_docs"!==e._id})).map((function(e){return e._id}))}}});var ft=pt,dt=ae.addon();dt.DocLimit=100,dt.Model=ae.Model.extend({partitioned:!1,setPartitioned:function(e){this.partitioned=e},documentation:function(){return ae.constants.DOC_URLS.ALL_DBS},buildAllDocs:function(e){return this.allDocs=new ft.AllDocs(null,{database:this,params:e}),this.allDocs},isNew:function(){return!1},isSystemDatabase:function(){return se.utils.isSystemDatabase(this.id)},url:function(e){return"index"===e?"/database/"+this.safeID()+"/_all_docs":"web-index"===e?"#/database/"+this.safeID()+"/_all_docs?limit="+dt.DocLimit:"apiurl"===e?R.getApiUrl("/database/"+this.safeID()+"/_all_docs"):"changes"===e?ae.urls("changes","app",this.safeID(),"","?descending=true&limit=100&include_docs=true"):"changes-apiurl"===e?ae.urls("changes","apiurl",this.safeID(),"?descending=true&limit=100&include_docs=true"):"app"===e?"/database/"+this.safeID():this.partitioned?R.getServerUrl("/"+this.safeID())+"?partitioned=true":R.getServerUrl("/"+this.safeID())},safeID:function(){return se.utils.safeURLName(this.id)},buildChanges:function(e){return e.limit||(e.limit=100),this.changes=new dt.Changes({database:this,params:e}),this.changes}}),dt.Changes=ae.Collection.extend({initialize:function(e){this.database=e.database,this.params=e.params},documentation:function(){return ae.constants.DOC_URLS.CHANGES},url:function(e){var t="";return this.params&&(t="?"+se.utils.queryParams(this.params)),e||(e="server"),ae.urls("changes",e,this.database.safeID(),t)},parse:function(e){return this.last_seq=e.last_seq,e.results}});var ht=dt;function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var yt=ht.Model,bt=ae.Store.extend({initialize:function(){this.reset()},reset:function(){var e;this._loading=!1,this._promptVisible=!1,this._page=1,this._limit=((e=se.utils.localStorageGet("fauxton:dbs_per_page"))||(e=ae.constants.MISC.DEFAULT_PAGE_SIZE),e),this._dbList=[],this._databaseDetails=[],this._failedDbs=[],this._fullDbList=[],this._partitionedDatabasesAvailable=!1},getPage:function(){return this._page},getLimit:function(){return this._limit},setLimit:function(e){this._limit=e,se.utils.localStorageSet("fauxton:dbs_per_page",e)},isLoading:function(){return this._loading},setLoading:function(e){this._loading=e},isPromptVisible:function(){return this._promptVisible},setPromptVisible:function(e){this._promptVisible=e},obtainNewDatabaseModel:function(e,t){var n=new yt({id:e,name:e});return n.setPartitioned(t),n},doesDatabaseExist:function(e){return-1!==this._dbList.indexOf(e)},getTotalAmountOfDatabases:function(){return this._fullDbList.length},getDbList:function(){var e=this;return this._dbList.map((function(t){var n=e._databaseDetails.filter((function(e){return e.db_name===t}));return mt({},{id:t,encodedId:encodeURIComponent(t),url:ae.urls("allDocsSanitized","app",t),failed:-1!==e._failedDbs.indexOf(t)},e._getDetails(n[0]))}))},_getDetails:function(e){if(!e)return{};var t=ae.getExtensions("DatabaseList:dbSizeReportFieldName"),n="active";t.length>0&&(n=t[0]);var r=e.sizes,o=r&&r[n]||r&&r.active||r&&r.external||e.data_size||0;return{dataSize:R.formatSize(o),docCount:e.doc_count,docDelCount:e.doc_del_count,showTombstoneWarning:e.doc_del_count>e.doc_count,isPartitioned:e.props&&!0===e.props.partitioned}},isPartitionedDatabasesAvailable:function(){return this._partitionedDatabasesAvailable},dispatch:function(e){switch(e.type){case $e:this._page=e.options.page;break;case Ze:this.setLimit(e.options.limit);break;case et:this.setPromptVisible(e.options.visible);break;case tt:this.setLoading(!0);break;case nt:this.setLoading(!1);break;case rt:this._fullDbList=e.options.fullDbList,this._dbList=e.options.dbList,this._databaseDetails=e.options.databaseDetails,this._failedDbs=e.options.failedDbs,this.setLoading(!1);break;case ot:this._partitionedDatabasesAvailable=e.options.available;break;default:return}this.triggerChange()}}),gt=new bt;gt.dispatchToken=ae.dispatcher.register(gt.dispatch.bind(gt));var _t={databasesStore:gt,DatabasesStoreConstructor:bt},vt=function(e){var t=ae.urls("databaseBaseURL","server",e);return E(t)};function Et(e,t){var n=[],r=[],o=0;e.forEach((function(a){wt(ae.urls("databaseBaseURL","server",a)).then((function(e){n.push(e)})).catch((function(){r.push(a)})).then((function(){++o===e.length&&Nt({dbList:e,databaseDetails:n,failedDbs:r,fullDbList:t})}))}))}function wt(e){return E(e).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))}function Ot(){return wt(ae.urls("allDBs","server"))}function St(e,t,n){var r=(t-1)*n,o=t*n;return e.slice(r,o)}function Nt(e){ae.dispatch({type:rt,options:e})}var Dt={getDatabaseList:Ot,paginate:St,getDatabaseDetails:Et,fetch:wt,updateDatabases:Nt,init:function(e){var t=this,n=e.page,r=e.limit;this.setStartLoading(),this.setPage(n),r&&this.setLimit(r),Ot().then((function(e){var o=St(e,n,r);t.updateDatabases({dbList:o,databaseDetails:[],failedDbs:[],fullDbList:e}),Et(o,e)}))},setPage:function(e){ae.dispatch({type:$e,options:{page:e}})},setLimit:function(e){ae.dispatch({type:Ze,options:{limit:e}})},setStartLoading:function(){ae.dispatch({type:tt})},setLoadComplete:function(){ae.dispatch({type:nt})},createNewDatabase:function(e,t){if(_.isNull(e)||0===e.trim().length)ae.addNotification({msg:"Please enter a valid database name",type:"error",clear:!0});else{e=e.trim(),ae.dispatch({type:et,options:{visible:!1}});var n=_t.databasesStore.obtainNewDatabaseModel(e,t);ae.addNotification({msg:"Creating database."}),n.save().done((function(){ae.addNotification({msg:"Database created successfully",type:"success",clear:!0});var t=ae.urls("allDocs","app",se.utils.safeURLName(e));se.router.navigate(t,{trigger:!0})})).fail((function(e){var t=JSON.parse(e.responseText).reason;ae.addNotification({msg:"Create database failed: "+t,type:"error",clear:!0})}))}},jumpToDatabase:function(e){if(!_.isNull(e)&&0!==e.trim().length){e=e.trim();var t=ae.urls("allDocs","app",se.utils.safeURLName(e),"");return setTimeout((function(){ae.navigate(t)}))}},fetchAllDbsWithKey:function(e,t){var n="?"+se.utils.queryParams({startkey:JSON.stringify(e),endkey:JSON.stringify(e+""),limit:30}),r=R.getServerUrl("/_all_dbs".concat(n));E(r).then((function(e){var n=e.map((function(e){return{value:e,label:e}}));t(null,{options:n})}))},setPartitionedDatabasesAvailable:function(e){var t={type:ot,options:{available:e}};ae.dispatch(t),ae.reduxDispatch(t)},checkPartitionedQueriesIsAvailable:function(){var e=this,t=ae.getExtensions(Ts.PARTITONED_DB_CHECK_EXTENSION).map((function(e){return e()}));ae.Promise.all(t).then((function(t){var n=t.every((function(e){return!0===e}));e.setPartitionedDatabasesAvailable(n)})).catch((function(){}))},fetchSelectedDatabaseInfo:function(e){ae.reduxDispatch({type:at}),vt(e).then((function(e){if(!e.db_name){var t=e.reason?e.reason:"";throw new Error("Failed to fetch database info. "+t)}ae.reduxDispatch({type:it,options:{metadata:e}})})).catch((function(e){ae.addNotification({msg:e.message,type:"error",clear:!0})}))}},Rt=n(1),Ct=n.n(Rt),Pt=n(12);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jt(this,n)}}function jt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt,Ut,qt,Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(a,e);var t,n,r,o=At(a);function a(){return kt(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e="fonticon fonticon-bell"+(this.props.visible?"":" hide");return ue.a.createElement("div",{className:e,onClick:this.props.onClick})}}])&&xt(t.prototype,n),r&&xt(t,r),a}(ue.a.Component);Mt=Bt,Ut="propTypes",qt={onClick:Ct.a.func.isRequired,visible:Ct.a.bool.isRequired},Ut in Mt?Object.defineProperty(Mt,Ut,{value:qt,enumerable:!0,configurable:!0,writable:!0}):Mt[Ut]=qt;var Vt=Object(Pt.b)((function(e){return{visible:!e.notifications.notificationCenterVisible}}),(function(e){return{onClick:function(){e((function(e){e({type:Ie})}))}}}))(Bt),Ft=function(e){var t=e.endpoint;return t?ue.a.createElement("div",{className:"faux__jsonlink"},ue.a.createElement("a",{"data-bypass":!0,className:"faux__jsonlink-link",href:t,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("span",{className:"faux__jsonlink-link-brackets"},"{}"),ue.a.createElement("span",{className:"faux__jsonlink-link-label"},"JSON"))):null},Kt=function(e){var t=e.docURL;return t?ue.a.createElement("div",{className:"faux__doclink"},ue.a.createElement("a",{"data-bypass":"true",href:t,target:"_blank",rel:"noopener noreferrer",className:"faux__doclink-link"},ue.a.createElement("i",{className:"icon fonticon-bookmark"}))):null},zt=function(e){var t=e.crumbs;return ue.a.createElement("div",{className:"faux-header__breadcrumbs"},function(e){var t=e.length-1;return e.map((function(e,n){var r=[ue.a.createElement(Ht,{key:n},e.name)];return e.link&&(r=[ue.a.createElement(Ht,{key:n},ue.a.createElement("a",{className:"faux-header__breadcrumbs-link",href:"#/"+e.link},e.name))]),e.name?(n<t&&r.push(ue.a.createElement(Gt,{key:"divider_"+n})),r):r}))}(t))};zt.propTypes={crumbs:Ct.a.array.isRequired};var Ht=function(e){var t=e.children;return ue.a.createElement("div",{className:"faux-header__breadcrumbs-element"},t)},Gt=function(){return ue.a.createElement("div",{className:"fonticon-right-open faux-header__breadcrumbs-divider"})};var Wt=function(e){var t=e.docURL,n=e.endpoint;return ue.a.createElement("div",{className:"faux__jsondoc-wrapper"},ue.a.createElement(Ft,{endpoint:n}),ue.a.createElement(Kt,{docURL:t}))},Xt=function(e){var t=e.children;return ue.a.createElement("div",{id:"dashboard",className:"one-pane "},t)},Qt=function(e){var t=e.showApiUrl,n=e.docURL,r=e.endpoint,o=e.crumbs,a=e.children,i="right-header-flex";return R.isIE1X()&&(i+=" "+i+"--ie1X"),ue.a.createElement("header",null,ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"breadcrumbs",className:"flex-body"},ue.a.createElement(zt,{crumbs:o})),ue.a.createElement("div",{id:"right-header"},ue.a.createElement("div",{className:i},a)),t?ue.a.createElement(Wt,{docURL:n,endpoint:r}):null,ue.a.createElement("div",{id:"notification-center-btn"},ue.a.createElement(Vt,null))))};Qt.defaultProps={showApiUrl:!0,crumbs:[]},Qt.propTypes={docURL:Ct.a.string,endpoint:Ct.a.string,crumbs:Ct.a.array};var Jt=function(e){var t=e.children;return ue.a.createElement("div",{className:"content-area container-fluid"},ue.a.createElement("div",{id:"tabs"}),ue.a.createElement("div",{id:"dashboard-content",className:"scrollable"},t))},Yt=function(e){var t=e.children;return ue.a.createElement("div",{className:"faux__onepane-footer"},t)},$t=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ue.a.createElement(Xt,null,ue.a.createElement(Qt,{crumbs:o,endpoint:r,docURL:n}),ue.a.createElement(Jt,null,t),ue.a.createElement(Yt,null))},Zt=function(e){var t=e.children;return ue.a.createElement("div",{id:"dashboard-content"},t)},en=function(e){var t=e.component,n=e.docURL,r=e.endpoint,o=e.crumbs;return ue.a.createElement("div",{id:"dashboard",className:"one-pane doc-editor-page"},ue.a.createElement(Qt,{crumbs:o,endpoint:r,docURL:n}),ue.a.createElement(Zt,null,t))},tn=n(2),nn=n.n(tn),rn=n(8);function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fn(e);if(t){var o=fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ln(this,n)}}function ln(e,t){return!t||"object"!==on(t)&&"function"!=typeof t?pn(e):t}function pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(a,e);var t,n,r,o=un(a);function a(){var e;an(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dn(pn(e=o.call.apply(o,[this].concat(n))),"state",{open:!1}),dn(pn(e),"handleClick",(function(t){var n=!e.state.open;e.setState({open:n}),e.props.onClick({isOpen:n,event:t})})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,r=this.state.open?"fonticon-down-open":"fonticon-right-open",o=nn()("faux--accordion__item-content","collapse",{in:this.state.open});return ue.a.createElement("li",{className:"faux--accordion__item",onClick:this.handleClick},ue.a.createElement("button",{type:"button",className:"faux--accordion__item-header",onClick:this.handleClick},ue.a.createElement("i",{className:r}),ue.a.createElement("span",null,n)),ue.a.createElement(rn.c,{in:this.state.open},ue.a.createElement("div",{className:o},t)))}}])&&sn(t.prototype,n),r&&sn(t,r),a}(ue.a.Component);function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),e}function _n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vn(e,t)}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sn(e);if(t){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wn(this,n)}}function wn(e,t){return!t||"object"!==mn(t)&&"function"!=typeof t?On(e):t}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}dn(hn,"propTypes",{title:Ct.a.string.isRequired}),dn(hn,"defaultProps",{onClick:function(){}});var Dn=function(e){_n(n,e);var t=En(n);function n(){var e;yn(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Nn(On(e=t.call.apply(t,[this].concat(o))),"getBadges",(function(){return e.props.elements.map(function(e,t){return ue.a.createElement(Rn,{label:this.props.getLabel(e),key:t,id:e,remove:this.removeBadge})}.bind(On(e)))})),Nn(On(e),"removeBadge",(function(t,n){e.props.removeBadge(t,n)})),e}return gn(n,[{key:"render",value:function(){return ue.a.createElement("ul",{className:"component-badgelist"},this.getBadges())}}]),n}(ue.a.Component);Nn(Dn,"propTypes",{elements:Ct.a.array.isRequired,removeBadge:Ct.a.func.isRequired}),Nn(Dn,"defaultProps",{getLabel:function(e){return e},getId:function(e){return e}});var Rn=function(e){_n(n,e);var t=En(n);function n(){var e;yn(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Nn(On(e=t.call.apply(t,[this].concat(o))),"remove",(function(t){t.preventDefault(),e.props.remove(e.props.label,e.props.id)})),e}return gn(n,[{key:"render",value:function(){return ue.a.createElement("li",{className:"component-badge"},ue.a.createElement("span",{className:"label label-info"},this.props.label),ue.a.createElement("a",{href:"#",className:"label label-info remove-filter",onClick:this.remove,"data-bypass":"true"},""))}}]),n}(ue.a.Component);function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=An(e);if(t){var o=An(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return In(this,n)}}function In(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Nn(Rn,"propTypes",{label:Ct.a.string.isRequired,remove:Ct.a.func.isRequired});var jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(a,e);var t,n,r,o=xn(a);function a(){return Pn(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.iconDefaultClass,n=e.fonticon,r=e.innerClasses,o=e.selected,a=e.containerClasses,i=e.title,s=e.disabled,c=e.text,u=e.toggleCallback,l=e.active,p=o||l?"js-headerbar-togglebutton-selected":"";return ue.a.createElement("button",{title:i,disabled:s,onClick:u,className:"button ".concat(a," ").concat(p)},ue.a.createElement("i",{className:"".concat(t," ").concat(n," ").concat(r)}),ue.a.createElement("span",null,c))}}])&&Tn(t.prototype,n),r&&Tn(t,r),a}(ue.a.Component);function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kn(e);if(t){var o=Kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vn(this,n)}}function Vn(e,t){return!t||"object"!==Ln(t)&&"function"!=typeof t?Fn(e):t}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jn,"defaultProps",{innerClasses:"",fonticon:"",containerClasses:"",selected:!1,title:"",disabled:!1,toggleCallback:null,text:"",iconDefaultClass:"icon"});var Hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(a,e);var t,n,r,o=Bn(a);function a(){var e;Mn(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zn(Fn(e=o.call.apply(o,[this].concat(n))),"getMultiSelectOptions",(function(){return e.props.hasSelectedItem?ue.a.createElement("button",{onClick:e.props.removeItem,className:"fonticon "+e.props.bulkIcon,title:e.props.buttonTitle}):null})),zn(Fn(e),"getPopupContent",(function(){return ue.a.createElement("ul",{className:"bulk-action-component-popover-actions"},ue.a.createElement("li",{onClick:e.selectAll},ue.a.createElement("i",{className:"icon fonticon-cancel"})," ",e.props.dropdownContentText))})),zn(Fn(e),"selectAll",(function(){e.bulkActionPopover.hide(),e.props.selectAll()})),zn(Fn(e),"getOverlay",(function(){return ue.a.createElement(rn.h,{ref:function(t){return e.bulkActionPopover=t},trigger:"click",placement:"bottom",rootClose:!0,overlay:ue.a.createElement(rn.i,{id:"bulk-action-component-popover",title:e.props.title},e.getPopupContent())},ue.a.createElement("div",{className:"arrow-button"},ue.a.createElement("i",{className:"fonticon fonticon-play"})))})),zn(Fn(e),"getMasterSelector",(function(){return ue.a.createElement("div",{className:"bulk-action-component-panel"},ue.a.createElement("input",{type:"checkbox",checked:e.props.isChecked,onChange:e.props.toggleSelect,disabled:e.props.disabled}),e.props.enableOverlay?ue.a.createElement("div",{className:"separator"}):null,e.props.enableOverlay?e.getOverlay():null)})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{className:"bulk-action-component"},ue.a.createElement("div",{className:"bulk-action-component-selector-group"},this.getMasterSelector(),this.getMultiSelectOptions()))}}])&&Un(t.prototype,n),r&&Un(t,r),a}(ue.a.Component);function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$n(e);if(t){var o=$n(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}zn(Hn,"propTypes",{hasSelectedItem:Ct.a.bool.isRequired,removeItem:Ct.a.func.isRequired,selectAll:Ct.a.func,toggleSelect:Ct.a.func.isRequired,isChecked:Ct.a.bool.isRequired,disabled:Ct.a.bool}),zn(Hn,"defaultProps",{disabled:!1,title:"Select rows that can be...",bulkIcon:"fonticon-trash",buttonTitle:"Delete all selected",dropdownContentText:"Deleted",enableOverlay:!1});var Zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(a,e);var t,n,r,o=Jn(a);function a(){return Wn(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{className:"styled-select"},ue.a.createElement("label",{htmlFor:this.props.selectId},ue.a.createElement("i",{className:"fonticon-down-dir styled-select-icon"}),ue.a.createElement("i",{className:"fonticon-down-dir styled-select-hover-icon"}),ue.a.createElement("select",{value:this.props.selectValue,id:this.props.selectId,className:this.props.selectValue,onChange:this.props.selectChange},this.props.selectContent)))}}])&&Xn(t.prototype,n),r&&Xn(t,r),a}(ue.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zn,"propTypes",{selectValue:Ct.a.string.isRequired,selectId:Ct.a.string.isRequired,selectChange:Ct.a.func.isRequired});var er=n(53),tr=n.n(er),nr="CMPNTS_DATABASES_SHOWDELETE_MODAL";var rr={deleteDatabase:function(e,t){var n=this,r=ae.urls("databaseBaseURL","server",e,"");w(r).then((function(r){if(!r.ok){var o=r.reason||"";throw new Error(o)}n.showDeleteDatabaseModal({showModal:!0}),ae.addNotification({msg:"The database <code>"+_.escape(e)+"</code> has been deleted.",clear:!0,escape:!1}),Backbone.history.loadUrl(ae.urls("allDBs","app")),t&&t()})).catch((function(e){ae.addNotification({msg:"Could not delete the database. "+e.message,type:"error",clear:!0})}))},showDeleteDatabaseModal:function(e){ae.dispatch({type:nr,options:e})}},or=function(e,t){var n="#"+ae.urls("databaseBaseURL","app",ae.url.encode(e))+(t?"/_partition/"+encodeURIComponent(t):"");return{title:se.i18n.en_US["new-mango-index"],url:n+"/_index",icon:"fonticon-plus-circled"}},ar=function(e){return"designDoc"===e.navItem&&"Views"===e.designDocSection&&e.indexName},ir=function(e,t){var n=t;return t&&e.options&&!1===e.options.partitioned&&(n=!1),n},sr={getSeqNum:function(e){return _.isArray(e)?e[1]:e},getNewButtonLinks:function(e,t){var n=ae.getExtensions("sidebar:links"),r="#"+ae.urls("databaseBaseURL","app",ae.url.encode(e)),o="",a="";return t&&(o="/_partition/"+encodeURIComponent(t),a="?partitionKey="+encodeURIComponent(t)),[{title:"Add New",links:n.reduce((function(e,t){return e.push({title:t.title,url:r+o+"/"+t.url,icon:"fonticon-plus-circled"}),e}),[{title:"New Doc",url:r+"/_new"+a,icon:"fonticon-plus-circled"},{title:"New View",url:r+o+"/new_view",icon:"fonticon-plus-circled"},or(e,t)])}]},getModifyDatabaseLinks:function(e){return[{title:"Replicate Database",icon:"fonticon-replicate",url:ae.urls("replication","app",e)},{title:"Delete",icon:"fonticon-trash",onClick:rr.showDeleteDatabaseModal.bind(void 0,{showDeleteModal:!0,dbId:e})}]},getNewDocUrl:function(e,t){var n=encodeURIComponent(e),r=ae.urls("new","newDocument",n);return t&&(r=r+"?partitionKey="+encodeURIComponent(t)),r},isDDocPartitioned:ir,parseJSON:function(e){return JSON.parse('"'+e+'"')},truncateDoc:function(e,t){var n=e.split("\n"),r=!1;return n.length>t&&(r=!0,e=(n=n.slice(0,t)).join("\n")),{isTruncated:r,content:e}},selectedViewContainsReduceFunction:function(e,t){if(!t)return!1;var n=!1;if(e&&ar(t)){var r="_design/"+t.designDocName,o=e.find((function(e){return e._id===r}));n=void 0!==o&&o.views&&void 0!==o.views[t.indexName]&&void 0!==o.views[t.indexName].reduce}return n},selectedItemIsPartitionedView:function(e,t,n){if(!t)return!1;var r=!1;if(e&&ar(t)){var o="_design/"+t.designDocName,a=e.find((function(e){return e._id===o}));a&&(r=ir(a,n))}return r},isViewSelected:ar};function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pr(e,t){return(pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mr(e);if(t){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dr(this,n)}}function dr(e,t){return!t||"object"!==cr(t)&&"function"!=typeof t?hr(e):t}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(221),n(151),n(152);var br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pr(e,t)}(a,e);var t,n,r,o=fr(a);function a(){var e;ur(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yr(hr(e=o.call.apply(o,[this].concat(n))),"state",{editorInitialized:!1}),yr(hr(e),"initAceEditor",(function(t){e.editor=tr.a.edit(t),e.editor.$blockScrolling=1/0,e.editor.setShowPrintMargin(!1),e.editor.setOption("highlightActiveLine",!0),e.editor.setTheme("ace/theme/idle_fingers");var n=sr.parseJSON(e.props.value);e.editor.setValue(n,-1),e.state.editorInitialized||e.setState({editorInitialized:!0})})),yr(hr(e),"closeModal",(function(){e.props.onClose()})),yr(hr(e),"save",(function(){e.props.onSave(e.editor.getValue())})),yr(hr(e),"getSaveBtn",(function(){return e.state.editorInitialized&&ue.a.createElement("button",{id:"string-edit-save-btn",onClick:e.save,className:"btn btn-primary save"},ue.a.createElement("i",{className:"fonticon-circle-check"})," Modify Text")})),e}return t=a,(n=[{key:"render",value:function(){var e=this;return ue.a.createElement(rn.f,{className:"string-editor-modal",show:this.props.visible,onHide:this.closeModal},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,"Edit Value ",ue.a.createElement("span",{id:"string-edit-header"}))),ue.a.createElement(rn.f.Body,null,ue.a.createElement("div",{id:"modal-error",className:"hide alert alert-error"}),ue.a.createElement("div",{id:"string-editor-wrapper"},ue.a.createElement("div",{id:"string-editor-container",ref:function(t){return e.initAceEditor(t)},className:"doc-code"}))),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("a",{className:"cancel-link",onClick:this.closeModal},"Cancel"),this.getSaveBtn()))}}])&&lr(t.prototype,n),r&&lr(t,r),a}(ue.a.Component);yr(br,"propTypes",{value:Ct.a.string.isRequired,visible:Ct.a.bool.isRequired,onClose:Ct.a.func.isRequired,onSave:Ct.a.func.isRequired}),yr(br,"defaultProps",{visible:!1,onClose:function(){},onSave:function(){}});n(427);function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nr(e);if(t){var o=Nr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Or(this,n)}}function Or(e,t){return!t||"object"!==gr(t)&&"function"!=typeof t?Sr(e):t}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(221),n(151),n(152);var Rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(a,e);var t,n,r,o=wr(a);function a(){var e;_r(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Dr(Sr(e=o.call.apply(o,[this].concat(n))),"state",{originalCode:e.props.defaultCode,stringEditModalVisible:!1,stringEditIconVisible:!1,stringEditIconStyle:{},stringEditModalValue:""}),Dr(Sr(e),"hasChanged",(function(){return!_.isEqual(e.state.originalCode,e.getValue())})),Dr(Sr(e),"clearChanges",(function(){e.setState({originalCode:e.getValue()})})),Dr(Sr(e),"setupAce",(function(t,n){e.editor=tr.a.edit(e.ace),e.editor.commands.bindKeys({"Ctrl-L|Command-L":null,"Ctrl-Shift-L|Command-Shift-L":"gotoline"}),e.editor.$blockScrolling=1/0,n&&e.setValue(t.defaultCode),e.editor.setShowPrintMargin(t.showPrintMargin),e.editor.autoScrollEditorIntoView=t.autoScrollEditorIntoView,e.editor.setOption("highlightActiveLine",e.props.highlightActiveLine),e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.ignorableErrors&&e.removeIgnorableAnnotations(),e.addCommands(),e.editor.getSession().setMode("ace/mode/"+t.mode),e.editor.setTheme("ace/theme/"+t.theme),e.editor.setFontSize(t.fontSize),e.editor.getSession().setTabSize(2),e.editor.getSession().setUseSoftTabs(!0),e.props.autoFocus&&e.editor.focus(),e.editor.setReadOnly(t.disabled)})),Dr(Sr(e),"addCommands",(function(){_.each(e.props.editorCommands,(function(t){e.editor.commands.addCommand(t)}))})),Dr(Sr(e),"setupEvents",(function(){e.editor.on("blur",_.bind(e.onBlur,Sr(e))),e.editor.on("change",_.bind(e.onContentChange,Sr(e))),e.props.stringEditModalEnabled&&(e.editor.on("changeSelection",_.bind(e.showHideEditStringGutterIcon,Sr(e))),e.editor.getSession().on("changeBackMarker",_.bind(e.showHideEditStringGutterIcon,Sr(e))),e.editor.getSession().on("changeScrollTop",_.bind(e.updateEditStringGutterIconPosition,Sr(e)))),e.props.notifyUnsavedChanges&&(window.addEventListener("beforeunload",e.quitWarningMsg),ae.beforeUnload("editor_"+e.props.id,e.quitWarningMsg))})),Dr(Sr(e),"onBlur",(function(){e.props.blur(e.getValue())})),Dr(Sr(e),"onContentChange",(function(){e.props.setHeightToLineCount&&e.setHeightToLineCount(),e.props.change(e.getValue())})),Dr(Sr(e),"quitWarningMsg",(function(){if(e.hasChanged())return"Your changes have not been saved. Click Cancel to return to the document, or OK to proceed."})),Dr(Sr(e),"removeEvents",(function(){e.props.notifyUnsavedChanges&&(window.removeEventListener("beforeunload",e.quitWarningMsg),ae.removeBeforeUnload("editor_"+e.props.id))})),Dr(Sr(e),"setHeightToLineCount",(function(){var t=e.editor.getSession().getDocument().getLength(),n=t>e.props.maxLines?e.props.maxLines:t;e.editor.setOptions({maxLines:n,minLines:e.props.minLines})})),Dr(Sr(e),"getAnnotations",(function(){return e.editor.getSession().getAnnotations()})),Dr(Sr(e),"isIgnorableError",(function(t){return-1!==_.indexOf(e.props.ignorableErrors,t)})),Dr(Sr(e),"removeIgnorableAnnotations",(function(){var t=e.isIgnorableError;e.editor.getSession().on("changeAnnotation",function(){var e=this.editor.getSession().getAnnotations(),n=_.reduce(e,(function(e,n){return t(n.raw)||e.push(n),e}),[]);e.length!==n.length&&this.editor.getSession().setAnnotations(n)}.bind(Sr(e)))})),Dr(Sr(e),"showHideEditStringGutterIcon",(function(){return e.hasErrors()||!e.parseLineForStringMatch()?(e.setState({stringEditIconVisible:!1}),!1):(e.setState({stringEditIconVisible:!0,stringEditIconStyle:{top:e.getGutterIconPosition()}}),!0)})),Dr(Sr(e),"updateEditStringGutterIconPosition",(function(){e.state.stringEditIconVisible&&e.setState({stringEditIconStyle:{top:e.getGutterIconPosition()}})})),Dr(Sr(e),"getGutterIconPosition",(function(){var t=e.getRowHeight(),n=e.editor.session.getScrollTop();return t*e.documentToScreenRow(e.getSelectionStart().row)-n+"px"})),Dr(Sr(e),"parseLineForStringMatch",(function(){var t=e.getSelectionStart().row,n=e.getSelectionEnd().row;if(t>=0&&n>=0&&t===n&&e.isRowExpanded(t)){var r=e.getLine(t).match(/^([ \t]*)("[^"]*["][ \t]*:[ \t]*)?(["|'].*"[ \t]*,?[ \t]*)$/);if(r)return r}return!1})),Dr(Sr(e),"openStringEditModal",(function(){var t=e.parseLineForStringMatch()[3].trim();","===t.substring(t.length-1)&&(t=t.substring(0,t.length-1).trim()),t=t.substring(1,t.length-1),e.setState({stringEditModalVisible:!0,stringEditModalValue:t})})),Dr(Sr(e),"saveStringEditModal",(function(t){var n=e.parseLineForStringMatch(),r=n[1]||"",o=n[2]||"",a=n[3],i="";","===a.substring(a.length-1)&&(i=","),e.replaceCurrentLine(r+o+JSON.stringify(t)+i+"\n"),e.closeStringEditModal()})),Dr(Sr(e),"closeStringEditModal",(function(){e.setState({stringEditModalVisible:!1})})),Dr(Sr(e),"hasErrors",(function(){return!_.every(e.getAnnotations(),(function(t){return e.isIgnorableError(t.raw)}))})),Dr(Sr(e),"setReadOnly",(function(t){e.editor.setReadOnly(t)})),Dr(Sr(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),Dr(Sr(e),"getValue",(function(){return e.editor.getValue()})),Dr(Sr(e),"getEditor",(function(){return Sr(e)})),Dr(Sr(e),"getLine",(function(t){return e.editor.session.getLine(t)})),Dr(Sr(e),"getSelectionStart",(function(){return e.editor.getSelectionRange().start})),Dr(Sr(e),"getSelectionEnd",(function(){return e.editor.getSelectionRange().end})),Dr(Sr(e),"getRowHeight",(function(){return e.editor.renderer.layerConfig.lineHeight})),Dr(Sr(e),"isRowExpanded",(function(t){return!e.editor.getSession().isRowFolded(t)})),Dr(Sr(e),"documentToScreenRow",(function(t){return e.editor.getSession().documentToScreenRow(t,0)})),Dr(Sr(e),"replaceCurrentLine",(function(t){e.editor.getSelection().selectLine(),e.editor.insert(t),e.editor.getSelection().moveCursorUp()})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.setupAce(this.props,!0),this.setupEvents(),this.props.autoFocus&&this.editor.focus()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),this.editor.destroy()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setupAce(e,!1)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",null,ue.a.createElement("div",{ref:function(t){return e.ace=t},className:"js-editor",id:this.props.id}),ue.a.createElement("button",{ref:function(t){return e.stringEditIcon=t},className:"btn string-edit",title:"Edit string",disabled:!this.state.stringEditIconVisible||this.props.disabled,style:this.state.stringEditIconStyle,onClick:this.openStringEditModal},ue.a.createElement("i",{className:"icon icon-edit"})),ue.a.createElement(br,{ref:function(t){return e.stringEditModal=t},visible:this.state.stringEditModalVisible,value:this.state.stringEditModalValue,onSave:this.saveStringEditModal,onClose:this.closeStringEditModal}))}}])&&vr(t.prototype,n),r&&vr(t,r),a}(ue.a.Component);Dr(Rr,"defaultProps",{id:"code-editor",mode:"javascript",theme:"idle_fingers",fontSize:13,defaultCode:"",disabled:!1,showGutter:!0,highlightActiveLine:!0,showPrintMargin:!1,autoScrollEditorIntoView:!0,autoFocus:!1,stringEditModalEnabled:!1,setHeightToLineCount:!1,maxLines:10,minLines:11,editorCommands:[],notifyUnsavedChanges:!1,ignorableErrors:[],change:function(){},blur:function(){}});var Cr=n(119),Pr=n.n(Cr);function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mr(e);if(t){var o=Mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jr(this,n)}}function jr(e,t){return!t||"object"!==Tr(t)&&"function"!=typeof t?Lr(e):t}function Lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qr=Pr.a.js_beautify?Pr.a.js_beautify:Pr.a,Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(a,e);var t,n,r,o=Ar(a);function a(){var e;kr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ur(Lr(e=o.call.apply(o,[this].concat(n))),"noOfLines",(function(){return e.props.code.split(/\r\n|\r|\n/).length})),Ur(Lr(e),"canBeautify",(function(){return 1===e.noOfLines()})),Ur(Lr(e),"beautify",(function(t){t.preventDefault();var n=qr(e.props.code);e.props.beautifiedCode(n)})),Ur(Lr(e),"getTooltip",(function(){return ue.a.createElement(rn.k,{id:"tooltip"},"Switch to editable code format.")})),e}return t=a,(n=[{key:"render",value:function(){if(!this.canBeautify())return null;var e=this.getTooltip();return ue.a.createElement(rn.h,{placement:"right",overlay:e},ue.a.createElement("button",{onClick:this.beautify,className:"beautify beautify_map btn btn-primary btn-small beautify-tooltip",type:"button"},"Format Code"))}}])&&xr(t.prototype,n),r&&xr(t,r),a}(ue.a.Component);function Vr(e){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xr(e);if(t){var o=Xr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gr(this,n)}}function Gr(e,t){return!t||"object"!==Vr(t)&&"function"!=typeof t?Wr(e):t}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(428);var Jr={dark:"idle_fingers",light:"dawn"},Yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(a,e);var t,n,r,o=Hr(a);function a(){var e;Fr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qr(Wr(e=o.call.apply(o,[this].concat(n))),"getStoreState",(function(){return{theme:e.getZenTheme(),code:e.props.defaultCode}})),Qr(Wr(e),"getZenTheme",(function(){var e=se.utils.localStorageGet("zenTheme");return _.isUndefined(e)?"dark":e})),Qr(Wr(e),"onChange",(function(){e.setState(e.getStoreState())})),Qr(Wr(e),"exitZenMode",(function(){e.props.onExit(e.getValue())})),Qr(Wr(e),"getValue",(function(){return e.ace.getValue()})),Qr(Wr(e),"toggleTheme",(function(){var t="dark"===e.state.theme?"light":"dark";e.setState({theme:t,code:e.getValue()}),se.utils.localStorageSet("zenTheme",t)})),Qr(Wr(e),"setValue",(function(t,n){n=n||-1,e.editor.setValue(t,n)})),Qr(Wr(e),"state",e.getStoreState()),e}return t=a,(n=[{key:"render",value:function(){var e=this,t="full-page-editor-modal-wrapper zen-theme-"+this.state.theme,n=[{name:"close",bindKey:{win:"ESC",mac:"ESC"},exec:this.exitZenMode}],r=ue.a.createElement(rn.k,{id:"tooltip"},"Exit zen mode (`esc`)"),o=ue.a.createElement(rn.k,{id:"tooltip"},"Switch zen theme");return ue.a.createElement("div",{className:t},ue.a.createElement("div",{className:"zen-mode-controls"},ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement(rn.h,{placement:"left",overlay:r},ue.a.createElement("span",{className:"fonticon fonticon-resize-small js-exit-zen-mode","data-container":".zen-mode-controls .tooltips",onClick:this.exitZenMode}))),ue.a.createElement("li",null,ue.a.createElement(rn.h,{placement:"left",overlay:o},ue.a.createElement("span",{className:"fonticon fonticon-picture js-toggle-theme","data-container":".zen-mode-controls .tooltips",title:"Switch zen theme",onClick:this.toggleTheme})))),ue.a.createElement("div",{className:"tooltips"})),ue.a.createElement(Rr,{ref:function(t){return e.ace=t},autoFocus:!0,theme:Jr[this.state.theme],defaultCode:this.props.defaultCode,editorCommands:n,ignorableErrors:this.props.ignorableErrors,highlightActiveLine:this.props.highlightActiveLine}))}}])&&Kr(t.prototype,n),r&&Kr(t,r),a}(ue.a.Component);function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t){return(to=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function no(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ao(e);if(t){var o=ao(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ro(this,n)}}function ro(e,t){return!t||"object"!==$r(t)&&"function"!=typeof t?oo(e):t}function oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qr(Yr,"defaultProps",{mode:"javascript",defaultCode:"",ignorableErrors:[],onExit:null,highlightActiveLine:!1});var so=["Missing name in function declaration.","['{a}'] is better written in dot notation."],co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&to(e,t)}(a,e);var t,n,r,o=no(a);function a(){var e;Zr(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return io(oo(e=o.call.apply(o,[this].concat(n))),"getStoreState",(function(){return{zenModeEnabled:!1,code:e.props.defaultCode}})),io(oo(e),"getZenModeIcon",(function(){if(e.props.allowZenMode)return ue.a.createElement("span",{className:"fonticon fonticon-resize-full zen-editor-icon",title:"Enter Zen mode",onClick:e.enterZenMode})})),io(oo(e),"getDocIcon",(function(){if(e.props.docLink)return ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:e.props.docLink,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))})),io(oo(e),"getZenModeOverlay",(function(){if(e.state.zenModeEnabled)return ue.a.createElement(Yr,{defaultCode:e.state.code,mode:e.props.mode,ignorableErrors:so,onExit:e.exitZenMode})})),io(oo(e),"enterZenMode",(function(){e.setState({zenModeEnabled:!0,code:e.codeEditor.getValue()})})),io(oo(e),"exitZenMode",(function(t){e.setState({zenModeEnabled:!1}),e.getEditor().setValue(t)})),io(oo(e),"getEditor",(function(){return e.codeEditor})),io(oo(e),"getValue",(function(){return e.getEditor().getValue()})),io(oo(e),"beautify",(function(t){e.setState({code:t}),e.getEditor().setValue(t)})),io(oo(e),"update",(function(){e.getEditor().setValue(e.state.code)})),io(oo(e),"state",e.getStoreState()),e}return t=a,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.defaultCode!==this.props.defaultCode&&this.setState({code:e.defaultCode})}},{key:"render",value:function(){var e=this,t="control-group";return this.props.className&&(t+=" "+this.props.className),ue.a.createElement("div",{className:t},ue.a.createElement("label",null,ue.a.createElement("span",null,this.props.title),this.getDocIcon(),this.getZenModeIcon()),ue.a.createElement(Rr,{id:this.props.id,ref:function(t){return e.codeEditor=t},mode:"javascript",defaultCode:this.state.code,showGutter:!0,ignorableErrors:so,setHeightToLineCount:!0,maxLines:1e4,blur:this.props.blur}),ue.a.createElement(Br,{code:this.state.code,beautifiedCode:this.beautify}),this.getZenModeOverlay())}}])&&eo(t.prototype,n),r&&eo(t,r),a}(ue.a.Component);function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fo(e,t){return(fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ho(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yo(e);if(t){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mo(this,n)}}function mo(e,t){return!t||"object"!==uo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}io(co,"defaultProps",{id:"code-editor",className:"",defaultCode:"",title:"",docLink:"",allowZenMode:!0,blur:function(){}});var bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fo(e,t)}(a,e);var t,n,r,o=ho(a);function a(){return lo(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{className:"bordered-box"},ue.a.createElement("div",{className:"padded-box"},this.props.children))}}])&&po(t.prototype,n),r&&po(t,r),a}(ue.a.Component),go={TABLE:"LAYOUT_TABLE",METADATA:"LAYOUT_METADATA",JSON:"LAYOUT_JSON"},_o={MANGO_INDEX:"MangoIndex",MANGO_QUERY:"MangoQueryResult",VIEW:"view"},vo={TEXT_OVERFLOW_TRUNCATED:"truncated",TEXT_OVERFLOW_FULL:"full",FONT_SIZE_SMALL:"small-font",FONT_SIZE_LARGE:"large-font",FONT_SIZE_MEDIUM:"medium-font"};function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function So(e,t){return(So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function No(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Co(e);if(t){var o=Co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Do(this,n)}}function Do(e,t){return!t||"object"!==Eo(t)&&"function"!=typeof t?Ro(e):t}function Ro(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var To=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&So(e,t)}(a,e);var t,n,r,o=No(a);function a(){var e;wo(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Po(Ro(e=o.call.apply(o,[this].concat(n))),"onChange",(function(t){t.preventDefault(),e.props.docChecked(e.props.doc.id,e.props.doc._rev)})),Po(Ro(e),"getUrlFragment",(function(){return e.props.children?ue.a.createElement("div",{className:"doc-edit-symbol pull-right",title:"Edit document"},e.props.children):""})),Po(Ro(e),"getExtensionIcons",(function(){var t=ae.getExtensions("DocList:icons");return _.map(t,(function(t,n){return ue.a.createElement(t,{doc:e.props.doc,key:n})}))})),Po(Ro(e),"getDocumentTypeIcon",(function(){return e.props.docType===_o.MANGO_INDEX?-1!==e.props.docContent.indexOf('"partitioned": true')?ue.a.createElement("i",{className:"fonticon-documents",title:"Partitioned index"}):ue.a.createElement("i",{className:"fonticon-document",title:"Global index"}):null})),Po(Ro(e),"getCheckbox",(function(){return e.props.isDeletable?ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{id:"checkbox-"+e.props.docIdentifier,checked:e.props.checked,"data-checked":e.props.checked,type:"checkbox",onChange:e.onChange,className:"js-row-select"}),ue.a.createElement("label",{onClick:e.onChange,className:"label-checkbox-doclist",htmlFor:"checkbox-"+e.props.docIdentifier})):ue.a.createElement("div",{className:"checkbox-dummy"})})),Po(Ro(e),"onClick",(function(t){e.props.onClick(e.props.docIdentifier,e.props.doc,t)})),Po(Ro(e),"getDocContent",(function(){if(_.isEmpty(e.props.docContent))return null;var t=e.props.docContent,n=!1;if(e.props.truncate){var r=sr.truncateDoc(e.props.docContent,e.props.maxRows);n=r.isTruncated,t=r.content}var o=e.props.resultsStyle.fontSize,a=nn()("prettyprint",{"prettyprint--small":o===vo.FONT_SIZE_SMALL,"prettyprint--large":o===vo.FONT_SIZE_LARGE});return ue.a.createElement("div",{className:"doc-data"},ue.a.createElement("pre",{className:a},t),n?ue.a.createElement("div",{className:"doc-content-truncated"},"(truncated)"):null)})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{"data-id":this.props.docIdentifier,className:"doc-row"},ue.a.createElement("div",{className:"custom-inputs"},this.getCheckbox()),ue.a.createElement("div",{className:"doc-item"},ue.a.createElement("header",{onClick:this.onClick},ue.a.createElement("span",{className:"header-keylabel"},this.getDocumentTypeIcon(),this.props.keylabel),ue.a.createElement("span",{className:"header-doc-id"},this.props.header?'"'+this.props.header+'"':null),this.getUrlFragment(),ue.a.createElement("div",{className:"doc-item-extension-icons pull-right"},this.getExtensionIcons())),this.getDocContent()),ue.a.createElement("div",{className:"clearfix"}))}}])&&Oo(t.prototype,n),r&&Oo(t,r),a}(ue.a.Component);Po(To,"propTypes",{docIdentifier:Ct.a.string.isRequired,docType:Ct.a.string,docChecked:Ct.a.func.isRequired,truncate:Ct.a.bool,maxRows:Ct.a.number,resultsStyle:Ct.a.object}),Po(To,"defaultProps",{truncate:!0,maxRows:500,resultsStyle:{fontSize:vo.FONT_SIZE_MEDIUM},docType:_o.VIEW});var ko=function(){return ue.a.createElement("div",{className:"loading-lines"},ue.a.createElement("div",{id:"line1"}," "),ue.a.createElement("div",{id:"line2"}," "),ue.a.createElement("div",{id:"line3"}," "),ue.a.createElement("div",{id:"line4"}," "))};function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jo(e,t){return(jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qo(e);if(t){var o=qo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mo(this,n)}}function Mo(e,t){return!t||"object"!==xo(t)&&"function"!=typeof t?Uo(e):t}function Uo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qo(e){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}(a,e);var t,n,r,o=Lo(a);function a(){var e;Io(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bo(Uo(e=o.call.apply(o,[this].concat(n))),"getIcon",(function(){return e.props.showIcon?ue.a.createElement("i",{className:"icon "+e.props.customIcon}):null})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.buttonType,r=e.id,o=e.style,a=e.text,i=e.disabled;return ue.a.createElement("button",{onClick:t,type:"submit",disabled:i,"data-id":this.props["data-id"],className:"btn save "+n,id:r,style:o},this.getIcon(),a)}}])&&Ao(t.prototype,n),r&&Ao(t,r),a}(ue.a.Component);Bo(Vo,"propTypes",{showIcon:Ct.a.bool,id:Ct.a.string,customIcon:Ct.a.string,style:Ct.a.object,buttonType:Ct.a.string,"data-id":Ct.a.string,onClick:Ct.a.func,disabled:Ct.a.bool}),Bo(Vo,"defaultProps",{disabled:!1,showIcon:!0,customIcon:"fonticon-ok-circled",buttonType:"btn-primary",style:{},"data-id":null,onClick:function(){}});var Fo=n(92),Ko=n.n(Fo);function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ho(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wo(e,t,n){return t&&Go(e.prototype,t),n&&Go(e,n),e}function Xo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qo(e,t)}function Qo(e,t){return(Qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zo(e);if(t){var o=Zo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yo(this,n)}}function Yo(e,t){return!t||"object"!==zo(t)&&"function"!=typeof t?$o(e):t}function $o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zo(e){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ta=function(e){Xo(n,e);var t=Jo(n);function n(){var e;Ho(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ea($o(e=t.call.apply(t,[this].concat(o))),"createSectionLinks",(function(t){return t?t.map((function(t,n){return e.createEntry(t,n)})):null})),ea($o(e),"createEntry",(function(e,t){return ue.a.createElement("li",{key:t},ue.a.createElement("a",{className:nn()("icon",e.icon,{"fonticon-placeholder":!e.icon}),"data-bypass":e.external?"true":"",href:e.url,onClick:e.onClick,rel:"noreferrer noopener",target:e.external?"_blank":""},e.title))})),ea($o(e),"createSectionTitle",(function(e,t){return e?ue.a.createElement("li",{key:t,className:"header-label"},e):null})),ea($o(e),"createSection",(function(){return e.props.links.map((function(t,n){return t.title&&t.links?[e.createSectionTitle(t.title,"title_"+n),e.createSectionLinks(t.links)]:e.createEntry(t,"el"+n)}))})),e}return Wo(n,[{key:"render",value:function(){var e=this.createSection(),t=this.props.hideArrow?"":"arrow",n="button"===this.props.toggleType?na:ra;return ue.a.createElement(rn.d,{id:"dropdown-menu"},ue.a.createElement(n,{bsRole:"toggle",icon:this.props.icon}),ue.a.createElement(oa,{bsRole:"menu",className:t},e))}}]),n}(ue.a.Component);ea(ta,"defaultProps",{icon:"fonticon-plus-circled",hideArrow:!1,toggleType:"link"}),ea(ta,"propTypes",{icon:Ct.a.string,hideArrow:Ct.a.bool,links:Ct.a.array.isRequired,toggleType:Ct.a.string.isRequired});var na=function(e){Xo(n,e);var t=Jo(n);function n(e,r){var o;return Ho(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind($o(o)),o}return Wo(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ue.a.createElement(rn.a,{onClick:this.handleClick},ue.a.createElement("i",{className:"dropdown-toggle "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"}}),this.props.children)}}]),n}(ue.a.Component),ra=function(e){Xo(n,e);var t=Jo(n);function n(e,r){var o;return Ho(this,n),(o=t.call(this,e,r)).handleClick=o.handleClick.bind($o(o)),o}return Wo(n,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return ue.a.createElement("a",{className:"dropdown-toggle icon "+this.props.icon,style:{fontSize:"1rem",boxShadow:"0px 0px 0px"},onClick:this.handleClick},this.props.children)}}]),n}(ue.a.Component),oa=function(e){Xo(n,e);var t=Jo(n);function n(e,r){return Ho(this,n),t.call(this,e,r)}return Wo(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.open,r=e.onClose,o=e.className;return ue.a.createElement(Ko.a,{disabled:!n,onRootClose:r},ue.a.createElement("ul",{className:nn()("dropdown-menu",o),role:"menu","aria-labelledby":"dLabel"},t))}}]),n}(ue.a.Component),aa=n(17);function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(){return(sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function la(e,t,n){return t&&ua(e.prototype,t),n&&ua(e,n),e}function pa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fa(e,t)}function fa(e,t){return(fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ya(e);if(t){var o=ya(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ha(this,n)}}function ha(e,t){return!t||"object"!==ia(t)&&"function"!=typeof t?ma(e):t}function ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ba(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ga=function(e){pa(n,e);var t=da(n);function n(e){var r;return ca(this,n),ba(ma(r=t.call(this,e)),"getChildren",(function(e){var t=e[0].style,n="tray show-tray "+r.props.className;return ue.a.createElement("div",{key:"1",id:r.props.id,style:{opacity:t.opacity,top:t.top+"px"},className:n},r.props.children)})),ba(ma(r),"willEnter",(function(){return{opacity:Object(aa.spring)(1),top:Object(aa.spring)(64)}})),ba(ma(r),"willLeave",(function(){return{opacity:Object(aa.spring)(0),top:Object(aa.spring)(30)}})),ba(ma(r),"getDefaultStyles",(function(){return[{key:"1",style:{opacity:0,top:30}}]})),ba(ma(r),"getStyles",(function(e){return e?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:r.willEnter()}]})),e.container||(r.container=ma(r)),r}return la(n,[{key:"render",value:function(){return ue.a.createElement(rn.g,{show:this.props.contentVisible,onHide:this.props.closeTray,placement:"bottom",container:this.props.container,rootClose:!0,onEnter:this.props.onEnter},ue.a.createElement(aa.TransitionMotion,{defaultStyles:this.getDefaultStyles(),styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren))}}]),n}(ue.a.Component);ba(ga,"propTypes",{contentVisible:Ct.a.bool.isRequired,closeTray:Ct.a.func.isRequired,onEnter:Ct.a.func,container:Ct.a.object}),ba(ga,"defaultProps",{onEnter:function(){}});var _a=function(e){pa(n,e);var t=da(n);function n(){var e;ca(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ba(ma(e=t.call.apply(t,[this].concat(o))),"renderChildren",(function(){return ue.a.Children.map(e.props.children,(function(t){var n={};return Object.keys(e.props).filter((function(t){return Object.prototype.hasOwnProperty.call(e.props,t)})).map((function(t){return n[t]=e.props[t]})),ue.a.cloneElement(t,n)}))})),e}return la(n,[{key:"render",value:function(){return ue.a.createElement("div",null,this.renderChildren())}}]),n}(ue.a.Component);function va(e){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oa(e,t){return(Oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ra(e);if(t){var o=Ra(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Na(this,n)}}function Na(e,t){return!t||"object"!==va(t)&&"function"!=typeof t?Da(e):t}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ba(_a,"defaultProps",{className:""});var Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oa(e,t)}(a,e);var t,n,r,o=Sa(a);function a(){var e;Ea(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ca(Da(e=o.call.apply(o,[this].concat(n))),"state",{inputValue:"",disableSubmit:!0}),Ca(Da(e),"close",(function(t){t&&t.preventDefault(),e.setState({inputValue:"",disableSubmit:!0}),e.props.showHide({showModal:!1})})),Ca(Da(e),"open",(function(){e.props.showHide({showModal:!0})})),Ca(Da(e),"getDatabaseName",(function(){return e.props.modalProps.dbId.trim()})),Ca(Da(e),"onInputChange",(function(t){var n=t.target.value.trim();e.setState({inputValue:n}),e.setState({disableSubmit:n!==e.getDatabaseName()})})),Ca(Da(e),"onDeleteClick",(function(t){t.preventDefault(),rr.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),Ca(Da(e),"onInputKeypress",(function(t){13===t.keyCode&&!0!==e.state.disableSubmit&&rr.deleteDatabase(e.getDatabaseName(),e.props.onSuccess)})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.modalProps.isSystemDatabase,t=this.props.modalProps.showDeleteModal,n=this.props.modalProps.dbId,r=e?ue.a.createElement("p",{style:{color:"#d14"},className:"warning"},ue.a.createElement("b",null,"You are about to delete a system database, be careful!")):null;return ue.a.createElement(rn.f,{dialogClassName:"delete-db-modal",show:t,onHide:this.close},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,"Confirm Deletion")),ue.a.createElement(rn.f.Body,null,r,ue.a.createElement("p",null,"Warning: This action will permanently delete ",ue.a.createElement("code",null,n),". To confirm the deletion of the database and all of the database's documents, you must enter the database's name."),ue.a.createElement("input",{type:"text",className:"input-block-level",onKeyUp:this.onInputKeypress,onChange:this.onInputChange,autoFocus:!0})),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("a",{href:"#",onClick:this.close,"data-bypass":"true",className:"cancel-link"},"Cancel"),ue.a.createElement("button",{disabled:this.state.disableSubmit,onClick:this.onDeleteClick,className:"btn btn-danger delete"},ue.a.createElement("i",{className:"icon icon-trash"})," Delete Database")))}}])&&wa(t.prototype,n),r&&wa(t,r),a}(ue.a.Component);Ca(Pa,"propTypes",{showHide:Ct.a.func.isRequired,modalProps:Ct.a.object,onSuccess:Ct.a.func});var Ta=function(e){var t=e.selected,n=e.text,r=e.onChange,o=e.iconClass,a=e.badgeText,i=t?"tab-element-checked":"",s=null;return a&&(s=ue.a.createElement("span",{className:"tab-element-badge"},a)),ue.a.createElement("li",{className:"component-tab-element ".concat(i)},ue.a.createElement("label",null,ue.a.createElement("div",{className:"tab-element-indicator-wrapper"},ue.a.createElement("div",{className:"tab-element-indicator"})),ue.a.createElement("div",{className:"tab-element-content"},ue.a.createElement("i",{className:o}),ue.a.createElement("input",{type:"radio",value:n,checked:t,onChange:r}),n,s)))};Ta.propTypes={selected:Ct.a.bool.isRequired,text:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired,iconClass:Ct.a.string,badgeText:Ct.a.string};var ka,xa=function(e){var t=e.children;return ue.a.createElement("ul",{className:"component-tab-element-wrapper"},t)},Ia=n(231);function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function La(e,t){return(La=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ba(e);if(t){var o=Ba(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ua(this,n)}}function Ua(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?qa(e):t}function qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ba(e){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Va=function(){ka&&window.clearInterval(ka)},Fa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&La(e,t)}(a,e);var t,n,r,o=Ma(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={value:t.props.startValue},t.updatePollingFreq=t.updatePollingFreq.bind(qa(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){this.setPollingCounter(this.state.value)}},{key:"componentWillUnmount",value:function(){Va()}},{key:"setPollingCounter",value:function(e){var t,n,r=this.props,o=r.min,a=r.max,i=r.onPoll;this.setState({value:e}),0===e||e<o||e>a?Va():(t=1e3*e,n=function(){return i()},Va(),ka=window.setInterval(n,t))}},{key:"updatePollingFreq",value:function(e){this.setPollingCounter(parseInt(e,10))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.startValue!==e.startValue&&this.setPollingCounter(e.startValue)}},{key:"render",value:function(){var e=this.props,t=e.stepSize,n=e.min,r=e.max,o=e.valueUnits,a=this.state.value,i=function(e,t,n,r){var o=parseInt(e,10);if(0===o||o>n||o<r)return"off";if(o<60&&"minute"===t)return"".concat(o," seconds");var a=o;return"minute"===t&&(a=Math.floor(o/60)),"".concat(a," ").concat(1===a?t:"".concat(t,"s"))}(a,o,r,n),s="off"===i?"faux__polling-info-value--off":"faux__polling-info-value--active";return ue.a.createElement("div",{className:"faux__polling"},ue.a.createElement("div",{className:"faux__polling-info"},ue.a.createElement("span",{className:"faux__polling-info-text"},"Polling Interval"),ue.a.createElement("span",{className:"faux__polling-info-value faux__polling-info-value ".concat(s)},i)),ue.a.createElement(Ia.a,{className:"faux__polling-info-slider",min:n,max:r+t,defaultValue:a,onChange:this.updatePollingFreq}))}}])&&ja(t.prototype,n),r&&ja(t,r),a}(ue.a.Component);Fa.defaultProps={startValue:0,min:0,valueUnits:"minute"},Fa.propTypes={startValue:Ct.a.number,valueUnits:Ct.a.string,min:Ct.a.number,max:Ct.a.number.isRequired,stepSize:Ct.a.number.isRequired,onPoll:Ct.a.func.isRequired};var Ka=function(e){var t=e.refresh;return ue.a.createElement("div",{className:"faux__refresh-btn"},ue.a.createElement("a",{className:"faux__refresh-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},ue.a.createElement("i",{className:"faux__refresh-icon fonticon-arrows-cw"}),"Refresh"))};Ka.propTypes={refresh:Ct.a.func.isRequired};var za,Ha=n(228),Ga=n.n(Ha);function Wa(e){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ja(e,t){return(Ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Za(e);if(t){var o=Za(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $a(this,n)}}function $a(e,t){return!t||"object"!==Wa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ei=function(e,t){(za=new Ga.a("#copy-"+e)).on("success",(function(){t()}))},ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ja(e,t)}(a,e);var t,n,r,o=Ya(a);function a(){return Xa(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){ei(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"componentWillUnmount",value:function(){za.destroy()}},{key:"componentDidUpdate",value:function(){ei(this.props.uniqueKey,this.props.onClipboardClick)}},{key:"getClipboardElement",value:function(){return"icon"===this.props.displayType?ue.a.createElement("i",{"aria-hidden":"true",className:"fontawesome icon-paste"}):this.props.textDisplay}},{key:"getClipboardButton",value:function(){var e="input"===this.props.displayType?"btn copy-button":"copy clipboard-copy-element";return ue.a.createElement("button",{"aria-label":"Copy to Clipboard",className:e,"data-clipboard-text":this.props.text,title:this.props.title,id:"copy-"+this.props.uniqueKey},this.getClipboardElement())}},{key:"render",value:function(){return"input"===this.props.displayType?ue.a.createElement("p",null,ue.a.createElement("input",{type:"text",className:"input-xxlarge text-field-to-copy",readOnly:!0,value:this.props.text}),this.getClipboardButton()):this.getClipboardButton()}}])&&Qa(t.prototype,n),r&&Qa(t,r),a}(ue.a.Component);function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=si(e);if(t){var o=si(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(e,t){return!t||"object"!==ni(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function si(e){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ti.defaultProps={displayType:"icon",textDisplay:"Copy",title:"Copy to clipboard",onClipboardClick:function(){}},ti.propTypes={text:Ct.a.string.isRequired,displayType:Ct.a.oneOf(["icon","text","input"]),uniqueKey:Ct.a.string.isRequired,onClipboardClick:Ct.a.func.isRequired};var ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(a,e);var t,n,r,o=ai(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.selectedTab,n=e.tabs,r=n.map((function(e,n){return ue.a.createElement(Ta,{key:n,selected:e.name===t,text:e.name,badgeText:e.badgeText,onChange:function(){ae.navigate(e.route,{redirect:!0})},iconClass:""})})),o=n.reduce((function(e,n){return n.name===t?n:e}),{});return o.component?ue.a.createElement("div",{className:"tab__wrapper"},ue.a.createElement(xa,null,r),ue.a.createElement("div",{className:"tab__container"},ue.a.createElement(o.component,null))):null}}])&&ri(t.prototype,n),r&&ri(t,r),a}(ue.a.Component);ci.propTypes={tabs:Ct.a.array.isRequired,selectedTab:Ct.a.string.isRequired};var ui=n(28);function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(n),!0).forEach((function(t){di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gi(e);if(t){var o=gi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bi(this,n)}}function bi(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(a,e);var t,n,r,o=yi(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).lastCall=void 0,t}return t=a,(n=[{key:"wrapThrottler",value:function(e){var t=this;return e?function(n,r){t.lastCall&&clearTimeout(t.lastCall),t.lastCall=setTimeout((function(){e(n,r)}),400)}:function(){}}},{key:"render",value:function(){var e=this.wrapThrottler(this.props.loadOptions).bind(this),t=fi(fi({},this.props),{},{loadOptions:e,onBlurResetsInput:!1});return ue.a.createElement(ui.a.Async,t)}}])&&hi(t.prototype,n),r&&hi(t,r),a}(ue.a.Component),vi={Accordion:function(e){var t=e.children,n=e.className,r=e.style,o=nn()("faux--accordion",n);return ue.a.createElement("ul",{className:o,style:r},t)},AccordionItem:hn,BadgeList:Dn,Badge:Rn,BulkActionComponent:Hn,ConfirmButton:Vo,ToggleHeaderButton:jn,StyledSelect:Zn,CodeEditorPanel:co,CodeEditor:Rr,StringEditModal:br,ZenModeOverlay:Yr,Beautify:Br,PaddedBorderedBox:bo,Polling:Fa,Document:To,LoadLines:ko,MenuDropDown:ta,TrayContents:ga,TrayWrapper:_a,connectToStores:function(e,t,n){return function(r){pa(a,r);var o=da(a);function a(){var e;ca(this,a);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return ba(ma(e=o.call.apply(o,[this].concat(r))),"state",n(e.props)),ba(ma(e),"onChange",(function(){e.setState(n(e.props))})),ba(ma(e),"handleStoresChanged",(function(){e.setState(n(e.props))})),e}return la(a,[{key:"componentDidMount",value:function(){var e=this;t.forEach((function(t){t.on("change",e.onChange,e)}))}},{key:"componentWillUnmount",value:function(){t.forEach(function(e){e.off("change",this.onChange)}.bind(this))}},{key:"render",value:function(){return ue.a.createElement(e,sa({},this.state,this.props))}}]),a}(ue.a.Component)},DeleteDatabaseModal:Pa,TabElement:Ta,TabElementWrapper:xa,RefreshBtn:Ka,Copy:ti,TabWindowWrapper:ci,ThrottledReactSelectAsync:_i},Ei={};Ei.DeleteDbModalStore=ae.Store.extend({initialize:function(){this.reset()},reset:function(){this._deleteModal={showDeleteModal:!1,dbId:"",isSystemDatabase:!1}},setDeleteModal:function(e){e.isSystemDatabase=se.utils.isSystemDatabase(e.dbId),this._deleteModal=e},getShowDeleteDatabaseModal:function(){return this._deleteModal},dispatch:function(e){switch(e.type){case nr:this.setDeleteModal(e.options);break;default:return}this.triggerChange()}}),Ei.deleteDbModalStore=new Ei.DeleteDbModalStore,Ei.deleteDbModalStore.dispatchToken=ae.dispatcher.register(Ei.deleteDbModalStore.dispatch.bind(Ei.deleteDbModalStore));var wi=Ei;function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ci(e);if(t){var o=Ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ri(this,n)}}function Ri(e,t){return!t||"object"!==Oi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ci(e){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ni(e,t)}(a,e);var t,n,r,o=Di(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"perPageChange",value:function(e){var t=parseInt(e.target.value,10);this.props.perPageChange(t)}},{key:"getOptions",value:function(){return _.map(this.props.options,(function(e){return ue.a.createElement("option",{value:e,key:e},e)}))}},{key:"render",value:function(){return ue.a.createElement("div",{id:"per-page"},ue.a.createElement("label",{htmlFor:"select-per-page",className:"drop-down inline"},this.props.label," ",ue.a.createElement("select",{id:"select-per-page",onChange:this.perPageChange.bind(this),value:this.props.perPage.toString(),className:"input-small"},this.getOptions())))}}])&&Si(t.prototype,n),r&&Si(t,r),a}(ue.a.Component);function Ti(e){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ki(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ii(e,t,n){return t&&xi(e.prototype,t),n&&xi(e,n),e}function Ai(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ji(e,t)}function ji(e,t){return(ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qi(e);if(t){var o=qi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mi(this,n)}}function Mi(e,t){return!t||"object"!==Ti(t)&&"function"!=typeof t?Ui(e):t}function Ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pi.defaultProps={label:"Documents per page: ",options:[5,10,20,30,50,100]},Pi.propTypes={perPage:Ct.a.number.isRequired,perPageChange:Ct.a.func.isRequired,label:Ct.a.string,options:Ct.a.array};var Vi=function(e){Ai(n,e);var t=Li(n);function n(){var e;ki(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Bi(Ui(e=t.call.apply(t,[this].concat(o))),"getClasses",(function(){var t={js:"lang-js"},n="prettyprint";return _.has(t,e.props.lang)&&(n+=" "+t[e.props.lang]),n})),e}return Ii(n,[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"render",value:function(){var e=JSON.stringify(this.props.code,null," ");return ue.a.createElement("div",null,ue.a.createElement("pre",{className:this.getClasses()},e))}}]),n}(ue.a.Component);Bi(Vi,"defaultProps",{lang:"js"});var Fi=function(e){Ai(n,e);var t=Li(n);function n(){var e;ki(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Bi(Ui(e=t.call.apply(t,[this].concat(o))),"getVisiblePages",(function(t,n){var r,o;if(n<e.props.maxNavPages)r=1,o=n+1;else{var a=Math.floor(e.props.maxNavPages/2);o=t+a,(r=t-a)<=1&&(r=1,o=e.props.maxNavPages+1),o>n+1&&(r=n-(e.props.maxNavPages-1),o=n+1)}return{from:r,to:o}})),Bi(Ui(e),"createItemsForPage",(function(t){return _.range(t.from,t.to).map((function(t){return ue.a.createElement("li",{key:t,className:e.props.page===t?"active":null},e.getLink(t,t))}))})),Bi(Ui(e),"getLink",(function(t,n){return e.props.onClick?ue.a.createElement("a",{onClick:e.getOnPageClick(t),dangerouslySetInnerHTML:{__html:n}}):ue.a.createElement("a",{href:e.props.urlPrefix+t+e.props.urlSuffix,dangerouslySetInnerHTML:{__html:n}})})),Bi(Ui(e),"getTotalPages",(function(){return 0===e.props.total?1:Math.ceil(e.props.total/e.props.perPage)})),e}return Ii(n,[{key:"getOnPageClick",value:function(e){var t=this;return function(n){n&&n.preventDefault(),t.props.onClick(e)}}},{key:"render",value:function(){var e=this.getTotalPages(),t=this.getVisiblePages(this.props.page,e),n=this.createItemsForPage(t),r=Math.max(this.props.page-1,1),o=Math.min(this.props.page+1,e);return ue.a.createElement("ul",{className:"pagination"},ue.a.createElement("li",{className:1===this.props.page?"disabled":null},this.getLink(r,"&laquo;")),n,ue.a.createElement("li",{className:this.props.page<e?null:"disabled"},this.getLink(o,"&raquo;")))}}]),n}(ue.a.Component);Bi(Fi,"defaultProps",{perPage:ae.constants.MISC.DEFAULT_PAGE_SIZE,onClick:null,page:1,total:0,urlPrefix:"",urlSuffix:"",maxNavPages:10});var Ki=function(e){Ai(n,e);var t=Li(n);function n(){var e;ki(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return Bi(Ui(e=t.call.apply(t,[this].concat(o))),"close",(function(t){t&&t.preventDefault(),e.props.onClose()})),e}return Ii(n,[{key:"render",value:function(){var e=ue.a.createElement("p",null,this.props.text);_.isString(this.props.text)||(e=this.props.text);var t="btn "+this.props.buttonClass,n=this.props.onClose?ue.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.close},"Cancel"):null,r=this.props.onSubmit?ue.a.createElement("button",{className:t,onClick:this.props.onSubmit},ue.a.createElement("i",{className:"fonticon-ok-circled"})," ",this.props.successButtonLabel):null;return ue.a.createElement(rn.f,{dialogClassName:"confirmation-modal",show:this.props.visible,onHide:this.close},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,this.props.title)),ue.a.createElement(rn.f.Body,null,e),ue.a.createElement(rn.f.Footer,null,n,r))}}]),n}(ue.a.Component);Bi(Ki,"propTypes",{visible:Ct.a.bool.isRequired,text:Ct.a.oneOfType([Ct.a.string,Ct.a.element]).isRequired,onClose:Ct.a.func.isRequired,onSubmit:Ct.a.func.isRequired}),Bi(Ki,"defaultProps",{visible:!1,title:"Please confirm",text:"",successButtonLabel:"Okay",buttonClass:"btn-primary"});var zi={CodeFormat:Vi,Pagination:Fi,ConfirmationModal:Ki};function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xi(e,t,n){return t&&Wi(e.prototype,t),n&&Wi(e,n),e}function Qi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=es(e);if(t){var o=es(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $i(this,n)}}function $i(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?Zi(e):t}function Zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function es(e){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ns=_t.databasesStore,rs=wi.deleteDbModalStore,os=vi.Accordion,as=vi.AccordionItem,is=vi.DeleteDatabaseModal,ss=vi.ToggleHeaderButton,cs=vi.TrayContents,us=function(e){Qi(n,e);var t=Yi(n);function n(e){var r;return Gi(this,n),ts(Zi(r=t.call(this,e)),"getStoreState",(function(){return{dbList:ns.getDbList(),loading:ns.isLoading(),showDeleteDatabaseModal:rs.getShowDeleteDatabaseModal(),showPartitionedColumn:ns.isPartitionedDatabasesAvailable(),page:ns.getPage(),limit:ns.getLimit()}})),ts(Zi(r),"onChange",(function(){r.setState(r.getStoreState())})),ts(Zi(r),"state",r.getStoreState()),r.reloadAfterDatabaseDeleted=r.reloadAfterDatabaseDeleted.bind(Zi(r)),r}return Xi(n,[{key:"componentDidMount",value:function(){ns.on("change",this.onChange,this),rs.on("change",this.onChange,this),this.loadData()}},{key:"componentDidUpdate",value:function(e,t){t.page===this.state.page&&t.limit===this.state.limit||this.loadData()}},{key:"loadData",value:function(){Dt.init({page:this.state.page,limit:this.state.limit})}},{key:"componentWillUnmount",value:function(){ns.off("change",this.onChange,this),rs.off("change",this.onChange,this)}},{key:"reloadAfterDatabaseDeleted",value:function(){var e=this.state.page;e>1&&1===this.state.dbList.length&&(e-=1),Dt.init({page:e,limit:this.state.limit})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.dbList;return ue.a.createElement(ls,{showDeleteDatabaseModal:this.state.showDeleteDatabaseModal,dbList:n,loading:t,showPartitionedColumn:this.state.showPartitionedColumn,onDatabaseDeleted:this.reloadAfterDatabaseDeleted})}}]),n}(ue.a.Component),ls=function(e){Qi(n,e);var t=Yi(n);function n(){var e;Gi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ts(Zi(e=t.call.apply(t,[this].concat(o))),"createRows",(function(t){return t.map((function(t,n){return ue.a.createElement(ps,{item:t,key:n,showPartitionedColumn:e.props.showPartitionedColumn})}))})),ts(Zi(e),"getExtensionColumns",(function(){var e=ae.getExtensions("DatabaseTable:head");return _.map(e,(function(e,t){return ue.a.createElement(e,{key:t})}))})),ts(Zi(e),"showDeleteDatabaseModal",(function(){rr.showDeleteDatabaseModal({showDeleteModal:!e.props.showDeleteDatabaseModal.showDeleteModal})})),e}return Xi(n,[{key:"render",value:function(){if(this.props.loading)return ue.a.createElement("div",{className:"view"},ue.a.createElement(vi.LoadLines,null));var e=this.createRows(this.props.dbList);return ue.a.createElement("div",{className:"view"},ue.a.createElement(is,{showHide:this.showDeleteDatabaseModal,modalProps:this.props.showDeleteDatabaseModal,onSuccess:this.props.onDatabaseDeleted}),ue.a.createElement("table",{className:"table table-striped fauxton-table-list databases"},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",null,"Name"),ue.a.createElement("th",null,"Size"),ue.a.createElement("th",null,"# of Docs"),this.props.showPartitionedColumn?ue.a.createElement("th",null,"Partitioned"):null,this.getExtensionColumns(),ue.a.createElement("th",null,"Actions"))),ue.a.createElement("tbody",null,e)))}}]),n}(ue.a.Component);ts(ls,"propTypes",{dbList:Ct.a.array.isRequired,showDeleteDatabaseModal:Ct.a.object.isRequired,loading:Ct.a.bool.isRequired,showPartitionedColumn:Ct.a.bool.isRequired,onDatabaseDeleted:Ct.a.func});var ps=function(e){Qi(n,e);var t=Yi(n);function n(){var e;Gi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ts(Zi(e=t.call.apply(t,[this].concat(o))),"getExtensionColumns",(function(e){var t=ae.getExtensions("DatabaseTable:databaseRow");return _.map(t,(function(t,n){return ue.a.createElement(t,{row:e,key:n})}))})),ts(Zi(e),"showDeleteDatabaseModal",(function(e){rr.showDeleteDatabaseModal({showDeleteModal:!0,dbId:e})})),e}return Xi(n,[{key:"render",value:function(){var e=this.props.item,t=e.encodedId,n=e.id,r=e.url,o=e.dataSize,a=e.docCount,i=e.docDelCount,s=e.showTombstoneWarning,c=e.failed,u=e.isPartitioned,l=s?ue.a.createElement(fs,{docCount:a,docDelCount:i}):null;if(c)return ue.a.createElement("tr",null,ue.a.createElement("td",{"data-name":"database-load-fail-name"},n),ue.a.createElement("td",{colSpan:"4",className:"database-load-fail"},"This database failed to load."));var p=this.props.showPartitionedColumn?ue.a.createElement("td",null,u?"Yes":"No"):null;return ue.a.createElement("tr",null,ue.a.createElement("td",null,ue.a.createElement("a",{href:r},n)),ue.a.createElement("td",null,o),ue.a.createElement("td",null,a," ",l),p,this.getExtensionColumns(e),ue.a.createElement("td",{className:"database-actions"},ue.a.createElement("a",{className:"db-actions btn fonticon-replicate set-replication-start","aria-label":"Replicate ".concat(n),title:"Replicate "+name,href:"#/replication/_create/"+t}),ue.a.createElement("a",{"aria-label":"Set permissions for ".concat(n),className:"db-actions btn icon-lock set-permissions",title:"Set permissions for "+name,href:"#/database/"+t+"/permissions"}),ue.a.createElement("a",{"aria-label":"Delete ".concat(n),className:"db-actions btn icon-trash",onClick:this.showDeleteDatabaseModal.bind(this,n,t),title:"Delete "+n,"data-bypass":"true"})))}}]),n}(ue.a.Component);ts(ps,"propTypes",{item:Ct.a.shape({id:Ct.a.string.isRequired,encodedId:Ct.a.string.isRequired,url:Ct.a.string.isRequired,failed:Ct.a.bool.isRequired,dataSize:Ct.a.string,docCount:Ct.a.number,docDelCount:Ct.a.number,isPartitioned:Ct.a.bool,showTombstoneWarning:Ct.a.bool}).isRequired,showPartitionedColumn:Ct.a.bool.isRequired});var fs=function(e){var t=e.docCount,n=e.docDelCount,r="This database has just ".concat(t," docs and ").concat(n," deleted docs"),o=ue.a.createElement(rn.k,{id:"graveyard-tooltip"},r);return ue.a.createElement(rn.h,{placement:"top",overlay:o},ue.a.createElement("i",{className:"js-db-graveyard icon icon-exclamation-sign",title:r}))},ds=function(e){Qi(n,e);var t=Yi(n);function n(e){var r;return Gi(this,n),(r=t.call(this,e)).state=r.getStoreState(),r}return Xi(n,[{key:"getStoreState",value:function(){return{showPartitionedOption:ns.isPartitionedDatabasesAvailable()}}},{key:"componentDidMount",value:function(){ns.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){ns.off("change",this.onChange,this)}},{key:"onChange",value:function(){this.setState(this.getStoreState())}},{key:"render",value:function(){return ue.a.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ue.a.createElement(ms,{loadOptions:Dt.fetchAllDbsWithKey}),ue.a.createElement(hs,{showPartitionedOption:this.state.showPartitionedOption,partitionedDbHelpText:this.props.partitionedDbHelpText}))}}]),n}(ue.a.Component),hs=function(e){Qi(n,e);var t=Yi(n);function n(e){var r;return Gi(this,n),(r=t.call(this,e)).state={isPromptVisible:!1,databaseName:"",partitionedSelected:void 0},r.onTrayToggle=r.onTrayToggle.bind(Zi(r)),r.closeTray=r.closeTray.bind(Zi(r)),r.focusInput=r.focusInput.bind(Zi(r)),r.onKeyUpInInput=r.onKeyUpInInput.bind(Zi(r)),r.onChange=r.onChange.bind(Zi(r)),r.onAddDatabase=r.onAddDatabase.bind(Zi(r)),r.onTogglePartitioned=r.onTogglePartitioned.bind(Zi(r)),r}return Xi(n,[{key:"getI18nText",value:function(e){return this.props.i18n?this.props.i18n[e]:""}},{key:"onTrayToggle",value:function(){this.setState({isPromptVisible:!this.state.isPromptVisible})}},{key:"closeTray",value:function(){this.setState({isPromptVisible:!1})}},{key:"focusInput",value:function(){this.newDbName.focus()}},{key:"onKeyUpInInput",value:function(e){13===e.which&&this.onAddDatabase()}},{key:"onChange",value:function(e){this.setState({databaseName:e.target.value})}},{key:"onAddDatabase",value:function(){var e=this.props.showPartitionedOption?this.state.partitionedSelected:void 0;Dt.createNewDatabase(this.state.databaseName,e)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedOption",value:function(){if(!this.props.showPartitionedOption)return null;var e=this.props.partitionedDbHelpText?ue.a.createElement(os,{className:"partitioned-db-help"},ue.a.createElement(as,{title:"What is a Partitioned Database?"},ue.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.partitionedDbHelpText}}))):null;return ue.a.createElement("div",{className:"partitioned-db-section"},ue.a.createElement("label",{htmlFor:"partitioned-db",className:"partitioned-db-label"},"Partitioning"),ue.a.createElement("div",{className:"partitioned-db-options"},ue.a.createElement("input",{id:"partitioned-db",type:"checkbox",checked:!0===this.state.partitionedSelected,onChange:this.onTogglePartitioned}),ue.a.createElement("label",{htmlFor:"partitioned-db"},"Partitioned")),e)}},{key:"render",value:function(){var e=this,t=nn()("new-database-tray",{"new-database-tray--expanded":this.props.showPartitionedOption});return ue.a.createElement("div",null,ue.a.createElement(ss,{selected:this.state.isPromptVisible,toggleCallback:this.onTrayToggle,containerClasses:"header-control-box add-new-database-btn",title:"Create Database",fonticon:"fonticon-new-database",text:"Create Database"}),ue.a.createElement(cs,{className:t,contentVisible:this.state.isPromptVisible,closeTray:this.closeTray,onEnter:this.focusInput},ue.a.createElement("div",{className:"tray-contents"},ue.a.createElement("div",{className:"tray-header"},ue.a.createElement("h3",null,"Create Database")),ue.a.createElement("div",{className:"tray-body"},ue.a.createElement("label",{htmlFor:"js-new-database-name",className:"db-name-label"},"Database name"),ue.a.createElement("input",{id:"js-new-database-name",ref:function(t){return e.newDbName=t},type:"text",value:this.state.databaseName,onChange:this.onChange,onKeyUp:this.onKeyUpInInput,className:"input-xxlarge",placeholder:"database-name"}),this.partitionedOption()),ue.a.createElement("div",{className:"tray-footer"},ue.a.createElement("a",{className:"btn btn-cancel",id:"js-cancel-create-database",onClick:this.closeTray},"Cancel"),ue.a.createElement("a",{className:"btn btn-primary",id:"js-create-database",onClick:this.onAddDatabase},"Create")))))}}]),n}(ue.a.Component);ts(hs,"defaultProps",{showPartitionedOption:!1}),ts(hs,"propTypes",{showPartitionedOption:Ct.a.bool.isRequired,partitionedDbHelpText:Ct.a.string});var ms=function(e){var t=e.loadOptions;return ue.a.createElement("div",{"data-name":"jump-to-db",className:"faux-header__searchboxwrapper"},ue.a.createElement("div",{className:"faux-header__searchboxcontainer"},ue.a.createElement(vi.ThrottledReactSelectAsync,{placeholder:"Database name",loadOptions:t,clearable:!1,onChange:function(e){var t=e.value;Dt.jumpToDatabase(t)}})))};ms.propTypes={loadOptions:Ct.a.func.isRequired};var ys=function(e){Qi(n,e);var t=Yi(n);function n(){var e;Gi(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return ts(Zi(e=t.call.apply(t,[this].concat(o))),"getStoreState",(function(e){var t=e.store;return{totalAmountOfDatabases:t.getTotalAmountOfDatabases(),page:t.getPage(),limit:t.getLimit()}})),ts(Zi(e),"onChange",(function(){e.setState(e.getStoreState(e.props))})),ts(Zi(e),"state",e.getStoreState(e.props)),e}return Xi(n,[{key:"componentDidMount",value:function(){this.props.store.on("change",this.onChange,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getStoreState(e)),this.props.store&&this.props.store.off("change",this.onChange,this),e.store.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){this.props.store.off("change",this.onChange,this)}},{key:"onPageLinkClick",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(e,"&limit=").concat(this.state.limit);ae.navigate(t)}},{key:"onPerPageSelected",value:function(e){var t="#/".concat(this.props.linkPath,"?page=").concat(this.state.page,"&limit=").concat(e);ae.navigate(t)}},{key:"render",value:function(){var e=this.state,t=e.limit,n=e.page,r=e.totalAmountOfDatabases,o=1+(n-1)*t,a=Math.min(r,n*t);return ue.a.createElement("footer",{className:"all-db-footer pagination-footer"},ue.a.createElement("div",{id:"database-pagination"},ue.a.createElement(zi.Pagination,{page:n,total:r,perPage:t,onClick:this.onPageLinkClick.bind(this)})),ue.a.createElement(Pi,{label:"Databases per page",perPage:t,perPageChange:this.onPerPageSelected.bind(this)}),ue.a.createElement("div",{className:"current-databases"},"Showing ",ue.a.createElement("span",{className:"all-db-footer__range"},o,"",a),"of",ue.a.createElement("span",{className:"all-db-footer__total-db-count"},r),"databases."))}}]),n}(ue.a.Component);ts(ys,"defaultProps",{linkPath:"_all_dbs",store:ns});var bs={DatabasesController:us,DatabaseTable:ls,DatabaseRow:ps,RightDatabasesHeader:ds,GraveyardInfo:fs,AddDatabaseWidget:hs,JumpToDatabaseWidget:ms,DatabasePagination:ys},gs=bs.RightDatabasesHeader,_s=bs.DatabasesController,vs=bs.DatabasePagination,Es=function(){return ue.a.createElement(Xt,null,ue.a.createElement(Qt,{crumbs:[{name:"Databases"}],endpoint:ae.urls("allDBs","apiurl"),docURL:ae.constants.DOC_URLS.ALL_DBS},ue.a.createElement(gs,{partitionedDbHelpText:se.i18n.en_US["create-db-partitioned-help"]})),ue.a.createElement(Jt,null,ue.a.createElement(_s,null)),ue.a.createElement(Yt,null,ue.a.createElement(vs,null)))},ws=ae.RouteObject.extend({hideApiBar:!0,hideNotificationCenter:!0,routes:{"":"allDatabases","index.html":"allDatabases","_all_dbs(:extra)":"allDatabases"},roles:["fx_loggedIn"],selectedHeader:"Databases",allDatabases:function(e,t){var n=this.createParams(t),r=n.page,o=n.limit;return Dt.setPage(r),o&&Dt.setLimit(o),ue.a.createElement(Es,null)},createParams:function(e){var t=1,n=void 0;if(e){var r=se.getParams(e);isFinite(parseInt(r.page))&&(t=parseInt(r.page)),isFinite(parseInt(r.limit))&&(n=parseInt(r.limit))}return{page:t,limit:n}}});ht.RouteObjects=[ws];var Os=ht;function Ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(n),!0).forEach((function(t){Ds(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ds(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rs={partitionedDatabasesAvailable:!1,isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1};function Cs(e){return!(!e||!e.props||!0!==e.props.partitioned)}n(437);function Ps(e){return e?"/_partition/".concat(e):""}Os.initialize=function(){ae.addHeaderLink({href:"#/_all_dbs",title:"Databases",icon:"fonticon-database",className:"databases"}),Dt.checkPartitionedQueriesIsAvailable()},Os.PARTITONED_DB_CHECK_EXTENSION="Databases:PartitionedDbCheck",ae.registerExtension(Os.PARTITONED_DB_CHECK_EXTENSION,(function(){return E(R.getServerUrl("/")).then((function(e){return!(!e.features||-1===e.features.indexOf("partitioned"))||!(!e.features_flags||-1===e.features_flags.indexOf("partitioned"))})).catch((function(){return!1}))})),ae.addReducers({databases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:return Ns(Ns({},e),{},{partitionedDatabasesAvailable:t.options.available});case at:return Ns(Ns({},e),{},{isLoadingDbInfo:!0,dbInfo:void 0,isDbPartitioned:!1});case it:return Ns(Ns({},e),{},{isLoadingDbInfo:!1,dbInfo:t.options.metadata,isDbPartitioned:Cs(t.options.metadata)});default:return e}}}),Os.databaseUrl=function(e){var t=_.isObject(e)?e.id:e;return["/database/",se.utils.safeURLName(t),"/_all_docs?limit="+Os.DocLimit].join("")},ae.registerUrls("changes",{server:function(e,t){return R.getServerUrl("/"+e+"/_changes"+t)},app:function(e,t,n){return"/database/"+e+Ps(t)+"/_changes"+n},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_changes"+t)}}),ae.registerUrls("allDBs",{server:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return R.getServerUrl("/_all_dbs".concat(e))},app:function(){return"_all_dbs"},apiurl:function(){return R.getApiUrl("/_all_dbs")}}),ae.registerUrls("databaseBaseURL",{server:function(e){return R.getServerUrl("/"+se.utils.safeURLName(e))},apiurl:function(e){return R.getApiUrl("/"+se.utils.safeURLName(e))},app:function(e){return"/database/"+e}}),ae.registerUrls("permissions",{server:function(e){return R.getServerUrl("/"+e+"/_security")},app:function(e,t){return"/database/"+e+Ps(t)+"/permissions"},apiurl:function(e){return R.getApiUrl("/"+e+"/_security")}});var Ts=Os,ks="SIDEBAR_EXPAND_SELECTED_ITEM",xs="SIDEBAR_NEW_OPTIONS",Is="SIDEBAR_TOGGLE_CONTENT",As="SIDEBAR_FETCHING",js="SIDEBAR_SHOW_DELETE_INDEX_MODAL",Ls="SIDEBAR_HIDE_DELETE_INDEX_MODAL",Ms="SIDEBAR_SHOW_CLONE_INDEX_MODAL",Us="SIDEBAR_HIDE_CLONE_INDEX_MODAL",qs="SIDEBAR_CLONE_MODAL_DESIGN_DOC_CHANGE",Bs="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_NAME_UPDATED",Vs="SIDEBAR_CLONE_MODAL_DESIGN_DOC_NEW_PARTITIONED_UPDATED",Fs="SIDEBAR_CLONE_MODAL_UPDATE_INDEX_NAME",Ks="SIDEBAR_UPDATED_DESIGN_DOCS",zs=function(e){var t,n;e.database.safeID()!==(t=ae.reduxState(),!(n=t.sidebar)||n.loading?"":n.database.safeID())&&ae.reduxDispatch({type:As}),e.designDocs.fetch().then((function(){ae.reduxDispatch({type:xs,options:e})}),(function(t){var n="Unable to update the sidebar.";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist."),ae.navigate("/",{trigger:!0})}ae.addNotification({msg:n,type:"error",clear:!0})}))},Hs=function(e){ae.reduxDispatch({type:As}),e.fetch().then((function(){ae.reduxDispatch({type:Ks,options:{designDocs:e}})}))},Gs=function(e,t){return function(n){n({type:Is,designDoc:e,indexGroup:t})}},Ws=function(e,t,n,r){return function(o){o({type:js,options:{indexName:e,indexLabel:n,designDocName:t,onDelete:r}})}},Xs=function(){return function(e){e({type:Ls})}},Qs=function(){ae.reduxDispatch({type:Ls})},Js=function(e,t,n,r){return function(o){o({type:Ms,options:{sourceIndexName:e,sourceDesignDocName:t,onSubmit:r,indexLabel:n,cloneIndexModalTitle:"Clone "+n}})}},Ys=function(){return function(e){e({type:Us})}},$s=function(e){return function(t){t({type:Bs,options:{value:e}})}},Zs=function(e){return function(t){t({type:Vs,options:{value:e}})}},ec=function(e){return function(t){t({type:qs,options:{value:e}})}},tc=function(e){return function(t){t({type:Fs,options:{value:e}})}},nc=function(e){ae.reduxDispatch({type:ks,options:{selectedNavItem:e}})},rc=ae.RouteObject.extend({selectedHeader:"Databases",createDesignDocsCollection:function(){this.designDocs=new pt.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}})},addSidebar:function(e){var t={designDocs:this.designDocs,database:this.database};e&&(t.selectedNavItem=e),zs(t)},getCrumbs:function(e){return[{type:"back",link:ae.urls("allDBs","app")},{name:e.id}]},createParams:function(e){var t=se.getParams(e);return{urlParams:t,docParams:pt.QueryParams.parse(t)}}});var oc=function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.navItem=t,n){var r=n.designDocName,o=n.designDocSection,a=n.indexName;this.designDocName=r||"",this.designDocSection=o||"",this.indexName=a||""}};function ac(e){return(ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sc(e,t){return(sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pc(e);if(t){var o=pc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return uc(this,n)}}function uc(e,t){return!t||"object"!==ac(t)&&"function"!=typeof t?lc(e):t}function lc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pc(e){return(pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fc=vi.StyledSelect,dc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sc(e,t)}(a,e);var t,n,r,o=cc(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).onTogglePartitioned=t.onTogglePartitioned.bind(lc(t)),t}return t=a,(n=[{key:"validate",value:function(){return"new-doc"!==this.props.selectedDesignDocName||""!==this.props.newDesignDocName||(ae.addNotification({msg:"Please name your design doc.",type:"error"}),this.newDesignDocInput.focus(),!1)}},{key:"getDocList",value:function(){return this.props.designDocList?this.props.designDocList.map((function(e){return ue.a.createElement("option",{key:e,value:e},e)})):[]}},{key:"selectDesignDoc",value:function(e){this.props.onSelectDesignDoc(e.target.value)}},{key:"updateDesignDocName",value:function(e){this.props.onChangeNewDesignDocName(e.target.value)}},{key:"getNewDDocField",value:function(){var e=this;if("new-doc"===this.props.selectedDesignDocName)return ue.a.createElement("div",{id:"new-ddoc-section",className:"span5"},ue.a.createElement("label",{className:"control-label",htmlFor:"new-ddoc"},"_design/"),ue.a.createElement("div",{className:"controls"},ue.a.createElement("input",{type:"text",id:"new-ddoc",placeholder:"newDesignDoc",ref:function(t){e.newDesignDocInput=t},onChange:this.updateDesignDocName.bind(this)})))}},{key:"getDocLink",value:function(){return this.props.docLink?ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:this.props.docLink,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"})):null}},{key:"onTogglePartitioned",value:function(){this.props.onChangeNewDesignDocPartitioned(!this.props.newDesignDocPartitioned)}},{key:"getPartitionedCheckbox",value:function(){if(!this.props.isDbPartitioned)return null;var e="new-doc"!==this.props.selectedDesignDocName,t=e?this.props.selectedDesignDocPartitioned:this.props.newDesignDocPartitioned,n=e?"check--disabled":"",r=e?this.props.selectedDesignDocPartitioned?"Design document is partitioned":"Design document is not partitioned":this.props.newDesignDocPartitioned?"New document will be partitioned":"New document will not be partitioned";return ue.a.createElement("div",{className:"ddoc-selector-partitioned"},ue.a.createElement("label",{className:n,title:r},ue.a.createElement("input",{id:"js-ddoc-selector-partitioned",type:"checkbox",title:r,checked:t,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"},disabled:e}),"Partitioned"))}},{key:"render",value:function(){var e=ue.a.createElement("optgroup",{label:"Select a document"},ue.a.createElement("option",{value:"new-doc"},"New document"),this.getDocList());return ue.a.createElement("div",{className:"design-doc-group control-group"},ue.a.createElement("div",{className:"span3"},ue.a.createElement("label",{htmlFor:"ddoc"},this.props.designDocLabel,this.getDocLink()),ue.a.createElement(fc,{selectChange:this.selectDesignDoc.bind(this),selectValue:this.props.selectedDesignDocName,selectId:"faux__edit-view__design-doc",selectContent:e})),this.getNewDDocField(),this.getPartitionedCheckbox())}}])&&ic(t.prototype,n),r&&ic(t,r),a}(ce.Component);function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yc(e,t){return(yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_c(e);if(t){var o=_c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gc(this,n)}}function gc(e,t){return!t||"object"!==hc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _c(e){return(_c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}dc.defaultProps={designDocLabel:"Design Document",selectedDesignDocName:"",newDesignDocName:""},dc.propTypes={designDocList:Ct.a.array.isRequired,onSelectDesignDoc:Ct.a.func.isRequired,onChangeNewDesignDocName:Ct.a.func.isRequired,selectedDesignDocName:Ct.a.string.isRequired,selectedDesignDocPartitioned:Ct.a.bool.isRequired,newDesignDocName:Ct.a.string.isRequired,newDesignDocPartitioned:Ct.a.bool.isRequired,designDocLabel:Ct.a.string,docURL:Ct.a.string};var vc=se.helpers.getDocUrl,Ec=vi.CodeEditorPanel,wc=vi.StyledSelect,Oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yc(e,t)}(a,e);var t,n,r,o=bc(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"getOptionsList",value:function(){return this.props.reduceOptions.map((function(e,t){return ue.a.createElement("option",{key:t,value:e},e)}))}},{key:"getReduceValue",value:function(){return this.props.hasReduce?this.props.hasCustomReduce?this.reduceEditor.getValue():this.props.reduce:null}},{key:"getEditor",value:function(){return this.reduceEditor.getEditor()}},{key:"updateReduceCode",value:function(e){this.props.updateReduceCode(e)}},{key:"selectChange",value:function(e){this.props.selectReduceChanged(e.target.value)}},{key:"render",value:function(){var e,t=this,n=this.getOptionsList();return this.props.hasCustomReduce&&this.props.customReducerSupported?e=ue.a.createElement(Ec,{ref:function(e){return t.reduceEditor=e},id:"reduce-function",title:"Custom Reduce function",defaultCode:this.props.reduce,allowZenMode:!1,blur:this.updateReduceCode.bind(this)}):this.props.customReducerSupported||(e=ue.a.createElement("div",{className:"reduce-editor-warning"},ue.a.createElement("label",null,"Partitioned views do not support custom reduce functions."))),ue.a.createElement("div",null,ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"reduce-function-selector"},ue.a.createElement("span",null,"Reduce (optional)"),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:vc("REDUCE_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))),ue.a.createElement(wc,{selectContent:n,selectChange:this.selectChange.bind(this),selectId:"reduce-function-selector",selectValue:this.props.reduceSelectedOption})),e)}}])&&mc(t.prototype,n),r&&mc(t,r),a}(ce.Component);function Sc(e){return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nc(){return(Nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rc(e,t){return(Rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kc(e);if(t){var o=kc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pc(this,n)}}function Pc(e,t){return!t||"object"!==Sc(t)&&"function"!=typeof t?Tc(e):t}function Tc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kc(e){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Oc.defaultProps={customReducerSupported:!0},Oc.propTypes={reduceOptions:Ct.a.array.isRequired,hasReduce:Ct.a.bool.isRequired,hasCustomReduce:Ct.a.bool.isRequired,customReducerSupported:Ct.a.bool,reduce:Ct.a.string,reduceSelectedOption:Ct.a.string.isRequired,updateReduceCode:Ct.a.func.isRequired,selectReduceChanged:Ct.a.func.isRequired};var xc=se.helpers.getDocUrl,Ic=vi.CodeEditorPanel,Ac=vi.ConfirmButton,jc=vi.LoadLines,Lc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rc(e,t)}(a,e);var t,n,r,o=Cc(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).saveView=t.saveView.bind(Tc(t)),t.viewChange=t.viewChange.bind(Tc(t)),t.updateMapCode=t.updateMapCode.bind(Tc(t)),t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){this.props.map!==e.map&&this.mapEditor&&this.mapEditor.update()}},{key:"isPartitionedView",value:function(){return"new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned}},{key:"isCustomReduceSupported",value:function(){return!(this.props.isDbPartitioned&&this.props.reduce&&!this.props.reduce.startsWith("_")&&("new-doc"===this.props.designDocId?this.props.newDesignDocPartitioned:this.props.designDocPartitioned))}},{key:"saveView",value:function(e){if(e.preventDefault(),this.designDocSelector.validate())if(this.isCustomReduceSupported()){var t=this.isPartitionedView()&&this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n=ae.urls("view","showView",this.props.database.safeID(),t,this.props.saveDesignDoc.safeID(),encodeURIComponent(this.props.viewName));this.props.saveView({database:this.props.database,isNewView:this.props.isNewView,viewName:this.props.viewName,designDoc:this.props.saveDesignDoc,designDocId:this.props.designDocId,isNewDesignDoc:this.props.isNewDesignDoc,originalViewName:this.props.originalViewName,originalDesignDocName:this.props.originalDesignDocName,map:this.mapEditor.getValue(),reduce:this.reduceEditor.getReduceValue(),designDocs:this.props.designDocs},n)}else ae.addNotification({msg:"Partitioned views do not support custom reduce functions.",type:"error",clear:!0})}},{key:"viewChange",value:function(e){this.props.changeViewName(e.target.value)}},{key:"updateMapCode",value:function(e){this.props.updateMapCode(e)}},{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if("new-doc"===this.props.designDocId||this.props.isNewView)return"#"+ae.urls("allDocs","app",e,t);var n=se.utils.getSafeIdForDoc(this.props.designDocId),r=encodeURIComponent(this.props.viewName);return"#"+ae.urls("view","showView",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ue.a.createElement("div",{className:"define-view"},ue.a.createElement(jc,null));var t=this.props.isNewView?"New View":"Edit View",n=this.props.isNewView?"Create Document and then Build Index":"Save Document and then Build Index";return ue.a.createElement("div",{className:"define-view"},ue.a.createElement("form",{className:"form-horizontal view-query-save",onSubmit:this.saveView},ue.a.createElement("h3",{className:"simple-header"},t),ue.a.createElement("div",{className:"new-ddoc-section"},ue.a.createElement(dc,{ref:function(t){e.designDocSelector=t},designDocList:this.props.designDocList,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.designDocId,selectedDesignDocPartitioned:this.props.designDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:xc("DESIGN_DOCS")})),ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"index-name"},ue.a.createElement("span",null,"Index name"),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:xc("VIEW_FUNCS"),target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))),ue.a.createElement("input",{type:"text",id:"index-name",value:this.props.viewName,onChange:this.viewChange,placeholder:"Index name"})),ue.a.createElement(Ic,{id:"map-function",ref:function(t){e.mapEditor=t},title:"Map function",docLink:xc("MAP_FUNCS"),blur:this.updateMapCode,allowZenMode:!1,defaultCode:this.props.map}),ue.a.createElement(Oc,Nc({ref:function(t){e.reduceEditor=t},customReducerSupported:this.isCustomReduceSupported()},this.props)),ue.a.createElement("div",{className:"padded-box"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement(Ac,{id:"save-view",text:n}),ue.a.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))))}}])&&Dc(t.prototype,n),r&&Dc(t,r),a}(ce.Component);Lc.propTypes={isLoading:Ct.a.bool.isRequired,isNewView:Ct.a.bool.isRequired,database:Ct.a.object.isRequired,isDbPartitioned:Ct.a.bool.isRequired,designDocId:Ct.a.string.isRequired,newDesignDocName:Ct.a.string.isRequired,viewName:Ct.a.string.isRequired,isNewDesignDoc:Ct.a.bool.isRequired,originalViewName:Ct.a.string,originalDesignDocName:Ct.a.string,designDocs:Ct.a.object,saveDesignDoc:Ct.a.object,partitionKey:Ct.a.string,updateNewDesignDocName:Ct.a.func.isRequired,changeViewName:Ct.a.func.isRequired,updateMapCode:Ct.a.func.isRequired};var Mc="CLEAR_INDEX",Uc="EDIT_INDEX",qc="EDIT_NEW_INDEX",Bc="SELECT_REDUCE_CHANGE",Vc="VIEW_SAVED",Fc="VIEW_CREATED",Kc="DESIGN_DOC_CHANGE",zc="DESIGN_DOC_NEW_NAME_UPDATED",Hc="DESIGN_DOC_NEW_PARTITIONED_UPDATED",Gc="VIEW_NAME_CHANGE",Wc="VIEW_ADD_DESIGN_DOC",Xc="VIEW_UPDATE_MAP_CODE",Qc="VIEW_UPDATE_REDUCE_CODE",Jc=function(e){return function(t){t({type:Uc,options:e})}},Yc=function(e){return!e.isNewView&&e.originalDesignDocName===e.designDocId&&e.originalViewName!==e.viewName},$c=function(e){return function(t){t({type:Wc,designDoc:e.toJSON()})}},Zc=function(e,t,n,r,o){var a=_.extend({onSuccess:function(){},onError:function(e){var t=JSON.parse(e.responseText).reason;ae.addNotification({msg:"Delete failed: "+t,type:"error",clear:!0})}},o),i=e.get(n)||{};delete i[r];var s={};s[n]=i,e.set(s);var c,u=ae.getIndexTypePropNames(),l=_.some(u,(function(t){return e.get(t)&&_.keys(e.get(t)).length>0})),p=!1;return l?c=e.save():(c=e.destroy(),p=!0),c.then((function(){p&&t.remove(e.id),a.onSuccess()}),a.onError)},eu=function(e,t){return e.find((function(e){return e.id===t})).dDocModel()},tu=function(e,t,n,r,o,a){if("new-doc"===t){var i={_id:"_design/"+n,views:{},language:"javascript"},s=new ft.Doc(i,{database:o});return a&&s.setDDocPartitionedOption(r),s}var c=e.find((function(e){return e.id===t}));return c?c.dDocModel():null},nu={helpers:{findDesignDoc:eu,getDesignDoc:tu},safeDeleteIndex:Zc,selectReduceChanged:function(e){return function(t){t({type:Bc,reduceSelectedOption:e})}},changeViewName:function(e){return function(t){t({type:Gc,name:e})}},editIndex:Jc,dispatchClearIndex:function(){ae.reduxDispatch({type:Mc})},dispatchFetchDesignDocsBeforeEdit:function(e){e.designDocs.fetch({reset:!0}).then((function(){Jc(e)(ae.reduxDispatch)}),(function(t){var n="Error";if(t.responseJSON&&"not_found"===t.responseJSON.error){var r=e.designDocs.database.safeID();n="The ".concat(r," database does not exist"),ae.navigate("/",{trigger:!0})}ae.addNotification({msg:n,type:"error",clear:!0})}))},shouldRemoveDdocView:Yc,saveView:function(e,t){return function(n){var r=e.designDoc;r.setDdocView(e.viewName,e.map,e.reduce),ae.addNotification({msg:"Saving View...",type:"info",clear:!0}),Yc(e)&&r.removeDdocView(e.originalViewName),r.save().then((function(){if(ae.addNotification({msg:"View Saved.",type:"success",clear:!0}),!e.isNewView&&e.originalDesignDocName!==e.designDocId){var o=eu(e.designDocs,e.originalDesignDocName);Zc(o,e.designDocs,"views",e.originalViewName,{onSuccess:function(){Hs(e.designDocs)}})}"new-doc"===e.designDocId&&$c(r),Hs(e.designDocs),n({type:Vc}),ae.navigate(t,{trigger:!0})}),(function(e){ae.addNotification({msg:"Save failed. "+(e.responseJSON?"Reason: ".concat(e.responseJSON.reason):""),type:"error",clear:!0})}))}},addDesignDoc:$c,deleteView:function(e){return Zc(e.designDoc,e.designDocs,"views",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=ae.urls("allDocs","app",e.database.safeID());ae.navigate(t)}Hs(e.designDocs),ae.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> view has been deleted.",type:"info",escape:!1,clear:!0}),Qs()}})},cloneView:function(e){var t=tu(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.newDesignDocPartitioned,e.database,e.isDbPartitioned),n=t.get("views");if(n&&_.has(n,e.newIndexName))ae.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=eu(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.views[e.sourceIndexName],t.set({views:n}),t.save().then((function(){e.onComplete(),ae.addNotification({msg:"The index has been cloned.",type:"success",clear:!0}),Hs(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;ae.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},gotoEditViewPage:function(e,t,n,r){ae.navigate("#"+ae.urls("view","edit",encodeURIComponent(e),t?encodeURIComponent(t):"",encodeURIComponent(n),encodeURIComponent(r)))},updateMapCode:function(e){return function(t){t({type:Xc,code:e})}},updateReduceCode:function(e){return function(t){t({type:Qc,code:e})}},selectDesignDoc:function(e){return function(t){t({type:Kc,options:{value:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:zc,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:Hc,options:{value:e}})}}};function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(n),!0).forEach((function(t){au(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function au(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iu="function (doc) {\n  emit(doc._id, 1);\n}",su="function (keys, values, rereduce) {\n  if (rereduce) {\n    return sum(values);\n  } else {\n    return values.length;\n  }\n}",cu=["_sum","_count","_stats","_approx_count_distinct"],uu=cu.concat(["CUSTOM","NONE"]),lu={designDocs:new Backbone.Collection,isLoading:!0,view:{reduce:"",map:iu},database:{id:"0"},designDocId:"",isNewDesignDoc:!1,newDesignDocName:"",newDesignDocPartitioned:!0,isNewView:!1,viewName:"",originalViewName:"",originalDesignDocName:"",reduceOptions:uu};function pu(e,t){var n=ou(ou({},e),{},{isLoading:!1,newDesignDocName:"",isNewView:t.isNewView,viewName:t.viewName||"viewName",isNewDesignDoc:t.isNewDesignDoc||!1,designDocs:t.designDocs,designDocId:t.designDocId,originalDesignDocName:t.designDocId,database:t.database});return n.originalViewName=n.viewName,n.view=function(e){if(e.isNewView||e.isNewDesignDoc)return{reduce:"",map:iu};return e.designDocs.find((function(t){return e.designDocId==t.id})).dDocModel().get("views")[e.viewName]}(n),n}function fu(e){return e.view.reduce?du(e)?"CUSTOM":e.view.reduce:"NONE"}function du(e){return!!e.view.reduce&&!(-1!==cu.indexOf(e.view.reduce))}function hu(e,t){if("new-doc"===e.designDocId){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new ft.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}if(!e.designDocs)return null;var o=e.designDocs.find((function(t){return t.id===e.designDocId}));return o?o.dDocModel():null}function mu(e){return e.designDocs?e.designDocs.filter((function(e){return!e.isMangoDoc()})).map((function(e){return e.id})):[]}var yu={IndexEditorContainer:Object(Pt.b)((function(e,t){var n,r,o,a=e.indexEditor,i=e.databases,s=(n=a,r=i.isDbPartitioned,!!(o=n.designDocs.find((function(e){return n.designDocId===e.id})))&&sr.isDDocPartitioned(o.get("doc"),r));return{database:a.database,isNewView:a.isNewView,viewName:a.viewName,designDocs:a.designDocs,designDocList:mu(a),originalViewName:a.originalViewName,originalDesignDocName:a.originalDesignDocName,isNewDesignDoc:a.isNewDesignDoc,designDocId:a.designDocId,designDocPartitioned:s,newDesignDocName:a.newDesignDocName,newDesignDocPartitioned:a.newDesignDocPartitioned,saveDesignDoc:hu(a,i.isDbPartitioned),map:a.view.map,isLoading:a.isLoading,reduce:a.view.reduce,reduceOptions:a.reduceOptions,reduceSelectedOption:fu(a),hasCustomReduce:du(a),hasReduce:!!a.view.reduce,isDbPartitioned:i.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{saveView:function(t,n){e(nu.saveView(t,n))},changeViewName:function(t){e(nu.changeViewName(t))},updateMapCode:function(t){e(nu.updateMapCode(t))},selectDesignDoc:function(t){e(nu.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(nu.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(nu.updateNewDesignDocPartitioned(t))},updateReduceCode:function(t){e(nu.updateReduceCode(t))},selectReduceChanged:function(t){e(nu.selectReduceChanged(t))}}}))(Lc),IndexEditor:Lc,ReduceEditor:Oc,DesignDocSelector:dc,StyledSelect:vi.StyledSelect};function bu(e){return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _u(e,t){return(_u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ou(e);if(t){var o=Ou(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Eu(this,n)}}function Eu(e,t){return!t||"object"!==bu(t)&&"function"!=typeof t?wu(e):t}function wu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ou(e){return(Ou=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nu=yu.DesignDocSelector,Du=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_u(e,t)}(a,e);var t,n,r,o=vu(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Su(wu(t=o.call(this,e)),"submit",(function(){t.designDocSelector.validate()&&(""!==t.props.newIndexName?t.props.submit():ae.addNotification({msg:"Please enter the new index name.",type:"error",clear:!0}))})),Su(wu(t),"close",(function(e){e&&e.preventDefault(),t.props.close()})),Su(wu(t),"setNewIndexName",(function(e){t.props.setNewCloneIndexName(e.target.value)})),t.props.setNewCloneIndexName(""),t}return t=a,(n=[{key:"render",value:function(){var e=this;return ue.a.createElement(rn.f,{dialogClassName:"clone-index-modal",show:this.props.visible,onHide:this.close},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,this.props.title)),ue.a.createElement(rn.f.Body,null,ue.a.createElement("form",{className:"form",method:"post",onSubmit:this.submit},ue.a.createElement("p",null,"Select the design document where the cloned ",this.props.indexLabel," will be created, and then enter a name for the cloned ",this.props.indexLabel,"."),ue.a.createElement("div",{className:"row"},ue.a.createElement(Nu,{ref:function(t){return e.designDocSelector=t},designDocList:this.props.designDocArray,isDbPartitioned:this.props.isDbPartitioned,selectedDesignDocName:this.props.selectedDesignDoc,selectedDesignDocPartitioned:this.props.selectedDesignDocPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned})),ue.a.createElement("div",{className:"clone-index-name-row"},ue.a.createElement("label",{className:"new-index-title-label",htmlFor:"new-index-name"},this.props.indexLabel," Name"),ue.a.createElement("input",{type:"text",id:"new-index-name",value:this.props.newIndexName,onChange:this.setNewIndexName,placeholder:"New view name"})))),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("a",{href:"#",className:"cancel-link",onClick:this.close,"data-bypass":"true"},"Cancel"),ue.a.createElement("button",{onClick:this.submit,"data-bypass":"true",className:"btn btn-primary save"},ue.a.createElement("i",{className:"icon fonticon-ok-circled"})," Clone ",this.props.indexLabel)))}}])&&gu(t.prototype,n),r&&gu(t,r),a}(ue.a.Component);function Ru(e){return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tu(e,t){return(Tu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ku(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Au(e);if(t){var o=Au(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xu(this,n)}}function xu(e,t){return!t||"object"!==Ru(t)&&"function"!=typeof t?Iu(e):t}function Iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Au(e){return(Au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Su(Du,"propTypes",{visible:Ct.a.bool.isRequired,title:Ct.a.string,close:Ct.a.func.isRequired,submit:Ct.a.func.isRequired,designDocArray:Ct.a.array.isRequired,selectedDesignDoc:Ct.a.string.isRequired,newDesignDocName:Ct.a.string.isRequired,newIndexName:Ct.a.string.isRequired,indexLabel:Ct.a.string.isRequired,selectDesignDoc:Ct.a.func.isRequired,updateNewDesignDocName:Ct.a.func.isRequired,setNewCloneIndexName:Ct.a.func.isRequired}),Su(Du,"defaultProps",{title:"Clone Index",visible:!1});var Lu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tu(e,t)}(a,e);var t,n,r,o=ku(a);function a(){var e;Cu(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ju(Iu(e=o.call.apply(o,[this].concat(n))),"state",{placement:"bottom"}),ju(Iu(e),"setPlacement",(function(t){var n=document.getElementById(t).getBoundingClientRect().top+150>window.innerHeight?"top":"bottom";e.setState({placement:n})})),ju(Iu(e),"createItems",(function(){var t=e.props.items.sort();return _.map(t,(function(t,n){var r=ae.urls(e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.designDocName));e.props.selectedPartitionKey&&(r=ae.urls("partitioned_"+e.props.urlNamespace,"app",encodeURIComponent(e.props.database.id),encodeURIComponent(e.props.selectedPartitionKey),encodeURIComponent(e.props.designDocName)));var o=e.props.selectedIndex===t?"active":"";return ue.a.createElement("li",{className:o,key:n},ue.a.createElement("a",{id:e.props.designDocName+"_"+t,href:"#/"+r+encodeURIComponent(t),className:"toggle-view"},t),ue.a.createElement(rn.h,{trigger:"click",onEnter:e.setPlacement.bind(Iu(e),e.props.designDocName+"_"+t),placement:e.state.placement,rootClose:!0,ref:function(t){return e.itemOverlay=t},overlay:ue.a.createElement(rn.i,{id:"index-menu-component-popover"},ue.a.createElement("ul",null,ue.a.createElement("li",{onClick:e.indexAction.bind(Iu(e),"edit",{indexName:t,onEdit:e.props.onEdit})},ue.a.createElement("span",{className:"fonticon fonticon-file-code-o"}),"Edit"),ue.a.createElement("li",{onClick:e.indexAction.bind(Iu(e),"clone",{indexName:t,onClone:e.props.onClone})},ue.a.createElement("span",{className:"fonticon fonticon-files-o"}),"Clone"),ue.a.createElement("li",{onClick:e.indexAction.bind(Iu(e),"delete",{indexName:t,onDelete:e.props.onDelete})},ue.a.createElement("span",{className:"fonticon fonticon-trash"}),"Delete")))},ue.a.createElement("span",{className:"index-menu-toggle fonticon fonticon-wrench2"})))}))})),ju(Iu(e),"indexAction",(function(t,n,r){switch(r.preventDefault(),e.itemOverlay.hide(),t){case"delete":e.props.showDeleteIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onDelete);break;case"clone":e.props.showCloneIndexModal(n.indexName,e.props.designDocName,e.props.indexLabel,n.onClone);break;case"edit":n.onEdit(e.props.database.id,e.props.selectedPartitionKey,e.props.designDocName,n.indexName)}})),ju(Iu(e),"toggle",(function(t){t.preventDefault(),e.props.toggle(e.props.designDocName,e.props.title)})),e}return t=a,(n=[{key:"render",value:function(){if(0===this.props.items.length)return null;var e="accordion-header index-group-header",t="index-list accordion-body collapse";this.props.isExpanded&&(e+=" down",t+=" in");var n=this.props.title,r="nav-design-function-"+this.props.designDocName+this.props.selector;return ue.a.createElement("li",{id:r},ue.a.createElement("a",{className:e,"data-toggle":"collapse",onClick:this.toggle},ue.a.createElement("div",{className:"fonticon-play"}),n),ue.a.createElement(rn.c,{in:this.props.isExpanded},ue.a.createElement("ul",{className:t},this.createItems())))}}])&&Pu(t.prototype,n),r&&Pu(t,r),a}(ue.a.Component);function Mu(e){return(Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qu(e,t){return(qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ku(e);if(t){var o=Ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vu(this,n)}}function Vu(e,t){return!t||"object"!==Mu(t)&&"function"!=typeof t?Fu(e):t}function Fu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ku(e){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ju(Lu,"propTypes",{urlNamespace:Ct.a.string.isRequired,indexLabel:Ct.a.string.isRequired,database:Ct.a.object.isRequired,designDocName:Ct.a.string.isRequired,items:Ct.a.array.isRequired,isExpanded:Ct.a.bool.isRequired,selectedIndex:Ct.a.string.isRequired,onDelete:Ct.a.func.isRequired,onClone:Ct.a.func.isRequired,showDeleteIndexModal:Ct.a.func.isRequired,showCloneIndexModal:Ct.a.func.isRequired,isPartitioned:Ct.a.bool.isRequired,selectedPartitionKey:Ct.a.string});var Hu=vi.MenuDropDown,Gu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qu(e,t)}(a,e);var t,n,r,o=Bu(a);function a(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),zu(Fu(t=o.call(this,e)),"indexList",(function(){return _.map(t.state.updatedSidebarListTypes,(function(e,n){var r=_.has(t.props.toggledSections,e.name)&&t.props.toggledSections[e.name],o="";return t.props.selectedNavInfo.designDocSection===e.name&&(o=t.props.selectedNavInfo.indexName),ue.a.createElement(Lu,{icon:e.icon,isExpanded:r,urlNamespace:e.urlNamespace,indexLabel:e.indexLabel,onEdit:e.onEdit,onDelete:e.onDelete,onClone:e.onClone,selectedIndex:o,toggle:t.props.toggle,database:t.props.database,designDocName:t.props.designDocName,key:n,title:e.name,selector:e.selector,items:_.keys(t.props.designDoc[e.selector]),isPartitioned:t.props.isPartitioned,selectedPartitionKey:t.props.selectedPartitionKey,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))})),zu(Fu(t),"toggle",(function(e){e.preventDefault(),t.props.toggle(t.props.designDocName)})),zu(Fu(t),"getNewButtonLinks",(function(){var e=t.props.selectedPartitionKey?encodeURIComponent(t.props.selectedPartitionKey):"",n=ae.urls("databaseBaseURL","app",encodeURIComponent(t.props.database.id))+(e?"/_partition/"+e:""),r=t.props.designDocName;return[{title:"Add New",links:ae.getExtensions("sidebar:links").reduce((function(e,o){return t.props.isPartitioned&&!o.showForPartitionedDDocs||e.push({title:o.title,url:"#"+n+"/"+o.url+"/"+encodeURIComponent(r),icon:"fonticon-plus-circled"}),e}),[{title:"New View",url:"#"+ae.urls("new","addView",encodeURIComponent(t.props.database.id),e,encodeURIComponent(r)),icon:"fonticon-plus-circled"}])}]})),t.state={updatedSidebarListTypes:t.props.sidebarListTypes},_.isEmpty(t.state.updatedSidebarListTypes)||_.has(t.state.updatedSidebarListTypes[0],"selector")&&"views"!==t.state.updatedSidebarListTypes[0].selector){var n=t.state.updatedSidebarListTypes;n.unshift({selector:"views",name:"Views",urlNamespace:"view",indexLabel:"view",onDelete:nu.deleteView,onClone:nu.cloneView,onEdit:nu.gotoEditViewPage}),t.state={updatedSidebarListTypes:n}}return t}return t=a,(n=[{key:"render",value:function(){var e=this.getNewButtonLinks(),t="design-doc-section accordion-header",n="design-doc-body accordion-body collapse";this.props.isExpanded&&(t+=" down",n+=" in");var r=this.props.designDocName,o=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",a=ae.urls("designDocs","app",encodeURIComponent(this.props.database.id),o,r),i="metadata"===this.props.selectedNavInfo.designDocSection?"active":"",s=this.props.isPartitioned?"Partitioned design document":"Global design document",c=this.props.isPartitioned?"fonticon-documents":"fonticon-document";return ue.a.createElement("li",{className:"nav-header"},ue.a.createElement("div",{id:"sidebar-tab-"+r,className:t},ue.a.createElement("div",{id:"nav-header-"+r,onClick:this.toggle,className:"accordion-list-item"},ue.a.createElement("div",{className:"fonticon-play"}),ue.a.createElement("p",{className:"design-doc-name"},ue.a.createElement("span",{title:"_design/"+r},ue.a.createElement("i",{className:c,title:s}),r))),ue.a.createElement("div",{className:"new-button add-dropdown"},ue.a.createElement(Hu,{links:e}))),ue.a.createElement(rn.c,{in:this.props.isExpanded},ue.a.createElement("ul",{className:n,id:"design-doc-menu-".concat(this.props.designDocName)},ue.a.createElement("li",{className:i},ue.a.createElement("a",{href:"#/"+a,className:"toggle-view accordion-header"},"Metadata")),this.indexList())))}}])&&Uu(t.prototype,n),r&&Uu(t,r),a}(ue.a.Component);function Wu(e){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qu(e,t){return(Qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ju(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zu(e);if(t){var o=Zu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yu(this,n)}}function Yu(e,t){return!t||"object"!==Wu(t)&&"function"!=typeof t?$u(e):t}function $u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zu(e){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function el(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}zu(Gu,"propTypes",{database:Ct.a.object.isRequired,sidebarListTypes:Ct.a.array.isRequired,isExpanded:Ct.a.bool.isRequired,isPartitioned:Ct.a.bool.isRequired,selectedPartitionKey:Ct.a.string,selectedNavInfo:Ct.a.object.isRequired,toggledSections:Ct.a.object.isRequired,designDocName:Ct.a.string.isRequired,showDeleteIndexModal:Ct.a.func.isRequired,showCloneIndexModal:Ct.a.func.isRequired});var tl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qu(e,t)}(a,e);var t,n,r,o=Ju(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),el($u(t=o.call(this,e)),"designDocList",(function(){return _.map(t.props.designDocs,(function(e,n){var r=decodeURIComponent(e.safeId),o=sr.isDDocPartitioned(e,t.props.isDbPartitioned),a=!1,i={};_.has(t.props.toggledSections,r)&&(a=t.props.toggledSections[r].visible,i=t.props.toggledSections[r].indexGroups);var s={};return"designDoc"===t.props.selectedNav.navItem&&t.props.selectedNav.designDocName===r&&(s=t.props.selectedNav),ue.a.createElement(Gu,{toggle:t.props.toggle,sidebarListTypes:t.sidebarListTypes,isExpanded:a,toggledSections:i,selectedNavInfo:s,selectedPartitionKey:t.props.selectedPartitionKey,isPartitioned:o,key:n,designDoc:e,designDocName:r,database:t.props.database,showDeleteIndexModal:t.props.showDeleteIndexModal,showCloneIndexModal:t.props.showCloneIndexModal})}))}));var n=ae.getExtensions("sidebar:list");return t.sidebarListTypes=_.isUndefined(n)?[]:n,t}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("ul",{className:"nav nav-list"},this.designDocList())}}])&&Xu(t.prototype,n),r&&Xu(t,r),a}(ue.a.Component);function nl(e){return(nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(e,t){return(al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function il(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ul(e);if(t){var o=ul(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sl(this,n)}}function sl(e,t){return!t||"object"!==nl(t)&&"function"!=typeof t?cl(e):t}function cl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ul(e){return(ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}el(tl,"propTypes",{database:Ct.a.object.isRequired,toggle:Ct.a.func.isRequired,designDocs:Ct.a.array,toggledSections:Ct.a.object,selectedNav:Ct.a.shape({designDocName:Ct.a.string,designDocSection:Ct.a.string,indexName:Ct.a.string,navItem:Ct.a.string}).isRequired,isDbPartitioned:Ct.a.bool.isRequired,selectedPartitionKey:Ct.a.string,showDeleteIndexModal:Ct.a.func.isRequired,showCloneIndexModal:Ct.a.func.isRequired});var pl=vi.MenuDropDown,fl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&al(e,t)}(a,e);var t,n,r,o=il(a);function a(){var e;rl(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ll(cl(e=o.call.apply(o,[this].concat(n))),"getNewButtonLinks",(function(){return sr.getNewButtonLinks(e.props.databaseName,e.props.selectedPartitionKey)})),ll(cl(e),"buildDocLinks",(function(){var t=ae.urls("base","app",e.props.databaseName);return ae.getExtensions("docLinks").map((function(n){return ue.a.createElement("li",{key:n.url,className:e.getNavItemClass(n.url)},ue.a.createElement("a",{id:n.url,href:t+n.url},n.title))}))})),ll(cl(e),"getNavItemClass",(function(t){return t===e.props.selectedNavItem?"active":""})),e}return t=a,(n=[{key:"render",value:function(){var e=this.buildDocLinks(),t=ae.url.encode(this.props.databaseName),n=this.props.selectedPartitionKey?encodeURIComponent(this.props.selectedPartitionKey):"",r="#"+ae.urls("changes","app",t,n,""),o="#"+ae.urls("permissions","app",t,n),a=ae.urls("allDocs","app",t,n,""),i=ae.urls("mango","query-app",t,n),s=se.i18n.en_US["run-query-with-mango"],c=this.getNewButtonLinks();return ue.a.createElement("ul",{className:"nav nav-list"},ue.a.createElement("li",{className:this.getNavItemClass("all-docs")},ue.a.createElement("a",{id:"all-docs",href:"#/"+a,className:"toggle-view"},"All Documents"),ue.a.createElement("div",{id:"new-all-docs-button",className:"add-dropdown"},ue.a.createElement(pl,{links:c}))),ue.a.createElement("li",{className:this.getNavItemClass("mango-query")},ue.a.createElement("a",{id:"mango-query",href:"#"+i,className:"toggle-view"},s)),ue.a.createElement("li",{className:this.getNavItemClass("permissions")},ue.a.createElement("a",{id:"permissions",href:o},"Permissions")),ue.a.createElement("li",{className:this.getNavItemClass("changes")},ue.a.createElement("a",{id:"changes",href:r},"Changes")),e,ue.a.createElement("li",{className:this.getNavItemClass("design-docs")},ue.a.createElement("a",{id:"design-docs",href:"#/"+a+'?startkey="_design"&endkey="_design0"',className:"toggle-view"},"Design Documents"),ue.a.createElement("div",{id:"new-design-docs-button",className:"add-dropdown"},ue.a.createElement(pl,{links:c}))))}}])&&ol(t.prototype,n),r&&ol(t,r),a}(ue.a.Component);function dl(e){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ml(e,t){return(ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_l(e);if(t){var o=_l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bl(this,n)}}function bl(e,t){return!t||"object"!==dl(t)&&"function"!=typeof t?gl(e):t}function gl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _l(e){return(_l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ll(fl,"propTypes",{databaseName:Ct.a.string.isRequired,selectedNavItem:Ct.a.string.isRequired,selectedPartitionKey:Ct.a.string});var El=vi.DeleteDatabaseModal,wl=vi.LoadLines,Ol=zi.ConfirmationModal,Sl=wi.deleteDbModalStore,Nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ml(e,t)}(a,e);var t,n,r,o=yl(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),vl(gl(t=o.call(this,e)),"onChange",(function(){var e=t.getDeleteDbStoreState();t.setState(e)})),vl(gl(t),"showDeleteDatabaseModal",(function(e){rr.showDeleteDatabaseModal(e)})),vl(gl(t),"deleteIndex",(function(){var e="designDoc"===t.props.selectedNav.navItem&&"_design/"+t.props.selectedNav.designDocName===t.props.deleteIndexModalDesignDoc.id&&t.props.selectedNav.indexName===t.props.deleteIndexModalIndexName;t.props.deleteIndexModalOnSubmit({isOnIndex:e,indexName:t.props.deleteIndexModalIndexName,designDoc:t.props.deleteIndexModalDesignDoc,designDocs:t.props.designDocs,database:t.props.database})})),vl(gl(t),"cloneIndex",(function(){t.props.cloneIndexModalOnSubmit({sourceIndexName:t.props.cloneIndexSourceIndexName,sourceDesignDocName:t.props.cloneIndexSourceDesignDocName,targetDesignDocName:t.props.cloneIndexModalSelectedDesignDoc,newDesignDocName:t.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:t.props.cloneIndexModalNewDesignDocPartitioned,isDbPartitioned:t.props.isDbPartitioned,newIndexName:t.props.cloneIndexModalNewIndexName,designDocs:t.props.designDocs,database:t.props.database,onComplete:t.props.hideCloneIndexModal})})),t.state=t.getDeleteDbStoreState(),t.deleteIndex=t.deleteIndex.bind(gl(t)),t.cloneIndex=t.cloneIndex.bind(gl(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){Sl.on("change",this.onChange,this)}},{key:"componentWillUnmount",value:function(){Sl.off("change",this.onChange,this)}},{key:"getDeleteDbStoreState",value:function(){return{deleteDbModalProperties:Sl.getShowDeleteDatabaseModal()}}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement(wl,null):ue.a.createElement("nav",{className:"sidenav"},ue.a.createElement(fl,{selectedNavItem:this.props.selectedNav.navItem,databaseName:this.props.database.id,selectedPartitionKey:this.props.selectedPartitionKey}),ue.a.createElement(tl,{selectedNav:this.props.selectedNav,selectedPartitionKey:this.props.selectedPartitionKey,isDbPartitioned:this.props.isDbPartitioned,toggle:this.props.toggleContent,toggledSections:this.props.toggledSections,designDocs:this.props.designDocList,database:this.props.database,showDeleteIndexModal:this.props.showDeleteIndexModal,showCloneIndexModal:this.props.showCloneIndexModal}),ue.a.createElement(El,{showHide:this.showDeleteDatabaseModal,modalProps:this.state.deleteDbModalProperties}),ue.a.createElement(Ol,{title:"Confirm Deletion",visible:this.props.deleteIndexModalVisible,text:this.props.deleteIndexModalText,onClose:this.props.hideDeleteIndexModal,onSubmit:this.deleteIndex}),ue.a.createElement(Du,{visible:this.props.cloneIndexModalVisible,title:this.props.cloneIndexModalTitle,close:this.props.hideCloneIndexModal,submit:this.cloneIndex,designDocArray:this.props.availableDesignDocIds,selectedDesignDoc:this.props.cloneIndexModalSelectedDesignDoc,selectedDesignDocPartitioned:this.props.cloneIndexModalSelectedDesignDocPartitioned,newDesignDocName:this.props.cloneIndexModalNewDesignDocName,newDesignDocPartitioned:this.props.cloneIndexModalNewDesignDocPartitioned,newIndexName:this.props.cloneIndexModalNewIndexName,indexLabel:this.props.cloneIndexModalIndexLabel,selectDesignDoc:this.props.selectDesignDoc,updateNewDesignDocName:this.props.updateNewDesignDocName,updateNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,setNewCloneIndexName:this.props.setNewCloneIndexName,isDbPartitioned:this.props.isDbPartitioned}))}}])&&hl(t.prototype,n),r&&hl(t,r),a}(ue.a.Component);vl(Nl,"propTypes",{selectedNav:Ct.a.shape({designDocName:Ct.a.string,designDocSection:Ct.a.string,indexName:Ct.a.string,navItem:Ct.a.string}).isRequired});var Dl={SidebarController:Nl,DesignDoc:Gu,CloneIndexModal:Du};function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(n),!0).forEach((function(t){Pl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tl={designDocs:new Backbone.Collection,designDocList:[],selected:{navItem:"all-docs",designDocName:"",designDocSection:"",indexName:""},loading:!0,toggledSections:{},deleteIndexModalVisible:!1,deleteIndexModalDesignDocName:"",deleteIndexModalText:"",deleteIndexModalIndexName:"",deleteIndexModalOnSubmit:function(){},cloneIndexModalVisible:!1,cloneIndexDesignDocProp:"",cloneIndexModalTitle:"",cloneIndexModalSelectedDesignDoc:"",cloneIndexModalNewDesignDocName:"",cloneIndexModalNewDesignDocPartitioned:!0,cloneIndexModalNewIndexName:"",cloneIndexModalSourceIndexName:"",cloneIndexModalSourceDesignDocName:"",cloneIndexModalIndexLabel:"",cloneIndexModalOnSubmit:function(){}};function kl(e,t){var n=Cl(Cl({},e),{},{database:t.database,designDocs:t.designDocs,designDocList:Al(t.designDocs),loading:!1});return t.selectedNavItem&&(n.selected={navItem:t.selectedNavItem,designDocName:"",designDocSection:"",indexName:""}),n}function xl(e,t,n){var r=Cl({},e);if(!e.toggledSections[t])return r.toggledSections[t]={visible:!0,indexGroups:{}},r;if(n){var o=e.toggledSections[t].indexGroups[n];return _.isUndefined(o)?r.toggledSections[t].indexGroups[n]=!0:r.toggledSections[t].indexGroups[n]=!o,r}return r.toggledSections[t].visible=!e.toggledSections[t].visible,r}function Il(e,t){var n=t.selectedNavItem,r=Cl({},e);return n.designDocName&&(_.has(e.toggledSections,n.designDocName)||(r.toggledSections[n.designDocName]={visible:!0,indexGroups:{}}),r.toggledSections[n.designDocName].visible=!0,n.designDocSection&&(r.toggledSections[n.designDocName].indexGroups[n.designDocSection]=!0)),r}function Al(e){if(!e)return[];var t=e.toJSON();return(t=_.filter(t,(function(e){return!_.has(e.doc,"language")||"query"!==e.doc.language}))).map((function(e){return e.safeId=se.utils.safeURLName(e._id.replace(/^_design\//,"")),_.extend(e,e.doc)}))}function jl(e,t){var n=e.designDocs.find((function(t){return e.cloneIndexModalSelectedDesignDoc==t.id}));return!!n&&sr.isDDocPartitioned(n.get("doc"),t)}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ul=function(e){var t=e.designDocs.filter((function(e){return!e.isMangoDoc()}));return _.map(t,(function(e){return e.id}))},ql=function(e){var t=e.designDocs.find((function(t){return"_design/"+e.deleteIndexModalDesignDocName===t.id}));return t?t.dDocModel():null},Bl=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){Ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({designDocName:"",designDocSection:"",indexName:"",navItem:""},e)},Vl=Object(Pt.b)((function(e,t){var n,r=e.sidebar,o=e.databases;return{database:(n=r,n.loading?{}:n.database),selectedNav:Bl(t.selectedNavItem),designDocs:r.designDocs,designDocList:r.designDocList,availableDesignDocIds:Ul(r),toggledSections:r.toggledSections,isLoading:r.loading||o.isLoadingDbInfo,selectedPartitionKey:t.selectedPartitionKey,isDbPartitioned:o.isDbPartitioned,deleteIndexModalVisible:r.deleteIndexModalVisible,deleteIndexModalText:r.deleteIndexModalText,deleteIndexModalOnSubmit:r.deleteIndexModalOnSubmit,deleteIndexModalIndexName:r.deleteIndexModalIndexName,deleteIndexModalDesignDoc:ql(r),cloneIndexModalVisible:r.cloneIndexModalVisible,cloneIndexModalTitle:r.cloneIndexModalTitle,cloneIndexModalSelectedDesignDoc:r.cloneIndexModalSelectedDesignDoc,cloneIndexModalSelectedDesignDocPartitioned:jl(r,o.isDbPartitioned),cloneIndexModalNewDesignDocName:r.cloneIndexModalNewDesignDocName,cloneIndexModalNewDesignDocPartitioned:r.cloneIndexModalNewDesignDocPartitioned,cloneIndexModalOnSubmit:r.cloneIndexModalOnSubmit,cloneIndexDesignDocProp:r.cloneIndexDesignDocProp,cloneIndexModalNewIndexName:r.cloneIndexModalNewIndexName,cloneIndexSourceIndexName:r.cloneIndexModalSourceIndexName,cloneIndexSourceDesignDocName:r.cloneIndexModalSourceDesignDocName,cloneIndexModalIndexLabel:r.cloneIndexModalIndexLabel}}),(function(e){return{toggleContent:function(t,n){e(Gs(t,n))},hideCloneIndexModal:function(){e(Ys())},hideDeleteIndexModal:function(){e(Xs())},showDeleteIndexModal:function(t,n,r,o){e(Ws(t,n,r,o))},showCloneIndexModal:function(t,n,r,o){e(Js(t,n,r,o))},selectDesignDoc:function(t){e(ec(t))},updateNewDesignDocName:function(t){e($s(t))},updateNewDesignDocPartitioned:function(t){e(Zs(t))},setNewCloneIndexName:function(t){e(tc(t))}}}))(Dl.SidebarController);function Fl(e,t){var n=sr.getNewButtonLinks(e,t);return function(e){return sr.getModifyDatabaseLinks(e)}(e).concat(n)}var Kl=function(e){var t=e.url,n=e.icon,r=e.onClick,o=e.children;return ue.a.createElement("li",{role:"presentation"},ue.a.createElement("a",{className:"faux-header__doc-header-dropdown-item",onClick:r,href:t},ue.a.createElement("i",{className:n})," ",o))},zl=function(e){var t=e.dbName,n=function(e){return e.map((function(e,t){if(e.title&&e.links){var n=e.links.map((function(e){return ue.a.createElement(Kl,{key:e.title,onClick:e.onClick,icon:e.icon,url:e.url},e.title)}));return[ue.a.createElement("li",{key:e.title,className:"header-label"},e.title),n]}return ue.a.createElement(Kl,{icon:e.icon,url:e.url,onClick:e.onClick,key:t},e.title)}))}(Fl(t,e.partitionKey));return ue.a.createElement("div",{className:"faux-header__doc-header-left"},ue.a.createElement("button",{type:"button",className:"faux-header__doc-header-backlink",onClick:function(){ae.navigate("#/_all_dbs")}},ue.a.createElement("i",{className:"faux-header__doc-header-backlink__icon fonticon fonticon-left-open"})),ue.a.createElement("div",{className:"faux-header__doc-header-title flex-fill",title:t},t),ue.a.createElement(rn.d,{id:"faux-header__doc-header-left-1"},ue.a.createElement(rn.d.Toggle,{noCaret:!0,className:"faux-header__doc-header-dropdown-toggle"},ue.a.createElement("i",{className:"faux-header__doc-header-dropdown-toggle-icon fonticon-vertical-ellipsis"})),ue.a.createElement(rn.d.Menu,{className:"faux-header__doc-header-dropdown-itemwrapper"},n)))};zl.propTypes={dbName:Ct.a.string.isRequired,partitionKey:Ct.a.string};var Hl=zl,Gl=n(457);n(158);function Wl(e){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jl(e,t){return(Jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zl(e);if(t){var o=Zl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $l(this,n)}}function $l(e,t){return!t||"object"!==Wl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zl(e){return(Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ep=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jl(e,t)}(a,e);var t,n,r,o=Yl(a);function a(){return Xl(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"willEnter",value:function(){return{opacity:Object(aa.spring)(1,aa.presets.gentle),height:Object(aa.spring)(160,aa.presets.gentle)}}},{key:"willLeave",value:function(){return{opacity:Object(aa.spring)(0,aa.presets.gentle),height:Object(aa.spring)(0,aa.presets.gentle)}}},{key:"getStyles",value:function(e){return!e&&this.props.codeVisible?[{key:"1",style:this.willEnter()}]:e||this.props.codeVisible?e.map((function(e){return{key:"1",style:e.style}})):[{key:"1",style:this.willLeave()}]}},{key:"getChildren",value:function(e){var t=this,n=e.map((function(e){var n=e.style;return!1===t.props.codeVisible&&0===n.opacity?null:ue.a.createElement("div",{key:"1",style:{opacity:n.opacity,height:n.height+"px"}},ue.a.createElement(zi.CodeFormat,{code:t.props.code}))}));return ue.a.createElement("span",null,n)}},{key:"render",value:function(){return ue.a.createElement(aa.TransitionMotion,{styles:this.getStyles(),willLeave:this.willLeave,willEnter:this.willEnter},this.getChildren.bind(this))}}])&&Ql(t.prototype,n),r&&Ql(t,r),a}(ue.a.Component);function tp(e){return(tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function np(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function op(e,t){return(op=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ap(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sp(e);if(t){var o=sp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ip(this,n)}}function ip(e,t){return!t||"object"!==tp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ep.propTypes={code:Ct.a.object.isRequired,codeVisible:Ct.a.bool.isRequired};var cp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&op(e,t)}(a,e);var t,n,r,o=ap(a);function a(){return np(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.deleted,n=e.id,r=e.databaseName;if(t)return ue.a.createElement("span",{className:"js-doc-id"},n);var o="#"+ae.urls("document","app",encodeURIComponent(r),encodeURIComponent(n));return ue.a.createElement("a",{href:o,className:"js-doc-link"},n)}}])&&rp(t.prototype,n),r&&rp(t,r),a}(ue.a.Component);function up(e){return(up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pp(e,t){return(pp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hp(e);if(t){var o=hp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dp(this,n)}}function dp(e,t){return!t||"object"!==up(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hp(e){return(hp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mp=vi.Copy,yp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pp(e,t)}(a,e);var t,n,r,o=fp(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={codeVisible:!1},t}return t=a,(n=[{key:"toggleJSON",value:function(e){e.preventDefault(),this.setState({codeVisible:!this.state.codeVisible})}},{key:"getChangesCode",value:function(){return this.state.codeVisible?ue.a.createElement(zi.CodeFormat,{key:"changesCodeSection",code:this.getChangeCode()}):null}},{key:"getChangeCode",value:function(){return{changes:this.props.change.changes,doc:this.props.change.doc}}},{key:"showCopiedMessage",value:function(e){var t="The document ID has been copied to your clipboard.";"seq"===e&&(t="The document seq number has been copied to your clipboard."),ae.addNotification({msg:t,type:"info",clear:!0})}},{key:"render",value:function(){var e=this,t=this.state.codeVisible,n=this.props,r=n.change,o=n.databaseName,a="change-wrapper"+(r.isNew?" new-change-row":"");return ue.a.createElement("div",{className:a},ue.a.createElement("div",{className:"change-box","data-id":r.id},ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"seq"),ue.a.createElement("div",{className:"span8 change-sequence"},r.seq),ue.a.createElement("div",{className:"span2 text-right"},ue.a.createElement(mp,{uniqueKey:Object(Gl.a)(),text:r.seq.toString(),onClipboardClick:function(){return e.showCopiedMessage("seq")}}))),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"id"),ue.a.createElement("div",{className:"span8"},ue.a.createElement(cp,{id:r.id,deleted:r.deleted,databaseName:o})),ue.a.createElement("div",{className:"span2 text-right"},ue.a.createElement(mp,{uniqueKey:Object(Gl.a)(),text:r.id,onClipboardClick:function(){return e.showCopiedMessage("id")}}))),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"deleted"),ue.a.createElement("div",{className:"span10"},r.deleted?"True":"False")),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span2"},"changes"),ue.a.createElement("div",{className:"span10"},ue.a.createElement("button",{type:"button",className:"btn btn-small btn-secondary",onClick:this.toggleJSON.bind(this)},t?"Close JSON":"View JSON"))),ue.a.createElement(ep,{codeVisible:this.state.codeVisible,code:this.getChangeCode()})))}}])&&lp(t.prototype,n),r&&lp(t,r),a}(ue.a.Component);function bp(e){return(bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _p(e,t){return(_p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wp(e);if(t){var o=wp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ep(this,n)}}function Ep(e,t){return!t||"object"!==bp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wp(e){return(wp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}yp.propTypes={change:Ct.a.object,databaseName:Ct.a.string.isRequired};var Op=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_p(e,t)}(a,e);var t,n,r,o=vp(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).props.loadChanges(t.props.databaseName),t}return t=a,(n=[{key:"showingSubsetMsg",value:function(){var e=this.props,t=e.isShowingSubset,n=e.changes,r="";if(t){var o=n.length;r=ue.a.createElement("p",{className:"changes-result-limit"},"Limiting results to latest ",ue.a.createElement("b",null,o)," changes.")}return r}},{key:"getRows",value:function(){var e=this.props,t=e.changes,n=e.loaded,r=e.databaseName;return!t.length&&n?ue.a.createElement("p",{className:"no-doc-changes"},"There are no document changes to display."):t.map((function(e,t){return ue.a.createElement(yp,{change:e,key:t,databaseName:r})}))}},{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement("div",{className:"js-changes-view"},this.showingSubsetMsg(),this.getRows()))}}])&&gp(t.prototype,n),r&&gp(t,r),a}(ue.a.Component);Op.propTypes={changes:Ct.a.array.isRequired,loaded:Ct.a.bool.isRequired,databaseName:Ct.a.string.isRequired,isShowingSubset:Ct.a.bool.isRequired,loadChanges:Ct.a.func.isRequired};var Sp,Np="UPDATE_CHANGES",Dp="ADD_CHANGES_FILTER_ITEM",Rp="REMOVE_CHANGES_FILTER_ITEM",Cp=function(e,t,n){var r={limit:100};Sp&&(r.since=n,r.timeout=6e4,r.feed="longpoll");var o=se.utils.queryParams(r),a=se.utils.safeURLName(t),i=ae.urls("changes","server",a,"?"+o);E(i).then((function(t){if(t.error)throw new Error(t.reason||t.error);Pp(t,e)})).catch((function(e){ae.addNotification({msg:"Error loading list of changes. Reason: "+e.message,type:"error",clear:!0})}))},Pp=function(e,t){var n=sr.getSeqNum(e.last_seq);t({type:Np,changes:e.results,seqNum:n})},Tp=function(e){return function(t){t({type:Dp,filter:e})}},kp=function(e){return function(t){t({type:Rp,filter:e})}},xp=function(e){return function(t){Sp=null,Cp(t,e)}},Ip=Object(Pt.b)((function(e,t){var n=e.changes;return{changes:n.filteredChanges,loaded:n.isLoaded,databaseName:t.databaseName,isShowingSubset:n.showingSubset}}),(function(e){return{loadChanges:function(t){e(xp(t))}}}))(Op);function Ap(e){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lp(e,t){return(Lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bp(e);if(t){var o=Bp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Up(this,n)}}function Up(e,t){return!t||"object"!==Ap(t)&&"function"!=typeof t?qp(e):t}function qp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bp(e){return(Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lp(e,t)}(a,e);var t,n,r,o=Mp(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={filter:"",error:!1},t.submitForm=t.submitForm.bind(qp(t)),t}return t=a,(n=[{key:"submitForm",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.props.hasFilter(this.state.filter)){this.setState({error:!0});var t=this;setTimeout((function(){t.setState({error:!1})}),1e3)}else this.props.addFilter(this.state.filter),this.setState({filter:"",error:!1})}},{key:"componentDidMount",value:function(){this.focusFilterField()}},{key:"componentDidUpdate",value:function(){this.focusFilterField()}},{key:"focusFilterField",value:function(){this.addItem.focus()}},{key:"inputClassNames",value:function(){var e="js-changes-filter-field";return this.state.error&&(e+=" errorHighlight"),e}},{key:"render",value:function(){var e=this;return ue.a.createElement("form",{className:"form-inline js-filter-form",onSubmit:this.submitForm},ue.a.createElement("fieldset",null,ue.a.createElement("i",{className:"fonticon-filter"}),ue.a.createElement("input",{type:"text",ref:function(t){return e.addItem=t},className:this.inputClassNames(),placeholder:"Sequence or ID",onChange:function(t){return e.setState({filter:t.target.value})},value:this.state.filter}),ue.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Filter"),ue.a.createElement("div",{className:"help-block"})))}}])&&jp(t.prototype,n),r&&jp(t,r),a}(ue.a.Component);function Fp(e){return(Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zp(e,t){return(zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xp(e);if(t){var o=Xp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gp(this,n)}}function Gp(e,t){return!t||"object"!==Fp(t)&&"function"!=typeof t?Wp(e):t}function Wp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xp(e){return(Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Vp.propTypes={addFilter:Ct.a.func.isRequired,hasFilter:Ct.a.func.isRequired,tooltips:Ct.a.string},Vp.defaultProps={tooltip:""};var Qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zp(e,t)}(a,e);var t,n,r,o=Hp(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).addFilter=t.addFilter.bind(Wp(t)),t.hasFilter=t.hasFilter.bind(Wp(t)),t}return t=a,(n=[{key:"addFilter",value:function(e){_.isEmpty(e)||this.props.addFilter(e)}},{key:"hasFilter",value:function(e){return-1!==this.props.filters.indexOf(e)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"changes-header"},ue.a.createElement(Vp,{filter:function(t){return e.props.removeFilter(t)},addFilter:this.addFilter,hasFilter:this.hasFilter}),ue.a.createElement(vi.BadgeList,{elements:this.props.filters,removeBadge:function(t){return e.props.removeFilter(t)}}))}}])&&Kp(t.prototype,n),r&&Kp(t,r),a}(ue.a.Component);Qp.propTypes={filters:Ct.a.array.isRequired,addFilter:Ct.a.func.isRequired,removeFilter:Ct.a.func.isRequired};var Jp=Object(Pt.b)((function(e){return{filters:e.changes.filters}}),(function(e){return{addFilter:function(t){e(Tp(t))},removeFilter:function(t){e(kp(t))}}}))(Qp);function Yp(e){return(Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zp(e,t){return(Zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ef(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rf(e);if(t){var o=rf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tf(this,n)}}function tf(e,t){return!t||"object"!==Yp(t)&&"function"!=typeof t?nf(e):t}function nf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rf(e){return(rf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var of=vi.LoadLines,af=vi.Copy,sf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zp(e,t)}(a,e);var t,n,r,o=ef(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nf(t=o.call(this,e)),"showCopiedMessage",(function(){ae.addNotification({type:"success",msg:"The MD5 sha has been copied to your clipboard.",clear:!0})})),t.fetchDDocInfo(),t}return t=a,(n=[{key:"componentDidUpdate",value:function(e){this.props.designDocInfo!==e.designDocInfo&&this.fetchDDocInfo()}},{key:"componentWillUnmount",value:function(){this.props.stopRefresh()}},{key:"fetchDDocInfo",value:function(){this.props.fetchDesignDocInfo({designDocName:this.props.designDocName,designDocInfo:this.props.designDocInfo})}},{key:"render",value:function(){if(this.props.isLoading)return ue.a.createElement(of,null);if(this.props.showLoadError)return ue.a.createElement("div",{className:"metadata-page"},ue.a.createElement("header",null,ue.a.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),ue.a.createElement("section",{className:"container"},"Error retrieving metadata. Try reloading the page."));var e=this.props.viewIndex,t=e.sizes,n=t.active?t.active.toLocaleString("en"):0,r=t.external?t.external.toLocaleString("en"):0;return ue.a.createElement("div",{className:"metadata-page"},ue.a.createElement("header",null,ue.a.createElement("h2",null,"_design/",this.props.designDocName," Metadata")),ue.a.createElement("section",{className:"container"},ue.a.createElement("h3",null,"Index Information"),ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Language:"),ue.a.createElement("span",{className:"capitalize"},e.language)),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Currently being updated?"),e.updater_running?"Yes":"No"),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Currently running compaction?"),e.compact_running?"Yes":"No"),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Waiting for a commit?"),e.waiting_commit?"Yes":"No")),ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Clients waiting for the index:"),e.waiting_clients),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Update sequence on DB:"),e.update_seq),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Processed purge sequence:"),e.purge_seq),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Actual data size (bytes):"),n),ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"Data size on disk (bytes):"),r)),ue.a.createElement("ul",null,ue.a.createElement("li",null,ue.a.createElement("span",{className:"item-title"},"MD5 Signature:"),ue.a.createElement(af,{uniqueKey:Object(Gl.a)(),text:e.signature,onClipboardClick:this.showCopiedMessage})))))}}])&&$p(t.prototype,n),r&&$p(t,r),a}(ue.a.Component);sf.propTypes={isLoading:Ct.a.bool.isRequired,showLoadError:Ct.a.bool.isRequired,viewIndex:Ct.a.object,designDocName:Ct.a.string.isRequired,stopRefresh:Ct.a.func.isRequired,fetchDesignDocInfo:Ct.a.func.isRequired};var cf,uf={DESIGN_DOC_MONITOR:"DESIGN_DOC_MONITOR",DESIGN_FETCHING:"DESIGN_FETCHING",DESIGN_FETCHING_FAILED:"DESIGN_FETCHING_FAILED",DESIGN_REFRESH:"DESIGN_REFRESH"},lf=function(e,t){ff(),cf=window.setInterval((function(){pf(e.designDocInfo,t)}),5e3),t({type:uf.DESIGN_DOC_MONITOR,options:e})},pf=function(e,t){e.fetch().then((function(){t({type:uf.DESIGN_REFRESH,designDocInfo:e})}))},ff=function(){cf&&(window.clearInterval(cf),cf=void 0)},df={fetchDesignDocInfo:function(e){var t=e.designDocName,n=e.designDocInfo;return function(e){return e({type:uf.DESIGN_FETCHING}),n.fetch().then((function(){lf({designDocName:t,designDocInfo:n},e)})).catch((function(){e({type:uf.DESIGN_FETCHING_FAILED}),ae.addNotification({msg:"Error loading design document metadata.",type:"error",clear:!0})}))}},stopRefresh:ff},hf=Object(Pt.b)((function(e,t){var n=e.designDocInfo;return{isLoading:n.isLoading,showLoadError:n.showLoadError,viewIndex:n.viewIndex,designDocInfo:t.designDocInfo,designDocName:t.designDocName}}),(function(e){return{fetchDesignDocInfo:function(t){e(df.fetchDesignDocInfo(t))},stopRefresh:function(){df.stopRefresh()}}}))(sf);function mf(e){return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bf(e,t){return(bf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ef(e);if(t){var o=Ef(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _f(this,n)}}function _f(e,t){return!t||"object"!==mf(t)&&"function"!=typeof t?vf(e):t}function vf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ef(e){return(Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bf(e,t)}(a,e);var t,n,r,o=gf(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).toggleStable=t.toggleStable.bind(vf(t)),t.onUpdateChange=t.onUpdateChange.bind(vf(t)),t.toggleIncludeDocs=t.toggleIncludeDocs.bind(vf(t)),t.updateOptions=[{value:"true",label:"true"},{value:"lazy",label:"lazy"},{value:"false",label:"false"}],t}return t=a,(n=[{key:"toggleIncludeDocs",value:function(){this.props.toggleIncludeDocs(this.props.includeDocs)}},{key:"onUpdateChange",value:function(e){this.props.changeUpdateField(e.target.value)}},{key:"groupLevelChange",value:function(e){this.props.updateGroupLevel(e.target.value)}},{key:"groupLevel",value:function(){return this.props.reduce?ue.a.createElement("label",{className:"drop-down inline",id:"qoGroupLevelGroup"},"Group Level",ue.a.createElement("select",{onChange:this.groupLevelChange.bind(this),id:"qoGroupLevel",value:this.props.groupLevel,name:"group_level",className:"input-small"},ue.a.createElement("option",{value:"0"},"None"),ue.a.createElement("option",{value:"1"},"1"),ue.a.createElement("option",{value:"2"},"2"),ue.a.createElement("option",{value:"3"},"3"),ue.a.createElement("option",{value:"4"},"4"),ue.a.createElement("option",{value:"5"},"5"),ue.a.createElement("option",{value:"6"},"6"),ue.a.createElement("option",{value:"7"},"7"),ue.a.createElement("option",{value:"8"},"8"),ue.a.createElement("option",{value:"9"},"9"),ue.a.createElement("option",{value:"exact"},"Exact"))):null}},{key:"toggleReduce",value:function(){this.props.toggleReduce(this.props.reduce)}},{key:"toggleStable",value:function(){this.props.toggleStable(this.props.stable)}},{key:"includeDocsOption",value:function(){var e=this.props,t=e.includeDocs,n=e.reduce;return ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{disabled:n,onChange:this.toggleIncludeDocs,id:"qoIncludeDocs",name:"include_docs",type:"checkbox",checked:t}),ue.a.createElement("label",{className:n?"disabled":"",htmlFor:"qoIncludeDocs",id:"qoIncludeDocsLabel"},"Include Docs"))}},{key:"reduceOption",value:function(){var e=this.props,t=e.showReduce,n=e.reduce;return t?ue.a.createElement("span",null,ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{id:"qoReduce",name:"reduce",onChange:this.toggleReduce.bind(this),type:"checkbox",checked:n}),ue.a.createElement("label",{htmlFor:"qoReduce"},"Reduce")),this.groupLevel()):null}},{key:"stableOption",value:function(){var e=this.props,t=e.enableStable,n=e.stable;return t||(n=!1),ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{onChange:this.toggleStable,id:"qoStable",name:"stable",type:"checkbox",checked:n,disabled:!t}),ue.a.createElement("label",{className:t?"":"disabled",htmlFor:"qoStable",id:"qoStableLabel"},"Stable"))}},{key:"updateOption",value:function(){var e=this.props.update,t=this.updateOptions.map((function(e){return ue.a.createElement("option",{key:e.value,value:e.value},e.label)}));return ue.a.createElement("div",{className:"dropdown inline"},ue.a.createElement("label",{className:"drop-down"},"Update",ue.a.createElement("select",{className:"input-small",id:"qoUpdate",value:e,onChange:this.onUpdateChange},t)))}},{key:"render",value:function(){return ue.a.createElement("div",{className:"query-group",id:"query-options-main-fields"},ue.a.createElement("span",{className:"add-on"},"Query Options",ue.a.createElement("a",{className:"help-link",href:this.props.docURL,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},ue.a.createElement("i",{className:"icon-question-sign"}))),ue.a.createElement("div",{className:"row-fluid fieldsets"},this.includeDocsOption(),this.reduceOption()),ue.a.createElement("div",{className:"row-fluid fieldsets"},this.stableOption(),this.updateOption()))}}])&&yf(t.prototype,n),r&&yf(t,r),a}(ue.a.Component);function Of(e){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nf(e,t){return(Nf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Df(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cf(e);if(t){var o=Cf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rf(this,n)}}function Rf(e,t){return!t||"object"!==Of(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cf(e){return(Cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}wf.propTypes={toggleIncludeDocs:Ct.a.func.isRequired,includeDocs:Ct.a.bool.isRequired,reduce:Ct.a.bool.isRequired,toggleReduce:Ct.a.func,updateGroupLevel:Ct.a.func,docURL:Ct.a.string.isRequired,stable:Ct.a.bool.isRequired,toggleStable:Ct.a.func.isRequired,update:Ct.a.string.isRequired,changeUpdateField:Ct.a.func.isRequired,showReduce:Ct.a.bool.isRequired,enableStable:Ct.a.bool.isRequired};var Pf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nf(e,t)}(a,e);var t,n,r,o=Df(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"toggleByKeys",value:function(){this.props.toggleByKeys()}},{key:"toggleBetweenKeys",value:function(){this.props.toggleBetweenKeys()}},{key:"updateBetweenKeys",value:function(){this.props.updateBetweenKeys({startkey:this.startkey.value,endkey:this.endkey.value,include:this.props.betweenKeys.include})}},{key:"updateInclusiveEnd",value:function(){this.props.updateBetweenKeys({include:!this.props.betweenKeys.include,startkey:this.props.betweenKeys.startkey,endkey:this.props.betweenKeys.endkey})}},{key:"updateByKeys",value:function(e){this.props.updateByKeys(e.target.value)}},{key:"render",value:function(){var e=this,t="controls-group well js-query-keys-wrapper ",n="row-fluid js-keys-section ",r=n,o="drop-down btn ",a=o;return this.props.showByKeys||this.props.showBetweenKeys||(t+="hide"),this.props.showByKeys?o+="active":n+="hide",this.props.showBetweenKeys?a+="active":r+="hide",ue.a.createElement("div",{className:"query-group",id:"query-options-key-search"},ue.a.createElement("div",{className:"add-on"},"Keys"),ue.a.createElement("div",{className:"btn-group toggle-btns row-fluid"},ue.a.createElement("label",{style:{width:"101px"},id:"byKeys",onClick:this.toggleByKeys.bind(this),className:o},"By Key(s)"),ue.a.createElement("label",{style:{width:"101px"},id:"betweenKeys",onClick:this.toggleBetweenKeys.bind(this),className:a},"Between Keys")),ue.a.createElement("div",{className:t},ue.a.createElement("div",{className:n,id:"js-showKeys"},ue.a.createElement("div",{className:"controls controls-row"},ue.a.createElement("label",{htmlFor:"keys-input",className:"drop-down"},"A key, or an array of keys."),ue.a.createElement("textarea",{value:this.props.byKeys,onChange:this.updateByKeys.bind(this),id:"keys-input",className:"input-xxlarge",rows:"5",type:"text",placeholder:'Enter either a single key ["123"] or an array of keys ["123", "456"]. A key value is the first parameter emitted in a map function. For example emit("123", 1) the key is "123".'}),ue.a.createElement("div",{id:"keys-error",className:"inline-block js-keys-error"}))),ue.a.createElement("div",{className:r,id:"js-showStartEnd"},ue.a.createElement("div",{className:"controls controls-row"},ue.a.createElement("div",null,ue.a.createElement("label",{htmlFor:"startkey",className:"drop-down"},"Start key"),ue.a.createElement("input",{id:"startkey",ref:function(t){return e.startkey=t},type:"text",onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.startkey,placeholder:'e.g., "1234"'})),ue.a.createElement("div",null,ue.a.createElement("label",{htmlFor:"endkey",className:"drop-down"},"End key"),ue.a.createElement("input",{id:"endkey",ref:function(t){return e.endkey=t},onChange:this.updateBetweenKeys.bind(this),value:this.props.betweenKeys.endkey,type:"text",placeholder:'e.g., "1234"'}),ue.a.createElement("div",{className:"controls include-end-key-row checkbox controls-row inline"},ue.a.createElement("input",{id:"qoIncludeEndKeyInResults",type:"checkbox",onChange:this.updateInclusiveEnd.bind(this),checked:this.props.betweenKeys.include}),ue.a.createElement("label",{htmlFor:"qoIncludeEndKeyInResults"},"Include End Key in results")))))))}}])&&Sf(t.prototype,n),r&&Sf(t,r),a}(ue.a.Component);function Tf(e){return(Tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function If(e,t){return(If=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Af(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lf(e);if(t){var o=Lf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jf(this,n)}}function jf(e,t){return!t||"object"!==Tf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lf(e){return(Lf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&If(e,t)}(a,e);var t,n,r,o=Af(a);function a(){return kf(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"updateSkip",value:function(e){e.preventDefault();var t=e.target.value;/^\d*$/.test(t)||(ae.addNotification({msg:"Skip can only be a number",type:"error"}),t=this.props.skip),this.props.updateSkip(t)}},{key:"updateLimit",value:function(e){e.preventDefault(),this.props.updateLimit(e.target.value)}},{key:"toggleDescending",value:function(){this.props.toggleDescending(this.props.descending)}},{key:"render",value:function(){return ue.a.createElement("div",{className:"query-group",id:"query-options-additional-params"},ue.a.createElement("div",{className:"add-on additionalParams"},"Additional Parameters"),ue.a.createElement("div",{className:"row-fluid fieldsets"},ue.a.createElement("div",{className:"dropdown inline"},ue.a.createElement("label",{className:"drop-down"},"Limit",ue.a.createElement("select",{id:"qoLimit",onChange:this.updateLimit.bind(this),name:"limit",value:this.props.limit,className:"input-small"},ue.a.createElement("option",{value:"none"},"None"),ue.a.createElement("option",{value:5},"5"),ue.a.createElement("option",{value:10},"10"),ue.a.createElement("option",{value:20},"20"),ue.a.createElement("option",{value:30},"30"),ue.a.createElement("option",{value:50},"50"),ue.a.createElement("option",{value:100},"100"),ue.a.createElement("option",{value:500},"500"))))),ue.a.createElement("div",{className:"row-fluid fieldsets"},ue.a.createElement("div",{className:"checkbox inline"},ue.a.createElement("input",{id:"qoDescending",type:"checkbox",onChange:this.toggleDescending.bind(this),checked:this.props.descending}),ue.a.createElement("label",{htmlFor:"qoDescending"},"Descending")),ue.a.createElement("div",{className:"dropdown inline"},ue.a.createElement("label",{htmlFor:"qoSkip",className:"drop-down"},"Skip",ue.a.createElement("input",{value:this.props.skip,onChange:this.updateSkip.bind(this),className:"input-small",type:"number",id:"qoSkip",placeholder:"# of rows"})))))}}])&&xf(t.prototype,n),r&&xf(t,r),a}(ue.a.Component);function Uf(e){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bf(e,t){return(Bf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kf(e);if(t){var o=Kf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ff(this,n)}}function Ff(e,t){return!t||"object"!==Uf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kf(e){return(Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bf(e,t)}(a,e);var t,n,r,o=Vf(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"hideTray",value:function(){this.props.onCancel()}},{key:"render",value:function(){return ue.a.createElement("div",{className:"controls-group query-group"},ue.a.createElement("div",{id:"button-options",className:"controls controls-row"},ue.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Run Query"),ue.a.createElement("a",{onClick:this.hideTray.bind(this),className:"btn btn-cancelDark"},"Cancel")))}}])&&qf(t.prototype,n),r&&qf(t,r),a}(ue.a.Component);function Hf(e){return(Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wf(e,t){return(Wf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jf(e);if(t){var o=Jf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qf(this,n)}}function Qf(e,t){return!t||"object"!==Hf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jf(e){return(Jf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}zf.propTypes={onCancel:Ct.a.func.isRequired};var Yf=vi.ToggleHeaderButton,$f=vi.TrayContents,Zf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wf(e,t)}(a,e);var t,n,r,o=Xf(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=o.call(this,e);var n=e.ddocsOnly,r=e.queryOptionsApplyFilterOnlyDdocs;return n&&r(),t}return t=a,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.ddocsOnly,r=t.queryOptionsApplyFilterOnlyDdocs,o=t.queryOptionsRemoveFilterOnlyDdocs;!n&&e.ddocsOnly?r():n&&!e.ddocsOnly&&o()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.ddocsOnly,n=e.queryOptionsRemoveFilterOnlyDdocs;t&&n()}},{key:"executeQuery",value:function(e){e&&e.preventDefault(),this.closeTray();var t=this.props,n=t.queryOptionsExecute,r=t.queryOptionsParams,o=t.perPage,a=t.resetPagination,i=t.selectedLayout,s=t.changeLayout;a(o);var c=i===go.METADATA;c&&r.include_docs?s(go.TABLE):c||r.include_docs||s(go.METADATA),n(r,o)}},{key:"toggleTrayVisibility",value:function(){this.props.queryOptionsToggleVisibility(!this.props.contentVisible)}},{key:"closeTray",value:function(){this.props.queryOptionsToggleVisibility(!1)}},{key:"getTray",value:function(){return ue.a.createElement($f,{closeTray:this.closeTray.bind(this),contentVisible:this.props.contentVisible,className:"query-options",id:"query-options-tray",container:this},ue.a.createElement("form",{onSubmit:this.executeQuery.bind(this),className:"js-view-query-update custom-inputs"},ue.a.createElement(wf,{includeDocs:this.props.includeDocs,toggleIncludeDocs:this.props.queryOptionsToggleIncludeDocs,showReduce:this.props.showReduce,reduce:this.props.reduce,toggleReduce:this.props.queryOptionsToggleReduce,groupLevel:this.props.groupLevel,updateGroupLevel:this.props.queryOptionsUpdateGroupLevel,docURL:ae.constants.DOC_URLS.GENERAL,enableStable:this.props.enableStable,stable:this.props.stable,toggleStable:this.props.queryOptionsToggleStable,update:this.props.update,changeUpdateField:this.props.queryOptionsChangeUpdate}),ue.a.createElement(Pf,{key:1,showByKeys:this.props.showByKeys,showBetweenKeys:this.props.showBetweenKeys,toggleByKeys:this.props.queryOptionsToggleByKeys,toggleBetweenKeys:this.props.queryOptionsToggleBetweenKeys,betweenKeys:this.props.betweenKeys,updateBetweenKeys:this.props.queryOptionsUpdateBetweenKeys,byKeys:this.props.byKeys,updateByKeys:this.props.queryOptionsUpdateByKeys}),ue.a.createElement(Mf,{descending:this.props.descending,toggleDescending:this.props.queryOptionsToggleDescending,skip:this.props.skip,updateSkip:this.props.queryOptionsUpdateSkip,updateLimit:this.props.queryOptionsUpdateLimit,limit:this.props.limit}),ue.a.createElement(zf,{onCancel:this.closeTray.bind(this)})))}},{key:"showAsActive",value:function(){var e=this.props,t=e.reduce,n=e.betweenKeys,r=e.byKeys,o=e.descending,a=e.skip,i=e.limit,s=e.stable,c=e.update;return!!(n&&n.startkey||r||i&&"none"!=i||a||t||o||s||"true"!==c)}},{key:"render",value:function(){return ue.a.createElement("div",{id:"header-query-options"},ue.a.createElement("div",{id:"query-options"},ue.a.createElement("div",null,ue.a.createElement(Yf,{toggleCallback:this.toggleTrayVisibility.bind(this),containerClasses:"header-control-box control-toggle-queryoptions",title:"Query Options",fonticon:"fonticon-gears",text:"Options",active:this.showAsActive()}),this.getTray())))}}])&&Gf(t.prototype,n),r&&Gf(t,r),a}(ue.a.Component);Zf.propTypes={contentVisible:Ct.a.bool.isRequired,queryOptionsApplyFilterOnlyDdocs:Ct.a.func.isRequired,queryOptionsRemoveFilterOnlyDdocs:Ct.a.func.isRequired,queryOptionsExecute:Ct.a.func.isRequired,queryOptionsParams:Ct.a.object.isRequired,perPage:Ct.a.number.isRequired,resetPagination:Ct.a.func.isRequired,selectedLayout:Ct.a.string.isRequired,changeLayout:Ct.a.func.isRequired,queryOptionsToggleVisibility:Ct.a.func.isRequired,queryOptionsToggleStable:Ct.a.func.isRequired,queryOptionsChangeUpdate:Ct.a.func.isRequired,stable:Ct.a.bool.isRequired,update:Ct.a.string.isRequired};var ed="INDEX_RESULTS_REDUX_NEW_RESULTS",td="INDEX_RESULTS_REDUX_IS_LOADING",nd="INDEX_RESULTS_REDUX_CHANGE_LAYOUT",rd="INDEX_RESULTS_REDUX_TOGGLE_SHOW_ALL_COLUMNS",od="INDEX_RESULTS_REDUX_SET_PER_PAGE",ad="INDEX_RESULTS_REDUX_PAGINATE_NEXT",id="INDEX_RESULTS_REDUX_PAGINATE_PREVIOUS",sd="INDEX_RESULTS_REDUX_NEW_SELECTED_DOCS",cd="INDEX_RESULTS_REDUX_CHANGE_TABLE_HEADER_ATTRIBUTE",ud="INDEX_RESULTS_REDUX_RESET_STATE",ld="INDEX_RESULTS_REDUX_NEW_QUERY_OPTIONS",pd="INDEX_RESULTS_REDUX_PARTITION_PARAM_NOT_SUPPORTED",fd="INDEX_RESULTS_REDUX_PARTITION_PARAM_MANDATORY",dd="INDEX_RESULTS_SET_STYLE",hd=function(e,t,n){void 0===e&&(e="server");var r=se.utils.getSafeIdForDoc(t);r||(r="");var o=encodeURIComponent(n);return ae.urls("document",e,o,r,"?conflicts=true")},md=function(e,t){if(e)return t!==_o.MANGO_INDEX&&(!!Object.keys(e).length&&!!e._id)},yd=function(e,t){return t===_o.MANGO_INDEX?"special"!==e.type:!!((e._id||e.id)&&(e._rev||e.value&&e.value.rev))},bd=function(e,t){return!!e.find((function(e){return yd(e,t)}))},gd=function(){if(window.localStorage){var e=se.utils.localStorageGet("fauxton:perpageredux");if(e)return parseInt(e,10)}return ae.constants.MISC.DEFAULT_PAGE_SIZE},_d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_o.VIEW;return t===_o.VIEW?e.id||e._id:t===_o.MANGO_INDEX?"special"===e.type?"_all_docs":e.ddoc:t===_o.MANGO_QUERY?e._id:e.id||e._id},vd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_o.VIEW;return t===_o.VIEW?e.value?e.value.rev:e._rev:t!==_o.MANGO_INDEX&&t===_o.MANGO_QUERY?e._rev:void 0},Ed=function(e){return"Reason: "+(e&&e.message||"n/a")},wd=function(){return{type:ud}},Od=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:sd,selectedDocs:e}},Sd=function(e){return{type:nd,layout:e}};n(223);function Nd(){return(Nd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dd(){return(Dd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Rd=function(e,t,n){var r=function(e,t){var n={},r=(t.skip||0)+t.limit;n.skip=Math.max(e.skip,t.skip||0),n.limit=e.limit,e.conflicts&&(n.conflicts=!0);var o=r-n.skip;return{params:Dd({},t,n),totalDocsRemaining:o}}(t,n),o=r.params,a=r.totalDocsRemaining;return o.limit=Math.min(o.limit,1e4),function(t){return t({type:td}),e(o).then((function(e){var n=e.docs,r=e.docType,i=e.executionStats,s=e.warning,c=e.layout,u=function(e,t,n){var r=!1;return t&&e.length>t?e.splice(t):e.length===n&&(e.splice(n-1),r=!0),{finalDocList:e,canShowNext:r}}(n,a,o.limit),l=u.finalDocList,p=u.canShowNext;c&&t(Sd(c)),t(function(e,t,n,r,o,a){return{type:ed,docs:e,params:t,canShowNext:n,docType:r,executionStats:o,warning:a}}(l,o,p,r,i,s))})).catch((function(e){e&&-1!==e.message.indexOf("`partition` parameter is not supported")?t({type:pd}):e&&-1!==e.message.indexOf("`partition` parameter is mandatory")?t({type:fd}):ae.addNotification({msg:"Error running query. "+Ed(e),type:"error",clear:!0}),t(wd())}))}},Cd=function(e){var t="Failed to delete your document!";e&&(t="Failed to delete: "+e.join(", ")),ae.addNotification({msg:t,type:"error",clear:!0})},Pd=function(e,t,n,r,o,a,i){return!!function(e){var t=e.length,n=1===t?"Are you sure you want to delete this doc?":"Are you sure you want to delete these "+t+" docs?";return 0===t?(window.alert("Please select the document rows you want to delete."),!1):!!window.confirm(n)}(n)&&function(s){var c,u;if(i===_o.MANGO_INDEX)u={docids:n.map((function(e){return e._id}))},c=function(e,t){var n=ae.urls("mango","index-server-bulk-delete",encodeURIComponent(e));return O(n,t)}(e,u);else{if(i!==_o.VIEW&&i!==_o.MANGO_QUERY)throw new Error("Invalid document type: "+i);c=function(e,t){var n=ae.urls("bulk_docs","server",e);return O(n,t)}(e,u={docs:n})}return c.then((function(e){e.error?Cd():(Td(e,n,r,i),s(Od()),s(Rd(t,o,a)))}))}},Td=function(e,t,n,r){ae.addNotification({msg:"Successfully deleted your docs",clear:!0});var o=[];r===_o.MANGO_INDEX?e.fail&&(o=e.fail.map((function(e){return e.id}))):o=e.filter((function(e){return!!e.error})).map((function(e){return e.id}));var a=!!t.map((function(e){return e._id})).find((function(e){return/_design/.test(e)}));o.length>0&&Cd(o),n&&a&&Hs(n)};function kd(){return(kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var xd=function(e){return{type:od,perPage:e}},Id=function(e,t,n,r){return t=function(e,t,n){return kd({},e,{limit:n+1,skip:t.skip||0})}(t,n,r),function(o){o(xd(r)),o(Rd(e,t,n))}},Ad=function(e,t,n,r){return t=function(e,t){return kd({},e,{skip:e.skip+t})}(t,r),function(r){r({type:ad}),r(Rd(e,t,n))}},jd=function(e,t,n,r){return t=function(e,t){return kd({},e,{skip:Math.max(e.skip-t,0)})}(t,r),function(r){r({type:id}),r(Rd(e,t,n))}},Ld=function(e){return{type:ld,options:e}},Md=function(e){return Ld({includeDocs:!e})};function Ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bd=function(e){var t,n=e.def,r=e.type,o=[];return(o=n.fields.reduce((function(e,t,n){return 0===n?e.push(r+": "+Object.keys(t)[0]):e.push(Object.keys(t)[0]),e}),[])).length||(o=(t=ae.getExtensions("mango:additionalIndexes")[0])?t.createHeader({def:n,type:r}):[r+": "+(n.selector?JSON.stringify(n.selector):"{}")]),o.join(", ")},Vd=function(e){return JSON.stringify(e,null,3)},Fd=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ud(Object(n),!0).forEach((function(t){qd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t.ddoc,delete t.name,JSON.stringify(t,null," ")},Kd=function(e,t){var n=t.databaseName,r=t.docType,o=t.deleteEnabled,a=void 0===o||o,i=e.map((function(e){if("MangoIndex"===r)return{header:Bd(e),content:Fd(e),id:"special"===e.type?"_all_docs":e.ddoc,keylabel:"",url:e.id?hd("app",e.id,n):null,isDeletable:!!a&&"special"!==e.type,isEditable:!1};var t=_d(e,r);return{header:t,content:JSON.stringify(e,null," "),id:t||e.key&&e.key.toString(),_rev:vd(e,r),keylabel:"id",url:t?hd("app",t,n):null,isDeletable:a,isEditable:!0}}));return{displayedFields:null,hasBulkDeletableDoc:bd(e,r),results:i}},zd=function(e){var t=[];e.forEach((function(e){Object.keys(e).forEach((function(e){t.push(e)}))}));var n=(t=_.uniq(t)).indexOf("_id");return-1!==n&&(t.splice(n,1),t.unshift("_id")),t},Hd=function(e){return e.sort((function(e,t){return function e(t,n,r){return t[r]===n[r]?r<2?e(t,n,r+1):0:1===r?t[r]<n[r]?-1:1:t[r]<n[r]?1:-1}(e,t,0)}))},Gd=function(e,t){var n,r=null,o=t.selectedFieldsTableView,a=t.showAllFieldsTableView,i=e.map((function(e){return e.doc||e}));n=zd(i),o&&0===o.length&&(o=function(e,t){var n=e.reduce((function(e,t){return e=e.concat(Object.keys(t))}),[]);return delete(n=_.countBy(n,(function(e){return e}))).id,delete n._rev,n=Object.keys(n).reduce((function(e,t){return e.push([n[t],t]),e}),[]),(n=(n=Hd(n)).slice(0,t)).reduce((function(e,t){return e.push(t[1]),e}),[])}(i,5));var s,c,u=_.without(n,"_attachments");return s=o,c=u,r=_.without.bind(void 0,c).apply(void 0,s),a&&(r=null,o=u),{schema:n,normalizedDocs:i,selectedFieldsTableView:o,notSelectedFieldsTableView:r}},Wd=function(e,t){var n=go.METADATA===t.selectedLayout,r=n?function(e){var t=zd(e);return{schema:t,normalizedDocs:e,selectedFieldsTableView:t,notSelectedFieldsTableView:null}}(e):Gd(e,t),o=r.schema,a=r.normalizedDocs,i=r.selectedFieldsTableView,s=r.notSelectedFieldsTableView,c=a.map((function(e){return{content:e,id:_d(e,t.docType),_rev:vd(e,t.docType),header:"",keylabel:"",url:e._id||e.id?hd("app",e._id||e.id,t.databaseName):null,isDeletable:!!t.deleteEnabled&&yd(e,t.docType),isEditable:md(e,t.docType)}}));return{notSelectedFields:s,selectedFields:i,hasBulkDeletableDoc:!!t.deleteEnabled&&bd(a,t.docType),schema:o,results:c,displayedFields:n?null:{shown:_.uniq(i).length,allFieldCount:_.without(o,"_attachments").length}}};function Xd(e){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qd(){return(Qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jd(Object(n),!0).forEach((function(t){$d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zd={noResultsWarning:"",docs:[],selectedDocs:[],isLoading:!1,tableView:{selectedFieldsTableView:[],showAllFieldsTableView:!1},isEditable:!0,selectedLayout:go.METADATA,textEmptyIndex:"No Documents Found",docType:_o.VIEW,resultsStyle:function(){var e=se.utils.localStorageGet("fauxton:results_style");e||(e={textOverflow:vo.TEXT_OVERFLOW_TRUNCATED,fontSize:vo.FONT_SIZE_MEDIUM});return e}(),fetchParams:{limit:gd()+1,skip:0},pagination:{pageStart:1,currentPage:1,perPage:gd(),canShowNext:!1},queryOptionsPanel:{isVisible:!1,showByKeys:!1,showBetweenKeys:!1,includeDocs:!1,betweenKeys:{include:!0,startkey:"",endkey:""},byKeys:"",descending:!1,skip:"",limit:"none",reduce:!1,groupLevel:"exact",showReduce:!1,stable:!1,update:"true"}};function eh(e){se.utils.localStorageSet("fauxton:results_style",e)}var th=function(e){return"query"!==e.language},nh=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.docs,o={databaseName:t,selectedLayout:e.selectedLayout,selectedFieldsTableView:e.tableView.selectedFieldsTableView,showAllFieldsTableView:e.tableView.showAllFieldsTableView,docType:e.docType,deleteEnabled:n},a=r.filter(th);return go.JSON===o.selectedLayout?Kd(a,o):Wd(a,o)},rh=function(e){return e.selectedLayout===go.TABLE},oh=function(e){return!!ah(e)&&e.pagination.pageStart+e.docs.length-1},ah=function(e){return!e.isLoading&&e.docs.length>0},ih=function(e){if(0===e.docs.length||0===e.selectedDocs.length)return!1;for(var t=function(t){var n=e.docs[t];if(!yd(n,e.docType))return"continue";return e.selectedDocs.some((function(t){return _d(n,e.docType)===t._id}))?void 0:{v:!1}},n=0;n<e.docs.length;n++){var r=t(n);if("continue"!==r&&"object"===Xd(r))return r.v}return!0},sh=function(e){return e.selectedDocs.length>0},ch=function(e){return e.selectedDocs.length},uh=function(e){return e.pagination.currentPage>1},lh=function(e,t){return nh(e,t).displayedFields||{}},ph=function(e){var t=e.queryOptionsPanel,n={};if(t.includeDocs&&(n.include_docs=t.includeDocs),t.showBetweenKeys){var r=t.betweenKeys;n.inclusive_end=r.include,r.startkey&&""!=r.startkey&&(n.start_key=r.startkey),r.endkey&&""!=r.endkey&&(n.end_key=r.endkey)}else t.showByKeys&&t.byKeys.trim()&&(n.keys=t.byKeys.replace(/\r?\n/g,""));return"none"!==t.limit&&(n.limit=parseInt(t.limit,10)),t.skip&&(n.skip=parseInt(t.skip,10)),t.descending&&(n.descending=t.descending),t.reduce&&(n.reduce=!0,"exact"===t.groupLevel?n.group=!0:n.group_level=t.groupLevel),void 0!==t.update&&"true"!==t.update&&(n.update=t.update),!0===t.stable&&(n.stable=t.stable),n},fh=function(e){return e.docs},dh=function(e){return e.selectedDocs},hh=function(e){return e.isEditable},mh=function(e){return e.selectedLayout},yh=function(e){return e.textEmptyIndex},bh=function(e){return e.docType},gh=function(e){return e.tableView.showAllFieldsTableView},_h=function(e){return e.pagination.canShowNext},vh=function(e){return e.pagination.perPage},Eh=function(e){return e.fetchParams},wh=function(e){return e.resultsStyle},Oh=function(e,t,n){return!sr.isViewSelected(t)||!sr.selectedItemIsPartitionedView(e,t,n)},Sh=Object(Pt.b)((function(e,t){var n,r,o=e.indexResults,a=e.sidebar,i=e.databases,s=o.queryOptionsPanel;return{contentVisible:s.isVisible,includeDocs:s.includeDocs,showReduce:(n=a.designDocList,r=t.selectedNavItem,sr.selectedViewContainsReduceFunction(n,r)),reduce:s.reduce,groupLevel:s.groupLevel,showByKeys:s.showByKeys,showBetweenKeys:s.showBetweenKeys,betweenKeys:s.betweenKeys,byKeys:s.byKeys,descending:s.descending,skip:s.skip,limit:s.limit,enableStable:Oh(a.designDocList,t.selectedNavItem,i.isDbPartitioned),stable:s.stable,update:s.update,fetchParams:Eh(o),queryOptionsParams:ph(o),perPage:vh(o),selectedLayout:mh(o),ddocsOnly:t.ddocsOnly}}),(function(e,t){return{resetPagination:function(t){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae.constants.MISC.DEFAULT_PAGE_SIZE;return xd(e)}(t))},queryOptionsToggleReduce:function(t){e(function(e){return Ld(e?{reduce:!e}:{reduce:!e,includeDocs:!1})}(t))},queryOptionsUpdateGroupLevel:function(t){e(function(e){return Ld({groupLevel:e})}(t))},queryOptionsToggleByKeys:function(t){e(function(e){return Ld({showByKeys:!e,showBetweenKeys:!!e})}(t))},queryOptionsToggleBetweenKeys:function(t){e(function(e){return Ld({showBetweenKeys:!e,showByKeys:!!e})}(t))},queryOptionsUpdateBetweenKeys:function(t){e(function(e){return Ld({betweenKeys:e})}(t))},queryOptionsUpdateByKeys:function(t){e(function(e){return Ld({byKeys:e})}(t))},queryOptionsToggleDescending:function(t){e(function(e){return Ld({descending:!e})}(t))},queryOptionsUpdateSkip:function(t){e(function(e){return Ld({skip:e})}(t))},queryOptionsUpdateLimit:function(t){e(function(e){return Ld({limit:e})}(t))},queryOptionsToggleIncludeDocs:function(t){e(Md(t))},queryOptionsToggleVisibility:function(t){e(function(e){return Ld({isVisible:e})}(t))},queryOptionsExecute:function(n,r){e(function(e,t,n){var r=function(e){return{limit:e+1,skip:0}}(n);return Rd(e,r,t)}(t.queryDocs,n,r))},queryOptionsApplyFilterOnlyDdocs:function(){e(Ld({betweenKeys:{include:!1,startkey:'"_design"',endkey:'"_design0"'},showBetweenKeys:!0,showByKeys:!1}))},queryOptionsRemoveFilterOnlyDdocs:function(){e(Ld({betweenKeys:{},showBetweenKeys:!1,showByKeys:!1}))},queryOptionsToggleStable:function(t){e(function(e){return Ld({stable:!e})}(t))},queryOptionsChangeUpdate:function(t){e(function(e){return Ld({update:e.toString()})}(t))},changeLayout:function(t){e(Sd(t))},resetState:function(){e(wd())}}}))(Zf),Nh=Sh;Sh.propTypes={queryDocs:Ct.a.func.isRequired};var Dh=function(e){var t=e.database,n=e.loadOptions;return ue.a.createElement("div",null,ue.a.createElement(vi.ThrottledReactSelectAsync,{className:"jump-to-doc",name:"jump-to-doc",placeholder:"Document ID",loadOptions:n,clearable:!1,ignoreCase:!1,ignoreAccents:!1,cache:!1,onChange:function(e){var n=e.value,r=ae.urls("document","app",se.utils.safeURLName(t.id),se.utils.safeURLName(n));setTimeout((function(){return ae.navigate(r,{trigger:!0})}))}}))};Dh.propTypes={database:Ct.a.object.isRequired,loadOptions:Ct.a.func.isRequired};var Rh=Dh,Ch=function(e,t){return function(n,r){var o="?"+se.utils.queryParams({startkey:JSON.stringify(n),endkey:JSON.stringify(n+""),limit:30}),a=t?ae.urls("partitioned_allDocs","server",e.safeID(),encodeURIComponent(t),o):ae.urls("allDocs","server",e.safeID(),o);E(a).then((function(e){var t=[];e.error||(t=e.rows.map((function(e){return{value:e.id,label:e.id}})));r(null,{options:t})}))}},Ph=function(e){var t=e.database,n=e.hideQueryOptions,r=e.hideJumpToDoc,o=e.queryDocs,a=e.ddocsOnly,i=e.selectedNavItem,s=e.partitionKey;return ue.a.createElement("div",{className:"header-right right-db-header flex-layout flex-row"},ue.a.createElement("div",{className:"faux-header__searchboxwrapper"},ue.a.createElement("div",{className:"faux-header__searchboxcontainer"},r?null:ue.a.createElement(Rh,{key:JSON.stringify(t+s),cache:!1,loadOptions:Ch(t,s),database:t}))),n?null:ue.a.createElement(Nh,{ddocsOnly:a,queryDocs:o,selectedNavItem:i}))};Ph.propTypes={database:Ct.a.object.isRequired,hideQueryOptions:Ct.a.bool,isRedux:Ct.a.bool,queryDocs:Ct.a.func,selectedNavItem:Ct.a.object,partitionKey:Ct.a.string},Ph.defaultProps={hideQueryOptions:!1};var Th=Ph;function kh(e){return(kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ih(e,t){return(Ih=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ah(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lh(e);if(t){var o=Lh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jh(this,n)}}function jh(e,t){return!t||"object"!==kh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lh(e){return(Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ih(e,t)}(a,e);var t,n,r,o=Ah(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e,t,n,r=this.props,o=r.selectedLayout,a=r.docType,i=r.queryOptionsParams,s=r.fetchUrl;if(a===_o.VIEW)e=ue.a.createElement(rn.a,{className:o===go.METADATA?"active":"",onClick:this.toggleLayout.bind(this,go.METADATA)},"Metadata");else if(a===_o.MANGO_INDEX)return null;var c=s&&-1!==s.indexOf("/_all_docs"),u=a===_o.MANGO_QUERY;return(c||u||!i.reduce)&&(n=ue.a.createElement(rn.a,{className:o===go.TABLE?"active":"",onClick:this.toggleLayout.bind(this,go.TABLE)},ue.a.createElement("i",{className:"fonticon-table"})," Table"),t=ue.a.createElement(rn.a,{className:o===go.JSON?"active":"",onClick:this.toggleLayout.bind(this,go.JSON)},ue.a.createElement("i",{className:"fonticon-json"})," JSON")),ue.a.createElement("div",{className:"alternative-header"},ue.a.createElement(rn.b,{className:"two-sides-toggle-button"},n,e,t))}},{key:"toggleLayout",value:function(e){var t=this.props,n=t.changeLayout,r=t.selectedLayout,o=t.fetchDocs,a=t.fetchParams,i=t.queryOptionsParams,s=t.queryOptionsToggleIncludeDocs;if(e!==r)return n(e),i.include_docs=e!==go.METADATA,e===go.TABLE?a.conflicts=!0:delete a.conflicts,s(!i.include_docs),void o(a,i)}}])&&xh(t.prototype,n),r&&xh(t,r),a}(ue.a.Component);function Uh(e){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bh(e,t){return(Bh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zh(e);if(t){var o=zh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fh(this,n)}}function Fh(e,t){return!t||"object"!==Uh(t)&&"function"!=typeof t?Kh(e):t}function Kh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zh(e){return(zh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gh=vi.MenuDropDown,Wh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bh(e,t)}(a,e);var t,n,r,o=Vh(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).toggleTextOverflow=t.toggleTextOverflow.bind(Kh(t)),t.setFontSize=t.setFontSize.bind(Kh(t)),t}return t=a,(n=[{key:"toggleTextOverflow",value:function(){this.props.resultsStyle.textOverflow===vo.TEXT_OVERFLOW_FULL?this.props.updateStyle({textOverflow:vo.TEXT_OVERFLOW_TRUNCATED}):this.props.updateStyle({textOverflow:vo.TEXT_OVERFLOW_FULL})}},{key:"setFontSize",value:function(e){this.props.updateStyle({fontSize:e})}},{key:"getDensitySection",value:function(){var e="Show full values";return this.props.resultsStyle.textOverflow===vo.TEXT_OVERFLOW_FULL&&(e="Truncate values"),{title:"Display density",links:[{title:e,onClick:this.toggleTextOverflow}]}}},{key:"getFontSizeSection",value:function(){var e=this;return{title:"Font size",links:[{title:"Small",onClick:function(){e.setFontSize(vo.FONT_SIZE_SMALL)},icon:this.props.resultsStyle.fontSize===vo.FONT_SIZE_SMALL?"fonticon-ok":""},{title:"Medium",onClick:function(){e.setFontSize(vo.FONT_SIZE_MEDIUM)},icon:this.props.resultsStyle.fontSize===vo.FONT_SIZE_MEDIUM?"fonticon-ok":""},{title:"Large",onClick:function(){e.setFontSize(vo.FONT_SIZE_LARGE)},icon:this.props.resultsStyle.fontSize===vo.FONT_SIZE_LARGE?"fonticon-ok":""}]}}},{key:"render",value:function(){var e=[];return this.props.showDensity&&e.push(this.getDensitySection()),this.props.showFontSize&&e.push(this.getFontSizeSection()),ue.a.createElement("div",{className:"toolbar-dropdown"},ue.a.createElement(Gh,{id:"result-style-menu",links:e,icon:"fonticon-mixer",hideArrow:!0,toggleType:"button"}))}}])&&qh(t.prototype,n),r&&qh(t,r),a}(ue.a.Component);function Xh(e){return(Xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yh(e,t){return(Yh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=em(e);if(t){var o=em(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zh(this,n)}}function Zh(e,t){return!t||"object"!==Xh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function em(e){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Hh(Wh,"defaultProps",{showDensity:!0,showFontSize:!0}),Hh(Wh,"propTypes",{resultsStyle:Ct.a.object.isRequired,updateStyle:Ct.a.func.isRequired,showDensity:Ct.a.bool,showFontSize:Ct.a.bool});var tm=vi.BulkActionComponent,nm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yh(e,t)}(a,e);var t,n,r,o=$h(a);function a(){return Qh(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"shouldComponentUpdate",value:function(e){return null!=e.isListDeletable}},{key:"render",value:function(){var e=this.props,t=e.hasResults,n=e.isListDeletable,r=e.removeItem,o=e.allDocumentsSelected,a=e.hasSelectedItem,i=e.toggleSelectAll,s=e.isLoading,c=e.databaseName,u=e.partitionKey,l=null;(n&&t||s)&&(l=ue.a.createElement(tm,{removeItem:r,isChecked:o,hasSelectedItem:a,toggleSelect:i,disabled:s,title:"Select all docs that can be..."}));var p=null,f=this.props.selectedLayout!==go.JSON,d=null;(t||s)&&(p=ue.a.createElement(Mh,this.props),d=ue.a.createElement(Wh,{updateStyle:this.props.updateResultsStyle,resultsStyle:this.props.resultsStyle,showDensity:f}));var h=null;return c&&(h=ue.a.createElement("div",{className:"document-result-screen__toolbar-flex-container"},ue.a.createElement("a",{href:sr.getNewDocUrl(c,u),className:"btn save document-result-screen__toolbar-create-btn btn-primary"},"Create Document"))),ue.a.createElement("div",{className:"document-result-screen__toolbar"},l,p,d,h)}}])&&Jh(t.prototype,n),r&&Jh(t,r),a}(ue.a.Component);function rm(e){var t=e.text,n=e.isWarning,r=ue.a.createElement("div",{className:"no-results-screen-warning"},ue.a.createElement("i",{className:"fonticon-attention-circled"}),t);return ue.a.createElement("div",{className:"no-results-screen"},n?r:null,ue.a.createElement("div",{className:"watermark-logo"}),n?null:ue.a.createElement("h3",null,t))}function om(e){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function am(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function im(e,t){return(im=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=um(e);if(t){var o=um(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cm(this,n)}}function cm(e,t){return!t||"object"!==om(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function um(e){return(um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}nm.propTypes={removeItem:Ct.a.func.isRequired,allDocumentsSelected:Ct.a.bool.isRequired,hasSelectedItem:Ct.a.bool.isRequired,toggleSelectAll:Ct.a.func.isRequired,isLoading:Ct.a.bool.isRequired,hasResults:Ct.a.bool.isRequired,isListDeletable:Ct.a.bool,partitionKey:Ct.a.string,docType:Ct.a.string,resultsStyle:Ct.a.object.isRequired,updateResultsStyle:Ct.a.func.isRequired},rm.propTypes={text:Ct.a.string.isRequired};var lm=vi.Copy,pm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&im(e,t)}(a,e);var t,n,r,o=sm(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={checked:t.props.isSelected},t}return t=a,(n=[{key:"onChange",value:function(){this.props.docChecked(this.props.el.id,this.props.el._rev)}},{key:"getRowContents",value:function(e,t){var n=e.content;return this.props.data.selectedFields.map(function(e,r){var o="tableview-data-cell-"+t+e+r+n[e],a=-1!==["object","boolean"].indexOf(om(n[e]))?JSON.stringify(n[e],null,"  "):n[e],i=nn()({showall:this.props.textOverflow===vo.TEXT_OVERFLOW_FULL,"small-font":this.props.fontSize===vo.FONT_SIZE_SMALL,"large-font":this.props.fontSize===vo.FONT_SIZE_LARGE});return ue.a.createElement("td",{key:o,title:a,className:i,onClick:this.onClick.bind(this)},a)}.bind(this))}},{key:"maybeGetCheckboxCell",value:function(e,t){return ue.a.createElement("td",{className:"tableview-checkbox-cell",key:"tableview-checkbox-cell-"+t},e.isDeletable?ue.a.createElement("input",{id:"checkbox-"+this.props.docIdentifier,checked:this.props.isSelected,type:"checkbox",onChange:this.onChange.bind(this)}):null)}},{key:"getAdditionalInfoRow",value:function(e){var t=Object.keys(e._attachments||{}).length,n=null,r=null,o=Object.keys(e._conflicts||{}).length,a=null,i=null;return t&&(r=1===t?t+" Attachment":t+" Attachments",n=ue.a.createElement("div",{style:{display:"inline",marginLeft:"5px"},title:r},ue.a.createElement("i",{className:"icon fonticon-paperclip"}),t)),o&&(i=1===o?o+" Conflict":o+" Conflicts",a=ue.a.createElement("div",{className:"tableview-conflict","data-conflicts-indicator":!0,style:{display:"inline"},title:i},ue.a.createElement("i",{style:{fontSize:"17px"},className:"icon icon-code-fork"}),o)),ue.a.createElement("td",{className:"tableview-el-last",onClick:this.onClick.bind(this)},a,n)}},{key:"getCopyButton",value:function(e){var t=JSON.stringify(e,null,"  ");return ue.a.createElement("td",{title:t,className:"tableview-el-copy"},ue.a.createElement(lm,{title:t,text:t,uniqueKey:Object(Gl.a)(),onClipboardClick:this.showCopiedMessage}))}},{key:"showCopiedMessage",value:function(){ae.addNotification({msg:"The document content has been copied to the clipboard.",type:"success",clear:!0})}},{key:"onClick",value:function(e){this.props.onClick(this.props.el._id,this.props.el,e)}},{key:"render",value:function(){var e=this.props.index,t=this.props.el.content,n=this.props.el;return ue.a.createElement("tr",{key:"tableview-content-row-"+e},this.maybeGetCheckboxCell(n,e),this.getCopyButton(t),this.getRowContents(n,e),this.getAdditionalInfoRow(t))}}])&&am(t.prototype,n),r&&am(t,r),a}(ue.a.Component);function fm(e){var t=e.selectedField,n=e.notSelectedFields,r=e.index,o=e.changeField,a=e.selectedFields,i=n.map((function(e){return{value:e,label:e}}));return ue.a.createElement("div",{className:"table-container-autocomplete"},ue.a.createElement("div",{className:"table-select-wrapper"},ue.a.createElement(ui.a,{value:t,options:i,clearable:!1,onChange:function(e){o({newSelectedRow:e.value,index:r},a)}})))}function dm(e){return(dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mm(e,t){return(mm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gm(e);if(t){var o=gm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bm(this,n)}}function bm(e,t){return!t||"object"!==dm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gm(e){return(gm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pm,"defaultProps",{textOverflow:vo.TEXT_OVERFLOW_TRUNCATED}),pm.propTypes={docIdentifier:Ct.a.string.isRequired,docChecked:Ct.a.func.isRequired,isSelected:Ct.a.bool.isRequired,index:Ct.a.number.isRequired,data:Ct.a.object.isRequired,onClick:Ct.a.func.isRequired,textOverflow:Ct.a.string};var _m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mm(e,t)}(a,e);var t,n,r,o=ym(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"getContentRows",value:function(){var e=this.props.data.results,t=this.props.resultsStyle,n=t.textOverflow,r=t.fontSize;return e.map(function(e,t){return ue.a.createElement(pm,{onClick:this.props.onClick,key:"tableview-row-component-"+t,index:t,el:e,docIdentifier:e.id||"tableview-row-component-"+t,docChecked:this.props.docChecked,isSelected:this.props.isSelected(e.id),data:this.props.data,textOverflow:n,fontSize:r})}.bind(this))}},{key:"getOptionFieldRows",value:function(e){return this.props.data.notSelectedFields?e.map(function(e,t){return ue.a.createElement("th",{key:"header-el-"+t},this.getDropdown(e,this.props.data.schema,t,this.props.changeField,this.props.data.selectedFields))}.bind(this)):e.map((function(e,t){return ue.a.createElement("th",{key:"header-el-"+t},e)}))}},{key:"getDropdown",value:function(e,t,n,r,o){return ue.a.createElement(fm,{selectedField:e,notSelectedFields:t,index:n,changeField:r,selectedFields:o})}},{key:"getHeader",value:function(){var e=this.props.data.selectedFields,t=this.getOptionFieldRows(e);return ue.a.createElement("tr",{key:"tableview-content-row-header"},ue.a.createElement("th",{className:"tableview-header-el-checkbox"}),ue.a.createElement("th",{className:"tableview-el-copy"}),t,ue.a.createElement("th",{className:"tableview-el-last"}))}},{key:"render",value:function(){return ue.a.createElement("div",{className:"table-view-docs"},ue.a.createElement("table",{className:"table table-striped"},ue.a.createElement("thead",null,this.getHeader()),ue.a.createElement("tbody",null,this.getContentRows())))}}])&&hm(t.prototype,n),r&&hm(t,r),a}(ue.a.Component);function vm(e){return(vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Em(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wm(e,t){return(wm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Om(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nm(e);if(t){var o=Nm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sm(this,n)}}function Sm(e,t){return!t||"object"!==vm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nm(e){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dm=vi.LoadLines,Rm=vi.Document,Cm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wm(e,t)}(a,e);var t,n,r,o=Om(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"onClick",value:function(e,t){t.url&&ae.navigate(t.url)}},{key:"getUrlFragment",value:function(e){return this.props.isEditable?ue.a.createElement("a",{href:e},ue.a.createElement("i",{className:"fonticon-pencil"})):null}},{key:"getDocumentList",value:function(){var e=this,t=function(){},n=this.props.results.results;return _.map(n,(function(n,r){return ue.a.createElement(Rm,{key:n.id+r,doc:n,onClick:e.props.isEditable?e.onClick:t,keylabel:n.keylabel,docContent:n.content,docType:e.props.docType,checked:e.props.isSelected(n.id),header:n.header,docChecked:e.props.docChecked,isDeletable:n.isDeletable,docIdentifier:n.id,resultsStyle:e.props.resultsStyle},n.url?e.getUrlFragment("#".concat(n.url)):n.url)}))}},{key:"getDocumentStyleView",value:function(){var e="view";return this.props.isListDeletable&&(e="".concat(e," show-select")),ue.a.createElement("div",{className:e},ue.a.createElement("div",{id:"doc-list"},this.getDocumentList()))}},{key:"getTableStyleView",value:function(){return ue.a.createElement("div",null,ue.a.createElement(_m,{onClick:this.onClick,docChecked:this.props.docChecked,isSelected:this.props.isSelected,isListDeletable:this.props.isListDeletable,data:this.props.results,isLoading:this.props.isLoading,removeItem:this.props.removeItem,isChecked:this.props.allDocumentsSelected,hasSelectedItem:this.props.hasSelectedItem,toggleSelect:this.toggleSelectAll,changeField:this.props.changeTableHeaderAttribute,resultsStyle:this.props.resultsStyle,title:"Select all docs that can be..."}))}},{key:"getMainView",value:function(){return this.props.isLoading?ue.a.createElement("div",{className:"loading-lines-wrapper"},ue.a.createElement(Dm,null)):!this.props.noResultsWarning&&this.props.hasResults?this.props.selectedLayout===go.JSON?this.getDocumentStyleView():this.getTableStyleView():void 0}},{key:"getNoResultScreen",value:function(){if(!this.props.isLoading){if(this.props.noResultsWarning)return ue.a.createElement(rm,{text:this.props.noResultsWarning,isWarning:!0});if(!this.props.hasResults)return ue.a.createElement(rm,{text:this.props.textEmptyIndex})}}},{key:"render",value:function(){return ue.a.createElement("div",{className:"document-result-screen"},this.getNoResultScreen(),ue.a.createElement(nm,this.props),this.getMainView())}}])&&Em(t.prototype,n),r&&Em(t,r),a}(ue.a.Component);function Pm(e){return(Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tm(){return(Tm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?km(Object(n),!0).forEach((function(t){Im(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):km(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Im(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Am(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jm(e,t){return(jm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Um(e);if(t){var o=Um(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mm(this,n)}}function Mm(e,t){return!t||"object"!==Pm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Um(e){return(Um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jm(e,t)}(a,e);var t,n,r,o=Lm(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams;e.fetchAtStartup&&t(n,r)}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fetchDocs,n=e.fetchParams,r=e.queryOptionsParams,o=e.ddocsOnly,a=e.fetchUrl,i=e.resetState,s=e.partitionKey;this.props.ddocsOnly===o&&this.props.fetchUrl===a&&this.props.partitionKey===s||(i(),t(xm(xm({},n),{},{skip:0}),xm(xm({},r),{},{reduce:void 0,group:void 0,group_level:void 0})))}},{key:"componentWillUnmount",value:function(){(0,this.props.resetState)()}},{key:"deleteSelectedDocs",value:function(){var e=this.props,t=e.bulkDeleteDocs,n=e.fetchParams;t(e.selectedDocs,n,e.queryOptionsParams)}},{key:"isSelected",value:function(e){return this.props.selectedDocs.findIndex((function(t){return e===t._id}))>-1}},{key:"docChecked",value:function(e,t){if(e){var n=this.props;(0,n.selectDoc)({_id:e,_rev:t},n.selectedDocs)}}},{key:"toggleSelectAll",value:function(){var e=this.props,t=e.docs,n=e.selectedDocs,r=e.allDocumentsSelected;(0,e.bulkCheckOrUncheck)(t,n,r)}},{key:"render",value:function(){var e=this.props.results;return ue.a.createElement(Cm,Tm({removeItem:this.deleteSelectedDocs.bind(this),isSelected:this.isSelected.bind(this),docChecked:this.docChecked.bind(this),isListDeletable:e.hasBulkDeletableDoc,toggleSelectAll:this.toggleSelectAll.bind(this)},this.props))}}])&&Am(t.prototype,n),r&&Am(t,r),a}(ue.a.Component);qm.propTypes={fetchAtStartup:Ct.a.bool.isRequired,fetchDocs:Ct.a.func.isRequired};var Bm=Object(Pt.b)((function(e,t){var n,r=e.indexResults;return{noResultsWarning:r.noResultsWarning,docs:fh(r),selectedDocs:dh(r),isLoading:(n=r,n.isLoading),hasResults:ah(r),results:nh(r,t.databaseName,t.deleteEnabled),isEditable:hh(r),selectedLayout:mh(r),allDocumentsSelected:ih(r),hasSelectedItem:sh(r),numDocsSelected:ch(r),textEmptyIndex:yh(r),docType:bh(r),fetchParams:Eh(r),queryOptionsParams:ph(r),partitionKey:t.partitionKey,resultsStyle:wh(r)}}),(function(e,t){return{fetchDocs:function(n,r){e(Rd(t.queryDocs,n,r))},selectDoc:function(t,n){e(function(e,t){var n=t.findIndex((function(t){return t._id===e._id}));return n>-1?t.splice(n,1):(e._deleted=!0,t.push(e)),Od(t)}(t,n))},bulkDeleteDocs:function(n,r,o){e(Pd(t.databaseName,t.queryDocs,n,t.designDocs,r,o,t.docType))},changeLayout:function(t){e(Sd(t))},bulkCheckOrUncheck:function(n,r,o){e(function(e,t,n,r){return e.forEach((function(e){if(yd(e,r)){var o=t.findIndex((function(t){return _d(e,r)===t._id}));n?t.splice(o,1):-1===o&&t.push({_id:_d(e,r),_rev:vd(e,r),_deleted:!0})}})),Od(t)}(n,r,o,t.docType))},changeTableHeaderAttribute:function(t,n){e(function(e,t){return t[e.index]=e.newSelectedRow,{type:cd,selectedFieldsTableView:t}}(t,n))},resetState:function(){e(wd())},queryOptionsToggleIncludeDocs:function(t){e(Md(t))},updateResultsStyle:function(t){e(function(e){return{type:dd,resultsStyle:e}}(t))}}}))(qm),Vm=Bm;function Fm(e){var t=e.nextClicked,n=e.previousClicked,r="",o="";return e.canShowPrevious||(r="disabled"),e.canShowNext||(o="disabled"),ue.a.createElement("div",{className:"documents-pagination"},ue.a.createElement("ul",{className:"pagination"},ue.a.createElement("li",{className:r},ue.a.createElement("a",{id:"previous",onClick:n,className:"icon fonticon-left-open",href:"#","data-bypass":"true"})),ue.a.createElement("li",{className:o},ue.a.createElement("a",{id:"next",onClick:t,className:"icon fonticon-right-open",href:"#","data-bypass":"true"}))))}function Km(e){return(Km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hm(e,t){return(Hm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xm(e);if(t){var o=Xm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wm(this,n)}}function Wm(e,t){return!t||"object"!==Km(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xm(e){return(Xm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Bm.propTypes={queryDocs:Ct.a.func.isRequired,docType:Ct.a.string.isRequired},Fm.propTypes={nextClicked:Ct.a.func.isRequired,previousClicked:Ct.a.func.isRequired,canShowPrevious:Ct.a.bool.isRequired,canShowNext:Ct.a.bool.isRequired};var Qm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hm(e,t)}(a,e);var t,n,r,o=Gm(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"getAmountShownFields",value:function(){var e=this.props.displayedFields;return e.shown===e.allFieldCount?ue.a.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," columns."):ue.a.createElement("div",{className:"pull-left shown-fields"},"Showing ",e.shown," of ",e.allFieldCount," columns.")}},{key:"render",value:function(){var e=this.props,t=e.prioritizedEnabled,n=e.toggleShowAllColumns;return ue.a.createElement("div",{className:"footer-table-control"},this.getAmountShownFields(),ue.a.createElement("div",{className:"footer-doc-control-prioritized-wrapper pull-left"},ue.a.createElement("label",{htmlFor:"footer-doc-control-prioritized"},ue.a.createElement("input",{id:"footer-doc-control-prioritized",checked:t,onChange:n,type:"checkbox"}),"Show all columns.")))}}])&&zm(t.prototype,n),r&&zm(t,r),a}(ue.a.Component);function Jm(e){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ym(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $m(e,t){return($m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ty(e);if(t){var o=ty(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ey(this,n)}}function ey(e,t){return!t||"object"!==Jm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ty(e){return(ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Qm.propTypes={prioritizedEnabled:Ct.a.bool.isRequired,displayedFields:Ct.a.object.isRequired,toggleShowAllColumns:Ct.a.func.isRequired};var ny=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$m(e,t)}(a,e);var t,n,r,o=Zm(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"getPageNumberText",value:function(){var e=this.props,t=e.docs,n=e.pageStart,r=e.pageEnd;return 0===t.length?ue.a.createElement("span",null,"Showing 0 documents."):ue.a.createElement("span",null,"Showing document ",n," - ",r,".")}},{key:"perPageChange",value:function(e){var t=this.props;(0,t.updatePerPageResults)(e,t.fetchParams,t.queryOptionsParams)}},{key:"nextClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowNext,r=t.fetchParams,o=t.queryOptionsParams,a=t.paginateNext,i=t.perPage;n&&a(r,o,i)}},{key:"previousClicked",value:function(e){e.preventDefault();var t=this.props,n=t.canShowPrevious,r=t.fetchParams,o=t.queryOptionsParams,a=t.paginatePrevious,i=t.perPage;n&&a(r,o,i)}},{key:"render",value:function(){var e=this.props,t=e.showPrioritizedEnabled,n=e.hasResults,r=e.prioritizedEnabled,o=e.displayedFields,a=e.perPage,i=e.canShowNext,s=e.canShowPrevious,c=e.toggleShowAllColumns;return ue.a.createElement("footer",{className:"index-pagination pagination-footer"},ue.a.createElement(Fm,{nextClicked:this.nextClicked.bind(this),previousClicked:this.previousClicked.bind(this),canShowNext:i,canShowPrevious:s}),ue.a.createElement("div",{className:"footer-controls"},ue.a.createElement("div",{className:"page-controls"},t&&n?ue.a.createElement(Qm,{prioritizedEnabled:r,displayedFields:o,toggleShowAllColumns:c}):null),ue.a.createElement(Pi,{perPageChange:this.perPageChange.bind(this),perPage:a}),ue.a.createElement("div",{className:"current-docs"},this.getPageNumberText())))}}])&&Ym(t.prototype,n),r&&Ym(t,r),a}(ue.a.Component),ry=Object(Pt.b)((function(e,t){var n,r=e.indexResults;return{docs:fh(r),selectedDocs:dh(r),hasResults:ah(r),pageStart:(n=r,n.pagination.pageStart),pageEnd:oh(r),perPage:vh(r),prioritizedEnabled:gh(r),showPrioritizedEnabled:rh(r),displayedFields:lh(r,t.databaseName),canShowNext:_h(r),canShowPrevious:uh(r),fetchParams:Eh(r),queryOptionsParams:ph(r)}}),(function(e,t){return{toggleShowAllColumns:function(){e({type:rd})},updatePerPageResults:function(n,r,o){e(Id(t.queryDocs,r,o,n))},paginateNext:function(n,r,o){e(Ad(t.queryDocs,n,r,o))},paginatePrevious:function(n,r,o){e(jd(t.queryDocs,n,r,o))}}}))(ny),oy=ry;ry.propTypes={queryDocs:Ct.a.func.isRequired};var ay=Object(Pt.b)((function(e,t){var n=e.indexResults,r=t.docUrl,o=t.endpoint,a=t.endpointAddQueryOptions;if(r||(r=ae.constants.DOC_URLS.GENERAL),o&&a){var i=se.utils.queryString(ph(n));i&&(o=-1==o.indexOf("?")?"".concat(o,"?").concat(i):"".concat(o,"&").concat(i))}return{docUrl:r,endpoint:o}}))(Wt),iy=ay;function sy(e){return(sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uy(e,t){return(uy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ly(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dy(e);if(t){var o=dy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return py(this,n)}}function py(e,t){return!t||"object"!==sy(t)&&"function"!=typeof t?fy(e):t}function fy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dy(e){return(dy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ay.propTypes={databaseName:Ct.a.string,docUrl:Ct.a.string,endpoint:Ct.a.string,endpointAddQueryOptions:Ct.a.bool};var hy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uy(e,t)}(a,e);var t,n,r,o=ly(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={editorValue:"",editMode:!1},t.onModeSwitchClick=t.onModeSwitchClick.bind(fy(t)),t.onBlur=t.onBlur.bind(fy(t)),t.startEdit=t.startEdit.bind(fy(t)),t.onKeyPress=t.onKeyPress.bind(fy(t)),t.onChange=t.onChange.bind(fy(t)),t.props.checkDbPartitioned(t.props.databaseName),t}return t=a,(n=[{key:"onModeSwitchClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),!this.props.globalMode&&this.props.onGlobalModeSelected?this.props.onGlobalModeSelected():this.props.partitionKey?this.props.onPartitionKeySelected(this.state.editorValue):this.startEdit()}},{key:"startEdit",value:function(){var e=this;this.setState({editMode:!0,editorValue:this.props.partitionKey}),setTimeout((function(){return e.textInput.focus()}))}},{key:"updatePartitionKey",value:function(){this.setState({editMode:!1});var e=this.state.editorValue.trim();e?this.props.onPartitionKeySelected(e):this.props.onGlobalModeSelected()}},{key:"onBlur",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.updatePartitionKey()}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.updatePartitionKey()}},{key:"onChange",value:function(e){this.setState({editorValue:e.target.value})}},{key:"globalHeader",value:function(){return ue.a.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch"},ue.a.createElement("i",{className:"fonticon-filter"}),"No partition selected")}},{key:"partitionHeader",value:function(){var e=this,t=ue.a.createElement("input",{type:"text",style:{padding:2,fontSize:16,margin:0,display:this.state.editMode?"block":"none"},onKeyPress:this.onKeyPress,onChange:this.onChange,onBlur:this.onBlur,value:this.state.editorValue,ref:function(t){e.textInput=t}}),n="Click to select a partition",r="partition-selector__key";return""!==this.props.partitionKey&&(n=this.props.partitionKey,r+=" partition-selector__key--active"),ue.a.createElement(ue.a.Fragment,null,ue.a.createElement("button",{onClick:this.onModeSwitchClick,title:"Partition Key Selector",className:"button partition-selector__switch button partition-selector__switch--active"},ue.a.createElement("i",{className:"fonticon-filter"})),ue.a.createElement("div",{className:r},ue.a.createElement("span",{onClick:this.startEdit,style:{display:this.state.editMode?"none":"block"}},n),t))}},{key:"render",value:function(){if(!this.props.selectorVisible)return null;var e=this.props.globalMode&&!this.state.editMode;return ue.a.createElement("div",{className:"partition-selector"},e?this.globalHeader():this.partitionHeader())}}])&&cy(t.prototype,n),r&&cy(t,r),a}(ue.a.Component);hy.defaultProps={partitionKey:"",globalMode:!0},hy.propTypes={selectorVisible:Ct.a.bool.isRequired,partitionKey:Ct.a.string.isRequired,checkDbPartitioned:Ct.a.func.isRequired,onPartitionKeySelected:Ct.a.func.isRequired,onGlobalModeSelected:Ct.a.func,globalMode:Ct.a.bool};var my="PARTITON_KEY_SHOW_SELECTOR",yy="PARTITON_KEY_HIDE_SELECTOR",by=Object(Pt.b)((function(e,t){return{selectorVisible:e.partitionKey.selectorVisible,databaseName:t.databaseName,partitionKey:t.partitionKey,onPartitionKeySelected:t.onPartitionKeySelected,globalMode:t.globalMode}}),(function(e){return{checkDbPartitioned:function(t){e(function(e){return function(t){t({type:yy}),vt(e).then((function(e){e.props&&!0===e.props.partitioned&&t({type:my})}))}}(t))}}}))(hy),gy=by;by.propTypes={databaseName:Ct.a.string.isRequired,partitionKey:Ct.a.string.isRequired,onPartitionKeySelected:Ct.a.func.isRequired,onGlobalModeSelected:Ct.a.func.isRequired,globalMode:Ct.a.bool};var _y=function(e){var t=e.hideQueryOptions,n=e.hideJumpToDoc,r=e.database,o=e.dbName,a=e.dropDownLinks,i=e.docURL,s=e.endpoint,c=e.endpointAddQueryOptions,u=e.fetchUrl,l=e.ddocsOnly,p=e.queryDocs,f=e.selectedNavItem,d=e.showPartitionKeySelector,h=e.partitionKey,m=e.onPartitionKeySelected,y=e.onGlobalModeSelected,b=e.globalMode,g=null;return d&&(g=ue.a.createElement(gy,{databaseName:o,partitionKey:h,onPartitionKeySelected:m,onGlobalModeSelected:y,globalMode:b})),ue.a.createElement("header",{className:"two-panel-header"},ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"header-docs-left"},ue.a.createElement(Hl,{dbName:o,partitionKey:h,dropDownLinks:a})),ue.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.a.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},g),ue.a.createElement("div",{id:"right-header",className:"flex-fill"},ue.a.createElement(Th,{hideQueryOptions:t,hideJumpToDoc:n,database:r,fetchUrl:u,ddocsOnly:l,queryDocs:p,partitionKey:h,selectedNavItem:f})),ue.a.createElement(iy,{docURL:i,endpoint:s,endpointAddQueryOptions:c}),ue.a.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ue.a.createElement(Vt,null)))))};_y.propTypes={dbName:Ct.a.string.isRequired,dropDownLinks:Ct.a.array.isRequired,docURL:Ct.a.string,endpoint:Ct.a.string,showIncludeAllDocs:Ct.a.bool,hideQueryOptions:Ct.a.bool,hideJumpToDoc:Ct.a.bool,database:Ct.a.object.isRequired,queryDocs:Ct.a.func,selectedNavItem:Ct.a.object,showPartitionKeySelector:Ct.a.bool.isRequired,partitionKey:Ct.a.string,onPartitionKeySelected:Ct.a.func,onGlobalModeSelected:Ct.a.func,globalMode:Ct.a.bool},_y.defaultProps={hideHeaderBar:!1,showPartitionKeySelector:!1};var vy=function(e){var t=e.hideFooter,n=e.lowerContent,r=e.upperContent,o=e.fetchUrl,a=e.databaseName,i=e.queryDocs,s=e.selectedNavItem,c=e.partitionKey;return ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(Vl,{selectedNavItem:s,selectedPartitionKey:c})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement("div",{id:"dashboard-upper-content"},r),ue.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},n),ue.a.createElement("div",{id:"footer"},t?null:ue.a.createElement(oy,{databaseName:a,fetchUrl:o,queryDocs:i}))))};vy.defaultProps={hideFooter:!1},vy.propTypes={hideFooter:Ct.a.bool,lowerContent:Ct.a.object,upperContent:Ct.a.object,selectedNavItem:Ct.a.object};var Ey=function(e){var t=e.database,n=e.designDocs,r=e.docURL,o=e.endpoint,a=e.dbName,i=e.dropDownLinks,s=e.fetchUrl,c=e.ddocsOnly,u=e.deleteEnabled,l=void 0===u||u,p=e.selectedNavItem,f=e.partitionKey,d=e.onPartitionKeySelected,h=e.onGlobalModeSelected,m=e.globalMode,y=(p.navItem,function(e){return function(e,t,n){Nd(n,{reduce:void 0,group:void 0,group_level:void 0});var r=se.utils.queryString(n),o="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(r);return E(o).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:_o.VIEW}}))}(s,0,e)});sr.isViewSelected(p)&&(y=function(e){return function(e,t){void 0===t.reduce&&(t.reduce=!1),t.include_docs&&t.reduce&&(t.reduce=!1,t.group=void 0,t.group_level=void 0),-1!==e.indexOf("/_partition/")&&(t.stable=void 0,t.conflicts=void 0);var n=se.utils.queryString(t),r="".concat(e).concat(-1!==e.indexOf("?")?"&":"?").concat(n);return E(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.rows,docType:_o.VIEW,layout:void 0}}))}(s,e)});var b=ue.a.createElement(Vm,{fetchUrl:s,designDocs:n,ddocsOnly:c,databaseName:a,fetchAtStartup:!0,queryDocs:y,docType:_o.VIEW,deleteEnabled:l,partitionKey:f});return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(_y,{docURL:r,endpoint:o,endpointAddQueryOptions:!0,dbName:a,dropDownLinks:i,database:t,fetchUrl:s,ddocsOnly:c,queryDocs:y,selectedNavItem:p,showPartitionKeySelector:!c,partitionKey:f,onPartitionKeySelected:d,onGlobalModeSelected:h,globalMode:m}),ue.a.createElement(vy,{lowerContent:b,fetchUrl:s,databaseName:a,queryDocs:y,selectedNavItem:p,partitionKey:f}))},wy=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,a=e.dropDownLinks,i=e.selectedNavItem,s=e.partitionKey;return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(_y,{docURL:t,endpoint:r,dbName:o,dropDownLinks:a,database:n,hideQueryOptions:!0}),ue.a.createElement(vy,{upperContent:ue.a.createElement(Jp,null),lowerContent:ue.a.createElement(Ip,{databaseName:o}),hideFooter:!0,selectedNavItem:i,partitionKey:s}))},Oy=function(e){var t=e.showEditView,n=e.database,r=e.docURL,o=e.endpoint,a=e.dbName,i=e.dropDownLinks,s=e.selectedNavItem,c=e.designDocInfo,u=e.partitionKey,l=t?ue.a.createElement(yu.IndexEditorContainer,{partitionKey:u}):ue.a.createElement(hf,{designDocInfo:c,designDocName:s.designDocName});return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(_y,{endpoint:o,docURL:r,dbName:a,dropDownLinks:i,database:n,partitionKey:u,queryDocs:function(){},hideQueryOptions:!0,hideJumpToDoc:!0}),ue.a.createElement(vy,{lowerContent:l,hideFooter:!0,selectedNavItem:s,partitionKey:u}))};Oy.defaultProps={showEditView:!0},Oy.propTypes={showEditView:Ct.a.bool,docURL:Ct.a.string.isRequired,endpoint:Ct.a.string,dbName:Ct.a.string.isRequired,dropDownLinks:Ct.a.array.isRequired,designDocInfo:Ct.a.object};var Sy,Ny=rc.extend({routes:{"database/:database/_partition/:partitionkey/_all_docs":{route:"partitionedAllDocs",roles:["fx_loggedIn"]},"database/:database/_all_docs(:extra)":{route:"globalAllDocs",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_info":{route:"designDocMetadata",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_info":{route:"designDocMetadataNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionKey/_changes":{route:"changes",roles:["fx_loggedIn"]},"database/:database/_changes":{route:"changes",roles:["fx_loggedIn"]}},initialize:function(e,t){this.initViews(t[0])},initViews:function(e){this.databaseName=e,this.database=new Ts.Model({id:this.databaseName}),this.createDesignDocsCollection(),this.addSidebar()},designDocMetadataNoPartition:function(e,t){return this.designDocMetadata(e,"",t)},designDocMetadata:function(e,t,n){var r=new ft.DdocInfo({_id:"_design/"+n},{database:this.database}),o=new oc("designDoc",{designDocName:n,designDocSection:"metadata"});Dt.fetchSelectedDatabaseInfo(e);var a=this.getCrumbs(this.database);return ue.a.createElement(Oy,{showEditView:!1,docURL:r.documentation(),endpoint:r.url("apiurl"),dbName:this.database.id,dropDownLinks:a,database:this.database,selectedNavItem:o,designDocInfo:r,partitionKey:t})},globalAllDocs:function(e,t){return this.allDocs(e,"",t)},partitionedAllDocs:function(e,t){return this.allDocs(e,t)},allDocs:function(e,t,n){var r=this.createParams(n).docParams,o=t?ae.urls("partitioned_allDocs","server",encodeURIComponent(e),encodeURIComponent(t)):ae.urls("allDocsSanitized","server",e);this.database.buildAllDocs(r);var a=!!(r.startkey&&r.startkey.indexOf("_design")>-1),i="all-docs";a&&(i="design-docs");var s=new oc(i);rr.showDeleteDatabaseModal({showDeleteModal:!1,dbId:""});var c=t?ae.urls("partitioned_allDocs","apiurl",encodeURIComponent(e),encodeURIComponent(t)):this.database.allDocs.urlRef("apiurl",{}),u=ae.constants.DOC_URLS.GENERAL,l=this.getCrumbs(this.database);return Dt.fetchSelectedDatabaseInfo(e),ue.a.createElement(Ey,{docURL:u,endpoint:c,dbName:this.database.id,dropDownLinks:l,database:this.database,designDocs:this.designDocs,fetchUrl:o,ddocsOnly:a,selectedNavItem:s,partitionKey:t,onPartitionKeySelected:function(t){var n=ae.urls("partitioned_allDocs","app",encodeURIComponent(e),encodeURIComponent(t));ae.navigate("#/"+n)},onGlobalModeSelected:function(){var t=ae.urls("allDocs","app",encodeURIComponent(e));ae.navigate("#/"+t)},globalMode:""===t})},changes:function(e,t){var n=new oc("changes");return Dt.fetchSelectedDatabaseInfo(e),ue.a.createElement(wy,{endpoint:ae.urls("changes","apiurl",this.database.id,""),docURL:this.database.documentation(),dbName:this.database.id,dropDownLinks:this.getCrumbs(this.database),database:this.database,selectedNavItem:n,partitionKey:t})}}),Dy="RESET_DOC",Ry="DOC_LOADED",Cy="SHOW_CLONE_DOC_MODAL",Py="HIDE_CLONE_DOC_MODAL",Ty="SHOW_DELETE_DOC_CONFIRMATION_MODAL",ky="HIDE_DELETE_DOC_CONFIRMATION_MODAL",xy="SHOW_UPLOAD_MODAL",Iy="HIDE_UPLOAD_MODAL",Ay="RESET_UPLOAD_MODAL",jy="FILE_UPLOAD_SUCCESS",Ly="FILE_UPLOAD_ERROR",My="START_FILE_UPLOAD",Uy="SET_FILE_UPLOAD_PERCENTAGE",qy="SAVING_DOCUMENT",By="SAVING_DOCUMENT_COMPLETED",Vy=function(e){return function(t){var n=e.doc;t({type:Dy}),n.fetch().then((function(){t({type:Ry,options:{doc:n}}),e.onLoaded&&e.onLoaded()}),(function(t){404===t.status&&Ky("The ".concat(n.id," document does not exist.")),ae.navigate(ae.urls("allDocs","app",e.database.id,""))}))}},Fy=function(){return function(e){e({type:Py})}};function Ky(e){ae.addNotification({msg:e,type:"error",clear:!0})}var zy=function(e){ae.reduxDispatch(Vy(e))},Hy=function(e,t,n,r){return function(o){t?(o({type:qy}),e.save().then((function(){n(e.prettyJSON()),o({type:By}),ae.addNotification({msg:"Document saved successfully.",type:"success",clear:!0}),r?ae.navigate(r,{trigger:!0}):ae.navigate("#/"+ae.urls("allDocs","app",ae.url.encode(e.database.id)),{trigger:!0})})).fail((function(e){o({type:By}),ae.addNotification({msg:"Save failed: "+JSON.parse(e.responseText).reason,type:"error",fade:!1,clear:!0})}))):e.validationError&&"Cannot change a documents id."===e.validationError?(Ky("You cannot edit the _id of an existing document. Try this: Click 'Clone Document', then change the _id on the clone before saving."),delete e.validationError):Ky("Please fix the JSON errors and try saving again.")}},Gy=function(){return function(e){e({type:Cy})}},Wy=Fy,Xy=function(e,t,n){Fy(),t.copy(n).then((function(){var t=ae.urls("document","app",e.safeID(),encodeURIComponent(n));ae.navigate(t,{trigger:!0}),ae.addNotification({msg:"Document has been duplicated."})}),(function(e){var t="Could not duplicate document, reason: ".concat(e.responseText,".");ae.addNotification({msg:t,type:"error"})}))},Qy=function(){return function(e){e({type:Ty})}},Jy=function(){return function(e){e({type:ky})}},Yy=function(e){var t=e.database.safeID(),n="?rev="+e.get("_rev"),r=ae.urls("document","server",t,e.safeID(),n);w(r).then((function(e){if(e.error)throw new Error(e.reason||e.error);ae.addNotification({msg:"Your document has been successfully deleted.",type:"success",clear:!0}),ae.navigate(ae.urls("allDocs","app",t,""))})).catch((function(e){ae.addNotification({msg:"Failed to delete your document. Reason: "+e.message,type:"error",clear:!0})}))},$y=function(){return function(e){e({type:xy})}},Zy=function(){return function(e){e({type:Iy})}},eb=function(e){return function(t){if(0!==e.files.length){t({type:My});var n="?rev="+e.rev,r=e.doc.getDatabase().safeID(),o=e.doc.safeID(),a=e.files[0],i=ae.urls("document","attachment",r,o,encodeURIComponent(a.name),n),s=function(e){t({type:Ly,options:{error:e}})},c=new XMLHttpRequest;Sy=c,c.withCredentials=!0,c.upload&&(c.upload.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;t({type:Uy,options:{percent:n}})}}),c.onloadend=function(){Sy=void 0},c.onerror=function(){s("Error uploading file")},c.onload=function(){if(c.status>=200&&c.status<300)o=e.doc,t(Vy({doc:o,onLoaded:function(){t({type:jy}),ae.addNotification({msg:"Document saved successfully.",type:"success",clear:!0})}}));else{var n="Error uploading file. ";try{if(c.responseText){var r=JSON.parse(c.responseText);r.error&&(n+="Reason: "+(r.reason||r.error))}}catch(e){}s(n)}var o},c.open("PUT",i),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-Type",a.type||"application/octet-stream"),c.setRequestHeader("Accept","application/json"),c.send(a)}else t({type:Ly,options:{error:"Please select a file to be uploaded."}})}},tb=function(){Sy&&Sy.abort()},nb=function(){return function(e){e({type:Ay})}};function rb(e){return(rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ob(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ab(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ib(e,t){return(ib=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lb(e);if(t){var o=lb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cb(this,n)}}function cb(e,t){return!t||"object"!==rb(t)&&"function"!=typeof t?ub(e):t}function ub(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lb(e){return(lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ib(e,t)}(a,e);var t,n,r,o=sb(a);function a(){var e;ob(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pb(ub(e=o.call.apply(o,[this].concat(n))),"getAttachmentList",(function(){var t=encodeURIComponent(e.props.doc.database.get("id")),n=encodeURIComponent(e.props.doc.get("_id"));return _.map(e.props.doc.get("_attachments"),(function(e,r){var o=ae.urls("document","attachment",t,n,encodeURIComponent(r));return ue.a.createElement(rn.e,{key:r,href:o,target:"_blank","data-bypass":"true"},ue.a.createElement("strong",null,r),ue.a.createElement("span",{className:"attachment-delimiter"},"-"),ue.a.createElement("span",null,e.content_type,e.content_type?", ":"",R.formatSize(e.length)))}))})),e}return t=a,(n=[{key:"render",value:function(){return!(this.props.isLoading||!this.props.doc.get("_attachments"))&&ue.a.createElement("div",{className:"panel-section view-attachments-section btn-group"},ue.a.createElement(rn.d,{id:"view-attachments-menu",disabled:this.props.disabled},ue.a.createElement(rn.d.Toggle,{noCaret:!0,className:"panel-button dropdown-toggle btn","data-bypass":"true"},ue.a.createElement("i",{className:"icon icon-paper-clip"}),ue.a.createElement("span",{className:"button-text"},"View Attachments"),ue.a.createElement("span",{className:"caret"})),ue.a.createElement(rn.d.Menu,null,this.getAttachmentList())))}}])&&ab(t.prototype,n),r&&ab(t,r),a}(ue.a.Component);function db(e){return(db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yb(e,t){return(yb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vb(e);if(t){var o=vb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gb(this,n)}}function gb(e,t){return!t||"object"!==db(t)&&"function"!=typeof t?_b(e):t}function _b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vb(e){return(vb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}pb(fb,"propTypes",{isLoading:Ct.a.bool.isRequired,disabled:Ct.a.bool,doc:Ct.a.object}),pb(fb,"defaultProps",{isLoading:!0,disabled:!1,doc:{}});var wb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yb(e,t)}(a,e);var t,n,r,o=bb(a);function a(){var e;hb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Eb(_b(e=o.call.apply(o,[this].concat(n))),"state",{uuid:null}),Eb(_b(e),"cloneDoc",(function(){e.props.onSubmit&&e.props.onSubmit(),e.props.cloneDoc(e.props.database,e.props.doc,e.state.uuid)})),Eb(_b(e),"closeModal",(function(t){t&&t.preventDefault(),e.props.hideCloneDocModal()})),Eb(_b(e),"docIDChange",(function(t){e.setState({uuid:t.target.value})})),e}return t=a,(n=[{key:"componentDidUpdate",value:function(){var e=this;null===this.state.uuid&&R.getUUID().then((function(t){if(t.uuids){var n={uuid:t.uuids[0]},r=e.props.doc?e.props.doc.attributes._id.indexOf(":"):-1;if(r>=0){var o=e.props.doc.attributes._id.substring(0,r);n.uuid=o+":"+n.uuid}e.setState(n)}})).catch((function(){}))}},{key:"render",value:function(){var e=this;return null!==this.state.uuid&&ue.a.createElement(rn.f,{dialogClassName:"clone-doc-modal",show:this.props.visible,onHide:this.closeModal},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,"Clone Document")),ue.a.createElement(rn.f.Body,null,ue.a.createElement("form",{className:"form",onSubmit:function(t){t.preventDefault(),e.cloneDoc()}},ue.a.createElement("p",null,"Document cloning copies the saved version of the document. Unsaved document changes will be discarded."),ue.a.createElement("p",null,"You can modify the following generated ID for your new document."),ue.a.createElement("input",{ref:function(t){return e.newDocId=t},type:"text",autoFocus:!0,className:"input-block-level",onChange:this.docIDChange,value:this.state.uuid}))),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ue.a.createElement("button",{className:"btn btn-primary save",onClick:this.cloneDoc},ue.a.createElement("i",{className:"icon-repeat"})," Clone Document")))}}])&&mb(t.prototype,n),r&&mb(t,r),a}(ue.a.Component);function Ob(e){return(Ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Db(e,t){return(Db=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pb(e);if(t){var o=Pb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cb(this,n)}}function Cb(e,t){return!t||"object"!==Ob(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pb(e){return(Pb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Eb(wb,"propTypes",{visible:Ct.a.bool.isRequired,doc:Ct.a.object,database:Ct.a.object.isRequired,onSubmit:Ct.a.func.isRequired,hideCloneDocModal:Ct.a.func.isRequired,cloneDoc:Ct.a.func.isRequired});var kb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Db(e,t)}(a,e);var t,n,r,o=Rb(a);function a(){return Sb(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e="icon "+this.props.iconClass;return ue.a.createElement("div",{className:"panel-section"},ue.a.createElement("button",{className:"panel-button ".concat(this.props.className),title:this.props.title,onClick:this.props.onClick,disabled:this.props.disabled},ue.a.createElement("i",{className:e}),ue.a.createElement("span",null,this.props.title)))}}])&&Nb(t.prototype,n),r&&Nb(t,r),a}(ue.a.Component);function xb(e){return(xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ib(){return(Ib=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ab(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lb(e,t){return(Lb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bb(e);if(t){var o=Bb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ub(this,n)}}function Ub(e,t){return!t||"object"!==xb(t)&&"function"!=typeof t?qb(e):t}function qb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bb(e){return(Bb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Tb(kb,"propTypes",{title:Ct.a.string.isRequired,onClick:Ct.a.func.isRequired,className:Ct.a.string,disabled:Ct.a.bool}),Tb(kb,"defaultProps",{title:"",iconClass:"",onClick:function(){},className:"",disabled:!1});var Fb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lb(e,t)}(a,e);var t,n,r,o=Mb(a);function a(){var e;Ab(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vb(qb(e=o.call.apply(o,[this].concat(n))),"closeModal",(function(t){t&&t.preventDefault(),e.props.inProgress&&e.props.cancelUpload(),e.props.hideUploadModal(),e.props.resetUploadModal()})),Vb(qb(e),"upload",(function(){e.props.uploadAttachment({doc:e.props.doc,rev:e.props.doc.get("_rev"),files:e.attachments.files})})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t="alert alert-error";""===this.props.errorMessage&&(t+=" hide");var n="progress progress-info",r={disabled:"disabled"};return this.props.inProgress||(n+=" hide",r={}),ue.a.createElement(rn.f,{dialogClassName:"upload-file-modal",show:this.props.visible,onHide:this.closeModal},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,"Upload Attachment")),ue.a.createElement(rn.f.Body,null,ue.a.createElement("div",{className:t},this.props.errorMessage),ue.a.createElement("div",null,ue.a.createElement("form",{ref:function(t){return e.uploadForm=t},className:"form"},ue.a.createElement("p",null,"Select a file to upload as an attachment to this document. Uploading a file saves the document as a new revision."),ue.a.createElement("input",Ib({ref:function(t){return e.attachments=t},type:"file",name:"_attachments"},r)),ue.a.createElement("br",null)),ue.a.createElement("div",{className:n},ue.a.createElement("div",{className:"bar",style:{width:this.props.uploadPercentage+"%"}})))),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("a",{href:"#","data-bypass":"true",className:"cancel-link",onClick:this.closeModal},"Cancel"),ue.a.createElement("button",Ib({href:"#",id:"upload-btn","data-bypass":"true",className:"btn btn-primary save",onClick:this.upload},r),ue.a.createElement("i",{className:"icon icon-upload"})," Upload Attachment")))}}])&&jb(t.prototype,n),r&&jb(t,r),a}(ue.a.Component);function Kb(e){return(Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gb(e,t){return(Gb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jb(e);if(t){var o=Jb(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xb(this,n)}}function Xb(e,t){return!t||"object"!==Kb(t)&&"function"!=typeof t?Qb(e):t}function Qb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jb(e){return(Jb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Vb(Fb,"propTypes",{visible:Ct.a.bool.isRequired,doc:Ct.a.object,inProgress:Ct.a.bool.isRequired,uploadPercentage:Ct.a.number.isRequired,errorMessage:Ct.a.string,cancelUpload:Ct.a.func.isRequired,hideUploadModal:Ct.a.func.isRequired,resetUploadModal:Ct.a.func.isRequired,uploadAttachment:Ct.a.func.isRequired});var $b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gb(e,t)}(a,e);var t,n,r,o=Wb(a);function a(){var e;zb(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Yb(Qb(e=o.call.apply(o,[this].concat(n))),"getCodeEditor",(function(){if(e.props.isLoading)return ue.a.createElement(vi.LoadLines,null);var t=e.props.doc.attributes;e.props.isDbPartitioned&&(-1!==t._id.indexOf(":")||t._id.startsWith("_design")||(t._id=":"+t._id));var n=JSON.stringify(t,null,"  "),r=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Ctrl-S"},exec:e.saveDoc}];return ue.a.createElement(vi.CodeEditor,{id:"doc-editor",ref:function(t){return e.docEditor=t},defaultCode:n,disabled:e.props.isSaving,mode:"json",autoFocus:!0,editorCommands:r,notifyUnsavedChanges:!0,stringEditModalEnabled:!0})})),Yb(Qb(e),"saveDoc",(function(){e.props.saveDoc(e.props.doc,e.checkDocIsValid(),e.onSaveComplete,e.props.previousUrl)})),Yb(Qb(e),"onSaveComplete",(function(){e.getEditor().clearChanges()})),Yb(Qb(e),"hideDeleteDocModal",(function(){e.props.hideDeleteDocModal()})),Yb(Qb(e),"deleteDoc",(function(){e.props.hideDeleteDocModal(),e.props.deleteDoc(e.props.doc)})),Yb(Qb(e),"getEditor",(function(){return e.docEditor?e.docEditor.getEditor():null})),Yb(Qb(e),"checkDocIsValid",(function(){if(e.getEditor().hasErrors())return!1;var t=JSON.parse(e.getEditor().getValue());return e.props.doc.clear().set(t,{validate:!0}),!e.props.doc.validationError})),Yb(Qb(e),"clearChanges",(function(){e.docEditor&&e.docEditor.clearChanges()})),Yb(Qb(e),"getExtensionIcons",(function(){var t=ae.getExtensions("DocEditor:icons");return _.map(t,(function(t,n){return ue.a.createElement(t,{doc:e.props.doc,key:n,database:e.props.database})}))})),Yb(Qb(e),"getButtonRow",(function(){return!e.props.isNewDoc&&null!==e.props.doc&&ue.a.createElement("div",null,ue.a.createElement(fb,{doc:e.props.doc,isLoading:e.props.isLoading,disabled:e.props.isSaving}),ue.a.createElement("div",{className:"doc-editor-extension-icons"},e.getExtensionIcons()),e.props.conflictCount?ue.a.createElement(kb,{title:"Conflicts (".concat(e.props.conflictCount,")"),iconClass:"icon-columns",className:"conflicts",disabled:e.props.isSaving,onClick:function(){ae.navigate(ae.urls("revision-browser","app",e.props.database.safeID(),e.props.doc.id))}}):null,ue.a.createElement(kb,{className:"upload",title:"Upload Attachment",iconClass:"icon-circle-arrow-up",disabled:e.props.isSaving,onClick:e.props.showUploadModal}),ue.a.createElement(kb,{title:"Clone Document",iconClass:"icon-repeat",disabled:e.props.isSaving,onClick:e.props.showCloneDocModal}),ue.a.createElement(kb,{title:"Delete",iconClass:"icon-trash",disabled:e.props.isSaving,onClick:e.props.showDeleteDocModal}))})),e}return t=a,(n=[{key:"UNSAFE_componentWillUpdate",value:function(e){(this.props.numFilesUploaded!==e.numFilesUploaded||this.props.doc&&this.props.doc.hasChanged()||this.props.doc&&e.doc&&this.props.doc.id!==e.doc.id)&&(this.getEditor()&&this.getEditor().setValue(JSON.stringify(e.doc.attributes,null,"  ")),this.onSaveComplete())}},{key:"render",value:function(){var e=this,t=this.props.isSaving?"Saving...":this.props.isNewDoc?"Create Document":"Save Changes",n=this.props.previousUrl?this.props.previousUrl:ae.urls("allDocs","app",ae.url.encode(this.props.database.id)),r="js-back cancel-button ".concat(this.props.isSaving?"cancel-button--disabled":"");return ue.a.createElement("div",null,ue.a.createElement("div",{id:"doc-editor-actions-panel"},ue.a.createElement("div",{className:"doc-actions-left"},ue.a.createElement("button",{disabled:this.props.isSaving,className:"save-doc btn btn-primary save",type:"button",onClick:this.saveDoc},ue.a.createElement("i",{className:"icon fonticon-ok-circled"})," ",t),ue.a.createElement("div",null,ue.a.createElement("a",{href:this.props.isSaving?void 0:"#/".concat(n),className:r},"Cancel"))),ue.a.createElement("div",{className:"alignRight"},this.getButtonRow())),ue.a.createElement("div",{className:"code-region"},ue.a.createElement("div",{className:"bgEditorGutter"}),ue.a.createElement("div",{id:"editor-container",className:"doc-code"},this.getCodeEditor())),ue.a.createElement(Fb,{ref:function(t){return e.uploadModal=t},visible:this.props.isUploadModalVisible,doc:this.props.doc,inProgress:this.props.uploadInProgress,uploadPercentage:this.props.uploadPercentage,errorMessage:this.props.uploadErrorMessage,cancelUpload:this.props.cancelUpload,hideUploadModal:this.props.hideUploadModal,resetUploadModal:this.props.resetUploadModal,uploadAttachment:this.props.uploadAttachment}),ue.a.createElement(wb,{doc:this.props.doc,database:this.props.database,visible:this.props.isCloneDocModalVisible,onSubmit:this.clearChanges,hideCloneDocModal:this.props.hideCloneDocModal,cloneDoc:this.props.cloneDoc}),ue.a.createElement("span",{id:"hey"},"bb"),ue.a.createElement(zi.ConfirmationModal,{title:"Confirm Deletion",visible:this.props.isDeleteDocModalVisible,text:"Are you sure you want to delete this document?",onClose:this.hideDeleteDocModal,onSubmit:this.deleteDoc,successButtonLabel:"Delete Document"}))}}])&&Hb(t.prototype,n),r&&Hb(t,r),a}(ue.a.Component);Yb($b,"defaultProps",{database:{},isNewDoc:!1}),Yb($b,"propTypes",{isLoading:Ct.a.bool.isRequired,isSaving:Ct.a.bool.isRequired,isNewDoc:Ct.a.bool.isRequired,isDbPartitioned:Ct.a.bool.isRequired,doc:Ct.a.object,conflictCount:Ct.a.number.isRequired,previousUrl:Ct.a.string,saveDoc:Ct.a.func.isRequired,isCloneDocModalVisible:Ct.a.bool.isRequired,database:Ct.a.object,showCloneDocModal:Ct.a.func.isRequired,hideCloneDocModal:Ct.a.func.isRequired,cloneDoc:Ct.a.func.isRequired,isDeleteDocModalVisible:Ct.a.bool.isRequired,showDeleteDocModal:Ct.a.func.isRequired,hideDeleteDocModal:Ct.a.func.isRequired,deleteDoc:Ct.a.func.isRequired,isUploadModalVisible:Ct.a.bool.isRequired,uploadInProgress:Ct.a.bool.isRequired,uploadPercentage:Ct.a.number.isRequired,uploadErrorMessage:Ct.a.string,numFilesUploaded:Ct.a.number.isRequired,showUploadModal:Ct.a.func.isRequired,hideUploadModal:Ct.a.func.isRequired,cancelUpload:Ct.a.func.isRequired,resetUploadModal:Ct.a.func.isRequired,uploadAttachment:Ct.a.func.isRequired});var Zb=Object(Pt.b)((function(e,t){var n=e.docEditor,r=e.databases;return{isLoading:n.isLoading||r.isLoadingDbInfo,isSaving:n.isSaving,isNewDoc:t.isNewDoc,isDbPartitioned:r.isDbPartitioned,doc:n.doc,database:t.database,conflictCount:n.docConflictCount,previousUrl:t.previousUrl,isCloneDocModalVisible:n.cloneDocModalVisible,isDeleteDocModalVisible:n.deleteDocModalVisible,isUploadModalVisible:n.uploadModalVisible,uploadInProgress:n.uploadInProgress,uploadPercentage:n.uploadPercentage,uploadErrorMessage:n.uploadErrorMessage,numFilesUploaded:n.numFilesUploaded}}),(function(e){return{saveDoc:function(t,n,r,o){e(Hy(t,n,r,o))},showCloneDocModal:function(){e(Gy())},hideCloneDocModal:function(){e(Wy())},cloneDoc:function(e,t,n){Xy(e,t,n)},showDeleteDocModal:function(){e(Qy())},hideDeleteDocModal:function(){e(Jy())},deleteDoc:function(e){Yy(e)},showUploadModal:function(){e($y())},hideUploadModal:function(){e(Zy())},cancelUpload:function(){tb()},resetUploadModal:function(){e(nb())},uploadAttachment:function(t){e(eb(t))}}}))($b),eg=function(e){var t=e.onClick,n=e.forward?"fonticon-right-open":"fonticon-left-open";return ue.a.createElement("div",{style:{height:"20px",width:"11px",marginTop:"7px"},className:n,onClick:t})};eg.propTypes={onClick:Ct.a.func.isRequired};var tg=function(e){var t=e.options,n=e.selected,r=e.onRevisionClick,o=e.onBackwardClick,a=e.onForwardClick;return ue.a.createElement("div",{className:"conflicting-revs-dropdown"},ue.a.createElement(eg,{backward:!0,onClick:o}),ue.a.createElement("div",{style:{width:"345px",margin:"0 5px"}},ue.a.createElement(ui.a,{name:"form-field-name",value:n,options:t,clearable:!1,onChange:r})),ue.a.createElement(eg,{forward:!0,onClick:a}))};tg.propTypes={options:Ct.a.array.isRequired,selected:Ct.a.string.isRequired,onRevisionClick:Ct.a.func.isRequired,onBackwardClick:Ct.a.func.isRequired,onForwardClick:Ct.a.func.isRequired};var ng=tg;function rg(e){return(rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function og(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ag(e,t){return(ag=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ig(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ug(e);if(t){var o=ug(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sg(this,n)}}function sg(e,t){return!t||"object"!==rg(t)&&"function"!=typeof t?cg(e):t}function cg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ug(e){return(ug=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lg=vi.ConfirmButton,pg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ag(e,t)}(a,e);var t,n,r,o=ig(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={checked:!1},t.close=t.close.bind(cg(t)),t.onDeleteConflicts=t.onDeleteConflicts.bind(cg(t)),t}return t=a,(n=[{key:"close",value:function(){this.props.toggleConfirmModal(!1,null)}},{key:"onDeleteConflicts",value:function(){var e=this.state.checked;this.props.onConfirm(this.props.docToWin,e)}},{key:"render",value:function(){var e=this;return ue.a.createElement(rn.f,{dialogClassName:"delete-conflicts-modal",show:this.props.show,onHide:this.close},ue.a.createElement(rn.f.Header,{closeButton:!1},ue.a.createElement(rn.f.Title,null,"Solve Conflicts")),ue.a.createElement(rn.f.Body,null,ue.a.createElement("p",null,ue.a.createElement("i",{className:"icon-warning-sign"})," Do you want to delete all conflicting revisions for this document?")),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("div",{style:{float:"left",marginTop:"10px"}},ue.a.createElement("label",null,ue.a.createElement("input",{style:{margin:"0 5px 3px 0"},onChange:function(){e.setState({checked:!e.state.checked})},type:"checkbox"}),"Do not show this warning message again")),ue.a.createElement("a",{style:{marginRight:"10px",cursor:"pointer"},onClick:this.close,"data-bypass":"true"},"Cancel"),ue.a.createElement(lg,{onClick:this.onDeleteConflicts,text:"Delete Revisions",buttonType:"btn-danger"})))}}])&&og(t.prototype,n),r&&og(t,r),a}(ue.a.Component);function fg(e){return(fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hg(e,t){return(hg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gg(e);if(t){var o=gg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yg(this,n)}}function yg(e,t){return!t||"object"!==fg(t)&&"function"!=typeof t?bg(e):t}function bg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gg(e){return(gg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}pg.propTypes={onConfirm:Ct.a.func.isRequired,toggleConfirmModal:Ct.a.func.isRequired};var _g=vi.ConfirmButton,vg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hg(e,t)}(a,e);var t,n,r,o=mg(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={showModal:!1},t.selectAsWinner=t.selectAsWinner.bind(bg(t)),t.onSelectAsWinnerClickOurs=t.onSelectAsWinnerClick.bind(bg(t),t.props.ours),t.onSelectAsWinnerClickTheirs=t.onSelectAsWinnerClick.bind(bg(t),t.props.theirs),t.onRevisionClick=t.onRevisionClick.bind(bg(t)),t.onForwardClick=t.onForwardClick.bind(bg(t)),t.onBackwardClick=t.onBackwardClick.bind(bg(t)),t}return t=a,(n=[{key:"onRevisionClick",value:function(e){this.props.chooseLeaves(this.props.ours,e.value)}},{key:"onForwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t+1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"onBackwardClick",value:function(){var e=this.props.conflictingRevs,t=e.indexOf(this.props.theirs._rev),n=e[t-1];n&&this.props.chooseLeaves(this.props.ours,n)}},{key:"selectAsWinner",value:function(e,t){t&&se.utils.localStorageSet("deleteConflictsHideModal",!0),this.props.selectRevAsWinner(e._id,e._rev,this.props.tree)}},{key:"onSelectAsWinnerClick",value:function(e){!0===se.utils.localStorageGet("deleteConflictsHideModal")?this.selectAsWinner(e):this.props.toggleConfirmModal(!0,e)}},{key:"render",value:function(){var e=this.props.tree,t={paddingRight:"30px"};return ue.a.createElement("div",{className:"revision-browser-controls"},ue.a.createElement(pg,{toggleConfirmModal:this.props.toggleConfirmModal,onConfirm:this.selectAsWinner,docToWin:this.props.docToWin,show:this.props.showConfirmModal}),ue.a.createElement("table",{style:{margin:"10px 60px",width:"100%"}},ue.a.createElement("tbody",null,ue.a.createElement("tr",{style:{height:"60px"}},ue.a.createElement("td",{style:t},"Server-Selected Rev: "),ue.a.createElement("td",{style:t},ue.a.createElement("div",{style:{lineHeight:"36px",height:"36px",width:"337px",color:"#000",backgroundColor:"#ffbbbb"}},ue.a.createElement("b",{style:{paddingLeft:"10px"}},e.winner))),ue.a.createElement("td",null,ue.a.createElement(_g,{onClick:this.onSelectAsWinnerClickOurs,style:{marginRight:"10px",width:"220px"},text:"Delete Other Conflicts",buttonType:"btn-secondary",customIcon:"icon-trophy"}))),ue.a.createElement("tr",{style:{height:"60px"}},ue.a.createElement("td",{style:t},"Conflicting Revisions: "),ue.a.createElement("td",{style:t},ue.a.createElement(ng,{onRevisionClick:this.onRevisionClick,onForwardClick:this.onForwardClick,onBackwardClick:this.onBackwardClick,options:this.props.dropdownData,selected:this.props.theirs._rev})),ue.a.createElement("td",null,ue.a.createElement(_g,{"data-id":"button-select-theirs",onClick:this.onSelectAsWinnerClickTheirs,style:{marginRight:"10px",width:"220px"},text:"Select as Winner",buttonType:"btn-secondary",customIcon:"icon-trophy"}))))))}}])&&dg(t.prototype,n),r&&dg(t,r),a}(ue.a.Component);function Eg(e){return(Eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Og(e,t){return(Og=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dg(e);if(t){var o=Dg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ng(this,n)}}function Ng(e,t){return!t||"object"!==Eg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dg(e){return(Dg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}vg.propTypes={tree:Ct.a.object.isRequired,ours:Ct.a.object.isRequired,conflictingRevs:Ct.a.array.isRequired},n(438);var Rg=tr.a.acequire("ace/ext/static_highlight");n(151);var Cg=tr.a.acequire("ace/mode/json").Mode;n(152);var Pg=tr.a.acequire("ace/theme/idle_fingers"),Tg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Og(e,t)}(a,e);var t,n,r,o=Sg(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"componentDidUpdate",value:function(){this.hightlightAfterRender()}},{key:"componentDidMount",value:function(){this.hightlightAfterRender()}},{key:"hightlightAfterRender",value:function(){var e=function(e){return JSON.stringify(e,null,"  ")},t=new Cg,n=this.revLeftOurs,r=this.revRightTheirs,o=Rg.render(e(this.props.ours),t,Pg,0,!0);n.innerHTML=o.html;var a=Rg.render(e(this.props.theirs),t,Pg,0,!0);r.innerHTML=a.html}},{key:"render",value:function(){var e=this,t=this.props,n=t.ours,r=t.theirs;return n&&r?ue.a.createElement("div",{className:"revision-split-area"},ue.a.createElement("div",{"data-id":"ours",style:{width:"50%"}},ue.a.createElement("div",{style:{marginBottom:"20px"}},n._rev," (Server-Selected Rev)"),ue.a.createElement("pre",{ref:function(t){return e.revLeftOurs=t}})),ue.a.createElement("div",{"data-id":"theirs",style:{width:"50%"}},ue.a.createElement("div",{style:{marginBottom:"20px"}},r._rev),ue.a.createElement("pre",{ref:function(t){return e.revRightTheirs=t}}))):ue.a.createElement("div",null)}}])&&wg(t.prototype,n),r&&wg(t,r),a}(ue.a.Component),kg=n(168),xg=(n(440),function(e){var t=e.ours,n=e.theirs;if(!t||!n)return ue.a.createElement("div",null);var r=kg.diff(t,n),o=kg.formatters.html.format(r,t);return ue.a.createElement("div",{className:"revision-diff-area"},ue.a.createElement("div",{style:{marginTop:"30px"},dangerouslySetInnerHTML:{__html:o}}))});xg.propTypes={ours:Ct.a.object,theirs:Ct.a.object,currentRev:Ct.a.string};var Ig=xg;function Ag(e){return(Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lg(e,t){return(Lg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bg(e);if(t){var o=Bg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ug(this,n)}}function Ug(e,t){return!t||"object"!==Ag(t)&&"function"!=typeof t?qg(e):t}function qg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bg(e){return(Bg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lg(e,t)}(a,e);var t,n,r,o=Mg(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).toggleDiffViewFalse=t.toggleDiffView.bind(qg(t),!1),t.toggleDiffViewTrue=t.toggleDiffView.bind(qg(t),!0),t}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.toggleConfirmModal(!1,null),this.props.initDiffEditor()}},{key:"toggleDiffView",value:function(e){this.props.toggleDiffView(e)}},{key:"render",value:function(){var e=this.props,t=e.tree,n=e.ours,r=e.theirs,o=e.conflictingRevs,a=e.isDiffViewEnabled;return t.length||r?r&&o.length?ue.a.createElement("div",{className:"revision-wrapper scrollable"},ue.a.createElement(vg,this.props),ue.a.createElement("div",{className:"revision-view-controls"},ue.a.createElement(rn.b,{className:"two-sides-toggle-button"},ue.a.createElement(rn.a,{style:{width:"120px"},className:a?"active":"",onClick:this.toggleDiffViewTrue},ue.a.createElement("i",{className:"icon-columns"})," Diff"),ue.a.createElement(rn.a,{style:{width:"120px"},className:a?"":"active",onClick:this.toggleDiffViewFalse},ue.a.createElement("i",{className:"icon-file-text"})," Document"))),a?ue.a.createElement(Ig,{ours:n,theirs:r}):ue.a.createElement(Tg,{ours:n,theirs:r})):ue.a.createElement("div",{style:{textAlign:"center",color:"#fff"}},ue.a.createElement("h2",null,"No conflicts")):ue.a.createElement(ko,null)}}])&&jg(t.prototype,n),r&&jg(t,r),a}(ue.a.Component),Fg="REV_TREE_LOADED",Kg="REV_BROWSER_DIFF_DOCS_READY",zg="REV_BROWSER_DIFF_ENABLE_DIFF_VIEW",Hg="REV_BROWSER_SHOW_CONFIRM_MODAL";function Gg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gg(Object(n),!0).forEach((function(t){Xg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qg={tree:[],doc:{},conflictDoc:!1,conflictingRevs:[],databaseName:"",ours:null,theirs:null,isDiffViewEnabled:!0,showConfirmModal:!1,docToWin:null},Jg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qg,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case"REV_TREE_LOADED":var o=r.tree,a=r.doc,i=r.conflictDoc,s=r.conflictingRevs,c=r.databaseName;return Wg(Wg({},e),{},{tree:o,doc:a,conflictDoc:i,conflictingRevs:s,databaseName:c,theirs:i,ours:a});case"REV_BROWSER_DIFF_DOCS_READY":return Wg(Wg({},e),{},{theirs:r.theirs});case"REV_BROWSER_DIFF_ENABLE_DIFF_VIEW":return Wg(Wg({},e),{},{isDiffViewEnabled:r.enableDiff});case"REV_BROWSER_SHOW_CONFIRM_MODAL":return Wg(Wg({},e),{},{showConfirmModal:r.show,docToWin:r.docToWin});default:return e}},Yg=function(e){return e.doc},$g=function(e){return e.conflictDoc},Zg=function(e){return e.conflictingRevs},e_=function(e){return e.databaseName},t_=function(e){return e.ours},n_=function(e){return e.theirs},r_=function(e){return e.showConfirmModal},o_=function(e){return e.conflictingRevs.map((function(e){return{value:e,label:e}}))},a_=function(e){return e.isDiffViewEnabled},i_=function(e){return e.docToWin};var s_=function(e,t){var n=t._rev;return e.getDoc(t._id,{revs:!0,open_revs:"all"}).then((function(e){var t={};return{paths:e.map((function(e){(e=e.ok)._deleted&&(t[e._rev]=!0);var n=e._revisions;return n.ids.map((function(e,t){return n.start-t+"-"+e}))})),deleted:t,winner:n}}))};function c_(e){return(c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u_,l_=function(e){try{new URL(e)}catch(t){throw new Error("Invalid database URL: ".concat(e))}return{getDoc:function(t,n){return function(e,t,n){if(!t)return Promise.reject(new Error("Invalid document ID"));var r="";n&&"object"===c_(n)&&(r="?"+se.utils.queryParams(n));var o="";if(t.startsWith("_design/")){var a=t.substring(8);o="_design/"+encodeURIComponent(a)}else o=encodeURIComponent(t);var i="".concat(e,"/").concat(o).concat(r);return E(i).then((function(e){if(e.error){var t=new Error(e.error);throw t.reason=e.reason,t.error=e.error,t}return e}))}(e,t,n)}}};function p_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d_(e,t,n){return e.reduce((function(e,n){return n[0]!==t&&e.push(n[0]),e}),[]).filter((function(e){return-1===n.indexOf(e)}))}var h_=function(e,t,n,r,o){return{type:Fg,options:{tree:e,doc:t,conflictDoc:r,conflictingRevs:n,databaseName:o}}},m_=function(e,t){return{type:Kg,options:{theirs:t,ours:e}}},y_=function(e,t){return{type:Hg,options:{show:e,docToWin:t}}};var b_=Object(Pt.b)((function(e,t){var n,r=e.revisionBrowser;return{docId:t.docId,tree:(n=r,n.tree),doc:Yg(r),conflictDoc:$g(r),conflictingRevs:Zg(r),databaseName:e_(r),ours:t_(r),theirs:n_(r),showConfirmModal:r_(r),dropdownData:o_(r),isDiffViewEnabled:a_(r),docToWin:i_(r)}}),(function(e,t){return{toggleConfirmModal:function(t,n){e(y_(t,n))},initDiffEditor:function(){var n,r;e((n=t.databaseName,r=t.docId,function(e){var t=ae.urls("databaseBaseURL","apiurl",n);(u_=l_(t)).getDoc(r).then((function(e){return Promise.all([Promise.resolve(e),s_(u_,e)])})).then((function(t){var r=p_(t,2),o=r[0],a=r[1],i=d_(a.paths,a.winner,Object.keys(a.deleted)),s=i[0];if(!s)return e(h_(a,o,i,null,n));u_.getDoc(o._id,{rev:s}).then((function(t){e(h_(a,o,i,t,n))}))}))}))},chooseLeaves:function(t,n){e(function(e,t){return function(n){u_.getDoc(e._id,{rev:t}).then((function(t){n(m_(e,t))}))}}(t,n))},selectRevAsWinner:function(n,r,o){var a,i,s,c;e((a=t.databaseName,i=n,s=o.paths,c=r,function(e){var t=d_(s,c,[]),n=function(e,t){return{docs:t.map((function(t){return{_id:e,_rev:t,_deleted:!0}}))}}(i,t);O(ae.urls("bulk_docs","server",a,""),n).then((function(t){if(t.error)return ae.addNotification({msg:"Failed to delete clean up conflicts!",type:"error",clear:!0});ae.addNotification({msg:"Conflicts successfully solved.",clear:!0}),e(y_(!1,null)),ae.navigate(ae.urls("allDocs","app",a,""))}))}))},toggleDiffView:function(t){e(function(e){return{type:zg,options:{enableDiff:e}}}(t))}}}))(Vg),g_={DocEditorRouteObject:ae.RouteObject.extend({selectedHeader:"Databases",roles:["fx_loggedIn"],initialize:function(e,t){this.databaseName=t[0],this.docId=t[1],this.database=this.database||new Ts.Model({id:this.databaseName}),this.doc=new ft.NewDoc(null,{database:this.database})},routes:{"database/:database/:doc/conflicts":"revisionBrowser","database/:database/:doc/code_editor":"codeEditor","database/:database/_design/:ddoc/conflicts":"revBrowserForDesignDoc","database/:database/_design/:ddoc":"showDesignDoc","database/:database/_local/:doc":"showLocalDoc","database/:database/:doc":"codeEditor","database/:database/_new":"codeEditorNewDoc","database/:database/_new?(:extra)":"codeEditorNewDoc"},revisionBrowser:function(e,t){var n=ae.urls("allDocs","app",ae.url.encode(this.database.safeID())),r=ae.urls("document","app",this.database.safeID(),this.docId),o=[{name:this.database.safeID(),link:n},{name:this.docId+" > Conflicts"}];return ue.a.createElement(en,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:r,component:ue.a.createElement(b_,{docId:t,databaseName:e})})},revBrowserForDesignDoc:function(e,t){return this.revisionBrowser(e,"_design/"+t)},codeEditorNewDoc:function(e,t){return this.codeEditor(e,null,t)},codeEditor:function(e,t,n){var r=se.getParams(n),o=[{name:e,link:ae.urls("allDocs","app",ae.url.encode(e))},{name:t||"New Document"}];if(this.database=new Ts.Model({id:e}),t)this.doc=new ft.Doc({_id:t},{database:this.database,fetchConflicts:!0});else{var a=r?r.partitionKey:void 0;this.doc=new ft.NewDoc(null,{database:this.database,partitionKey:a})}Dt.fetchSelectedDatabaseInfo(e),zy({doc:this.doc,database:this.database});var i=void 0,s=ae.router.lastPages.filter((function(e){return-1!==e.indexOf("/_all_docs")||e.match(/_design\/(\S)*\/_/)||-1!==e.indexOf("/_find")}));return s.length>0&&(i=s[s.length-1]),ue.a.createElement(en,{crumbs:o,endpoint:this.doc.url("apiurl"),docURL:this.doc.documentation(),partitionKey:r.partitionKey,component:ue.a.createElement(Zb,{database:this.database,isNewDoc:!t,previousUrl:i})})},showLocalDoc:function(e,t){return this.codeEditor(e,"_local/"+t)},showDesignDoc:function(e,t){return this.codeEditor(e,"_design/"+t)}})},__=rc.extend({routes:{"database/:database/_partition/:partitionkey/new_view":{route:"createView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/new_view/:designDoc":{route:"createView",roles:["fx_loggedIn"]},"database/:database/new_view":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/new_view/:designDoc":{route:"createViewNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view":{route:"showPartitionedView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view":{route:"showGlobalView",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_view/:view/edit":{route:"editView",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_view/:view/edit":{route:"editViewNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new Ts.Model({id:n}),this.createDesignDocsCollection(),this.addSidebar()},showGlobalView:function(e,t,n){return this.showView(e,"",t,n)},showPartitionedView:function(e,t,n,r){return this.showView(e,t,n,r)},showView:function(e,t,n,r){r=r.replace(/\?.*$/,""),nu.dispatchClearIndex(),nu.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Dt.fetchSelectedDatabaseInfo(e);var o=new oc("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});nc(o);var a=t?encodeURIComponent(t):"",i=ae.urls("view","server",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r)),s=ae.urls("view","apiurl",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r)),c=ae.constants.DOC_URLS.GENERAL,u=this.getCrumbs(this.database);return ue.a.createElement(Ey,{docURL:c,endpoint:s,dbName:this.database.id,dropDownLinks:u,database:this.database,fetchUrl:i,ddocsOnly:!1,deleteEnabled:!1,selectedNavItem:o,partitionKey:t,onPartitionKeySelected:function(t){var o=ae.urls("partitioned_view","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));ae.navigate("#/"+o+encodeURIComponent(r))},onGlobalModeSelected:function(){var t=ae.urls("view","app",encodeURIComponent(e),encodeURIComponent(n));ae.navigate("#/"+t+encodeURIComponent(r))},globalMode:""===t})},createViewNoPartition:function(e,t){return this.createView(e,"",t)},createView:function(e,t,n){var r=!0,o="new-doc";n&&(o="_design/"+n,r=!1),nu.dispatchFetchDesignDocsBeforeEdit({viewName:"new-view",isNewView:!0,database:this.database,designDocs:this.designDocs,designDocId:o,isNewDesignDoc:r}),Dt.fetchSelectedDatabaseInfo(e);var a=new oc(""),i=this.getCrumbs(this.database);return ue.a.createElement(Oy,{showIncludeAllDocs:!0,docURL:ae.constants.DOC_URLS.GENERAL,dbName:this.database.id,dropDownLinks:i,database:this.database,selectedNavItem:a,partitionKey:t})},editViewNoPartition:function(e,t,n){return this.editView(e,"",t,n)},editView:function(e,t,n,r){nu.dispatchFetchDesignDocsBeforeEdit({viewName:r,isNewView:!1,database:this.database,designDocs:this.designDocs,designDocId:"_design/"+n}),Dt.fetchSelectedDatabaseInfo(e);var o=new oc("designDoc",{designDocName:n,designDocSection:"Views",indexName:r});nc(o);var a=ae.constants.DOC_URLS.GENERAL,i=ae.urls("view","apiurl",e,n,r),s=this.getCrumbs(this.database);return ue.a.createElement(Oy,{showIncludeAllDocs:!0,docURL:a,endpoint:i,dbName:this.database.id,dropDownLinks:s,database:this.database,selectedNavItem:o,partitionKey:t})}});function v_(e){return(v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w_(e,t){return(w_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N_(e);if(t){var o=N_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S_(this,n)}}function S_(e,t){return!t||"object"!==v_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N_(e){return(N_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w_(e,t)}(a,e);var t,n,r,o=O_(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"humanizeDuration",value:function(e){if(e<1e3)return Math.round(e)+" ms";var t=e/1e3;if(t<60)return Math.floor(t)+" seconds";var n=Math.floor(t/60);return[n," ",n>1?"minutes":"minute",", ",t=Math.floor(t-60*n)," ",t>1?"seconds":"second"].join("")}},{key:"getWarning",value:function(e){if(e){var t=e.split("\n").map((function(e,t){return ue.a.createElement(ue.a.Fragment,{key:t},e,ue.a.createElement("br",null))}));return ue.a.createElement("span",null,t)}}},{key:"warningPopupComponent",value:function(e){if(e)return ue.a.createElement("div",{className:"warning"},ue.a.createElement("i",{className:"fonticon-attention-circled"})," ",e)}},{key:"executionStatsLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if("number"==typeof t){var o=0!==t||n?"true":"false";return ue.a.createElement("div",{"data-status":o},e+": ",ue.a.createElement("span",{className:"value"},t.toLocaleString()," ",r))}return null}},{key:"executionStatsPopupComponent",value:function(e){return e?ue.a.createElement("div",{className:"execution-stats-popup-component"},this.executionStatsLine("documents examined",e.total_docs_examined),this.executionStatsLine("documents examined (quorum)",e.total_quorum_docs_examined),this.executionStatsLine("results returned",e.results_returned,!0),this.executionStatsLine("execution time",Math.round(e.execution_time_ms),!1,"ms")):null}},{key:"popup",value:function(e,t){return ue.a.createElement(rn.i,{id:"popover-execution-stats",title:"Execution Statistics"},ue.a.createElement("div",{className:"execution-stats-popup"},this.executionStatsPopupComponent(e),this.warningPopupComponent(t)))}},{key:"render",value:function(){var e=this.props,t=e.executionStats,n=e.warning,r=this.getWarning(n),o=null;r&&(o=ue.a.createElement("i",{className:"fonticon-attention-circled"}));var a=null;t?a=ue.a.createElement("span",{className:"execution-stats-component"},"Executed in ",this.humanizeDuration(t.execution_time_ms)):r&&(a=ue.a.createElement("span",{className:"execution-stats-component"},"Warning"));var i=this.popup(t,r);return ue.a.createElement(rn.h,{trigger:["hover","focus","click"],placement:"right",overlay:i},ue.a.createElement("span",{className:"execution-stats"},o,a))}}])&&E_(t.prototype,n),r&&E_(t,r),a}(ue.a.Component);function R_(e){return(R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C_(Object(n),!0).forEach((function(t){T_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x_(e,t){return(x_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j_(e);if(t){var o=j_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A_(this,n)}}function A_(e,t){return!t||"object"!==R_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j_(e){return(j_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}D_.propTypes={executionStats:Ct.a.object,warning:Ct.a.string};var L_=vi.PaddedBorderedBox,M_=vi.CodeEditorPanel,U_=se.helpers.getDocUrl,q_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x_(e,t)}(a,e);var t,n,r,o=I_(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this;prettyPrint(),this.props.loadQueryHistory({databaseName:this.props.databaseName}),this.props.clearResults();var t=this.codeEditor.codeEditor.editor;t.commands.byName.runQuery||t.commands.addCommand({name:"runQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Option-Enter"},exec:function(){e.runQuery({preventDefault:function(){}})},readOnly:!0})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.history!=this.props.history&&this.setEditorValue(this.props.history[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onHistorySelected",value:function(e){this.setEditorValue(e.value)}},{key:"editor",value:function(){var e=this;return ue.a.createElement("div",{className:"mango-editor-wrapper"},ue.a.createElement("form",{className:"form-horizontal",onSubmit:function(t){e.runQuery(t)}},ue.a.createElement("div",{className:"padded-box"},ue.a.createElement(ui.a,{className:"mango-select",options:this.props.history,ref:function(t){return e.history=t},placeholder:"Query history",searchable:!1,clearable:!1,autosize:!1,onChange:function(t){e.onHistorySelected(t)}})),ue.a.createElement(L_,null,ue.a.createElement(M_,{id:"query-field",ref:function(t){return e.codeEditor=t},title:this.props.editorTitle,docLink:U_("MANGO_SEARCH"),defaultCode:this.props.queryFindCode})),ue.a.createElement("div",{className:"padded-box"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement("button",{type:"submit",id:"create-index-btn",className:"btn btn-primary btn-space"},"Run Query"),ue.a.createElement("button",{type:"button",id:"explain-btn",className:"btn btn-secondary btn-space",onClick:function(t){e.runExplain(t)}},"Explain"),ue.a.createElement("a",{className:"edit-link",style:{},onClick:function(t){e.manageIndexes(t)}},"manage indexes")),ue.a.createElement("div",null,ue.a.createElement(D_,this.props)))))}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement("div",{className:"mango-editor-wrapper"},ue.a.createElement(vi.LoadLines,null)):this.editor()}},{key:"notifyOnQueryError",value:function(){return!!this.editorHasErrors()&&(ae.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0}),!0)}},{key:"manageIndexes",value:function(e){e.preventDefault(),this.props.manageIndexes();var t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+ae.urls("mango","index-app",encodeURIComponent(this.props.databaseName),t);ae.navigate(n)}},{key:"runExplain",value:function(e){e.preventDefault(),this.notifyOnQueryError()||this.props.runExplainQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:this.getEditorValue()})}},{key:"runQuery",value:function(e){e.preventDefault(),this.notifyOnQueryError()||(this.props.clearResults(),this.props.runQuery({databaseName:this.props.databaseName,partitionKey:this.props.partitionKey,queryCode:JSON.parse(this.getEditorValue()),fetchParams:P_(P_({},this.props.fetchParams),{},{skip:0})}))}}])&&k_(t.prototype,n),r&&k_(t,r),a}(ce.Component);q_.propTypes={description:Ct.a.string.isRequired,editorTitle:Ct.a.string.isRequired,queryFindCode:Ct.a.string.isRequired,queryFindCodeChanged:Ct.a.bool,databaseName:Ct.a.string.isRequired,partitionKey:Ct.a.string,runExplainQuery:Ct.a.func.isRequired,runQuery:Ct.a.func.isRequired,manageIndexes:Ct.a.func.isRequired,loadQueryHistory:Ct.a.func.isRequired,clearResults:Ct.a.func.isRequired};var B_={MANGO_NEW_QUERY_FIND_CODE:"MANGO_NEW_QUERY_FIND_CODE",MANGO_LOAD_QUERY_HISTORY:"MANGO_LOAD_QUERY_HISTORY",MANGO_LOAD_INDEX_TEMPLATES:"MANGO_LOAD_INDEX_TEMPLATES",MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:"MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE",MANGO_SAVE_INDEX_REQUEST:"MANGO_SAVE_INDEX_REQUEST",MANGO_SHOW_EXPLAIN_RESULTS:"MANGO_SHOW_EXPLAIN_RESULTS",MANGO_HIDE_EXPLAIN_RESULTS:"MANGO_HIDE_EXPLAIN_RESULTS"};function V_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V_(Object(n),!0).forEach((function(t){K_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z_=function(e,t){var n=se.utils.queryString(t),r=ae.urls("mango","index-server",se.utils.safeURLName(e));return r="".concat(r).concat(-1!==r.indexOf("?")?"&":"?").concat(n),E(r).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.indexes,docType:_o.MANGO_INDEX,layout:go.JSON}}))},H_=null,G_=function(e,t,n,r){var o=t?encodeURIComponent(t):"",a=ae.urls("mango","query-server",encodeURIComponent(e),o),i=function(e,t){var n=t.limit,r=t.limit-1,o=(Math.floor(t.skip/r)+1)*r-e.limit;return o>=0&&(n=r-o),F_(F_({},e),{},{limit:n,skip:e.skip?t.skip+e.skip:t.skip})}(n,r);return O(a,i,{raw:!0})},W_=function(e,t,n,r){return function(e){return null===H_?new ae.Promise((function(t){G_(e,"",{selector:{_id:{$gt:"a"}},execution_stats:!0},{limit:1}).then((function(e){H_=200==e.status,t(H_)}))})):Promise.resolve(H_)}(e).then((function(o){return o&&(n.execution_stats=!0),G_(e,t,n,r).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return{docs:e.docs,docType:_o.MANGO_QUERY,executionStats:e.execution_stats,warning:e.warning}}))}))},X_={loadQueryHistory:function(e){return{type:B_.MANGO_LOAD_QUERY_HISTORY,options:e}},newQueryFindCode:function(e){return{type:B_.MANGO_NEW_QUERY_FIND_CODE,options:e}},showQueryExplain:function(e){return{type:B_.MANGO_SHOW_EXPLAIN_RESULTS,options:e}},hideQueryExplain:function(){return{type:B_.MANGO_HIDE_EXPLAIN_RESULTS}},newQueryCreateIndexTemplate:function(e){return{type:B_.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE,options:e}},loadIndexTemplates:function(e){return{type:B_.MANGO_LOAD_INDEX_TEMPLATES,options:e}},requestSaveIndex:function(){return{type:B_.MANGO_SAVE_INDEX_REQUEST}},saveIndex:function(e){var t=this,n=e.databaseName,r=e.indexCode,o=e.fetchParams;return ae.addNotification({msg:"Saving index for query...",type:"info",clear:!0}),function(e){return e(t.requestSaveIndex()),function(e,t){var n=ae.urls("mango","index-server",se.utils.safeURLName(e));return O(n,t,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r).then((function(){var t="#"+ae.urls("mango","query-app",se.utils.safeURLName(n),"");e(Rd((function(e){return z_(n,e)}),o,{})),ae.addNotification({msg:'Index is ready for querying. <a href="'+t+'">Run a Query.</a>',type:"success",clear:!0,escape:!1})})).catch((function(e){ae.addNotification({msg:"Failed to create index. "+t.errorReason(e),type:"error",clear:!0})}))}},errorReason:function(e){return"Reason: "+(e&&e.message||"n/a")},runExplainQuery:function(e){var t=this,n=e.databaseName,r=e.partitionKey,o=e.queryCode;return function(e){return function(e,t,n){var r=t?encodeURIComponent(t):"",o=ae.urls("mango","explain-server",encodeURIComponent(e),r);return O(o,n,{rawBody:!0}).then((function(e){if(e.error)throw new Error("("+e.error+") "+e.reason);return e}))}(n,r,o).then((function(n){e(t.showQueryExplain({explainPlan:n}))})).catch((function(){ae.addNotification({msg:"There was an error fetching the query plan.",type:"error",clear:!0})}))}}},Q_=function(e){var t=e.additionalIndexes;if(!t)return[];var n=ae.getExtensions("mango:additionalIndexes")[0];return n?t.filter((function(e){return-1!==e.get("type").indexOf(n.type)})):void 0},J_=Object(Pt.b)((function(e,t){var n,r,o=e.mangoQuery,a=e.indexResults;return{databaseName:t.databaseName,queryFindCode:Vd(o.queryFindCode),queryFindCodeChanged:o.queryFindCodeChanged,availableIndexes:(n=o,r=n.availableIndexes,r?r.filter((function(e){var t=e.type;return-1!==["json","special"].indexOf(t)})):[]),additionalIndexes:Q_(o),isLoading:o.isLoading,history:o.history,description:t.description,editorTitle:t.editorTitle,additionalIndexesText:t.additionalIndexesText,fetchParams:a.fetchParams,executionStats:a.executionStats,warning:a.warning,partitionKey:t.partitionKey}}),(function(e){return{loadQueryHistory:function(t){e(X_.loadQueryHistory(t))},runExplainQuery:function(t){e(X_.runExplainQuery(t))},runQuery:function(t){e(X_.hideQueryExplain()),e(X_.newQueryFindCode(t)),e(Rd((function(e){return W_(t.databaseName,t.partitionKey,t.queryCode,e)}),t.fetchParams,{}))},clearResults:function(){e(wd())},manageIndexes:function(){e(X_.hideQueryExplain())}}}))(q_);function Y_(e){return(Y_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$_(Object(n),!0).forEach((function(t){ev(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ev(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nv(e,t){return(nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iv(e);if(t){var o=iv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ov(this,n)}}function ov(e,t){return!t||"object"!==Y_(t)&&"function"!=typeof t?av(e):t}function av(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iv(e){return(iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sv=vi.PaddedBorderedBox,cv=vi.CodeEditorPanel,uv=vi.ConfirmButton,lv=vi.LoadLines,pv=se.helpers.getDocUrl,fv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nv(e,t)}(a,e);var t,n,r,o=rv(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={partitionedSelected:!0},t.onTemplateSelected=t.onTemplateSelected.bind(av(t)),t.onTogglePartitioned=t.onTogglePartitioned.bind(av(t)),t.saveIndex=t.saveIndex.bind(av(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){prettyPrint(),this.props.loadIndexTemplates(),this.props.clearResults(),this.props.loadIndexList({fetchParams:Z_(Z_({},this.props.fetchParams),{},{skip:0})})}},{key:"componentDidUpdate",value:function(e){prettyPrint(),e.templates!=this.props.templates&&this.setEditorValue(this.props.templates[0].value)}},{key:"setEditorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.codeEditor)return this.codeEditor.getEditor().setValue(e)}},{key:"getEditorValue",value:function(){return this.codeEditor.getValue()}},{key:"editorHasErrors",value:function(){return this.codeEditor.getEditor().hasErrors()}},{key:"onTemplateSelected",value:function(e){this.setEditorValue(e.value)}},{key:"onTogglePartitioned",value:function(){this.setState({partitionedSelected:!this.state.partitionedSelected})}},{key:"partitionedCheckobx",value:function(){return this.props.isDbPartitioned?ue.a.createElement("label",null,ue.a.createElement("input",{id:"js-partitioned-index",type:"checkbox",checked:this.state.partitionedSelected,onChange:this.onTogglePartitioned,style:{margin:"0px 10px 0px 0px"}}),"Partitioned"):null}},{key:"editor",value:function(){var e=this,t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"",n="#"+ae.urls("mango","query-app",encodeURIComponent(this.props.databaseName),t);return ue.a.createElement("div",{className:"mango-editor-wrapper"},ue.a.createElement("form",{className:"form-horizontal",onSubmit:this.saveIndex},ue.a.createElement("div",{className:"padded-box"},ue.a.createElement(ui.a,{className:"mango-select",options:this.props.templates,ref:function(t){return e.templates=t},placeholder:"Examples",searchable:!1,clearable:!1,autosize:!1,onChange:this.onTemplateSelected})),ue.a.createElement(sv,null,ue.a.createElement(cv,{id:"query-field",ref:function(t){return e.codeEditor=t},title:"Index",docLink:pv("MANGO_INDEX"),defaultCode:this.props.queryIndexCode}),this.partitionedCheckobx()),ue.a.createElement("div",{className:"padded-box"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement(uv,{text:"Create index",id:"create-index-btn",showIcon:!1}),ue.a.createElement("a",{className:"edit-link",href:n},"edit query")))))}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement(lv,null):this.editor()}},{key:"saveIndex",value:function(e){e.preventDefault();var t=function(){ae.addNotification({msg:"Please fix the Javascript errors and try again.",type:"error",clear:!0})};if(this.editorHasErrors())t();else{var n=this.getEditorValue();if(this.props.isDbPartitioned)try{var r=JSON.parse(n);!0!==r.partitioned&&!1!==r.partitioned&&(r.partitioned=this.state.partitionedSelected),n=JSON.stringify(r)}catch(e){t()}this.props.saveIndex({databaseName:this.props.databaseName,indexCode:n,fetchParams:this.props.fetchParams})}}}])&&tv(t.prototype,n),r&&tv(t,r),a}(ce.Component);fv.propTypes={isLoading:Ct.a.bool.isRequired,databaseName:Ct.a.string.isRequired,isDbPartitioned:Ct.a.bool.isRequired,saveIndex:Ct.a.func.isRequired,queryIndexCode:Ct.a.string.isRequired,partitionKey:Ct.a.string,loadIndexTemplates:Ct.a.func.isRequired,clearResults:Ct.a.func.isRequired,loadIndexList:Ct.a.func.isRequired},fv.defaultProps={isLoading:!0,isDbPartitioned:!1};var dv=Object(Pt.b)((function(e,t){var n=e.mangoQuery,r=e.indexResults,o=e.databases;return{description:t.description,databaseName:t.databaseName,queryIndexCode:Vd(n.queryIndexCode),templates:n.queryIndexTemplates,fetchParams:r.fetchParams,partitionKey:t.partitionKey,isLoading:o.isLoadingDbInfo,isDbPartitioned:o.isDbPartitioned}}),(function(e,t){return{saveIndex:function(t){e(X_.saveIndex(t))},loadIndexList:function(n){e(Rd((function(e){return z_(t.databaseName,e)}),n.fetchParams,{}))},clearResults:function(){e(wd())},loadIndexTemplates:function(){e(X_.loadIndexTemplates())}}}))(fv);function hv(e){return(hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bv(e,t){return(bv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vv(e);if(t){var o=vv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _v(this,n)}}function _v(e,t){return!t||"object"!==hv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vv(e){return(vv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ev=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bv(e,t)}(a,e);var t,n,r,o=gv(a);function a(){return mv(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){prettyPrint()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement("pre",{className:"prettyprint"},JSON.stringify(this.props.explainPlan,null," ")))}}])&&yv(t.prototype,n),r&&yv(t,r),a}(ce.Component);Ev.propTypes={explainPlan:Ct.a.object.isRequired};var wv={MangoIndexEditorContainer:dv,MangoQueryEditorContainer:J_,ExplainPage:Ev};function Ov(e){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nv(e,t){return(Nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Cv(e);if(t){var o=Cv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rv(this,n)}}function Rv(e,t){return!t||"object"!==Ov(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cv(e){return(Cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pv=function(e){var t=e.docURL,n=e.endpoint,r=e.databaseName,o=e.showPartitionKeySelector,a=e.partitionKey,i=e.onPartitionKeySelected,s=e.onGlobalModeSelected,c=e.globalMode,u=ue.a.createElement(iy,{docURL:t,endpoint:n,includeQueryOptionsParams:!1}),l=null;return o&&(l=ue.a.createElement(gy,{databaseName:r,partitionKey:a,onPartitionKeySelected:i,onGlobalModeSelected:s,globalMode:c})),ue.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.a.createElement("div",{style:{flex:1,padding:"18px 6px 12px 12px"}},l),ue.a.createElement("div",{id:"right-header",className:"flex-body"}),u,ue.a.createElement("div",{id:"notification-center-btn"},ue.a.createElement(Vt,null)))},Tv=function(e){var t=e.databaseName,n=e.fetchUrl,r=e.queryDocs;return ue.a.createElement("div",{id:"footer"},ue.a.createElement(oy,{databaseName:t,fetchUrl:n,queryDocs:r}))},kv=function(e){var t=e.crumbs,n=e.docURL,r=e.endpoint,o=e.databaseName,a=e.partitionKey,i=e.showPartitionKeySelector,s=e.onPartitionKeySelected,c=e.onGlobalModeSelected,u=e.globalMode;return ue.a.createElement("div",{className:"header-wrapper flex-layout flex-row"},ue.a.createElement("div",{className:"flex-body faux__breadcrumbs-mango-header"},ue.a.createElement(zt,{crumbs:t})),ue.a.createElement(Pv,{docURL:n,endpoint:r,databaseName:o,showPartitionKeySelector:i,partitionKey:a,onPartitionKeySelected:s,onGlobalModeSelected:c,globalMode:u}))};kv.defaultProps={crumbs:[]};var xv=function(e){var t=e.edit,n=e.designDocs,r=e.explainPlan,o=e.databaseName,a=e.fetchUrl,i=e.queryDocs,s=e.docType,c=e.partitionKey,u=t?ue.a.createElement(wv.MangoIndexEditorContainer,{description:se.i18n.en_US["mango-descripton-index-editor"],databaseName:o,partitionKey:c}):ue.a.createElement(wv.MangoQueryEditorContainer,{description:se.i18n.en_US["mango-descripton"],editorTitle:se.i18n.en_US["mango-title-editor"],additionalIndexesText:se.i18n.en_US["mango-additional-indexes-heading"],databaseName:o,partitionKey:c}),l=ue.a.createElement(Vm,{fetchUrl:a,designDocs:n,ddocsOnly:!1,databaseName:o,fetchAtStartup:!1,queryDocs:i,docType:s,partitionKey:c}),p=ue.a.createElement(Tv,{databaseName:o,fetchUrl:a,queryDocs:i});return r&&(l=ue.a.createElement(wv.ExplainPage,{explainPlan:r}),p=null),ue.a.createElement("div",{id:"two-pane-content",className:"flex-layout flex-row flex-body"},ue.a.createElement("div",{id:"left-content",className:"flex-body"},u),ue.a.createElement("div",{id:"right-content",className:"flex-body flex-layout flex-col"},ue.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},l),p))},Iv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nv(e,t)}(a,e);var t,n,r,o=Dv(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.database,n=e.edit,r=e.docURL,o=e.crumbs,a=e.designDocs,i=e.fetchUrl,s=e.databaseName,c=e.queryFindCode,u=e.partitionKey,l=e.onPartitionKeySelected,p=e.onGlobalModeSelected,f=e.globalMode,d=this.props.endpoint;if(this.props.explainPlan){var h=u?encodeURIComponent(u):"";d=ae.urls("mango","explain-apiurl",encodeURIComponent(t),h)}var m=function(e){return W_(s,u,c,e)},y=_o.MANGO_QUERY;return n&&(m=function(e){return z_(s,e)},y=_o.MANGO_INDEX),ue.a.createElement("div",{id:"dashboard",className:"two-pane flex-layout flex-col"},ue.a.createElement(kv,{docURL:r,endpoint:d,crumbs:o,databaseName:s,partitionKey:u,showPartitionKeySelector:!n,onPartitionKeySelected:l,onGlobalModeSelected:p,globalMode:f}),ue.a.createElement(xv,{edit:n,designDocs:a,explainPlan:this.props.explainPlan,databaseName:s,fetchUrl:i,queryDocs:m,docType:y,partitionKey:u}))}}])&&Sv(t.prototype,n),r&&Sv(t,r),a}(ce.Component),Av=Object(Pt.b)((function(e,t){var n=e.mangoQuery;return{explainPlan:n.explainPlan,queryFindCode:n.queryFindCode,partitionKey:t.partitionKey,databaseName:t.databaseName,onPartitionKeySelected:t.onPartitionKeySelected,onGlobalModeSelected:t.onGlobalModeSelected,globalMode:t.globalMode}}))(Iv),jv={MangoIndexEditorAndQueryEditor:ae.RouteObject.extend({selectedHeader:"Databases",hideApiBar:!0,hideNotificationCenter:!0,routes:{"database/:database/_partition/:partitionkey/_index":{route:"createIndex",roles:["fx_loggedIn"]},"database/:database/_index":{route:"createIndexNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_find":{route:"findUsingIndex",roles:["fx_loggedIn"]},"database/:database/_find":{route:"findUsingIndexNoPartition",roles:["fx_loggedIn"]}},initialize:function(e,t){var n=t[0];this.databaseName=n,this.database=new ht.Model({id:n})},findUsingIndexNoPartition:function(e){return this.findUsingIndex(e,"")},findUsingIndex:function(e,t){var n=t?encodeURIComponent(t):"",r=ae.urls("allDocs","app",encodeURIComponent(this.databaseName),n),o=t?"/".concat(n):"",a="/"+encodeURIComponent(this.databaseName)+o+"/_find",i=[{name:e,link:r},{name:se.i18n.en_US["mango-title-editor"]}],s=ae.urls("mango","query-apiurl",encodeURIComponent(this.databaseName),n);return ue.a.createElement(Av,{database:e,crumbs:i,docURL:ae.constants.DOC_URLS.MANGO_SEARCH,endpoint:s,edit:!1,databaseName:this.databaseName,fetchUrl:a,partitionKey:t,onPartitionKeySelected:function(t){var n=ae.urls("mango","query-app",encodeURIComponent(e),encodeURIComponent(t));ae.navigate("#/"+n)},onGlobalModeSelected:function(){var t=ae.urls("mango","query-app",encodeURIComponent(e));ae.navigate("#/"+t)},globalMode:""===t})},createIndexNoPartition:function(e){return this.createIndex(e,"")},createIndex:function(e,t){var n=new pt.AllDocs(null,{database:this.database,paging:{pageSize:500},params:{startkey:"_design/",endkey:"_design0",include_docs:!0,limit:500}}),r=t?encodeURIComponent(t):"",o=ae.urls("allDocs","app",encodeURIComponent(this.databaseName),r),a=ae.urls("mango","index-apiurl",encodeURIComponent(this.databaseName),r),i=[{name:e,link:o},{name:se.i18n.en_US["mango-indexeditor-title"]}];return Dt.fetchSelectedDatabaseInfo(e),ue.a.createElement(Av,{showIncludeAllDocs:!1,crumbs:i,docURL:ae.constants.DOC_URLS.MANGO_INDEX,endpoint:a,edit:!0,designDocs:n,databaseName:this.databaseName,partitionKey:t})}})};pt.RouteObjects=[g_.DocEditorRouteObject,Ny,__,jv.MangoIndexEditorAndQueryEditor];var Lv=pt;function Mv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mv(Object(n),!0).forEach((function(t){qv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bv={isLoading:!0,showLoadError:!1,viewIndex:void 0};var Vv={INDEX_TEMPLATES:[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}}]};function Fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fv(Object(n),!0).forEach((function(t){zv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hv={selector:{_id:{$gt:null}}},Gv=function(e){var t="string"==typeof e?JSON.parse(e):e;return{label:JSON.stringify(t),value:Vd(t),className:"mango-select-entry"}},Wv=function(){return[Gv(Hv)]},Xv=function(){return Vv.INDEX_TEMPLATES.map((function(e){var t=Gv(e.code);return t.label=e.label||t.label,t}))},Qv=function(){var e=ae.getExtensions("mango:indexTemplates")[0];return e?e.filter((function(e){return!!e.code})).map((function(e){var t=Gv(e.code);return t.label=e.label||t.label,t})):Xv()},Jv={queryFindCode:Hv,queryIndexCode:{index:{fields:["_id"]},type:"json"},queryFindCodeChanged:!1,explainPlan:void 0,history:Wv(),historyKey:"default",queryIndexTemplates:Xv()},Yv=function(e){var t=e+"_queryhistory",n=se.utils.localStorageGet(t);return n||((n=ae.getExtensions("mango:queryHistory")[0])?n.filter((function(e){return!!e.code})).map((function(e){var t=Gv(e.code);return t.label=e.label||t.label,t})):Wv())},$v=function(e,t,n){var r=e.historyKey,o=e.history.slice(),a=Gv(t);a.label=n||a.label;var i=o.findIndex((function(e){return e.value===a.value}));return i>-1&&o.splice(i,1),o.unshift(a),o.length>5&&o.splice(5,1),se.utils.localStorageSet(r,o),o},Zv=function(e,t,n){var r=e.queryIndexTemplates.slice(),o=Gv(t);o.label=n||o.label,r.find((function(e){return e.value===o.value}))||r.push(o)};function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(n),!0).forEach((function(t){nE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rE={selectorVisible:!1};function oE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oE(Object(n),!0).forEach((function(t){iE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sE={doc:null,isLoading:!0,isSaving:!1,cloneDocModalVisible:!1,deleteDocModalVisible:!1,uploadModalVisible:!1,numFilesUploaded:0,uploadErrorMessage:"",uploadInProgress:!1,uploadPercentage:0,docConflictCount:0};function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cE(Object(n),!0).forEach((function(t){lE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pE={isLoaded:!1,filters:[],changes:[],filteredChanges:[],maxChangesListed:100,showingSubset:!1,lastSequenceNum:null};function fE(e,t,n){var r=uE(uE({},e),{},{lastSequenceNum:t,isLoaded:!0}),o=0===r.changes.length;r.changes.forEach((function(e){e.isNew=!1}));var a=n.map((function(e){var t=sr.getSeqNum(e.seq);return{id:e.id,seq:t,deleted:!!_.has(e,"deleted")&&e.deleted,changes:e.changes,doc:e.doc,isNew:!o}}));return r.changes=a.concat(r.changes),mE(r),r}function dE(e,t){var n=e.filters.slice();n.push(t);var r=uE(uE({},e),{},{filters:n});return mE(r),r}function hE(e,t){var n=e.filters.slice(),r=n.indexOf(t);r>=0&&n.splice(r,1);var o=uE(uE({},e),{},{filters:n});return mE(o),o}function mE(e){e.showingSubset=!1;var t=0;e.filteredChanges=e.changes.filter((function(n){if(t>=e.maxChangesListed)return e.showingSubset=!0,!1;var r=JSON.stringify(n),o=e.filters.every((function(e){return new RegExp(e,"i").test(r)}));return o&&t++,o}))}n(442);function yE(e){return e||(e=""),e}function bE(e){return e?"/_partition/".concat(e):""}ae.addReducers({indexResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zd,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dd:var n=Yd(Yd({},e.resultsStyle),t.resultsStyle);return eh(n),Yd(Yd({},e),{},{resultsStyle:n});case ud:return Yd(Yd({},Zd),{},{noResultsWarning:e.noResultsWarning,selectedLayout:e.selectedLayout,selectedDocs:[],fetchParams:{limit:gd()+1,skip:0},pagination:Qd({},Zd.pagination,{perPage:e.pagination.perPage}),queryOptionsPanel:Qd({},Zd.queryOptionsPanel,e.queryOptionsPanel,{reduce:!1,groupLevel:"exact",showReduce:!1}),isLoading:!1,resultsStyle:e.resultsStyle});case td:return Yd(Yd({},e),{},{isLoading:!0});case pd:return Qd({},e,{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case fd:return Qd({},e,{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});case sd:return Yd(Yd({},e),{},{selectedDocs:t.selectedDocs});case ed:var r=e.selectedLayout;return t.docType===_o.MANGO_QUERY&&e.selectedLayout===go.METADATA&&(r=go.TABLE),Yd(Yd({},e),{},{docs:t.docs,isLoading:!1,noResultsWarning:"",isEditable:!0,fetchParams:Qd({},e.fetchParams,t.params),pagination:Qd({},e.pagination,{canShowNext:t.canShowNext}),docType:t.docType,selectedLayout:r,executionStats:t.executionStats,warning:t.warning});case nd:return Yd(Yd({},e),{},{selectedLayout:t.layout});case rd:return Yd(Yd({},e),{},{tableView:Qd({},e.tableView,{showAllFieldsTableView:!e.tableView.showAllFieldsTableView,cachedFieldsTableView:e.tableView.selectedFieldsTableView})});case cd:return Yd(Yd({},e),{},{tableView:Qd({},e.tableView,{selectedFieldsTableView:t.selectedFieldsTableView})});case od:return se.utils.localStorageSet("fauxton:perpageredux",t.perPage),Yd(Yd({},e),{},{pagination:Qd({},Zd.pagination,{perPage:t.perPage})});case ad:return Yd(Yd({},e),{},{pagination:Qd({},e.pagination,{pageStart:e.pagination.pageStart+e.pagination.perPage,currentPage:e.pagination.currentPage+1})});case id:return Yd(Yd({},e),{},{pagination:Qd({},e.pagination,{pageStart:e.pagination.pageStart-e.pagination.perPage,currentPage:e.pagination.currentPage-1})});case ld:return t.options.includeDocs&&t.options.reduce||t.options.includeDocs&&e.queryOptionsPanel.reduce?t.options.reduce=!1:t.options.reduce&&e.queryOptionsPanel.includeDocs&&(t.options.includeDocs=!1),Yd(Yd({},e),{},{queryOptionsPanel:Qd({},e.queryOptionsPanel,t.options)});default:return e}},mangoQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jv,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case B_.MANGO_SET_DB:return Kv(Kv({},e),{},{database:n.database,historyKey:n.database?n.database.id:"default"});case B_.MANGO_LOAD_QUERY_HISTORY:var r=Yv(n.databaseName);return Kv(Kv({},e),{},{history:r,historyKey:n.databaseName+"_queryhistory",queryFindCode:JSON.parse(r[0].value)});case B_.MANGO_NEW_QUERY_FIND_CODE:return Kv(Kv({},e),{},{queryFindCode:n.queryCode,history:$v(e,n.queryCode)});case B_.MANGO_RESET:return Kv(Kv({},e),{},{getLoadingIndexes:n.isLoading});case B_.MANGO_LOAD_INDEX_TEMPLATES:var o=Qv();return Kv(Kv({},e),{},{queryIndexTemplates:o,queryIndexCode:JSON.parse(o[0].value)});case B_.MANGO_NEW_QUERY_CREATE_INDEX_TEMPLATE:return Kv(Kv({},e),{},{queryIndexCode:n.code,queryIndexTemplates:Zv(e,n.code,n.label)});case B_.MANGO_SHOW_EXPLAIN_RESULTS:return Kv(Kv({},e),{},{explainPlan:n.explainPlan});case B_.MANGO_HIDE_EXPLAIN_RESULTS:return Kv(Kv({},e),{},{explainPlan:!1});default:return e}},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tl,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case ks:return Il(e,n);case xs:return kl(e,n);case Is:return xl(e,t.designDoc,t.indexGroup);case As:return Cl(Cl({},e),{},{loading:!0});case js:return Cl(Cl({},e),{},{deleteIndexModalIndexName:n.indexName,deleteIndexModalDesignDocName:n.designDocName,deleteIndexModalVisible:!0,deleteIndexModalText:ue.a.createElement("div",null,"Are you sure you want to delete the ",ue.a.createElement("code",null,n.indexName)," ",n.indexLabel,"?"),deleteIndexModalOnSubmit:n.onDelete});case Ls:return Cl(Cl({},e),{},{deleteIndexModalVisible:!1});case Ms:return Cl(Cl({},e),{},{cloneIndexModalIndexLabel:n.indexLabel,cloneIndexModalTitle:n.cloneIndexModalTitle,cloneIndexModalSourceIndexName:n.sourceIndexName,cloneIndexModalSourceDesignDocName:n.sourceDesignDocName,cloneIndexModalSelectedDesignDoc:"_design/"+n.sourceDesignDocName,cloneIndexDesignDocProp:"",cloneIndexModalVisible:!0,cloneIndexModalOnSubmit:n.onSubmit});case Us:return Cl(Cl({},e),{},{cloneIndexModalVisible:!1});case qs:return Cl(Cl({},e),{},{cloneIndexModalSelectedDesignDoc:n.value});case Bs:return Cl(Cl({},e),{},{cloneIndexModalNewDesignDocName:n.value});case Vs:return Cl(Cl({},e),{},{cloneIndexModalNewDesignDocPartitioned:n.value});case Fs:return Cl(Cl({},e),{},{cloneIndexModalNewIndexName:n.value});case Ks:return Cl(Cl({},e),{},{designDocs:n.designDocs,designDocList:Al(n.designDocs),loading:!1});default:return e}},revisionBrowser:Jg,partitionKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case my:return tE(tE({},e),{},{selectorVisible:!0});case yy:return tE(tE({},e),{},{selectorVisible:!1});default:return e}},docEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sE,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case Dy:return aE({},sE);case Ry:var o=n.doc.get("_conflicts")?n.doc.get("_conflicts").length:0;return n.doc.unset("_conflicts"),aE(aE({},e),{},{isLoading:!1,doc:n.doc,docConflictCount:o});case Cy:return aE(aE({},e),{},{cloneDocModalVisible:!0});case Py:return aE(aE({},e),{},{cloneDocModalVisible:!1});case Ty:return aE(aE({},e),{},{deleteDocModalVisible:!0});case ky:return aE(aE({},e),{},{deleteDocModalVisible:!1});case xy:return aE(aE({},e),{},{uploadModalVisible:!0});case Iy:return aE(aE({},e),{},{uploadModalVisible:!1});case jy:return aE(aE({},e),{},{numFilesUploaded:e.numFilesUploaded+1});case Ly:return aE(aE({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:n.error});case Ay:return aE(aE({},e),{},{uploadInProgress:!1,uploadPercentage:0,uploadErrorMessage:""});case My:return aE(aE({},e),{},{uploadInProgress:!0,uploadPercentage:0,fileUploadErrorMsg:""});case Uy:return aE(aE({},e),{},{uploadPercentage:n.percent});case qy:return aE(aE({},e),{},{isSaving:!0});case By:return aE(aE({},e),{},{isSaving:!1});default:return e}},changes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Np:return e.lastSequenceNum!==t.seqNum?fE(e,t.seqNum,t.changes):e;case Dp:return dE(e,t.filter);case Rp:return hE(e,t.filter);default:return e}},designDocInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bv,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case uf.DESIGN_FETCHING:return Uv(Uv({},e),{},{isLoading:!0});case uf.DESIGN_FETCHING_FAILED:return Uv(Uv({},e),{},{isLoading:!1,showLoadError:!0});case uf.DESIGN_DOC_MONITOR:return Uv(Uv({},e),{},{isLoading:!1,showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});case uf.DESIGN_DOC_REFRESH:return Uv(Uv({},e),{},{showLoadError:!1,viewIndex:n.designDocInfo.get("view_index")});default:return e}},indexEditor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lu,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Mc:return ou({},lu);case Uc:case qc:return pu(e,n);case Gc:return ou(ou({},e),{},{viewName:t.name});case Bc:var r=t.reduceSelectedOption;return"NONE"===r&&(r=""),"CUSTOM"===r&&(r=su),ou(ou({},e),{},{view:ou(ou({},e.view),{},{reduce:r})});case Kc:return ou(ou({},e),{},{designDocId:n.value});case Vc:case Fc:return e;case Wc:return ou(ou({},e),{},{designDocId:t.designDoc._id});case Xc:return ou(ou({},e),{},{view:ou(ou({},e.view),{},{map:t.code})});case Qc:return ou(ou({},e),{},{view:ou(ou({},e.view),{},{reduce:t.code})});case zc:return ou(ou({},e),{},{newDesignDocName:n.value});case Hc:return ou(ou({},e),{},{newDesignDocPartitioned:n.value});default:return e}}}),ae.registerUrls("allDocs",{server:function(e,t){return R.getServerUrl("/"+e+"/_all_docs"+yE(t))},app:function(e,t,n){return"database/"+e+bE(t)+"/_all_docs"+yE(n)},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_all_docs"+yE(t))}}),ae.registerUrls("partitioned_allDocs",{app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_all_docs"+yE(n)},apiurl:function(e,t,n){return R.getApiUrl("/"+e+"/_partition/"+t+"/_all_docs"+yE(n))},server:function(e,t,n){return R.getServerUrl("/"+e+"/_partition/"+t+"/_all_docs"+yE(n))}}),ae.registerUrls("allDocsSanitized",{server:function(e,t){return e=encodeURIComponent(e),R.getServerUrl("/"+e+"/_all_docs"+yE(t))},app:function(e,t){return"database/"+(e=encodeURIComponent(e))+"/_all_docs"+yE(t)},apiurl:function(e,t){return e=encodeURIComponent(e),R.getApiUrl("/"+e+"/_all_docs"+yE(t))}}),ae.registerUrls("bulk_docs",{server:function(e,t){return R.getServerUrl("/"+encodeURIComponent(e)+"/_bulk_docs"+yE(t))},app:function(e,t){return"database/"+e+"/_bulk_docs"+yE(t)},apiurl:function(e,t){return R.getApiUrl("/"+e+"/_bulk_docs"+yE(t))}}),ae.registerUrls("revision-browser",{app:function(e,t){return"database/"+e+"/"+encodeURIComponent(t)+"/conflicts"}}),ae.registerUrls("designDocs",{server:function(e,t){return R.getServerUrl("/"+e+"/"+t+"/_info")},app:function(e,t,n){return"database/"+e+bE(t)+"/_design/"+se.utils.safeURLName(n)+"/_info"},apiurl:function(e,t){return R.getApiUrl("/"+e+"/"+t+"/_info")}}),ae.registerUrls("view",{server:function(e,t,n,r){return R.getServerUrl("/"+e+bE(t)+"/_design/"+n+"/_view/"+r)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_view/"},apiurl:function(e,t,n,r){return R.getApiUrl("/"+e+bE(t)+"/_design/"+n+"/_view/"+r)},edit:function(e,t,n,r){return"database/"+e+bE(t)+"/_design/"+n+"/_view/"+r+"/edit"},showView:function(e,t,n,r){return"/database/"+e+bE(t)+"/"+n+"/_view/"+r},fragment:function(e,t,n){return"database/"+e+t+"/_view/"+n}}),ae.registerUrls("partitioned_view",{server:function(e,t,n,r){return R.getServerUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)},app:function(e,t,n){return"database/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"},apiurl:function(e,t,n,r){return R.getApiUrl("/"+e+"/_partition/"+t+"/_design/"+n+"/_view/"+r)}}),ae.registerUrls("document",{server:function(e,t,n){return _.isUndefined(n)&&(n=""),R.getServerUrl("/"+e+"/"+t+n)},attachment:function(e,t,n,r){return _.isUndefined(r)&&(r=""),R.getServerUrl("/"+e+"/"+t+"/"+n+r)},app:function(e,t){return"/database/"+e+"/"+t},apiurl:function(e,t){return t?R.getApiUrl("/"+e+"/"+t):R.getApiUrl("/"+e)},"web-index":function(e,t){return"/database/"+e+"/"+t}}),ae.registerUrls("new",{newDocument:function(e){return"/database/"+e+"/_new"},newView:function(e,t){return"/database/"+e+bE(t)+"/new_view"},addView:function(e,t,n){return"/database/"+e+bE(t)+"/new_view/"+n}}),ae.registerUrls("base",{server:function(e){return R.getServerUrl("/"+e+"/")},app:function(e){return"/database/"+e+"/"}}),ae.registerUrls("mango",{"index-server":function(e,t){return t||(t=""),R.getServerUrl("/"+e+"/_index"+t)},"index-apiurl":function(e,t,n){return n||(n=""),R.getApiUrl("/"+e+bE(t)+"/_index"+n)},"index-app":function(e,t,n){return n||(n=""),"database/"+e+bE(t)+"/_index"+n},"index-server-bulk-delete":function(e){return R.getServerUrl("/"+e+"/_index/_bulk_delete")},"query-server":function(e,t,n){return n||(n=""),R.getServerUrl("/"+e+bE(t)+"/_find"+n)},"query-apiurl":function(e,t,n){return n||(n=""),R.getApiUrl("/"+e+bE(t)+"/_find"+n)},"query-app":function(e,t,n){return n||(n=""),"database/"+e+bE(t)+"/_find"+n},"explain-server":function(e,t){return R.getServerUrl("/"+e+bE(t)+"/_explain")},"explain-apiurl":function(e,t){return R.getApiUrl("/"+e+bE(t)+"/_explain")}});var gE=Lv,_E=function(){return E(R.getServerUrl("/_membership")).then((function(e){if(!e.all_nodes){var t=e.reason?e.reason:"";throw new Error("Failed to load list of nodes."+t)}var n=e.all_nodes.reduce((function(t,n){var r=-1!==e.cluster_nodes.indexOf(n);return t.push({node:n,isInCluster:r}),t}),[]);return e.nodes_mapped=n,e}))},vE="CLUSTER_FETCH_NODES",EE={fetchNodes:function(){var e=this;_E().then((function(t){e.updateNodes({nodes:t.nodes_mapped})})).catch((function(e){ae.addNotification({type:"error",msg:e.message,clear:!0})}))},updateNodes:function(e){ae.reduxDispatch({type:vE,options:e})},navigateToNodeBasedOnNodeCount:function(e){_E().then((function(t){var n=t.all_nodes;return 1===n.length?ae.navigate(e+n[0]):ae.navigate("/cluster/disabled",{trigger:!0})})).catch((function(e){ae.addNotification({type:"error",msg:e.message,clear:!0})}))}};function wE(e){return(wE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NE(e,t){return(NE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=PE(e);if(t){var o=PE(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return RE(this,n)}}function RE(e,t){return!t||"object"!==wE(t)&&"function"!=typeof t?CE(e):t}function CE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PE(e){return(PE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NE(e,t)}(a,e);var t,n,r,o=DE(a);function a(){var e;OE(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return TE(CE(e=o.call.apply(o,[this].concat(n))),"getNodeType",(function(){var t=e.props.clusterState;return"cluster_finished"===t?"clustered":"single_node_enabled"===t?"single":"unknown state"})),e}return t=a,(n=[{key:"render",value:function(){var e=this.getNodeType();return ue.a.createElement("div",{className:"setup-screen"},se.i18n.en_US["couchdb-productname"]," is configured for production usage as a ",e," node!",ue.a.createElement("br",null),ue.a.createElement("br",null),"Do you want to ",ue.a.createElement("a",{href:"#replication"},"replicate data"),"?")}}])&&SE(t.prototype,n),r&&SE(t,r),a}(ue.a.Component);kE.propTypes={clusterState:Ct.a.string};function xE(){return(xE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function IE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IE(Object(n),!0).forEach((function(t){jE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var LE={clusterState:"",username:"",password:"",setupNode:{bindAddress:"0.0.0.0",port:5984,nodeCount:3},nodeList:[],additionalNode:{bindAddress:"0.0.0.0",port:5984,remoteAddress:"127.0.0.1"}};var ME=function(e){return AE(AE({},e),{},{setupNode:AE({},e.setupNode),additionalNode:AE({},e.additionalNode)})},UE=function(e,t,n){var r=ME(e);return s.a.isNaN(n)?r:s.a.set(r,t,n)},qE=function(e,t,n){var r=ME(e);return s.a.set(r,t,n)},BE=function(e){return e.additionalNode=xE({},LE.additionalNode),e},VE=function(e){return e.clusterState},FE=function(e){return e.nodeList},KE=function(){return ae.session.isAdminParty()},zE=function(e){return e.username},HE=function(e){return e.password},GE=function(e){return e.setupNode},WE=function(e){return e.setupNode.bindAddress},XE=Object(Pt.b)((function(e){var t=e.setup;return{clusterState:VE(t)}}))(kE);function QE(e){return(QE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $E(e,t){return($E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nw(e);if(t){var o=nw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ew(this,n)}}function ew(e,t){return!t||"object"!==QE(t)&&"function"!=typeof t?tw(e):t}function tw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nw(e){return(nw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ow,aw=vi.ConfirmButton,iw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$E(e,t)}(a,e);var t,n,r,o=ZE(a);function a(){var e;JE(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rw(tw(e=o.call.apply(o,[this].concat(n))),"redirectToSingleNodeSetup",(function(e){e.preventDefault(),ae.navigate("#setup/singlenode")})),rw(tw(e),"redirectToMultiNodeSetup",(function(e){e.preventDefault(),ae.navigate("#setup/multinode")})),e}return t=a,(n=[{key:"UNSAFE_componentWillMount",value:function(){this.props.getClusterState()}},{key:"render",value:function(){return"cluster_finished"===this.props.clusterState||"single_node_enabled"===this.props.clusterState?ue.a.createElement(kE,this.props):ue.a.createElement("div",{className:"setup-screen"},ue.a.createElement("h2",null,"Welcome to ",se.i18n.en_US["couchdb-productname"],"!"),ue.a.createElement("p",null,"This wizard should be run directly on the node, rather than through a load-balancer."),ue.a.createElement("p",null,"You can configure a single node, or a multi-node CouchDB installation."),ue.a.createElement("div",null,ue.a.createElement(aw,{onClick:this.redirectToMultiNodeSetup,showIcon:!1,text:"Configure a Cluster"}),ue.a.createElement(aw,{onClick:this.redirectToSingleNodeSetup,showIcon:!1,id:"setup-btn-no-thanks",text:"Configure a Single Node"})))}}])&&YE(t.prototype,n),r&&YE(t,r),a}(ue.a.Component);function sw(e){return s.a.isEmpty(e.username)?"Admin name is required":s.a.isEmpty(e.password)?"Admin password is required":e.bind_address&&"127.0.0.1"===e.bind_address&&!e.singlenode?"Bind address can not be 127.0.0.1":e.port&&s.a.isNaN(+e.port)?"Bind port must be a number":e.nodeCount&&s.a.isNaN(+e.nodeCount)?"Node count must be a number":!!(0===e.nodeCount||e.nodeCount&&e.nodeCount<1)&&"Node count must be >= 1"}iw.propTypes={clusterState:Ct.a.string};var cw={createAdmin:function(e){var t=e.name,n=e.password,r=e.node,o=R.getServerUrl("/_node/".concat(r,"/_config/admins/").concat(t));return S(o,n)},login:function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),N(e,"POST",n)}(R.getServerUrl("/_session"),se.utils.queryParams(e))},logout:function(){return ow=null,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(n.body=t),N(e,"DELETE",n)}(R.getServerUrl("/_session"),se.utils.queryParams({username:"_",password:"_"}))},getSession:function(){if(ow)return ow;var e=R.getServerUrl("/_session"),t=E(e).then((function(e){return e.userCtx.name&&(ow=t),e.userCtx}));return t}};function uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uw(Object(n),!0).forEach((function(t){pw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fw(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function dw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fw(a,r,o,i,s,"next",e)}function s(e){fw(a,r,o,i,s,"throw",e)}i(void 0)}))}}var hw=function(e,t){var n=t?" Error:"+t:"";ae.addNotification({msg:e+n,type:"error",fade:!1,clear:!0})},mw=function(e){return{type:"SETUP_SET_USERNAME",options:{value:e}}},yw=function(e){return{type:"SETUP_SET_PASSWORD",options:{value:e}}},bw=function(e){return{type:"SETUP_PORT_FOR_SINGLE_NODE",options:{value:e}}},gw=function(e){return{type:"SETUP_BIND_ADDRESS_FOR_SINGLE_NODE",options:{value:e}}},_w=Object(Pt.b)((function(e){var t=e.setup;return{clusterState:VE(t)}}),(function(e){return{getClusterState:function(){e(function(){var e=dw(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ae.urls("cluster_setup","server"),e.next=3,E(n);case 3:r=e.sent,t({type:"SETUP_SET_CLUSTERSTATUS",options:{state:r.state}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(iw);function vw(e){return(vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ew(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ww(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ow(e,t){return(Ow=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Dw(e);if(t){var o=Dw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nw(this,n)}}function Nw(e,t){return!t||"object"!==vw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dw(e){return(Dw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ow(e,t)}(a,e);var t,n,r,o=Sw(a);function a(){return Ew(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e="Specify your Admin credentials";return this.props.isAdminParty&&(e="Create Admin credentials."),ue.a.createElement("div",{className:"setup-creds"},ue.a.createElement("div",null,ue.a.createElement("p",null,e)),ue.a.createElement("input",{className:"setup-username",onChange:this.props.onAlterUsername,placeholder:"Username",value:this.props.username,type:"text"}),ue.a.createElement("input",{className:"setup-password",onChange:this.props.onAlterPassword,placeholder:"Password",value:this.props.password,type:"password"}))}}])&&ww(t.prototype,n),r&&ww(t,r),a}(ue.a.Component);function Cw(e){return(Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kw(e,t){return(kw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jw(e);if(t){var o=jw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Iw(this,n)}}function Iw(e,t){return!t||"object"!==Cw(t)&&"function"!=typeof t?Aw(e):t}function Aw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jw(e){return(jw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Rw.propTypes={onAlterUsername:Ct.a.func.isRequired,onAlterPassword:Ct.a.func.isRequired,username:Ct.a.string.isRequired,password:Ct.a.string.isRequired,isAdminParty:Ct.a.bool};var Mw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kw(e,t)}(a,e);var t,n,r,o=xw(a);function a(){var e;Pw(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Lw(Aw(e=o.call.apply(o,[this].concat(n))),"handleIpChange",(function(t){e.props.onAlterBindAddress(t)})),Lw(Aw(e),"handlePortChange",(function(t){e.props.onAlterPort(t)})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{className:"setup-opt-settings"},ue.a.createElement("p",null,"Bind address the node will listen on"),ue.a.createElement("input",{className:"setup-input-ip",value:this.props.ip,onChange:this.handleIpChange,placeholder:"IP Address",type:"text"}),ue.a.createElement("div",{className:"setup-port"},ue.a.createElement("p",null,"Port that the node will use"),ue.a.createElement("input",{className:"setup-input-port",value:this.props.port,onChange:this.handlePortChange,type:"text"})))}}])&&Tw(t.prototype,n),r&&Tw(t,r),a}(ue.a.Component);function Uw(e){return(Uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qw(){return(qw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vw(e,t){return(Vw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hw(e);if(t){var o=Hw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Kw(this,n)}}function Kw(e,t){return!t||"object"!==Uw(t)&&"function"!=typeof t?zw(e):t}function zw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hw(e){return(Hw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Mw.propTypes={ip:Ct.a.string.isRequired,port:Ct.a.number.isRequired,onAlterBindAddress:Ct.a.func.isRequired,onAlterPort:Ct.a.func.isRequired};var Ww=vi.ConfirmButton,Xw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vw(e,t)}(a,e);var t,n,r,o=Fw(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Gw(zw(e=o.call(this)),"onChangeUsername",(function(t){return e.props.alterUsername(t.target.value)})),Gw(zw(e),"onChangePassword",(function(t){return e.props.alterPassword(t.target.value)})),Gw(zw(e),"onChangeBindAddress",(function(t){return e.props.alterBindAddress(t.target.value)})),Gw(zw(e),"onChangePort",(function(t){return e.props.alterPort(t.target.value)})),Gw(zw(e),"finishSingleNode",(function(t){t.preventDefault();var n=e.props,r={username:n.username,password:n.password},o={port:n.port,bindAddress:n.bindAddress};e.props.setupSingleNode(r,o)})),e.finishSingleNode=e.finishSingleNode.bind(zw(e)),e.onChangeUsername=e.onChangeUsername.bind(zw(e)),e.onChangePassword=e.onChangePassword.bind(zw(e)),e.onChangeBindAddress=e.onChangeBindAddress.bind(zw(e)),e.onChangePort=e.onChangePort.bind(zw(e)),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{className:"setup-nodes"},ue.a.createElement("div",{className:"setup-setupnode-section"},ue.a.createElement(Rw,qw({},this.props,{onAlterUsername:this.onChangeUsername,onAlterPassword:this.onChangePassword})),ue.a.createElement(Mw,qw({},this.props,{onAlterPort:this.onChangePort,onAlterBindAddress:this.onChangeBindAddress,ip:this.props.bindAddress,port:this.props.port})),ue.a.createElement(Ww,qw({},this.props,{onClick:this.finishSingleNode,text:"Configure Node"}))))}}])&&Bw(t.prototype,n),r&&Bw(t,r),a}(ue.a.Component);Xw.propTypes={username:Ct.a.string.isRequired,password:Ct.a.string.isRequired,port:Ct.a.number.isRequired,bindAddress:Ct.a.string.isRequired,isAdminParty:Ct.a.bool.isRequired};var Qw=Object(Pt.b)((function(e){var t,n=e.setup;return{nodeList:FE(n),isAdminParty:KE(),setupNode:GE(n),username:zE(n),password:HE(n),port:(t=n,t.setupNode.port),bindAddress:WE(n)}}),(function(e){return{alterUsername:function(t){e(mw(t))},alterPassword:function(t){e(yw(t))},alterBindAddress:function(t){e(gw(t))},alterPort:function(t){e(bw(t))},setupSingleNode:function(t,n){e(function(e,t){return dw(regeneratorRuntime.mark((function n(){var r,o,a,i,s,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=ae.urls("cluster_setup","server"),o={action:"enable_single_node",username:e.username,password:e.password,bind_address:t.bindAddress,port:t.port,singlenode:!0},!(a=sw(o))){n.next=5;break}return n.abrupt("return",hw(a));case 5:return n.prev=5,n.next=8,O(r,o,{raw:!0});case 8:if((i=n.sent).ok){n.next=15;break}return n.next=12,i.json();case 12:return s=n.sent,c=s.reason?s.reason:s.error,n.abrupt("return",hw(c));case 15:return n.next=17,cw.login({name:e.username,password:e.password});case 17:ae.addNotification({msg:"Single node setup successful.",type:"success",fade:!1,clear:!0}),ae.navigate("#setup/finish"),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(5),hw("The cluster has not been setuped successfully.",n.t0);case 24:case"end":return n.stop()}}),n,null,[[5,21]])})))}(t,n))}}}))(Xw);function Jw(e){return(Jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zw(e,t){return(Zw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rO(e);if(t){var o=rO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tO(this,n)}}function tO(e,t){return!t||"object"!==Jw(t)&&"function"!=typeof t?nO(e):t}function nO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rO(e){return(rO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zw(e,t)}(a,e);var t,n,r,o=eO(a);function a(){var e;Yw(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oO(nO(e=o.call.apply(o,[this].concat(n))),"handleNodeCountChange",(function(t){e.props.onAlterNodeCount(t)})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{className:"setup-node-count"},ue.a.createElement("p",null,"Number of nodes to be added to the cluster (including this one)"),ue.a.createElement("input",{className:"setup-input-nodecount",value:this.props.nodeCount,onChange:this.handleNodeCountChange,placeholder:"Value of cluster n",type:"text"}))}}])&&$w(t.prototype,n),r&&$w(t,r),a}(ue.a.Component);function iO(e){return(iO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sO(){return(sO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lO(e,t){return(lO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hO(e);if(t){var o=hO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fO(this,n)}}function fO(e,t){return!t||"object"!==iO(t)&&"function"!=typeof t?dO(e):t}function dO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hO(e){return(hO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}aO.propTypes={onAlterNodeCount:Ct.a.func.isRequired,nodeCount:Ct.a.number.isRequired};var yO=vi.ConfirmButton,bO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lO(e,t)}(a,e);var t,n,r,o=pO(a);function a(){var e;cO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return mO(dO(e=o.call.apply(o,[this].concat(n))),"getNodeList",(function(){return e.props.nodeList.map((function(e,t){return ue.a.createElement("div",{key:t,className:"node-item"},e.remoteAddress,":",e.port)}))})),mO(dO(e),"_addNode",(function(){var t=e.props,n=t.username,r=t.password,o=t.setupNode,a=t.additionalNode;e.props.addNode(e.isAdminParty,{username:n,password:r},o,a)})),mO(dO(e),"_alterPortAdditionalNode",(function(t){e.props.alterPortAdditionalNode(t.target.value)})),mO(dO(e),"_alterBindAddressAdditionalNode",(function(t){e.props.alterBindAddressAdditionalNode(t.target.value)})),mO(dO(e),"_alterRemoteAddressAdditionalNode",(function(t){e.props.alterRemoteAddressAdditionalNode(t.target.value)})),mO(dO(e),"_alterUsername",(function(t){e.props.alterUsername(t.target.value)})),mO(dO(e),"_alterPassword",(function(t){e.props.alterPassword(t.target.value)})),mO(dO(e),"_alterBindAddressSetupNode",(function(t){e.props.alterBindAddressForSetupNode(t.target.value)})),mO(dO(e),"_alterPortSetupNode",(function(t){e.props.alterPortForSetupNode(t.target.value)})),mO(dO(e),"_alterNodeCount",(function(t){e.props.alterNodeCount(t.target.value)})),mO(dO(e),"_finishClusterSetup",(function(){e.props.finishClusterSetup("CouchDB Cluster set up!")})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.isAdminParty=KE()}},{key:"render",value:function(){var e=this.props,t=e.setupNode,n=e.additionalNode;return ue.a.createElement("div",{className:"setup-nodes"},"Setup your initial base-node, afterwards add the other nodes that you want to add",ue.a.createElement("div",{className:"setup-setupnode-section"},ue.a.createElement(Rw,sO({},this.props,{onAlterUsername:this._alterUsername,onAlterPassword:this._alterPassword})),ue.a.createElement(Mw,sO({},this.props,{onAlterPort:this._alterPortSetupNode,onAlterBindAddress:this._alterBindAddressSetupNode,ip:t.bindAddress,port:t.port})),ue.a.createElement(aO,sO({},this.props,{onAlterNodeCount:this._alterNodeCount,nodeCount:t.nodeCount}))),ue.a.createElement("hr",null),ue.a.createElement("div",{className:"setup-add-nodes-section"},ue.a.createElement("h2",null,"Add Nodes to the Cluster"),ue.a.createElement("p",null,"Remote host"),ue.a.createElement("input",{value:n.remoteAddress,onChange:this._alterRemoteAddressAdditionalNode,className:"input-remote-node",type:"text",placeholder:"IP Address"}),ue.a.createElement(Mw,sO({},this.props,{onAlterPort:this._alterPortAdditionalNode,onAlterBindAddress:this._alterBindAddressAdditionalNode,ip:n.bindAddress,port:n.port})),ue.a.createElement("div",{className:"setup-add-button"},ue.a.createElement(yO,{onClick:this._addNode,showIcon:!1,id:"setup-btn-no-thanks",text:"Add Node"}))),ue.a.createElement("div",{className:"setup-nodelist"},this.getNodeList()),ue.a.createElement("div",{className:"centered setup-finish"},ue.a.createElement(yO,{onClick:this._finishClusterSetup,showIcon:!1,text:"Configure Cluster"})))}}])&&uO(t.prototype,n),r&&uO(t,r),a}(ue.a.Component);bO.propTypes={username:Ct.a.string.isRequired,password:Ct.a.string.isRequired,nodeList:Ct.a.array.isRequired,isAdminParty:Ct.a.bool.isRequired,setupNode:Ct.a.shape({bindAddress:Ct.a.string.isRequired,port:Ct.a.number.isRequired,nodeCount:Ct.a.number.isRequired}).isRequired,additionalNode:Ct.a.shape({bindAddress:Ct.a.string.isRequired,port:Ct.a.number.isRequired,remoteAddress:Ct.a.string.isRequired}).isRequired};var gO=Object(Pt.b)((function(e){var t,n=e.setup;return{nodeList:FE(n),isAdminParty:KE(),setupNode:GE(n),username:zE(n),password:HE(n),additionalNode:(t=n,t.additionalNode)}}),(function(e){return{addNode:function(t,n,r,o){e(function(e,t,n,r){return function(){var o=dw(regeneratorRuntime.mark((function o(a){var i,s,c,u,l,p;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=ae.urls("cluster_setup","server"),s={action:"enable_cluster",username:t.username,password:t.password,bind_address:n.bindAddress,port:n.port,node_count:n.nodeCount,singlenode:!1},!(c=sw(lw({username:t.username,password:t.password},n)))){o.next=5;break}return o.abrupt("return",hw(c));case 5:if(u={action:"enable_cluster",username:t.username,password:t.password,bind_address:r.bindAddress,port:r.port,node_count:n.nodeCount,remote_node:r.remoteAddress,remote_current_user:t.username,remote_current_password:t.password},e&&(delete u.remote_current_user,delete u.remote_current_password),!(l=sw(u))){o.next=10;break}return o.abrupt("return",hw(l));case 10:return p=function(){var e=dw(regeneratorRuntime.mark((function e(){var n,o,s,c,l,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={action:"add_node",username:t.username,password:t.password,host:r.remoteAddress,port:r.port,singlenode:!1},e.next=3,O(i,u,{raw:!0});case 3:if((o=e.sent).ok){e.next=10;break}return e.next=7,o.json();case 7:return s=e.sent,c=s.reason?s.reason:s.error,e.abrupt("return",hw(c));case 10:return e.next=12,O(i,n,{raw:!0});case 12:if((l=e.sent).ok){e.next=19;break}return e.next=16,l.json();case 16:return p=e.sent,f=p.reason?p.reason:p.error,e.abrupt("return",hw(f));case 19:a({type:"SETUP_ADD_NODE_TO_LIST",options:{value:{port:r.port,remoteAddress:r.remoteAddress}}}),ae.addNotification({msg:"Added node",type:"success",fade:!1,clear:!0});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o.prev=11,o.next=14,O(i,s,{raw:!0});case 14:return o.next=16,cw.login({name:t.username,password:t.password});case 16:return o.next=18,p();case 18:o.next=23;break;case 20:o.prev=20,o.t0=o.catch(11),hw("An error occured while adding the node.",o.t0);case 23:case"end":return o.stop()}}),o,null,[[11,20]])})));return function(e){return o.apply(this,arguments)}}()}(t,n,r,o))},alterPortAdditionalNode:function(t){e(function(e){return{type:"SETUP_PORT_ADDITIONAL_NODE",options:{value:e}}}(t))},alterBindAddressAdditionalNode:function(t){e(function(e){return{type:"SETUP_BIND_ADDRESS_ADDITIONAL_NODE",options:{value:e}}}(t))},alterRemoteAddressAdditionalNode:function(t){e(function(e){return{type:"SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE",options:{value:e}}}(t))},alterUsername:function(t){e(mw(t))},alterPassword:function(t){e(yw(t))},alterBindAddressForSetupNode:function(t){e(gw(t))},alterPortForSetupNode:function(t){e(bw(t))},finishClusterSetup:function(t){var n;e((n=t,dw(regeneratorRuntime.mark((function e(){var t,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ae.urls("cluster_setup","server"),r={action:"finish_cluster"},e.prev=2,e.next=5,O(t,r,{raw:!0});case 5:if(!(o=e.sent).ok){e.next=11;break}ae.addNotification({msg:n,type:"success",fade:!1,clear:!0}),ae.navigate("#setup/finish"),e.next=15;break;case 11:return e.next=13,o.json();case 13:a=e.sent,hw("The cluster is already finished",a.reason);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),hw("There was an error. Please check your setup and try again.",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))))},alterNodeCount:function(t){e(function(e){return{type:"SETUP_NODE_COUNT",options:{value:e}}}(t))}}}))(bO),_O={RouteObjects:[ae.RouteObject.extend({roles:["_admin"],selectedHeader:"Setup",routes:{setup:"setupInitView","setup/finish":"finishView","setup/singlenode":"setupSingleNode","setup/multinode":"setupMultiNode"},setupInitView:function(){var e=ae.urls("cluster_setup","apiurl");return EE.fetchNodes(),ue.a.createElement($t,{component:ue.a.createElement(_w,null),endpoint:e,docURL:ae.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+se.i18n.en_US["couchdb-productname"]}]})},setupSingleNode:function(){var e=ae.urls("cluster_setup","apiurl");return EE.fetchNodes(),ue.a.createElement($t,{component:ue.a.createElement(Qw,null),endpoint:e,docURL:ae.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+se.i18n.en_US["couchdb-productname"]}]})},setupMultiNode:function(){var e=ae.urls("cluster_setup","apiurl");return EE.fetchNodes(),ue.a.createElement($t,{component:ue.a.createElement(gO,null),endpoint:e,docURL:ae.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+se.i18n.en_US["couchdb-productname"]}]})},finishView:function(){var e=ae.urls("cluster_setup","apiurl");return ue.a.createElement($t,{component:ue.a.createElement(XE,null),endpoint:e,docURL:ae.constants.DOC_URLS.SETUP,crumbs:[{name:"Setup "+se.i18n.en_US["couchdb-productname"]}]})}})]};n(443);_O.initialize=function(){ae.addHeaderLink({title:"Setup",href:"#/setup",icon:"fonticon-wrench"})},ae.addReducers({setup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:LE,t=arguments.length>1?arguments[1]:void 0,n=t.options,r=t.type;switch(r){case"SETUP_SET_CLUSTERSTATUS":return qE(e,"clusterState",n.state);case"SETUP_SET_USERNAME":return qE(e,"username",n.value);case"SETUP_SET_PASSWORD":return qE(e,"password",n.value);case"SETUP_BIND_ADDRESS_FOR_SINGLE_NODE":return qE(e,"setupNode.bindAddress",n.value);case"SETUP_PORT_FOR_SINGLE_NODE":return UE(e,"setupNode.port",parseInt(n.value));case"SETUP_PORT_ADDITIONAL_NODE":return UE(e,"additionalNode.port",parseInt(n.value));case"SETUP_BIND_ADDRESS_ADDITIONAL_NODE":return qE(e,"additionalNode.bindAddress",n.value);case"SETUP_REMOTE_ADDRESS_ADDITIONAL_NODE":return qE(e,"additionalNode.remoteAddress",n.value);case"SETUP_ADD_NODE_TO_LIST":var o=ME(e);return o.nodeList.push(n.value),BE(o),o;case"SETUP_RESET_ADDITIONAL_NODE":return BE(ME(e));case"SETUP_NODE_COUNT":return UE(e,"setupNode.nodeCount",parseInt(n.value));default:return e}}}),ae.registerUrls("cluster_setup",{server:function(){return se.host+"/_cluster_setup"},app:function(){return"/_cluster_setup"},apiurl:function(){return window.location.origin+"/_cluster_setup"}});var vO=_O;function EO(e){return(EO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SO(e,t){return(SO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=CO(e);if(t){var o=CO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return DO(this,n)}}function DO(e,t){return!t||"object"!==EO(t)&&"function"!=typeof t?RO(e):t}function RO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CO(e){return(CO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TO=vi.TabElement,kO=vi.TabElementWrapper,xO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SO(e,t)}(a,e);var t,n,r,o=NO(a);function a(){var e;wO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return PO(RO(e=o.call.apply(o,[this].concat(n))),"checked",(function(t){return e.props.selectedRadio===t})),PO(RO(e),"onRadioClick",(function(t){var n=t.target.value;e.props.onRadioClick(n)})),PO(RO(e),"createFilterTabs",(function(){return e.props.radioNames.map((function(t,n){var r=e.checked(t);return ue.a.createElement(TO,{key:n,selected:r,text:t,onChange:e.onRadioClick})}))})),PO(RO(e),"searchTermChange",(function(t){var n=t.target.value;e.props.onSearch(n)})),e}return t=a,(n=[{key:"render",value:function(){var e=this.createFilterTabs();return ue.a.createElement(kO,null,e,ue.a.createElement("li",{className:"component-tab-list-element"},ue.a.createElement("input",{id:"active-tasks-search-box",className:"searchbox",type:"text",name:"search",placeholder:"Search for databases...",value:this.props.searchTerm,onChange:this.searchTermChange})))}}])&&OO(t.prototype,n),r&&OO(t,r),a}(ue.a.Component);function IO(e){return(IO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LO(e,t){return(LO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BO(e);if(t){var o=BO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return UO(this,n)}}function UO(e,t){return!t||"object"!==IO(t)&&"function"!=typeof t?qO(e):t}function qO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BO(e){return(BO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}PO(xO,"defaultProps",{radioNames:["All Tasks","Replication","Database Compaction","Indexer","View Compaction"]});var FO=function(e){return[se.helpers.formatDate(e),se.helpers.getDateFromNow(e)]},KO=function(e){var t=e.type,n=[];return"replication"===t?(n.push("From: "+e.source),n.push("To: "+e.target)):"indexer"===t?(n.push(e.database),n.push("(View: "+e.design_document+")")):n.push(e.database),n},zO=function(e){var t=[],n=e.type;return _.has(e,"progress")&&t.push("Progress: "+e.progress+"%"),"indexer"===n?t.push("Processed "+e.changes_done+" of "+e.total_changes+" changes."):"replication"===n&&(t.push(e.docs_written+" docs written."),_.has(e,"changes_pending")&&t.push(e.changes_pending+" pending changes.")),_.has(e,"changes_done")&&t.push(e.changes_done+" Changes done."),t},HO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LO(e,t)}(a,e);var t,n,r,o=MO(a);function a(){var e;AO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return VO(qO(e=o.call.apply(o,[this].concat(n))),"getInfo",(function(e){return{type:e.type,objectField:KO(e),started_on:FO(e.started_on),updated_on:FO(e.updated_on),pid:e.pid.replace(/[<>]/g,""),progress:zO(e)}})),VO(qO(e),"multilineMessage",(function(e,t){t||(t="");var n="multiline-active-tasks-message "+t;return e.map((function(e,t){return ue.a.createElement("p",{key:t,className:n},e)}))})),e}return t=a,(n=[{key:"render",value:function(){var e=this.getInfo(this.props.item),t=this.multilineMessage(e.objectField,"to-from-database"),n=this.multilineMessage(e.started_on,"time"),r=this.multilineMessage(e.updated_on,"time"),o=this.multilineMessage(e.progress);return ue.a.createElement("tr",null,ue.a.createElement("td",null,e.type),ue.a.createElement("td",null,t),ue.a.createElement("td",null,n),ue.a.createElement("td",null,r),ue.a.createElement("td",null,e.pid),ue.a.createElement("td",null,o))}}])&&jO(t.prototype,n),r&&jO(t,r),a}(ue.a.Component);function GO(e){return(GO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QO(e,t){return(QO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ZO(e);if(t){var o=ZO(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return YO(this,n)}}function YO(e,t){return!t||"object"!==GO(t)&&"function"!=typeof t?$O(e):t}function $O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZO(e){return(ZO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QO(e,t)}(a,e);var t,n,r,o=JO(a);function a(){var e;WO(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return eS($O(e=o.call.apply(o,[this].concat(n))),"createRows",(function(){var t=""===e.props.searchTerm.trim();return 0===e.props.tasks.length||e.props.isLoading?t?e.noActiveTasks():e.noActiveTasksMatchFilter():e.props.tasks.map((function(e,t){return ue.a.createElement(HO,{key:t,item:e})}))})),eS($O(e),"getType",(function(){var t=e.props.selectedRadio;return"All Tasks"===t?"":t})),eS($O(e),"noActiveTasks",(function(){var t=e.getType(),n=ue.a.createElement("td",{colSpan:"6"},"No active ",t," tasks.");return e.props.isLoading&&(n=ue.a.createElement("td",{colSpan:"6"},"Loading tasks.")),ue.a.createElement("tr",{className:"no-matching-database-on-search"},n)})),eS($O(e),"noActiveTasksMatchFilter",(function(){var t=e.getType();return ue.a.createElement("tr",{className:"no-matching-database-on-search"},ue.a.createElement("td",{colSpan:"6"},"No active ",t,' tasks match with filter: "',e.props.searchTerm,'"'))})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("tbody",{className:"js-tasks-go-here"},this.createRows())}}])&&XO(t.prototype,n),r&&XO(t,r),a}(ue.a.Component);function nS(e){return(nS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aS(e,t,n){return t&&oS(e.prototype,t),n&&oS(e,n),e}function iS(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sS(e,t)}function sS(e,t){return(sS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pS(e);if(t){var o=pS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return uS(this,n)}}function uS(e,t){return!t||"object"!==nS(t)&&"function"!=typeof t?lS(e):t}function lS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pS(e){return(pS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dS=function(e){iS(n,e);var t=cS(n);function n(e){var r;return rS(this,n),fS(lS(r=t.call(this,e)),"arrow",(function(){var e=r.props.sortByHeader,t=r.props.headerName,n=r.props.headerIsAscending?"icon icon-caret-up":"icon icon-caret-down";if(e===t)return ue.a.createElement("i",{className:n})})),fS(lS(r),"onTableHeaderClick",(function(){r.props.onTableHeaderClick(r.props.headerName)})),r.onTableHeaderClick=r.onTableHeaderClick.bind(lS(r)),r}return aS(n,[{key:"render",value:function(){return ue.a.createElement("td",{className:"header-field ".concat(this.props.headerName," tableheader"),onClick:this.onTableHeaderClick},ue.a.createElement("label",{className:"header-field label-text active-tasks-header noselect"},this.props.displayName," ",this.arrow()))}}]),n}(ue.a.Component),hS=function(e){iS(n,e);var t=cS(n);function n(){var e;rS(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return fS(lS(e=t.call.apply(t,[this].concat(o))),"createTableHeadingFields",(function(){var t=e.props,n=t.onTableHeaderClick,r=t.sortByHeader,o=t.headerIsAscending;return e.props.headerNames.map((function(e){return ue.a.createElement(dS,{headerName:e[0],displayName:e[1],key:e[0],onTableHeaderClick:n,sortByHeader:r,headerIsAscending:o})}))})),e}return aS(n,[{key:"render",value:function(){return ue.a.createElement("thead",null,ue.a.createElement("tr",null,this.createTableHeadingFields()))}}]),n}(ue.a.Component);function mS(e){return(mS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gS(e,t){return(gS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ES(e);if(t){var o=ES(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vS(this,n)}}function vS(e,t){return!t||"object"!==mS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ES(e){return(ES=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}fS(hS,"defaultProps",{headerNames:[["type","Type"],["database","Database"],["started-on","Started on"],["updated-on","Updated on"],["pid","PID"],["progress","Status"]]});var wS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gS(e,t)}(a,e);var t,n,r,o=_S(a);function a(){return yS(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.tasks,n=e.selectedRadio,r=e.searchTerm,o=e.sortByHeader,a=e.onTableHeaderClick,i=e.headerIsAscending,s=e.isLoading;return ue.a.createElement("div",{id:"dashboard-lower-content"},ue.a.createElement("table",{id:"active-tasks-table",className:"table table-bordered table-striped active-tasks"},ue.a.createElement(hS,{onTableHeaderClick:a,sortByHeader:o,headerIsAscending:i}),ue.a.createElement(tS,{tasks:t,selectedRadio:n,isLoading:s,searchTerm:r})))}}])&&bS(t.prototype,n),r&&bS(t,r),a}(ue.a.Component);function OS(e){return(OS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DS(e,t){return(DS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TS(e);if(t){var o=TS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return CS(this,n)}}function CS(e,t){return!t||"object"!==OS(t)&&"function"!=typeof t?PS(e):t}function PS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TS(e){return(TS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DS(e,t)}(a,e);var t,n,r,o=RS(a);function a(){var e;SS(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kS(PS(e=o.call.apply(o,[this].concat(n))),"setNewSearchTerm",(function(t){e.props.setSearchTerm(t)})),kS(PS(e),"switchTab",(function(t){e.props.switchTab(t)})),kS(PS(e),"tableHeaderOnClick",(function(t){e.props.sortByColumnHeader(t)})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.tasks,r=e.searchTerm,o=e.selectedRadio,a=e.sortByHeader,i=e.headerIsAscending,s=this.setNewSearchTerm,c=this.tableHeaderOnClick;return ue.a.createElement("div",{id:"active-tasks-page",className:"scrollable"},ue.a.createElement("div",{className:"inner"},ue.a.createElement(xO,{searchTerm:r,selectedRadio:o,onSearch:s,onRadioClick:this.switchTab}),ue.a.createElement(wS,{isLoading:t,tasks:n,searchTerm:r,selectedRadio:o,onTableHeaderClick:c,sortByHeader:a,headerIsAscending:i})))}}])&&NS(t.prototype,n),r&&NS(t,r),a}(ue.a.Component);function IS(e){return(IS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LS(e,t){return(LS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BS(e);if(t){var o=BS(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return US(this,n)}}function US(e,t){return!t||"object"!==IS(t)&&"function"!=typeof t?qS(e):t}function qS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BS(e){return(BS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FS=vi.Polling,KS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LS(e,t)}(a,e);var t,n,r,o=MS(a);function a(){var e;AS(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return VS(qS(e=o.call.apply(o,[this].concat(n))),"runPollingUpdate",(function(){e.props.runPollingUpdate()})),VS(qS(e),"getPluralForLabel",(function(){return"1"===e.state.pollingInterval?"":"s"})),e}return t=a,(n=[{key:"render",value:function(){var e="active-tasks__polling-wrapper";return R.isIE1X()&&(e+=" "+e+"--ie1X"),ue.a.createElement("div",{className:e},ue.a.createElement(FS,{min:1,max:30,stepSize:1,startValue:15,valueUnits:"second",onPoll:this.runPollingUpdate}))}}])&&jS(t.prototype,n),r&&jS(t,r),a}(ue.a.Component),zS=[{name:"Active Tasks"}],HS=function(e){return ue.a.createElement(Xt,null,ue.a.createElement(Qt,{crumbs:zS,docURL:ae.constants.DOC_URLS.ACTIVE_TASKS,endpoint:R.getApiUrl("/_active_tasks")},ue.a.createElement(KS,e)),ue.a.createElement(Jt,null,ue.a.createElement(xS,e)))},GS={ACTIVE_TASKS_SWITCH_TAB:"ACTIVE_TASKS_SWITCH_TAB",ACTIVE_TASKS_SET_COLLECTION:"ACTIVE_TASKS_SET_COLLECTION",ACTIVE_TASKS_SET_SEARCH_TERM:"ACTIVE_TASKS_SET_SEARCH_TERM",ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:"ACTIVE_TASKS_SORT_BY_COLUMN_HEADER",ACTIVE_TASKS_FETCH_AND_SET:"ACTIVE_TASKS_FETCH_AND_SET",ACTIVE_TASKS_SET_IS_LOADING:"ACTIVE_TASKS_SET_IS_LOADING",ACTIVE_TASKS_POLLING_COLLECTION:"ACTIVE_TASKS_POLLING_COLLECTION"},WS=function(){return E(R.getServerUrl("/_active_tasks")).then((function(e){if(e.error)throw new Error(e.reason);return e}))},XS=function(e){return{type:GS.ACTIVE_TASKS_SET_IS_LOADING,options:e}},QS=function(e){return{type:GS.ACTIVE_TASKS_FETCH_AND_SET,options:e}};function JS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JS(Object(n),!0).forEach((function(t){$S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ZS={isLoading:!1,sortByHeader:"started-on",headerIsAscending:!0,selectedRadio:"All Tasks",searchTerm:"",tasks:[],filteredTasks:[]},eN=function(e,t){var n=tN(t,e.selectedRadio,e.sortbyHeader,e.tasks,e.headerIsAscending);return YS(YS({},e),{},{filteredTasks:n,searchTerm:t})},tN=function(e,t,n,r,o){return function(e,t,n){var r=Object(i.sortBy)(t,(function(t){var n=e;return Object(i.isUndefined)(t[n])&&(n="source"),t[n]}));return n?r:r.reverse()}(n,r.filter((function(n){return function(e,t){var n=t.toLowerCase().replace(" ","_");return e.type===n||"all_tasks"===n}(n,t)&&function(e,t){var n=new RegExp(t,"g"),r="";return Object(i.has)(e,"database")&&(r+=e.database),Object(i.has)(e,"source")&&(r+=e.source),Object(i.has)(e,"target")&&(r+=e.target),n.test(r)}(n,e)})),o)},nN=function(e,t,n){return e!==t||!n},rN=function(e){return e.headerIsAscending},oN=function(e){return e.isLoading},aN=function(e){return e.selectedRadio},iN=function(e){return e.sortByHeader},sN=function(e){return e.searchTerm},cN=Object(Pt.b)((function(e){var t,n=e.activetasks;return{tasks:(t=n,t.filteredTasks),headerIsAscending:rN(n),selectedRadio:aN(n),sortByHeader:iN(n),searchTerm:sN(n),isLoading:oN(n)}}),(function(e){return{init:function(){return e((function(e){e(XS(!0)),WS().then((function(t){e(XS(!1)),e(QS(t))})).catch((function(e){ae.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))},setSearchTerm:function(t){return e({type:GS.ACTIVE_TASKS_SET_SEARCH_TERM,options:t})},sortByColumnHeader:function(t){return e({type:GS.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER,options:t})},switchTab:function(t){return e(function(e){return{type:GS.ACTIVE_TASKS_SWITCH_TAB,options:e}}(t))},runPollingUpdate:function(){return e((function(e){WS().then((function(t){e(QS(t))})).catch((function(e){ae.addNotification({msg:"Fetching active tasks failed: ".concat(e),type:"error"})}))}))}}}))(HS),uN={RouteObjects:[ae.RouteObject.extend({selectedHeader:"Active Tasks",routes:{"activetasks/:id":"showActiveTasks",activetasks:"showActiveTasks"},roles:["_admin"],showActiveTasks:function(){return ue.a.createElement(cN,null)}})]};n(444);uN.initialize=function(){ae.addHeaderLink({title:"Active Tasks",icon:"fonticon-activetasks",href:"#/activetasks"})},ae.addReducers({activetasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZS,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case GS.ACTIVE_TASKS_FETCH_AND_SET:return YS(YS({},e),{},{tasks:r,filteredTasks:tN(e.searchTerm,e.selectedRadio,e.sortByHeader,r,e.headerIsAscending)});case GS.ACTIVE_TASKS_SWITCH_TAB:var o=tN(e.searchTerm,r,e.sortByHeader,e.tasks,s);return YS(YS({},e),{},{selectedRadio:r,filteredTasks:o});case GS.ACTIVE_TASKS_CHANGE_POLLING_INTERVAL:return YS(YS({},e),{},{pollingIntervalSeconds:r});case GS.ACTIVE_TASKS_SET_SEARCH_TERM:return eN(e,r);case GS.ACTIVE_TASKS_SORT_BY_COLUMN_HEADER:var a=e.sortByHeader,i=r,s=nN(a,i,e.headerIsAscending),c=tN(e.searchTerm,e.selectedRadio,i,e.tasks,s);return YS(YS({},e),{},{sortByHeader:i,headerIsAscending:s,filteredTasks:c});case GS.ACTIVE_TASKS_SET_IS_LOADING:return YS(YS({},e),{},{isLoading:r})}return e}});var lN=uN;function pN(e){return(pN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hN(e,t){return(hN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bN(e);if(t){var o=bN(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yN(this,n)}}function yN(e,t){return!t||"object"!==pN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bN(e){return(bN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hN(e,t)}(a,e);var t,n,r,o=mN(a);function a(){return fN(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",{className:"config-warning-cluster-wrapper"},ue.a.createElement("div",{className:"config-warning-cluster-container"},ue.a.createElement("div",null,ue.a.createElement("div",{className:"config-warning-icon-container pull-left"},ue.a.createElement("i",{className:"fonticon-attention-circled"})),"It seems that you are running a cluster with ",this.props.nodes.length," nodes. For CouchDB 2.0 or greater we recommend using a configuration management tools like Chef, Ansible, Puppet or Salt (in no particular order) to configure your nodes in a cluster.",ue.a.createElement("br",null),ue.a.createElement("br",null),ue.a.createElement("div",{className:"config-warning-other-text"},"We highly recommend against configuring nodes in your cluster using the HTTP API and suggest using a configuration management tool for all configurations."))))}}])&&dN(t.prototype,n),r&&dN(t,r),a}(ue.a.Component),_N=Object(Pt.b)((function(e){return{nodes:e.clusters.nodes}}),null)(gN),vN={RouteObjects:[ae.RouteObject.extend({selectedHeader:"Configuration",routes:{"cluster/disabled":"showDisabledFeatureScreen"},showDisabledFeatureScreen:function(){return EE.fetchNodes(),ue.a.createElement($t,{component:ue.a.createElement(_N,null),endpoint:R.getServerUrl("/_membership"),docURL:ae.constants.DOC_URLS.MEMBERSHIP,crumbs:[{name:"Config disabled"}]})}})]};function EN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EN(Object(n),!0).forEach((function(t){ON(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ON(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SN={nodes:[]};vN.initialize=function(){},ae.addReducers({clusters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SN,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case vE:return wN(wN({},e),{},{nodes:r.nodes})}return e}});var NN=vN,DN=function(e){return R.getServerUrl("/_node/"+e+"/_config")},RN=function(e,t,n){var r="/_node/"+e+"/_config/"+encodeURIComponent(t)+"/"+encodeURIComponent(n);return R.getServerUrl(r)},CN=function(e,t,n,r){var o=RN(e,t,n);return S(o,r).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},PN="EDIT_CONFIG",TN="LOADING_CONFIG",kN="EDIT_OPTION",xN="CANCEL_EDIT",IN="SAVING_OPTION",AN="OPTION_SAVE_SUCCESS",jN="OPTION_SAVE_FAILURE",LN="DELETING_OPTION",MN="OPTION_DELETE_SUCCESS",UN="OPTION_DELETE_FAILURE",qN="ADDING_OPTION",BN="OPTION_ADD_SUCCESS",VN="OPTION_ADD_FAILURE",FN=function(e){return function(t){t({type:TN}),function(e){var t=DN(e);return E(t).then((function(e){if(e.error)throw new Error(e.reason);return{sections:e}}))}(e).then((function(n){t({type:PN,options:{sections:n.sections,node:e}})})).catch((function(n){ae.addNotification({msg:"Failed to load the configuration. "+n.message,type:"error",clear:!0}),t({type:PN,options:{sections:[],node:e}})}))}},KN=function(e,t){t({type:AN,options:e}),ae.addNotification({msg:"Option ".concat(e.optionName," saved"),type:"success"})},zN=function(e,t,n){n({type:jN,options:e}),ae.addNotification({msg:"Option save failed: ".concat(t),type:"error"})},HN=function(e,t){t({type:BN,options:e}),ae.addNotification({msg:"Option ".concat(e.optionName," added"),type:"success"})},GN=function(e,t,n){n({type:VN,options:e}),ae.addNotification({msg:"Option add failed: ".concat(t),type:"error"})},WN=function(e,t){return function(n){n({type:LN,options:t});var r=t.sectionName,o=t.optionName;return function(e,t,n){var r=RN(e,t,n);return w(r).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,r,o).then((function(){return XN(t,n)})).catch((function(e){return QN(t,e.message,n)}))}},XN=function(e,t){t({type:MN,options:e}),ae.addNotification({msg:"Option ".concat(e.optionName," deleted"),type:"success"})},QN=function(e,t,n){n({type:UN,options:e}),ae.addNotification({msg:"Option delete failed: ".concat(t),type:"error"})};function JN(e){return(JN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $N(e,t){return($N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tD(e);if(t){var o=tD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return eD(this,n)}}function eD(e,t){return!t||"object"!==JN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tD(e){return(tD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$N(e,t)}(a,e);var t,n,r,o=ZN(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state=t.getInitialState(),t}return t=a,(n=[{key:"getInitialState",value:function(){return{sectionName:"",optionName:"",value:"",show:!1}}},{key:"isInputValid",value:function(){return""!==this.state.sectionName&&""!==this.state.optionName&&""!==this.state.value}},{key:"updateSectionName",value:function(e){this.setState({sectionName:e.target.value})}},{key:"updateOptionName",value:function(e){this.setState({optionName:e.target.value})}},{key:"updateValue",value:function(e){this.setState({value:e.target.value})}},{key:"reset",value:function(){this.setState(this.getInitialState())}},{key:"onAdd",value:function(){if(this.isInputValid()){var e={sectionName:this.state.sectionName,optionName:this.state.optionName,value:this.state.value};this.setState({show:!1}),this.props.onAdd(e)}}},{key:"togglePopover",value:function(){this.setState({show:!this.state.show})}},{key:"hidePopover",value:function(){this.setState({show:!1})}},{key:"getPopover",value:function(){return ue.a.createElement(rn.i,{className:"tray",id:"add-option-popover",title:"Add Option"},ue.a.createElement("input",{className:"input-section-name",onChange:this.updateSectionName.bind(this),type:"text",name:"section",placeholder:"Section",autoComplete:"off",autoFocus:!0}),ue.a.createElement("input",{className:"input-option-name",onChange:this.updateOptionName.bind(this),type:"text",name:"name",placeholder:"Name"}),ue.a.createElement("input",{className:"input-value",onChange:this.updateValue.bind(this),type:"text",name:"value",placeholder:"Value"}),ue.a.createElement("a",{className:"btn btn-create",onClick:this.onAdd.bind(this)},"Create"))}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{id:"add-option-panel"},ue.a.createElement(rn.a,{id:"add-option-button",onClick:this.togglePopover.bind(this),ref:function(t){return e.target=t}},ue.a.createElement("i",{className:"icon icon-plus header-icon"}),"Add Option"),ue.a.createElement(rn.g,{show:this.state.show,onHide:this.hidePopover.bind(this),placement:"bottom",rootClose:!0,target:function(){return e.target}},this.getPopover()))}}])&&YN(t.prototype,n),r&&YN(t,r),a}(ue.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nD,"propTypes",{onAdd:Ct.a.func.isRequired});var rD=Object(Pt.b)((function(){return{}}),(function(e,t){return{onAdd:function(n){e(function(e,t){return function(n){n({type:qN});var r=t.sectionName,o=t.optionName,a=t.value;return CN(e,r,o,a).then((function(){return HN(t,n)})).catch((function(e){return GN(t,e.message,n)}))}}(t.node,n))}}}))(nD);function oD(e){return(oD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sD(e,t){return(sD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pD(e);if(t){var o=pD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return uD(this,n)}}function uD(e,t){return!t||"object"!==oD(t)&&"function"!=typeof t?lD(e):t}function lD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pD(e){return(pD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sD(e,t)}(a,e);var t,n,r,o=cD(a);function a(){var e;aD(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fD(lD(e=o.call.apply(o,[this].concat(n))),"state",{value:e.props.value}),fD(lD(e),"onChange",(function(t){e.setState({value:t.target.value})})),fD(lD(e),"onSave",(function(){e.state.value!==e.props.value?e.props.onSave(e.state.value):e.props.onCancelEdit()})),fD(lD(e),"getButtons",(function(){return e.props.saving?null:ue.a.createElement("span",null,ue.a.createElement("button",{className:"btn btn-primary fonticon-ok-circled btn-small btn-config-save",onClick:e.onSave.bind(lD(e))}),ue.a.createElement("button",{className:"btn fonticon-cancel-circled btn-small btn-config-cancel",onClick:e.props.onCancelEdit}))})),e}return t=a,(n=[{key:"render",value:function(){return this.props.editing?ue.a.createElement("td",null,ue.a.createElement("div",{className:"config-value-form"},ue.a.createElement("input",{onChange:this.onChange.bind(this),defaultValue:this.props.value,disabled:this.props.saving,autoFocus:!0,type:"text",className:"config-value-input"}),this.getButtons())):ue.a.createElement("td",{className:"config-show-value",onClick:this.props.onEdit},this.props.value)}}])&&iD(t.prototype,n),r&&iD(t,r),a}(ue.a.Component);function hD(e){return(hD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yD(e,t){return(yD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vD(e);if(t){var o=vD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gD(this,n)}}function gD(e,t){return!t||"object"!==hD(t)&&"function"!=typeof t?_D(e):t}function _D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vD(e){return(vD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ED(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}fD(dD,"propTypes",{value:Ct.a.string.isRequired,editing:Ct.a.bool.isRequired,onEdit:Ct.a.func.isRequired,onCancelEdit:Ct.a.func.isRequired,onSave:Ct.a.func.isRequired});var wD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yD(e,t)}(a,e);var t,n,r,o=bD(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ED(_D(t=o.call(this,e)),"onDelete",(function(){t.props.onDelete()})),ED(_D(t),"showModal",(function(){t.setState({show:!0})})),ED(_D(t),"hideModal",(function(){t.setState({show:!1})})),t.onDelete=t.onDelete.bind(_D(t)),t.showModal=t.showModal.bind(_D(t)),t.hideModal=t.hideModal.bind(_D(t)),t.state={show:!1},t}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("td",{className:"text-center config-item-trash config-delete-value"},ue.a.createElement("i",{className:"icon icon-trash",onClick:this.showModal}),ue.a.createElement(zi.ConfirmationModal,{text:"Are you sure you want to delete ".concat(this.props.sectionName,"/").concat(this.props.optionName,"?"),onClose:this.hideModal,onSubmit:this.onDelete,visible:this.state.show}))}}])&&mD(t.prototype,n),r&&mD(t,r),a}(ue.a.Component);function OD(e){return(OD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ND(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DD(e,t){return(DD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TD(e);if(t){var o=TD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return CD(this,n)}}function CD(e,t){return!t||"object"!==OD(t)&&"function"!=typeof t?PD(e):t}function PD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TD(e){return(TD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ED(wD,"propTypes",{sectionName:Ct.a.string.isRequired,optionName:Ct.a.string.isRequired,onDelete:Ct.a.func.isRequired});var xD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DD(e,t)}(a,e);var t,n,r,o=RD(a);function a(){var e;SD(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kD(PD(e=o.call.apply(o,[this].concat(n))),"onSave",(function(t){var n=e.props.option;n.value=t,e.props.onSave(n)})),kD(PD(e),"onDelete",(function(){e.props.onDelete(e.props.option)})),kD(PD(e),"onEdit",(function(){e.props.onEdit(e.props.option)})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("tr",{className:"config-item"},ue.a.createElement("th",null,this.props.option.header&&this.props.option.sectionName),ue.a.createElement("td",null,this.props.option.optionName),ue.a.createElement(dD,{value:this.props.option.value,editing:this.props.option.editing,saving:this.props.saving,onSave:this.onSave,onEdit:this.onEdit,onCancelEdit:this.props.onCancelEdit}),ue.a.createElement(wD,{optionName:this.props.option.optionName,sectionName:this.props.option.sectionName,onDelete:this.onDelete}))}}])&&ND(t.prototype,n),r&&ND(t,r),a}(ue.a.Component);function ID(e){return(ID="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LD(e,t){return(LD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BD(e);if(t){var o=BD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return UD(this,n)}}function UD(e,t){return!t||"object"!==ID(t)&&"function"!=typeof t?qD(e):t}function qD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BD(e){return(BD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}kD(xD,"propTypes",{option:Ct.a.object.isRequired,saving:Ct.a.bool.isRequired,onSave:Ct.a.func.isRequired,onDelete:Ct.a.func.isRequired,onEdit:Ct.a.func.isRequired,onCancelEdit:Ct.a.func.isRequired});var FD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LD(e,t)}(a,e);var t,n,r,o=MD(a);function a(){var e;AD(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return VD(qD(e=o.call.apply(o,[this].concat(n))),"createOptions",(function(){return _.map(e.props.options,(function(t){return ue.a.createElement(xD,{option:t,saving:e.props.saving,onDelete:e.props.onDeleteOption,onSave:e.props.onSaveOption,onEdit:e.props.onEditOption,onCancelEdit:e.props.onCancelEdit,key:"".concat(t.sectionName,"/").concat(t.optionName)})}))})),e}return t=a,(n=[{key:"render",value:function(){var e=this.createOptions();return ue.a.createElement("table",{className:"config table table-striped table-bordered"},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",{id:"config-section",width:"22%"},"Section"),ue.a.createElement("th",{id:"config-option",width:"22%"},"Option"),ue.a.createElement("th",{id:"config-value"},"Value"),ue.a.createElement("th",{id:"config-trash"}))),ue.a.createElement("tbody",null,e))}}])&&jD(t.prototype,n),r&&jD(t,r),a}(ue.a.Component);function KD(e){return(KD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HD(e,t){return(HD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=QD(e);if(t){var o=QD(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return WD(this,n)}}function WD(e,t){return!t||"object"!==KD(t)&&"function"!=typeof t?XD(e):t}function XD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QD(e){return(QD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}VD(FD,"propTypes",{options:Ct.a.arrayOf(Ct.a.shape({editing:Ct.a.bool.isRequired,header:Ct.a.bool,optionName:Ct.a.string.isRequired,sectionName:Ct.a.string.isRequired,value:Ct.a.string})).isRequired,saving:Ct.a.bool.isRequired,onDeleteOption:Ct.a.func.isRequired,onEditOption:Ct.a.func.isRequired,onSaveOption:Ct.a.func.isRequired,onCancelEdit:Ct.a.func.isRequired});var YD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HD(e,t)}(a,e);var t,n,r,o=GD(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),JD(XD(t=o.call(this,e)),"saveOption",(function(e){t.props.saveOption(t.props.node,e)})),JD(XD(t),"deleteOption",(function(e){t.props.deleteOption(t.props.node,e)})),JD(XD(t),"editOption",(function(e){t.props.editOption(e)})),JD(XD(t),"cancelEdit",(function(){t.props.cancelEdit()})),t.props.fetchAndEditConfig(t.props.node),t}return t=a,(n=[{key:"render",value:function(){return this.props.loading?ue.a.createElement("div",{className:"view"},ue.a.createElement(vi.LoadLines,null)):ue.a.createElement(FD,{saving:this.props.saving,onDeleteOption:this.deleteOption,onSaveOption:this.saveOption,onEditOption:this.editOption,onCancelEdit:this.cancelEdit,options:this.props.options})}}])&&zD(t.prototype,n),r&&zD(t,r),a}(ue.a.Component);function $D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$D(Object(n),!0).forEach((function(t){eR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}JD(YD,"propTypes",{options:Ct.a.array.isRequired,loading:Ct.a.bool.isRequired,saving:Ct.a.bool.isRequired,saveOption:Ct.a.func.isRequired,deleteOption:Ct.a.func.isRequired,editOption:Ct.a.func.isRequired,cancelEdit:Ct.a.func.isRequired,fetchAndEditConfig:Ct.a.func.isRequired});var tR={sections:{},loading:!0,editSectionName:null,editOptionName:null,saving:!1};function nR(e,t){var n=t.sectionName,r=t.optionName,o=t.value,a=ZD({},e.sections);return a[n]||(a[n]={}),a[n][r]=o||!0,a}function rR(e,t){var n=t.sectionName,r=t.optionName,o=ZD({},e.sections);return o[n]&&(o[n]=ZD({},o[n]),delete o[n][r],0==Object.keys(o[n]).length&&delete o[n]),o}function oR(e,t){var n=e.sections[t],r=Object.keys(n).map((function(r){return{editing:aR(e,t,r),sectionName:t,optionName:r,value:n[r]}})).sort((function(e,t){return e.optionName<t.optionName?-1:e.optionName>t.optionName?1:0}));return r.length>0&&(r[0].header=!0),r}function aR(e,t,n){return t===e.editSectionName&&n===e.editOptionName}var iR=Object(Pt.b)((function(e,t){var n,r=e.config;return{node:t.node,options:(n=r,Object.keys(n.sections).map((function(e){return{sectionName:e,options:oR(n,e)}})).sort((function(e,t){return e.sectionName<t.sectionName?-1:e.sectionName>t.sectionName?1:0})).map((function(e){return e.options})).reduce((function(e,t){return e.concat(t)}),[])),loading:r.loading,saving:r.saving,editSectionName:r.editSectionName,editOptionName:r.editOptionName}}),(function(e){return{fetchAndEditConfig:function(t){e(FN(t))},saveOption:function(t,n){e(function(e,t){return function(n){n({type:IN,options:t});var r=t.sectionName,o=t.optionName,a=t.value;return CN(e,r,o,a).then((function(){return KN(t,n)})).catch((function(e){return zN(t,e.message,n)}))}}(t,n))},deleteOption:function(t,n){e(WN(t,n))},editOption:function(t){e(function(e){return function(t){t({type:kN,options:e})}}(t))},cancelEdit:function(t){e(function(e){return function(t){t({type:xN,options:e})}}(t))}}}))(YD),sR=function(e){var t=e.active,n=e.link,r=e.title;return ue.a.createElement("li",{className:t?"active":""},ue.a.createElement("a",{href:"#".concat(n)},r))};sR.propTypes={active:Ct.a.bool.isRequired,link:Ct.a.string.isRequired,icon:Ct.a.string,title:Ct.a.string.isRequired};var cR=function(e){var t=e.sidebarItems,n=e.selectedTab,r=t.map((function(e){return ue.a.createElement(sR,{key:e.title,active:n===e.title,title:e.title,link:e.link})}));return ue.a.createElement("nav",{className:"sidenav"},ue.a.createElement("ul",{className:"nav nav-list"},r))};function uR(e){return(uR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pR(e,t){return(pR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hR(e);if(t){var o=hR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dR(this,n)}}function dR(e,t){return!t||"object"!==uR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hR(e){return(hR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pR(e,t)}(a,e);var t,n,r,o=fR(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"onOriginChange",value:function(e){"all"===e.target.value&&this.props.isAllOrigins||("selected"!==e.target.value||this.props.isAllOrigins)&&this.props.originChange("all"===e.target.value)}},{key:"render",value:function(){return this.props.corsEnabled?ue.a.createElement("div",null,ue.a.createElement("p",null,ue.a.createElement("strong",null," Origin Domains ")," "),ue.a.createElement("p",null,"Databases will accept requests from these domains: "),ue.a.createElement("label",{className:"radio"},ue.a.createElement("input",{type:"radio",checked:this.props.isAllOrigins,value:"all",onChange:this.onOriginChange.bind(this),name:"all-domains"})," All domains ( * )"),ue.a.createElement("label",{className:"radio"},ue.a.createElement("input",{type:"radio",checked:!this.props.isAllOrigins,value:"selected",onChange:this.onOriginChange.bind(this),name:"selected-domains"})," Restrict to specific domains")):null}}])&&lR(t.prototype,n),r&&lR(t,r),a}(ce.Component);mR.propTypes={corsEnabled:Ct.a.bool,isAllOrigins:Ct.a.bool,originChange:Ct.a.func.isRequired};var yR=function(e){return!!bR(e)||(ae.addNotification({msg:"Please enter a valid domain, starting with http/https.",type:"error",clear:!0}),!1)},bR=function(e){return/^https?:\/\/(.+)(:\d{2,5})?$/.test(e)};function gR(e){return(gR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vR(e,t){return(vR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ER(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=OR(e);if(t){var o=OR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wR(this,n)}}function wR(e,t){return!t||"object"!==gR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OR(e){return(OR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var SR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vR(e,t)}(a,e);var t,n,r,o=ER(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={origin:""},t}return t=a,(n=[{key:"onInputChange",value:function(e){this.setState({origin:e.target.value})}},{key:"addOrigin",value:function(e){if(e.preventDefault(),!yR(this.state.origin))return!1;var t=function(e){var t=document.createElement("a");return t.href=e,/:/.test(e)?t.protocol+"//"+t.host:t.protocol+"//"+t.hostname}(this.state.origin);this.props.addOrigin(t),this.setState({origin:""})}},{key:"onKeyUp",value:function(e){if(13==e.keyCode)return this.addOrigin(e)}},{key:"render",value:function(){return this.props.isVisible?ue.a.createElement("div",{id:"origin-domains-container"},ue.a.createElement("div",{className:"origin-domains"},ue.a.createElement("div",{className:"input-append"},ue.a.createElement("input",{type:"text",name:"new_origin_domain",placeholder:"https://example.com",onChange:this.onInputChange.bind(this),value:this.state.origin}),ue.a.createElement("button",{onClick:this.addOrigin.bind(this),className:"btn btn-secondary add-domain"},ue.a.createElement("i",{className:"icon fonticon-ok-circled"})," Add Domain")))):null}}])&&_R(t.prototype,n),r&&_R(t,r),a}(ce.Component);function NR(e){return(NR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RR(e,t){return(RR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TR(e);if(t){var o=TR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return PR(this,n)}}function PR(e,t){return!t||"object"!==NR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TR(e){return(TR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}SR.propTypes={isVisible:Ct.a.bool.isRequired,addOrigin:Ct.a.func.isRequired};var kR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RR(e,t)}(a,e);var t,n,r,o=CR(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={edit:!1,updatedOrigin:t.props.origin},t}return t=a,(n=[{key:"editOrigin",value:function(e){e.preventDefault(),this.setState({edit:!this.state.edit})}},{key:"updateOrigin",value:function(e){e.preventDefault(),yR(this.state.updatedOrigin)&&(this.state.updatedOrigin&&this.props.origin!==this.state.updatedOrigin&&this.props.updateOrigin(this.state.updatedOrigin,this.props.origin),this.setState({edit:!1}))}},{key:"deleteOrigin",value:function(e){e.preventDefault(),this.props.deleteOrigin(this.props.origin)}},{key:"onInputChange",value:function(e){this.setState({updatedOrigin:e.target.value})}},{key:"onKeyUp",value:function(e){if(13===e.keyCode)return this.updateOrigin(e)}},{key:"createOriginDisplay",value:function(){return this.state.edit?ue.a.createElement("div",{className:"input-append edit-domain-section"},ue.a.createElement("input",{type:"text",name:"update_origin_domain",onChange:this.onInputChange.bind(this),onKeyUp:this.onKeyUp.bind(this),value:this.state.updatedOrigin}),ue.a.createElement("button",{onClick:this.updateOrigin.bind(this),className:"btn btn-primary update-origin"}," Update ")):ue.a.createElement("div",{className:"js-url url-display"},this.props.origin)}},{key:"render",value:function(){var e=this.createOriginDisplay();return ue.a.createElement("tr",null,ue.a.createElement("td",null,e),ue.a.createElement("td",{width:"30"},ue.a.createElement("span",null,ue.a.createElement("a",{className:"fonticon-pencil",onClick:this.editOrigin.bind(this),title:"Edit domain."}))),ue.a.createElement("td",{width:"30"},ue.a.createElement("span",null,ue.a.createElement("a",{href:"#","data-bypass":"true",className:"fonticon-trash",onClick:this.deleteOrigin.bind(this),title:"Delete domain."}))))}}])&&DR(t.prototype,n),r&&DR(t,r),a}(ce.Component);function xR(e){return(xR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AR(e,t){return(AR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=MR(e);if(t){var o=MR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return LR(this,n)}}function LR(e,t){return!t||"object"!==xR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MR(e){return(MR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}kR.propTypes={origin:Ct.a.string.isRequired,updateOrigin:Ct.a.func.isRequired,deleteOrigin:Ct.a.func.isRequired};var UR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AR(e,t)}(a,e);var t,n,r,o=jR(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"createRows",value:function(){var e=this;return this.props.origins.map((function(t,n){return ue.a.createElement(kR,{updateOrigin:e.props.updateOrigin,deleteOrigin:e.props.deleteOrigin,key:n,origin:t})}))}},{key:"render",value:function(){var e=this.props,t=e.origins,n=e.isVisible;if(!t)return null;if(!n||0===t.length)return null;var r=this.createRows();return ue.a.createElement("table",{id:"origin-domain-table",className:"table table-striped"},ue.a.createElement("tbody",null,r))}}])&&IR(t.prototype,n),r&&IR(t,r),a}(ce.Component);function qR(e){return(qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BR(e){return function(e){if(Array.isArray(e))return VR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return VR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function FR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KR(e,t){return(KR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=GR(e);if(t){var o=GR(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return HR(this,n)}}function HR(e,t){return!t||"object"!==qR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GR(e){return(GR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}UR.propTypes={isVisible:Ct.a.bool.isRequired,origins:Ct.a.arrayOf(Ct.a.string),updateOrigin:Ct.a.func.isRequired,deleteOrigin:Ct.a.func.isRequired};var WR=vi.LoadLines,XR=zi.ConfirmationModal,QR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KR(e,t)}(a,e);var t,n,r,o=zR(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){this.props.fetchAndLoadCORSOptions()}},{key:"enableCorsChange",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node;(!t||_.isEmpty(n)||window.confirm(se.i18n.en_US["cors-disable-cors-prompt"]))&&this.props.saveCORS({corsEnabled:!t,origins:n,node:r})}},{key:"save",value:function(){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins,node:this.props.node})}},{key:"originChange",value:function(e){(!e||_.isEmpty(this.props.origins)||window.confirm("Are you sure? Switching to all origin domains will overwrite your specific origin domains."))&&this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:e?["*"]:[],node:this.props.node})}},{key:"addOrigin",value:function(e){this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:this.props.origins.concat(e),node:this.props.node})}},{key:"updateOrigin",value:function(e,t){var n=this.props.origins.slice(),r=_.indexOf(n,t);-1!==r&&(n[r]=e,this.props.saveCORS({corsEnabled:this.props.corsEnabled,origins:n,node:this.props.node}))}},{key:"deleteOrigin",value:function(){var e=this.props,t=e.corsEnabled,n=e.origins,r=e.node,o=e.domainToDelete,a=this.props.origins.indexOf(o);if(-1!==a){var i=[].concat(BR(n.slice(0,a)),BR(n.slice(a+1)));this.props.saveCORS({corsEnabled:t,origins:i,node:r})}}},{key:"render",value:function(){var e=[this.props.corsEnabled,!this.props.isAllOrigins].every((function(e){return!0===e})),t=ue.a.createElement("div",{id:this.props.corsEnabled?"collapsing-container":""},ue.a.createElement(mR,{corsEnabled:this.props.corsEnabled,originChange:this.originChange.bind(this),isAllOrigins:this.props.isAllOrigins}),ue.a.createElement(UR,{updateOrigin:this.updateOrigin.bind(this),deleteOrigin:this.props.showDeleteDomainConfirmation,isVisible:e,origins:this.props.origins}),ue.a.createElement(SR,{addOrigin:this.addOrigin.bind(this),isVisible:e}));this.props.isLoading&&(t=ue.a.createElement(WR,null));var n=ue.a.createElement("span",null,"Are you sure you want to delete ",ue.a.createElement("code",null,_.escape(this.props.domainToDelete)),"?");return ue.a.createElement("div",{className:"cors-page flex-body"},ue.a.createElement("header",{id:"cors-header"},ue.a.createElement("p",null,se.i18n.en_US["cors-notice"])),ue.a.createElement("form",{id:"corsForm",onSubmit:this.save.bind(this)},ue.a.createElement("div",{className:"cors-enable"},this.props.corsEnabled?"CORS is currently enabled.":"CORS is currently disabled.",ue.a.createElement("br",null),ue.a.createElement("button",{type:"button",className:"enable-disable btn btn-secondary",onClick:this.enableCorsChange.bind(this),disabled:this.props.isLoading?"disabled":null},this.props.corsEnabled?"Disable CORS":"Enable CORS")),t),ue.a.createElement(XR,{title:"Confirm Deletion",visible:this.props.deleteDomainModalVisible,text:n,buttonClass:"btn-danger",onClose:this.props.hideDeleteDomainConfirmation,onSubmit:this.deleteOrigin.bind(this),successButtonLabel:"Delete Domain"}))}}])&&FR(t.prototype,n),r&&FR(t,r),a}(ce.Component),JR="EDIT_CORS",YR="CORS_SET_IS_LOADING",$R="CORS_SHOW_DELETE_DOMAIN_MODAL",ZR="CORS_HIDE_DELETE_DOMAIN_MODAL",eC=function(e,t,n,r){if(!t)throw new Error("node not set");return S(e+"/cors/"+n,r).then((function(e){if(e.error)throw new Error(e.reason);return e}))},tC=function(){return{type:YR,isLoading:!1}},nC=function(e){return{type:JR,options:e,isLoading:!1}},rC=function(){return{type:ZR}},oC=function(e){return"Reason: "+(e&&e.message||"n/a")},aC=function(e){return _.isEmpty(e)?"":e.join(",")},iC={fetchAndLoadCORSOptions:function(e,t){return function(n){var r=E(e+"/cors").then((function(e){if(e.error)throw new Error(e.reason);return{origins:e.origins?e.origins.split(","):[],methods:e.methods,credentials:e.credentials,headers:e.headers}})),o=function(e){return E(e+"/httpd").then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e);ae.Promise.join(r,o,(function(e,r){var o=nC({origins:e.origins,corsEnabled:"true"===r.enable_cors,node:t});n(o)})).catch((function(e){ae.addNotification({msg:"Could not load CORS settings.  "+oC(e),type:"error"})}))}},showLoadingBars:function(){return{type:YR,isLoading:!0}},hideLoadingBars:tC,showDomainDeleteConfirmation:function(e){return{type:$R,domainToDelete:e}},hideDomainDeleteConfirmation:rC,loadCORSOptions:nC,sanitizeOrigins:aC,saveCors:function(e,t){return function(n){var r,o,a,i=[];return i.push(function(e,t,n){if(!t)throw new Error("node not set");return S(e+"/httpd/enable_cors",n.toString()).then((function(e){if(e.error)throw new Error(e.reason);return e}))}(e,t.node,t.corsEnabled)),t.corsEnabled&&(i.push((r=e,o=t.node,a=aC(t.origins),eC(r,o,"origins",a))),i.push(function(e,t){return eC(e,t,"credentials","true")}(e,t.node)),i.push(function(e,t){return eC(e,t,"headers","accept, authorization, content-type, origin, referer")}(e,t.node)),i.push(function(e,t){return eC(e,t,"methods","GET, PUT, POST, HEAD, DELETE")}(e,t.node))),ae.Promise.all(i).then((function(){ae.addNotification({msg:"CORS settings updated.",type:"success",clear:!0}),n(nC(t))})).catch((function(e){ae.addNotification({msg:"Error! Could not save your CORS settings. Please try again. "+oC(e),type:"error",clear:!0}),n(rC()),n(tC())}))}},overrideFetchAndLoadCORSOptions:function(e){iC.fetchAndLoadCORSOptions=e},overrideSaveCors:function(e){iC.saveCors=e}},sC=iC,cC={CORSContainer:Object(Pt.b)((function(e){var t=e.cors;return{node:t.node,corsEnabled:t.corsEnabled,isAllOrigins:t.isAllOrigins,isLoading:t.isLoading,origins:t.origins,deleteDomainModalVisible:t.deleteDomainModalVisible,domainToDelete:t.domainToDelete}}),(function(e,t){return{saveCORS:function(n){e(sC.showLoadingBars()),e(sC.saveCors(t.url,n))},fetchAndLoadCORSOptions:function(){e(sC.fetchAndLoadCORSOptions(t.url,t.node))},showDeleteDomainConfirmation:function(t){e(sC.showDomainDeleteConfirmation(t))},hideDeleteDomainConfirmation:function(){e(sC.hideDomainDeleteConfirmation())}}}))(QR),CORSScreen:QR,OriginInput:SR,Origins:mR,OriginTable:UR,OriginRow:kR},uC=function(e){var t=e.node,n=e.crumbs,r=e.docURL,o=e.endpoint;return ue.a.createElement("header",{className:"two-panel-header"},ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"breadcrumbs",className:"faux__config-breadcrumbs"},ue.a.createElement(zt,{crumbs:n})),ue.a.createElement("div",{className:"right-header-wrapper flex-layout flex-row flex-body"},ue.a.createElement("div",{id:"react-headerbar",className:"flex-body"}," "),ue.a.createElement("div",{id:"right-header",className:"flex-fill"},ue.a.createElement(rD,{node:t})),ue.a.createElement(Wt,{docURL:r,endpoint:o}),ue.a.createElement("div",{id:"notification-center-btn",className:"flex-fill"},ue.a.createElement(Vt,null)))))},lC=function(e){var t=e.showCors,n=e.docURL,r=e.node,o=e.endpoint,a=e.crumbs,i=[{title:"Main config",link:"_config/"+r},{title:"CORS",link:"_config/"+r+"/cors"}],s=t?"CORS":"Main config",c=t?ue.a.createElement(cC.CORSContainer,{node:r,url:o}):ue.a.createElement(iR,{node:r});return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(uC,{docURL:n,endpoint:o,node:r,crumbs:a}),ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(cR,{sidebarItems:i,selectedTab:s})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement("div",{id:"dashboard-upper-content"}),ue.a.createElement("div",{id:"dashboard-lower-content",className:"flex-body"},c),ue.a.createElement("div",{id:"footer"}))))},pC=ae.RouteObject.extend({selectedHeader:"Configuration",routes:{_config:"checkNodes"},crumbs:[{name:"Config disabled"}],checkNodes:function(){EE.navigateToNodeBasedOnNodeCount("/_config/")}}),fC=ae.RouteObject.extend({roles:["_admin"],selectedHeader:"Configuration",routes:{"_config/:node":"configForNode","_config/:node/cors":"configCorsForNode"},initialize:function(){},configForNode:function(e){return ue.a.createElement(lC,{node:e,docURL:ae.constants.DOC_URLS.CONFIG,endpoint:DN(e),crumbs:[{name:"Config"}],showCors:!1})},configCorsForNode:function(e){return ue.a.createElement(lC,{node:e,docURL:ae.constants.DOC_URLS.CONFIG,endpoint:DN(e),crumbs:[{name:"Config"}],showCors:!0})}}),dC=ae.addon();dC.RouteObjects=[fC,pC];var hC=dC;n(445);hC.initialize=function(){ae.addHeaderLink({title:"Configuration",href:"#/_config",icon:"fonticon-cog",className:"config"})},ae.addReducers({config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tR,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case PN:return ZD(ZD({},e),{},{sections:n.sections,loading:!1,editOptionName:null,editSectionName:null});case kN:return ZD(ZD({},e),{},{editSectionName:n.sectionName,editOptionName:n.optionName});case TN:return ZD(ZD({},e),{},{loading:!0});case xN:return ZD(ZD({},e),{},{editOptionName:null,editSectionName:null});case IN:return ZD(ZD({},e),{},{saving:!0});case AN:return ZD(ZD({},e),{},{editOptionName:null,editSectionName:null,sections:nR(e,n),saving:!1});case jN:return ZD(ZD({},e),{},{saving:!1});case BN:return ZD(ZD({},e),{},{sections:nR(e,n),saving:!1});case VN:return ZD(ZD({},e),{},{saving:!1});case MN:return ZD(ZD({},e),{},{sections:rR(e,n)});default:return e}}});var mC=hC,yC=n(78),bC=n.n(yC),gC={REPLICATION_SOURCE:{LOCAL:"REPLICATION_SOURCE_LOCAL",REMOTE:"REPLICATION_SOURCE_REMOTE"},REPLICATION_TARGET:{EXISTING_LOCAL_DATABASE:"REPLICATION_TARGET_EXISTING_LOCAL_DATABASE",EXISTING_REMOTE_DATABASE:"REPLICATION_TARGET_EXISTING_REMOTE_DATABASE",NEW_LOCAL_DATABASE:"REPLICATION_TARGET_NEW_LOCAL_DATABASE",NEW_REMOTE_DATABASE:"REPLICATION_TARGET_NEW_REMOTE_DATABASE"},REPLICATION_TYPE:{ONE_TIME:"REPLICATION_TYPE_ONE_TIME",CONTINUOUS:"REPLICATION_TYPE_CONTINUOUS"},REPLICATION_AUTH_METHOD:{NO_AUTH:"NO_AUTH",BASIC:"BASIC_AUTH"}};function _C(e){return(_C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wC(e,t){return(wC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=NC(e);if(t){var o=NC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return SC(this,n)}}function SC(e,t){return!t||"object"!==_C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NC(e){return(NC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DC=vi.StyledSelect,RC=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Database URL:"),ue.a.createElement("div",{className:""},ue.a.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}})))};RC.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var CC=function(e){var t=e.value,n=e.onChange,r=e.databases.map((function(e){return{value:e,label:e}}));return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Name:"),ue.a.createElement("div",{className:"replication__input-react-select"},ue.a.createElement(ui.a,{name:"source-name",value:t,placeholder:"Database name",options:r,clearable:!1,onChange:function(e){var t=e.value;return n(t)}})))};CC.propTypes={value:Ct.a.string.isRequired,databases:Ct.a.array.isRequired,onChange:Ct.a.func.isRequired};var PC=function(e){var t=e.replicationSource,n=e.databases,r=e.localSource,o=e.remoteSource,a=e.onChangeRemote,i=e.onChangeLocal;return t===gC.REPLICATION_SOURCE.LOCAL?ue.a.createElement(CC,{value:r,databases:n,onChange:i}):ue.a.createElement(RC,{value:o,onChange:a})};PC.propTypes={replicationSource:Ct.a.string.isRequired,databases:Ct.a.array.isRequired,localSource:Ct.a.string.isRequired,remoteSource:Ct.a.string.isRequired,onChangeRemote:Ct.a.func.isRequired,onChangeLocal:Ct.a.func.isRequired};var TC=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Type:"),ue.a.createElement("div",{className:"replication__input-select"},ue.a.createElement(DC,{selectContent:[{value:"",label:"Select source type"},{value:gC.REPLICATION_SOURCE.LOCAL,label:"Local database"},{value:gC.REPLICATION_SOURCE.REMOTE,label:"Remote database"}].map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return t(e.target.value)},selectId:"replication-source",selectValue:n})))};TC.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var kC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wC(e,t)}(a,e);var t,n,r,o=OC(a);function a(){return vC(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"getReplicationSourceRow",value:function(){var e=this.props,t=e.replicationSource,n=e.localSource,r=e.onLocalSourceChange,o=e.onRemoteSourceChange,a=e.remoteSource,i=e.databases;return t?ue.a.createElement(PC,{replicationSource:t,databases:i,localSource:n,remoteSource:a,onChangeLocal:r,onChangeRemote:o}):null}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.onSourceSelect;return ue.a.createElement("div",null,ue.a.createElement("h3",null,"Source"),ue.a.createElement(TC,{onChange:n,value:t}),this.getReplicationSourceRow())}}])&&EC(t.prototype,n),r&&EC(t,r),a}(ue.a.Component);function xC(e){return(xC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jC(e,t){return(jC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=UC(e);if(t){var o=UC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return MC(this,n)}}function MC(e,t){return!t||"object"!==xC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UC(e){return(UC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}kC.propTypes={replicationSource:Ct.a.string.isRequired,localSource:Ct.a.string.isRequired,remoteSource:Ct.a.string.isRequired,databases:Ct.a.array.isRequired,onLocalSourceChange:Ct.a.func.isRequired,onRemoteSourceChange:Ct.a.func.isRequired};var qC=vi.StyledSelect,BC=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Type:"),ue.a.createElement("div",{id:"replication-target",className:"replication__input-select"},ue.a.createElement(qC,{selectContent:[{value:"",label:"Select target type"},{value:gC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,label:"Existing local database"},{value:gC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,label:"Existing remote database"},{value:gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE,label:"New local database"},{value:gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE,label:"New remote database"}].map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};BC.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var VC=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("div",null,ue.a.createElement("input",{type:"text",className:"replication__remote-connection-url",placeholder:"https://",value:n,onChange:function(e){return t(e.target.value)}}))};VC.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var FC=function(e){var t=e.onChange,n=e.value,r=e.databases.map((function(e){return{value:e,label:e}}));return ue.a.createElement("div",{id:"replication-target-local",className:"replication__input-react-select"},ue.a.createElement(ui.a,{value:n,options:r,placeholder:"Database name",clearable:!1,onChange:function(e){var n=e.value;return t(n)}}))};FC.propTypes={value:Ct.a.string.isRequired,databases:Ct.a.array.isRequired,onChange:Ct.a.func.isRequired};var KC=function(e){var t=e.onChange,n=e.value;return ue.a.createElement("input",{type:"text",className:"replication__new-input",placeholder:"Database name",value:n,onChange:function(e){return t(e.target.value)}})};KC.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var zC=function(e){var t,n=e.replicationTarget,r=e.onLocalTargetChange,o=e.onRemoteTargetChange,a=e.localTarget,i=e.remoteTarget,s=e.databases;if(!n)return null;n===gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE?(c="New database:",t=ue.a.createElement(KC,{value:a,onChange:r})):t=n===gC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE?ue.a.createElement(FC,{onChange:r,databases:s,value:a}):ue.a.createElement(VC,{onChange:o,value:i,newRemote:gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE===n});var c="Name:";return n!==gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE&&n!==gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE||(c="New database:"),ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},c),ue.a.createElement("div",null,t))};zC.propTypes={databases:Ct.a.array.isRequired,onLocalTargetChange:Ct.a.func.isRequired,onRemoteTargetChange:Ct.a.func.isRequired,remoteTarget:Ct.a.string.isRequired,localTarget:Ct.a.string.isRequired,replicationTarget:Ct.a.string.isRequired};var HC=function(e){var t=e.replicationTarget,n=e.targetDatabasePartitioned,r=e.onTargetDatabasePartitionedChange,o=e.allowNewPartitionedLocalDbs;if(!t)return null;if(t!==gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&t!==gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE)return null;var a=t===gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!o,i=a?"Local server does not support partitioned databases":"Creates a new partitioned database",s=ue.a.createElement(rn.k,{id:"new-db-partitioned-tooltip"},i);return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"New database options:"),ue.a.createElement("div",{className:nn()("replication__input-checkbox",{"replication__input-checkbox--disabled":a})},ue.a.createElement("input",{id:"target-db-is-partitioned",type:"checkbox",value:"true",checked:n,onChange:function(){r(!n)},disabled:a}),ue.a.createElement(rn.h,{placement:"right",overlay:s},ue.a.createElement("label",{htmlFor:"target-db-is-partitioned"},"Partitioned"))))};HC.propTypes={onTargetDatabasePartitionedChange:Ct.a.func.isRequired,targetDatabasePartitioned:Ct.a.bool.isRequired,replicationTarget:Ct.a.string.isRequired,allowNewPartitionedLocalDbs:Ct.a.bool.isRequired};var GC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jC(e,t)}(a,e);var t,n,r,o=LC(a);function a(){return IC(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.replicationTarget,n=e.onLocalTargetChange,r=e.onTargetChange,o=e.databases,a=e.localTarget,i=e.onRemoteTargetChange,s=e.remoteTarget,c=e.targetDatabasePartitioned,u=e.onTargetDatabasePartitionedChange,l=e.allowNewPartitionedLocalDbs;return ue.a.createElement("div",null,ue.a.createElement("h3",null,"Target"),ue.a.createElement(BC,{value:t,onChange:r}),ue.a.createElement(zC,{remoteTarget:s,replicationTarget:t,databases:o,localTarget:a,onRemoteTargetChange:i,onLocalTargetChange:n}),ue.a.createElement(HC,{replicationTarget:t,onTargetDatabasePartitionedChange:u,targetDatabasePartitioned:c,allowNewPartitionedLocalDbs:l}))}}])&&AC(t.prototype,n),r&&AC(t,r),a}(ue.a.Component);function WC(e){return(WC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JC(e,t){return(JC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ZC(e);if(t){var o=ZC(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $C(this,n)}}function $C(e,t){return!t||"object"!==WC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZC(e){return(ZC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}GC.propTypes={databases:Ct.a.array.isRequired,onTargetChange:Ct.a.func.isRequired,onLocalTargetChange:Ct.a.func.isRequired,onRemoteTargetChange:Ct.a.func.isRequired,remoteTarget:Ct.a.string.isRequired,localTarget:Ct.a.string.isRequired,replicationTarget:Ct.a.string.isRequired};var eP=vi.StyledSelect,tP=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Replication type:"),ue.a.createElement("div",{className:"replication__input-select"},ue.a.createElement(eP,{selectContent:[{value:gC.REPLICATION_TYPE.ONE_TIME,label:"One time"},{value:gC.REPLICATION_TYPE.CONTINUOUS,label:"Continuous"}].map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)})),selectChange:function(e){return n(e.target.value)},selectId:"replication-target",selectValue:t})))};tP.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var nP=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Replication document:"),ue.a.createElement("div",{className:"replication__doc-name"},ue.a.createElement("span",{className:"fonticon fonticon-cancel replication__doc-name-icon",title:"Clear field",onClick:function(){return n("")}}),ue.a.createElement("input",{type:"text",className:"replication__doc-name-input",placeholder:"Custom ID (optional)",value:t,onChange:function(e){return n(e.target.value)}})))};nP.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var rP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JC(e,t)}(a,e);var t,n,r,o=YC(a);function a(){return XC(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.replicationType,n=e.replicationDocName,r=e.onDocChange,o=e.onTypeChange;return ue.a.createElement("div",null,ue.a.createElement("h3",null,"Options"),ue.a.createElement(tP,{onChange:o,value:t}),ue.a.createElement(nP,{onChange:r,value:n}))}}])&&QC(t.prototype,n),r&&QC(t,r),a}(ue.a.Component);rP.propTypes={replicationDocName:Ct.a.string.isRequired,replicationType:Ct.a.string.isRequired,onDocChange:Ct.a.func.isRequired,onTypeChange:Ct.a.func.isRequired};var oP=vi.ConfirmButton,aP=function(e){var t=e.onClear,n=e.disabled,r=e.onClick;return ue.a.createElement("div",{className:"replication__button-row"},ue.a.createElement(oP,{customIcon:"fonticon-replicate",id:"replicate",text:"Start Replication",onClick:r,disabled:n}),ue.a.createElement("a",{className:"replication__clear-link",href:"#","data-bypass":"true",onClick:function(e){e.preventDefault(),t()}},"Clear"))};function iP(e){return(iP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uP(e,t,n){return t&&cP(e.prototype,t),n&&cP(e,n),e}function lP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pP(e,t)}function pP(e,t){return(pP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mP(e);if(t){var o=mP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dP(this,n)}}function dP(e,t){return!t||"object"!==iP(t)&&"function"!=typeof t?hP(e):t}function hP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mP(e){return(mP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}aP.propTypes={disabled:Ct.a.bool.isRequired,onClick:Ct.a.func.isRequired,onClear:Ct.a.func.isRequired};var yP=vi.StyledSelect,bP=function(e){lP(n,e);var t=fP(n);function n(e){var r;return sP(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(hP(r=t.call(this,e)),"getAuthOptions",(function(){var e=se.i18n.en_US["replication-user-password-auth-label"],t=[{value:gC.REPLICATION_AUTH_METHOD.NO_AUTH,label:"None"},{value:gC.REPLICATION_AUTH_METHOD.BASIC,label:e}];return r.customAuths.map((function(e){t.push({value:e.typeValue,label:e.typeLabel})})),t.map((function(e){return ue.a.createElement("option",{value:e.value,key:e.value},e.label)}))})),r.onChangeType=r.onChangeType.bind(hP(r)),r.onChangeValue=r.onChangeValue.bind(hP(r)),r.customAuths=ae.getExtensions("Replication:Auth"),r.customAuths||(r.customAuths=[]),r.customAuthTypes=r.customAuths.map((function(e){return e.typeValue})),r.customAuthHelp=ae.getExtensions("Replication:Auth-help"),r.customAuthHelp||(r.customAuthHelp=[]),r}return uP(n,[{key:"onChangeType",value:function(e){this.props.onChangeAuthType(e)}},{key:"onChangeValue",value:function(e){this.props.onChangeAuth(e)}},{key:"getAuthInputFields",value:function(e,t){var n=this.props.authId;if(t==gC.REPLICATION_AUTH_METHOD.BASIC)return ue.a.createElement(gP,{onChange:this.onChangeValue,auth:e,authId:n});var r=this.customAuths.filter((function(e){return e.typeValue===t}));if(r&&r.length>0){var o=r[0].inputComponent;return ue.a.createElement(o,{onChange:this.onChangeValue,auth:e})}return null}},{key:"getHelpText",value:function(e){var t=this.customAuthHelp.filter((function(t){return e===t.authType})).map((function(e){return e.helpText}));return 0==t.length?null:ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"}),ue.a.createElement("div",{className:"replication__help-tile"},t[0]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.credentials,r=t.authType,o=t.authId;return ue.a.createElement(ue.a.Fragment,null,ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"},"Authentication:"),ue.a.createElement("div",{className:"replication__input-select"},ue.a.createElement(yP,{selectContent:this.getAuthOptions(),selectChange:function(t){return e.onChangeType(t.target.value)},selectId:"select-"+o,selectValue:r}))),this.getAuthInputFields(n,r),this.getHelpText(r))}}]),n}(ue.a.Component);bP.propTypes={authId:Ct.a.string.isRequired,authType:Ct.a.string.isRequired,credentials:Ct.a.object,onChangeAuth:Ct.a.func.isRequired,onChangeAuthType:Ct.a.func.isRequired},bP.defaultProps={authType:gC.REPLICATION_AUTH_METHOD.NO_AUTH,onChangeAuthType:function(){},onChangeAuth:function(){}};var gP=function(e){lP(n,e);var t=fP(n);function n(e){var r;return sP(this,n),(r=t.call(this,e)).updatePassword=r.updatePassword.bind(hP(r)),r.updateUsername=r.updateUsername.bind(hP(r)),r.state={username:e.auth&&e.auth.username?e.auth.username:"",password:e.auth&&e.auth.password?e.auth.password:""},r}return uP(n,[{key:"updatePassword",value:function(e){this.setState({password:e}),this.props.onChange({username:this.state.username,password:e})}},{key:"updateUsername",value:function(e){this.setState({username:e}),this.props.onChange({username:e,password:this.state.password})}},{key:"render",value:function(){var e=this,t=se.i18n.en_US["replication-username-input-placeholder"],n=se.i18n.en_US["replication-password-input-placeholder"],r=this.props.authId;return ue.a.createElement(ue.a.Fragment,null,ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"}),ue.a.createElement("div",null,ue.a.createElement("input",{id:r+"-username",type:"text",placeholder:t,value:this.state.username,onChange:function(t){return e.updateUsername(t.target.value)},readOnly:this.props.usernameReadOnly}))),ue.a.createElement("div",{className:"replication__section"},ue.a.createElement("div",{className:"replication__input-label"}),ue.a.createElement("div",null,ue.a.createElement("input",{id:r+"-password",type:"password",placeholder:n,value:this.state.password,onChange:function(t){return e.updatePassword(t.target.value)}}))))}}]),n}(ue.a.Component);gP.propTypes={auth:Ct.a.object.isRequired,onChange:Ct.a.func.isRequired};var _P=vi.ConfirmButton,vP=function(e){var t=e.visible,n=e.onClose,r=e.onClick,o=e.multipleDocs,a=e.isReplicationDB;if(!t)return null;var i="",s="Delete ".concat(a?"Document":"Replication Job"),c="Deleting a replication ".concat(a?"document":"job"," stops continuous replication\n          and incomplete one-time replication, but does not affect replicated documents.");return o>1&&(i="You are deleting <strong>".concat(o,"</strong> replication ").concat(a?"documents":"jobs","."),s="Delete ".concat(a?"Documents":"Replication Jobs")),ue.a.createElement(rn.f,{dialogClassName:"replication_delete-doc-modal",show:t,onHide:function(){return n()}},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,"Verify Deletion")),ue.a.createElement(rn.f.Body,null,ue.a.createElement("p",{dangerouslySetInnerHTML:{__html:i}}),ue.a.createElement("p",null,c)),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("a",{className:"cancel-link",onClick:n},"Cancel"),ue.a.createElement(_P,{customIcon:"icon-trash",text:s,onClick:r})))};vP.propTypes={visible:Ct.a.bool.isRequired,isReplicationDB:Ct.a.bool.isRequired,onClick:Ct.a.func.isRequired,onClose:Ct.a.func.isRequired,multipleDocs:Ct.a.number.isRequired},vP.defaultProps={isReplicationDB:!0};var EP=function(e){var t=e.visible,n=e.onClose,r=e.errorMsg,o=e.status;if(!t)return null;var a="Replication Error",i=ue.a.createElement("p",null,"The replication job will be tried at increasing intervals");return"failed"===o.toLowerCase()&&(a="Replication Error - Failed",i=null),ue.a.createElement(rn.f,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return n()}},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,a)),ue.a.createElement(rn.f.Body,null,ue.a.createElement("p",null,r),i),ue.a.createElement(rn.f.Footer,null))};EP.propTypes={visible:Ct.a.bool.isRequired,onClick:Ct.a.func.isRequired,onClose:Ct.a.func.isRequired,errorMsg:Ct.a.string.isRequired};var wP=function(e){var t=e.visible,n=e.docId,r=e.onClose,o=e.onClick;return t?ue.a.createElement(rn.f,{dialogClassName:"replication__error-doc-modal",show:t,onHide:function(){return r()}},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,"Custom ID Conflict")),ue.a.createElement(rn.f.Body,null,ue.a.createElement("p",null,"A replication document with ID ",ue.a.createElement("code",null,n)," already exists."),ue.a.createElement("p",null,"You can overwrite the existing document, or change the new replication jobs document ID."),ue.a.createElement("p",null,"If you overwrite the existing document, any replication job currently using the replication document will stop, and that job will not appear in Replicator DB Activity. Replicated documents will not be affected.")),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("button",{onClick:r,className:"btn replication__error-cancel"},"Change Document ID"),ue.a.createElement("button",{onClick:o,className:"btn replication__error-continue"},ue.a.createElement("i",{className:"icon icon-eraser"})," Overwrite Existing Document"))):null};function OP(e){return(OP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NP(e,t){return(NP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=PP(e);if(t){var o=PP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return RP(this,n)}}function RP(e,t){return!t||"object"!==OP(t)&&"function"!=typeof t?CP(e):t}function CP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PP(e){return(PP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}wP.propTypes={visible:Ct.a.bool.isRequired,onClick:Ct.a.func.isRequired,onClose:Ct.a.func.isRequired,docId:Ct.a.string.isRequired};var TP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NP(e,t)}(a,e);var t,n,r,o=DP(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).submit=t.submit.bind(CP(t)),t.checkAuth=t.checkAuth.bind(CP(t)),t.runReplicationChecks=t.runReplicationChecks.bind(CP(t)),t}return t=a,(n=[{key:"checkAuth",value:function(){var e=this;this.props.hideConflictModal();var t=this.props,n=t.replicationSource,r=t.replicationTarget,o=t.sourceAuthType,a=t.targetAuthType,i=t.sourceAuth,s=t.targetAuth,c=n===gC.REPLICATION_SOURCE.LOCAL,u=r===gC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r===gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE;if(!ae.session.isAdminParty()){if(c&&o===gC.REPLICATION_AUTH_METHOD.NO_AUTH)return void ae.addNotification({msg:"Missing credentials for local source database.",type:"error",clear:!0});if(u&&a===gC.REPLICATION_AUTH_METHOD.NO_AUTH)return void ae.addNotification({msg:"Missing credentials for local target database.",type:"error",clear:!0})}this.checkLocalAccountCredentials(o,i,"source",c).then((function(){e.checkLocalAccountCredentials(a,s,"target",u).then((function(){e.submit()}),(function(){}))}),(function(){}))}},{key:"checkLocalAccountCredentials",value:function(e,t,n,r){if(e!==gC.REPLICATION_AUTH_METHOD.BASIC||!r)return ae.Promise.resolve(!0);if(!t.username||!t.password){var o="Missing ".concat(n," credentials.");return ae.addNotification({msg:o,type:"error",clear:!0}),ae.Promise.reject(new Error(o))}return this.checkCredentials(t.username,t.password).then((function(e){if(e.error)throw e;return!0})).catch((function(e){throw ae.addNotification({msg:"Your username or password for ".concat(n," database is incorrect."),type:"error",clear:!0}),e}))}},{key:"checkCredentials",value:function(e,t){return v(R.getServerUrl("/"),"GET",{credentials:"omit",headers:{Authorization:"Basic "+bC.a.encode(e+":"+t)}})}},{key:"checkReplicationDocID",value:function(){var e=this,t=this.props,n=t.showConflictModal,r=t.replicationDocName,o=t.checkReplicationDocID;o(r).then((function(t){t?n():e.checkAuth()}))}},{key:"runReplicationChecks",value:function(){var e=this.props.replicationDocName;this.checkSourceTargetDatabases()&&(e?this.checkReplicationDocID():this.checkAuth())}},{key:"checkSourceTargetDatabases",value:function(){var e=this.props,t=e.remoteTarget,n=e.remoteSource,r=e.replicationSource,o=e.replicationTarget,a=e.localTarget,s=e.localSource,c=e.databases;if(o===gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&-1!==_.indexOf(c,a))return ae.addNotification({msg:"The <code>"+a+"</code> database already exists locally. Please enter another database name.",type:"error",escape:!1,clear:!0}),!1;if(o===gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE||o===gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE){var u="";if(/\s/.test(a)?u="The target database may not contain any spaces.":/^_/.test(a)&&(u="The target database may not start with an underscore."),u)return ae.addNotification({msg:u,type:"error",escape:!1,clear:!0}),!1}if(r===gC.REPLICATION_SOURCE.REMOTE&&!Object(i.isEmpty)(n)){var l="";try{""===new URL(n).pathname.slice(1)&&(l="Invalid source database URL. Database name is missing.")}catch(e){l="Invalid source database URL."}if(l)return ae.addNotification({msg:l,type:"error",escape:!1,clear:!0}),!1}if((o===gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE||o===gC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)&&!Object(i.isEmpty)(t)){var p="";try{""===new URL(t).pathname.slice(1)&&(p="Invalid target database URL. Database name is missing.")}catch(e){p="Invalid target database URL."}if(p)return ae.addNotification({msg:p,type:"error",escape:!1,clear:!0}),!1}return!(t===n&&!Object(i.isEmpty)(t)||s===a&&!Object(i.isEmpty)(s))||(ae.addNotification({msg:"Cannot replicate a database to itself",type:"error",escape:!1,clear:!0}),!1)}},{key:"submit",value:function(){var e,t=this.props,n=t.replicationTarget,r=t.replicationSource,o=t.replicationType,a=t.replicationDocName,i=t.remoteTarget,s=t.remoteSource,c=t.localTarget,u=t.localSource,l=t.sourceAuthType,p=t.sourceAuth,f=t.targetAuthType,d=t.targetAuth,h=t.targetDatabasePartitioned;if(a){var m=this.props.docs.find((function(e){return e._id===a}));m&&(e=m._rev)}this.props.replicate({replicationTarget:n,replicationSource:r,replicationType:o,replicationDocName:a,localTarget:c,localSource:u,remoteTarget:i,remoteSource:s,_rev:e,sourceAuthType:l,sourceAuth:p,targetAuthType:f,targetAuth:d,targetDatabasePartitioned:h})}},{key:"confirmButtonEnabled",value:function(){var e=this.props,t=e.remoteSource,n=e.localSourceKnown,r=e.replicationSource,o=e.replicationTarget,a=e.localTargetKnown,i=e.localTarget;return!(e.submittedNoChange||!r||!o||r===gC.REPLICATION_SOURCE.LOCAL&&!n||o===gC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE&&!a||o===gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE&&!i||r===gC.REPLICATION_SOURCE.REMOTE&&""===t)}},{key:"render",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,a=e.conflictModalVisible,i=e.databases,s=e.localSource,c=e.remoteSource,u=e.remoteTarget,l=e.localTarget,p=e.targetDatabasePartitioned,f=e.allowNewPartitionedLocalDbs,d=e.updateFormField,h=e.clearReplicationForm,m=e.sourceAuthType,y=e.sourceAuth,b=e.targetAuthType,g=e.targetAuth;return ue.a.createElement("div",{style:{paddingBottom:20}},ue.a.createElement(kC,{replicationSource:t,localSource:s,databases:i,remoteSource:c,onSourceSelect:d("replicationSource"),onRemoteSourceChange:d("remoteSource"),onLocalSourceChange:d("localSource")}),ue.a.createElement(bP,{credentials:y,authType:m,onChangeAuthType:d("sourceAuthType"),onChangeAuth:d("sourceAuth"),authId:"replication-source-auth"}),ue.a.createElement("hr",{className:"replication__seperator",size:"1"}),ue.a.createElement(GC,{replicationTarget:n,onTargetChange:d("replicationTarget"),databases:i,localTarget:l,remoteTarget:u,allowNewPartitionedLocalDbs:f,targetDatabasePartitioned:p,onRemoteTargetChange:d("remoteTarget"),onLocalTargetChange:d("localTarget"),onTargetDatabasePartitionedChange:d("targetDatabasePartitioned")}),ue.a.createElement(bP,{credentials:g,authType:b,onChangeAuthType:d("targetAuthType"),onChangeAuth:d("targetAuth"),authId:"replication-target-auth"}),ue.a.createElement("hr",{className:"replication__seperator",size:"1"}),ue.a.createElement(rP,{replicationType:r,replicationDocName:o,onDocChange:d("replicationDocName"),onTypeChange:d("replicationType")}),ue.a.createElement(aP,{disabled:!this.confirmButtonEnabled(),onClick:this.runReplicationChecks,onClear:h}),ue.a.createElement(wP,{visible:a,onClick:this.checkAuth,onClose:this.props.hideConflictModal,docId:o}))}}])&&SP(t.prototype,n),r&&SP(t,r),a}(ue.a.Component);function kP(e){return(kP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xP=null,IP=function(e){return xP&&!e||(xP=new ae.Promise((function(e){var t=R.getServerUrl("/_scheduler/jobs");E(t,{raw:!0}).then((function(t){if(t.status>202)return e(!1);e(!0)}))}))),xP},AP=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(encodeURIComponent(t.pathname.slice(1)))},jP=function(e){if(!e)return"";var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))},LP=function(e){var t=e.lastIndexOf("@");return-1===t?e:(e.startsWith("https")?"https://":"http://")+e.slice(t+1)},MP=function(e){var t=e.replicationSource,n=e.localSource,r=e.remoteSource,o=e.sourceAuthType,a=e.sourceAuth,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=i.origin,c=i.pathname,u={};if(t===gC.REPLICATION_SOURCE.LOCAL){var l=encodeURIComponent(n),p=R.getRootUrl({origin:s,pathname:c});u.url="".concat(p).concat(l)}else u.url=AP(LP(r));return qP(u,o,a),u},UP=function(e){var t=e.replicationTarget,n=e.localTarget,r=e.remoteTarget,o=e.targetAuthType,a=e.targetAuth,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,s=i.origin,c=i.pathname,u={};if(t===gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE||t===gC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE)u.url=AP(LP(r));else{var l=encodeURIComponent(n),p=R.getRootUrl({origin:s,pathname:c});u.url="".concat(p).concat(l)}return qP(u,o,a),u},qP=function(e,t,n){if(t&&t!==gC.REPLICATION_AUTH_METHOD.NO_AUTH)if(t===gC.REPLICATION_AUTH_METHOD.BASIC)e.headers=(o=n.username,a=n.password,o&&a?{Authorization:"Basic "+bC.a.encode(o+":"+a)}:{});else{var r=ae.getExtensions("Replication:Auth");r&&r.filter((function(e){return e.typeValue===t})).map((function(t){t.setCredentials&&t.setCredentials(e,n)}))}else e.headers={};var o,a},BP=function(e){return-1!==s.a.indexOf([gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE,gC.REPLICATION_TARGET.NEW_REMOTE_DATABASE],e)},VP=function(e){return e===gC.REPLICATION_TYPE.CONTINUOUS},FP=function(e){var t=e.replicationTarget,n=e.replicationSource,r=e.replicationType,o=e.replicationDocName,a=e.localTarget,i=e.localSource,s=e.remoteTarget,c=e.remoteSource,u=e._rev,l=e.sourceAuthType,p=e.sourceAuth,f=e.targetAuthType,d=e.targetAuth,h=e.targetDatabasePartitioned,m={user_ctx:{name:ae.session.user().name,roles:["_admin","_reader","_writer"]},source:MP({replicationSource:n,localSource:i,remoteSource:c,sourceAuthType:l,sourceAuth:p}),target:UP({replicationTarget:t,replicationSource:n,remoteTarget:s,localTarget:a,targetAuthType:f,targetAuth:d}),create_target:BP(t),continuous:VP(r)};return h&&(m.create_target_params={partitioned:!0}),function(e,t,n){return e&&(n._id=e),t&&(n._rev=t),n}(o,u,m)},KP=function(e){var t=e;return e?("object"===kP(e)&&(t=e.url),function(e){try{var t=new URL(e);return"".concat(t.origin,"/").concat(decodeURIComponent(t.pathname.slice(1)))}catch(t){return e}}(t)):""},zP=function(e){return"error"===e.toLowerCase()||"crashing"===e.toLowerCase()?"retrying":e},HP=function(){return IP().then((function(e){var t=R.getServerUrl("/_replicator/_all_docs?include_docs=true&limit=100"),n=E(t).then((function(e){return e.error?[]:e.rows.filter((function(e){return-1===e.id.indexOf("_design/")})).map((function(e){return e.doc})).map((function(e){return{_id:e._id,_rev:e._rev,selected:!1,source:KP(e.source),target:KP(e.target),createTarget:e.create_target,continuous:!0===e.continuous,status:e._replication_state,errorMsg:e._replication_state_reason?e._replication_state_reason:"",statusTime:new Date(e._replication_state_time),startTime:new Date(e._replication_start_time),url:"#/database/_replicator/".concat(encodeURIComponent(e._id)),raw:e}}))}));if(!e)return n;var r=GP();return ae.Promise.join(n,r,(function(e,t){return function(e,t){return e.map((function(e){var n=t.find((function(t){return t.doc_id===e._id}));return n?(e.status=zP(n.state),n.start_time&&(e.startTime=new Date(n.start_time)),n.last_updated&&(e.stateTime=new Date(n.last_updated)),e):e}))}(e,t)})).catch((function(){return[]}))}))},GP=function(){var e=R.getServerUrl("/_scheduler/docs?include_docs=true");return E(e).then((function(e){return e.error?[]:e.docs}))},WP=function(e){return new Promise((function(t){var n=R.getServerUrl("/_replicator/".concat(e));E(n).then((function(e){"not_found"!==e.error?t(!0):t(!1)}))}))},XP=function(){return IP().then((function(e){if(!e)return[];var t=R.getServerUrl("/_scheduler/jobs");return E(t).then((function(e){return function(e){return e.jobs.filter((function(e){return null===e.database})).map((function(e){return{_id:e.id,source:KP(e.source.slice(0,e.source.length-1)),target:KP(e.target.slice(0,e.target.length-1)),startTime:new Date(e.start_time),statusTime:new Date(e.last_updated),status:zP(e.history[0].type),errorMsg:"",selected:!1,continuous:/continuous/.test(e.id),raw:e}}))}(e)}))}))};function QP(e){return(QP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $P(e,t,n){return t&&YP(e.prototype,t),n&&YP(e,n),e}function ZP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eT(e,t)}function eT(e,t){return(eT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rT(e);if(t){var o=rT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nT(this,n)}}function nT(e,t){return!t||"object"!==QP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rT(e){return(rT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oT=function(e){var t,n;try{t=new URL(LP(e))}catch(e){return""}var r=R.getRootUrl();return n=function(e,t){try{var n=new URL(t),r=e.pathname.substring(n.pathname.length);return encodeURIComponent(r)}catch(e){return""}}(t,r),e.indexOf(window.location.hostname)>-1?ue.a.createElement("span",null,r,ue.a.createElement("a",{href:"#/database/".concat(n,"/_all_docs")},decodeURIComponent(n))):"".concat(t.origin).concat(t.pathname)},aT=function(e){ZP(n,e);var t=tT(n);function n(e){var r;return JP(this,n),(r=t.call(this,e)).state={modalVisible:!1},r}return $P(n,[{key:"showModal",value:function(){this.setState({modalVisible:!0})}},{key:"closeModal",value:function(){this.setState({modalVisible:!1})}},{key:"getErrorIcon",value:function(){var e=this.props.status;return"error"!==e&&"retrying"!==e?null:ue.a.createElement("span",null,ue.a.createElement("a",{"data-bypass":"true",className:"replication__row-btn replication__row-btn--warning icon-exclamation-sign",onClick:this.showModal.bind(this),title:"View error message"}),ue.a.createElement(EP,{onClick:this.closeModal.bind(this),onClose:this.closeModal.bind(this),errorMsg:this.props.errorMsg,visible:this.state.modalVisible,status:e}))}},{key:"render",value:function(){var e=this.props,t=e.statusTime,n=e.status,r=h()(t),o=ue.a.createElement("span",null,n);if(r.isValid()){var a=r.format("MMM Do, h:mm a"),i=ue.a.createElement(rn.k,{id:""},"Last updated: ",a);o=ue.a.createElement(rn.h,{placement:"top",overlay:i},ue.a.createElement("span",null,n))}return ue.a.createElement("td",{className:"replication__row-status replication__row-status--".concat(n)},o,this.getErrorIcon())}}]),n}(ue.a.Component);aT.propTypes={statusTime:Ct.a.any,status:Ct.a.string,errorMsg:Ct.a.string.isRequired},aT.defaultProps={status:""};var iT=function(e){var t=e.onlyDeleteAction,n=e._id,r=e.url,o=e.deleteDocs,a=[];return t||(a.push(ue.a.createElement("li",{className:"replication__row-list",key:1},ue.a.createElement("a",{href:"#replication/id/".concat(encodeURIComponent(n)),className:"replication__row-btn icon-wrench replication__row-btn--no-left-pad",title:"Edit replication","data-bypass":"true"}))),a.push(ue.a.createElement("li",{className:"replication__row-list",key:2},ue.a.createElement("a",{className:"replication__row-btn fonticon-document",title:"Edit replication document",href:r,"data-bypass":"true"})))),a.push(ue.a.createElement("li",{className:"replication__row-list",key:3},ue.a.createElement("a",{className:"replication__row-btn icon-trash ".concat(t?"replication__row-btn--no-left-pad":""," "),title:"Delete ".concat(t?"job":"document"," ").concat(n),onClick:function(){return o(n)}}))),ue.a.createElement("ul",{className:"replication__row-actions-list"},a)};iT.propTypes={_id:Ct.a.string.isRequired,url:Ct.a.string,error:Ct.a.bool.isRequired,errorMsg:Ct.a.string.isRequired,deleteDocs:Ct.a.func.isRequired};var sT=function(e){var t=e._id,n=e.source,r=e.target,o=e.type,a=e.startTime,i=e.status,s=e.statusTime,c=e.url,u=e.selected,l=e.selectDoc,p=e.errorMsg,f=e.deleteDocs,d=e.onlyDeleteAction,m=e.showStateRow,y=h()(a),b=y.isValid()?y.format("MMM Do, h:mm a"):"",g=null;return m&&(g=ue.a.createElement(aT,{statusTime:s,status:i,errorMsg:p})),ue.a.createElement("tr",{className:"replication__table-row"},ue.a.createElement("td",{className:"replication__table-col"},ue.a.createElement("input",{checked:u,type:"checkbox",onChange:function(){return l(t)}})," "),ue.a.createElement("td",{className:"replication__table-col"},oT(n)),ue.a.createElement("td",{className:"replication__table-col"},oT(r)),ue.a.createElement("td",{className:"replication__table-col"},b),ue.a.createElement("td",{className:"replication__table-col"},o),g,ue.a.createElement("td",{className:"replication__table-col"},ue.a.createElement(iT,{onlyDeleteAction:d,deleteDocs:f,_id:t,url:c,error:"error"===i||"retrying"===i,errorMsg:p})))};sT.propTypes={_id:Ct.a.string.isRequired,source:Ct.a.string.isRequired,target:Ct.a.string.isRequired,type:Ct.a.string.isRequired,status:Ct.a.string,url:Ct.a.string,statusTime:Ct.a.object.isRequired,startTime:Ct.a.object,selected:Ct.a.bool.isRequired,selectDoc:Ct.a.func.isRequired,errorMsg:Ct.a.string.isRequired,deleteDocs:Ct.a.func.isRequired,onlyDeleteAction:Ct.a.bool.isRequired,showStateRow:Ct.a.bool.isRequired};var cT=function(e){var t=e.isSelected,n=e.deleteDocs,r=e.someDocsSelected,o=e.onCheck,a=r?ue.a.createElement("button",{onClick:function(){return n()},className:"bulk-select-trash fonticon fonticon-trash",title:"Delete all selected"}):null;return ue.a.createElement("div",{className:"replication__bulk-select-wrapper"},ue.a.createElement("div",{className:"replication__bulk-select-header"},ue.a.createElement("input",{className:"replication__bulk-select-input",checked:t,type:"checkbox",onChange:o})),a)};cT.propTypes={isSelected:Ct.a.bool.isRequired,someDocsSelected:Ct.a.bool.isRequired,onCheck:Ct.a.func.isRequired,deleteDocs:Ct.a.func.isRequired};var uT=function(e){var t=e.msg;return ue.a.createElement("tr",null,ue.a.createElement("td",{colSpan:"7",className:"replication__empty-row"},t))};uT.defaultProps={msg:"There is no replicator-db activity or history to display."};var lT=function(e){ZP(n,e);var t=tT(n);function n(e){return JP(this,n),t.call(this,e)}return $P(n,[{key:"sort",value:function(e,t,n){var r=!1,o=n.sort((function(t,n){return t[e]<n[e]?(r=!0,-1):t[e]>n[e]?(r=!0,1):0}));return!t&&r&&o.reverse(),o}},{key:"renderRows",value:function(){var e=this;return 0===this.props.docs.length?ue.a.createElement(uT,null):this.sort(this.props.column,this.props.descending,this.props.docs).map((function(t,n){return ue.a.createElement(sT,{key:n,_id:t._id,selected:t.selected,selectDoc:e.props.selectDoc,source:t.source,target:t.target,type:!0===t.continuous?"Continuous":"One time",status:t.status,statusTime:t.statusTime,startTime:t.startTime,url:t.url,deleteDocs:e.props.deleteDocs,errorMsg:t.errorMsg,doc:t,onlyDeleteAction:e.props.onlyDeleteAction,showStateRow:e.props.showStateRow})}))}},{key:"iconDirection",value:function(e){return e!==this.props.column||this.props.descending?"fonticon-down-dir":"fonticon-up-dir"}},{key:"onSort",value:function(e){var t=this;return function(){t.props.changeSort({descending:e!==t.props.column||!t.props.descending,column:e})}}},{key:"isSelected",value:function(e){return e===this.props.column?"replication__table--selected":""}},{key:"stateCol",value:function(){return this.props.showStateRow?ue.a.createElement("th",{className:"replication__table-header-status",onClick:this.onSort("status")},"State",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("status")," ").concat(this.isSelected("status"))})):null}},{key:"render",value:function(){return ue.a.createElement(rn.j,{striped:!0},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",{className:"replication__table-bulk-select"},ue.a.createElement(cT,{isSelected:this.props.allDocsSelected,onCheck:this.props.selectAllDocs,someDocsSelected:this.props.someDocsSelected,deleteDocs:this.props.deleteDocs})),ue.a.createElement("th",{className:"replication__table-header-source",onClick:this.onSort("source")},"Source",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("source")," ").concat(this.isSelected("source"))})),ue.a.createElement("th",{className:"replication__table-header-target",onClick:this.onSort("target")},"Target",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("target")," ").concat(this.isSelected("target"))})),ue.a.createElement("th",{className:"replication__table-header-time",onClick:this.onSort("statusTime")},"Start Time",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("statusTime")," ").concat(this.isSelected("statusTime"))})),ue.a.createElement("th",{className:"replication__table-header-type",onClick:this.onSort("continuous")},"Type",ue.a.createElement("span",{className:"replication__table-header-icon ".concat(this.iconDirection("continuous")," ").concat(this.isSelected("continuous"))})),this.stateCol(),ue.a.createElement("th",{className:"replication__table-header-actions"},"Actions"))),ue.a.createElement("tbody",null,this.renderRows()))}}]),n}(ue.a.Component);lT.defaultProps={onlyDeleteAction:!1,showStateRow:!0};var pT=function(e){var t=e.value,n=e.onChange;return ue.a.createElement("div",{className:"replication__filter"},ue.a.createElement("i",{className:"replication__filter-icon fonticon-filter"}),ue.a.createElement("input",{type:"text",placeholder:"Filter replications",className:"replication__filter-input",value:t,onChange:function(e){n(e.target.value)}}))};pT.propTypes={value:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired};var fT=function(e){var t=e.filter,n=e.onFilterChange;return ue.a.createElement("div",{className:"replication__activity_header"},ue.a.createElement("div",null),ue.a.createElement(pT,{value:t,onChange:n}),ue.a.createElement("a",{href:"#/replication/_create",className:"btn save replication__activity_header-btn btn-primary"},ue.a.createElement("i",{className:"icon fonticon-plus-circled"}),"New Replication"))};function dT(e){return(dT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mT(e,t){return(mT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gT(e);if(t){var o=gT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bT(this,n)}}function bT(e,t){return!t||"object"!==dT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gT(e){return(gT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}fT.propTypes={filter:Ct.a.string.isRequired,onFilterChange:Ct.a.func.isRequired};var _T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mT(e,t)}(a,e);var t,n,r,o=yT(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return t=a,(n=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,a=e.filter,i=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,u=e.selectDoc,l=this.state.modalVisible;return ue.a.createElement("div",{className:"replication__activity"},ue.a.createElement("p",{className:"replication__activity-caveat"},"Replications must have a replication document to display in the following table."),ue.a.createElement(fT,{filter:a,onFilterChange:t}),ue.a.createElement(lT,{someDocsSelected:s,allDocsSelected:c,selectAllDocs:i,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ue.a.createElement(vP,{isReplicationDB:!0,multipleDocs:this.numDocsSelected(),visible:l,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}])&&hT(t.prototype,n),r&&hT(t,r),a}(ue.a.Component);function vT(e){return(vT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ET(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wT(e,t){return(wT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=NT(e);if(t){var o=NT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ST(this,n)}}function ST(e,t){return!t||"object"!==vT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NT(e){return(NT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}_T.propTypes={docs:Ct.a.array.isRequired,filter:Ct.a.string.isRequired,selectAllDocs:Ct.a.func.isRequired,allDocsSelected:Ct.a.bool.isRequired,someDocsSelected:Ct.a.bool.isRequired,selectDoc:Ct.a.func.isRequired,onFilterChange:Ct.a.func.isRequired,deleteDocs:Ct.a.func.isRequired,activitySort:Ct.a.object.isRequired,changeActivitySort:Ct.a.func.isRequired};var DT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wT(e,t)}(a,e);var t,n,r,o=OT(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={modalVisible:!1,unconfirmedDeleteDocId:null},t}return t=a,(n=[{key:"closeModal",value:function(){this.setState({modalVisible:!1,unconfirmedDeleteDocId:null})}},{key:"showModal",value:function(e){this.setState({modalVisible:!0,unconfirmedDeleteDocId:e})}},{key:"confirmDeleteDocs",value:function(){var e=this,t=[];if(this.state.unconfirmedDeleteDocId){var n=this.props.docs.find((function(t){return t._id===e.state.unconfirmedDeleteDocId}));t.push(n)}else t=this.props.docs.filter((function(e){return e.selected}));this.props.deleteDocs(t),this.closeModal()}},{key:"numDocsSelected",value:function(){return this.props.docs.filter((function(e){return e.selected})).length}},{key:"render",value:function(){var e=this.props,t=e.onFilterChange,n=e.activitySort,r=e.changeActivitySort,o=e.docs,a=e.filter,i=e.selectAllDocs,s=e.someDocsSelected,c=e.allDocsSelected,u=e.selectDoc,l=this.state.modalVisible;return ue.a.createElement("div",{className:"replication__activity"},ue.a.createElement("p",{className:"replication__activity-caveat"},"Active _replicate jobs are displayed. Completed and failed jobs are not."),ue.a.createElement(fT,{filter:a,onFilterChange:t}),ue.a.createElement(lT,{onlyDeleteAction:!0,showStateRow:!1,someDocsSelected:s,allDocsSelected:c,selectAllDocs:i,docs:o,selectDoc:u,deleteDocs:this.showModal.bind(this),descending:n.descending,column:n.column,changeSort:r}),ue.a.createElement(vP,{isReplicationDB:!1,multipleDocs:this.numDocsSelected(),visible:l,onClose:this.closeModal.bind(this),onClick:this.confirmDeleteDocs.bind(this)}))}}])&&ET(t.prototype,n),r&&ET(t,r),a}(ue.a.Component);function RT(e){return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TT(e,t){return(TT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=IT(e);if(t){var o=IT(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xT(this,n)}}function xT(e,t){return!t||"object"!==RT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IT(e){return(IT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}DT.propTypes={docs:Ct.a.array.isRequired,filter:Ct.a.string.isRequired,selectAllDocs:Ct.a.func.isRequired,allDocsSelected:Ct.a.bool.isRequired,someDocsSelected:Ct.a.bool.isRequired,selectDoc:Ct.a.func.isRequired,onFilterChange:Ct.a.func.isRequired,deleteDocs:Ct.a.func.isRequired,activitySort:Ct.a.object.isRequired,changeActivitySort:Ct.a.func.isRequired};var AT=vi.LoadLines,jT=vi.Polling,LT=vi.RefreshBtn,MT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TT(e,t)}(a,e);var t,n,r,o=kT(a);function a(){return CT(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"loadReplicationInfo",value:function(e,t){this.props.initReplicator(e.routeLocalSource,e.localSource),this.getAllActivity(),this.loadReplicationStateFrom(e,t)}},{key:"loadReplicationStateFrom",value:function(e,t){e.replicationId&&e.replicationId!==t.replicationId&&(this.props.clearReplicationForm(),this.props.getReplicationStateFrom(e.replicationId))}},{key:"getAllActivity",value:function(){this.props.getReplicationActivity(),this.props.getReplicateActivity()}},{key:"componentDidMount",value:function(){this.props.checkForNewApi(),this.props.getDatabasesList(),this.loadReplicationInfo(this.props,{})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.loadReplicationStateFrom(e,this.props),"new replication"!==this.props.tabSection&&"new replication"===e.tabSection&&this.props.clearReplicationForm()}},{key:"componentWillUnmount",value:function(){this.props.clearReplicationForm()}},{key:"showSection",value:function(){var e=this.props,t=e.replicationSource,n=e.replicationTarget,r=e.replicationType,o=e.replicationDocName,a=e.databases,i=e.localSource,s=e.remoteSource,c=e.remoteTarget,u=e.localTarget,l=e.statusDocs,p=e.statusFilter,f=e.loading,d=e.allDocsSelected,h=e.someDocsSelected,m=e.showConflictModal,y=e.localSourceKnown,b=e.localTargetKnown,g=e.updateFormField,_=e.authenticated,v=e.activityLoading,E=e.submittedNoChange,w=e.activitySort,O=e.tabSection,S=e.replicateInfo,N=e.replicateLoading,D=e.replicateFilter,R=e.allReplicateSelected,C=e.someReplicateSelected,P=e.hideConflictModal,T=e.isConflictModalVisible,k=e.filterDocs,x=e.filterReplicate,I=e.replicate,A=e.clearReplicationForm,j=e.selectAllDocs,L=e.changeActivitySort,M=e.selectDoc,U=e.deleteDocs,q=e.deleteReplicates,B=e.selectAllReplicates,V=e.selectReplicate,F=e.sourceAuthType,K=e.sourceAuth,z=e.targetAuthType,H=e.targetAuth,G=e.targetDatabasePartitioned,W=e.allowNewPartitionedLocalDbs;return"new replication"===O?f?ue.a.createElement(AT,null):ue.a.createElement(TP,{docs:l,localTargetKnown:b,localSourceKnown:y,clearReplicationForm:A,replicate:I,replicationSource:t,replicationTarget:n,replicationType:r,replicationDocName:o,databases:a,localSource:i,remoteSource:s,remoteTarget:c,localTarget:u,sourceAuthType:F,sourceAuth:K,targetAuthType:z,targetAuth:H,targetDatabasePartitioned:G,allowNewPartitionedLocalDbs:W,updateFormField:g,conflictModalVisible:T,hideConflictModal:P,showConflictModal:m,checkReplicationDocID:WP,authenticated:_,submittedNoChange:E}):"_replicate"===O?N?ue.a.createElement(AT,null):ue.a.createElement(DT,{docs:S,filter:D,onFilterChange:x,selectDoc:V,selectAllDocs:B,allDocsSelected:R,someDocsSelected:C,activitySort:w,changeActivitySort:L,deleteDocs:q}):v?ue.a.createElement(AT,null):ue.a.createElement(_T,{docs:l,filter:p,onFilterChange:k,selectAllDocs:j,selectDoc:M,allDocsSelected:d,someDocsSelected:h,deleteDocs:U,activitySort:w,changeActivitySort:L})}},{key:"getHeaderComponents",value:function(){if("new replication"===this.props.tabSection)return null;var e="right-header-flex";return R.isIE1X()&&(e+=" "+e+"--ie1X"),ue.a.createElement("div",{className:e},ue.a.createElement(jT,{min:60,max:600,startValue:300,stepSize:60,onPoll:this.getAllActivity.bind(this)}),ue.a.createElement(LT,{refresh:this.getAllActivity.bind(this)}))}},{key:"getTabElements",value:function(){var e=this.props.tabSection,t=[ue.a.createElement(Ta,{key:1,selected:"activity"===e,text:"Replicator DB Activity",onChange:this.onTabChange.bind(this,"activity","#/replication")})];return this.props.supportNewApi&&t.push(ue.a.createElement(Ta,{key:2,selected:"_replicate"===e,text:"_replicate Activity",onChange:this.onTabChange.bind(this,"_replicate","#/replication/_replicate")})),t}},{key:"onTabChange",value:function(e,t){ae.navigate(t)}},{key:"getCrumbs",value:function(){return"new replication"===this.props.tabSection?[{name:"Job Configuration"}]:[{name:"Replication"}]}},{key:"getTabs",value:function(){return"new replication"===this.props.tabSection?null:ue.a.createElement(xa,null,this.getTabElements())}},{key:"render",value:function(){return this.props.checkingAPI?ue.a.createElement(AT,null):ue.a.createElement(Xt,null,ue.a.createElement(Qt,{crumbs:this.getCrumbs()},this.getHeaderComponents()),ue.a.createElement(Jt,null,ue.a.createElement("div",{className:"template-content flex-body flex-layout flex-col"},this.getTabs(),ue.a.createElement("div",{className:"replication__page flex-layout flex-col"},this.showSection()))))}}])&&PT(t.prototype,n),r&&PT(t,r),a}(ue.a.Component),UT="INIT_REPLICATION",qT="REPLICATION_DATABASES_LOADED",BT="REPLICATION_UPDATE_FORM_FIELD",VT="REPLICATION_CLEAR_FORM",FT="REPLICATION_STARTING",KT="REPLICATION_STATUS",zT="REPLICATION_FETCHING_STATUS",HT="REPLICATION_FILTER_DOCS",GT="REPLICATION_TOGGLE_ALL_DOCS",WT="REPLICATION_TOGGLE_DOC",XT="REPLICATION_SET_STATE_FROM_DOC",QT="REPLICATION_SHOW_CONFLICT_MODAL",JT="REPLICATION_HIDE_CONFLICT_MODAL",YT="REPLICATION_CHANGE_ACTIVITY_SORT",$T="REPLICATION_CLEAR_SELECTED_DOCS",ZT="REPLICATION_CHANGE_TAB_SECTION",ek="REPLICATION_FETCHING_REPLICATE_STATUS",tk="REPLICATION_REPLICATE_STATUS",nk="REPLICATION_SUPPORT_NEW_API",rk="REPLICATION_FILTER_REPLICATE",ok="REPLICATION_TOGGLE_ALL_REPLICATE",ak="REPLICATION_TOGGLE_REPLICATE",ik="REPLICATION_CLEAR_SELECTED_REPLICATES",sk="REPLICATION_FETCHING_FORM_STATE",ck=function(e){var t=s.a.isString(e)?e.trim().replace(/\/$/,""):e.url;return new URL(t).pathname.slice(1).split("/").pop()},uk=function e(t){return function(n){var r=FP(t),o=R.getServerUrl("/_replicator"),a=O(o,r),i=ck(r.source),s=ck(r.target);n({type:FT});var c=function(e){ae.addNotification({msg:e.reason,type:"error",clear:!0})};return a.then((function(e){if(!e.ok)throw e;ae.addNotification({msg:"Replication from <code>".concat(decodeURIComponent(i),"</code> to <code>").concat(decodeURIComponent(s),"</code> has been scheduled."),type:"success",escape:!1,clear:!0}),n(lk()),ae.navigate("#/replication")})).catch((function(r){if(r.error&&"not_found"===r.error)return function(){var e=R.getServerUrl("/_replicator");return S(e).then((function(e){if(!e.ok)throw{reason:"Failed to create the _replicator database."};return!0}))}().then((function(){return e(t)(n)})).catch(c);c(r)}))}},lk=function(){return function(e){e({type:zT}),IP().then((function(e){return HP()})).then((function(t){e({type:KT,options:t})}))}},pk=function(){return function(e){IP().then((function(t){t&&(e({type:ek}),XP().then((function(t){e({type:tk,options:t})})))}))}},fk=function(e){return function(t){var n=e.map((function(e){var t=e.raw;return t._deleted=!0,t}));ae.addNotification({msg:"Deleting doc".concat(n.length>1?"s":"","."),type:"success",escape:!1,clear:!0});var r=R.getServerUrl("/_replicator/_bulk_docs");O(r,{docs:n},{raw:!0}).then((function(e){if(!e.ok)throw e;return e})).then((function(){var n="The selected documents have been deleted.";1===e.length&&(n="Document <code>".concat(e[0]._id,"</code> has been deleted")),ae.addNotification({msg:n,type:"success",escape:!1,clear:!0}),t({type:$T}),t(lk())})).catch((function(e){e.json().then((function(e){ae.addNotification({msg:e.reason,type:"error",clear:!0})}))}))}},dk=function(e){return function(t){ae.addNotification({msg:"Deleting _replicate".concat(e.length>1?"s":"","."),type:"success",escape:!1,clear:!0}),function(e){var t=e.map((function(e){var t={replication_id:e._id,cancel:!0},n=R.getServerUrl("/_replicate");return O(n,t)}));return ae.Promise.all(t)}(e).then((function(){var n="The selected replications have been deleted.";1===e.length&&(n="Replication <code>".concat(e[0]._id,"</code> has been deleted")),t({type:ik}),t(pk()),ae.addNotification({msg:n,type:"success",escape:!1,clear:!0})}),(function(e){var t=JSON.parse(e.responseText);ae.addNotification({msg:t.reason,type:"error",clear:!0})}))}},hk=function(e){var t={type:gC.REPLICATION_AUTH_METHOD.NO_AUTH,creds:{}};if(e.headers&&e.headers.Authorization){var n=e.headers.Authorization.substring(6);try{var r=bC.a.decode(n);return t.type=gC.REPLICATION_AUTH_METHOD.BASIC,t.creds={username:r.split(":")[0],password:r.split(":")[1]},t}catch(e){throw new Error("Error decoding Authorization header from replication document")}}var o=ae.getExtensions("Replication:Auth"),a=void 0,i=void 0;return o&&o.map((function(t){!a&&t.getCredentials&&(a=t.getCredentials(e),i=t.typeValue)})),a&&(t.type=i,t.creds=a),t},mk=function(){return function(e){IP().then((function(t){e({type:nk,options:t})}))}};function yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yk(Object(n),!0).forEach((function(t){gk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _k=function(e){se.utils.localStorageSet("replication-activity-sort",e)},vk=function(){var e=se.utils.localStorageGet("replication-activity-sort");return e||(e={descending:!1,column:"statusTime"}),_k(e),e},Ek={remoteSource:"remoteSource",remoteTarget:"remoteTarget",localTarget:"localTarget",replicationType:"replicationType",replicationDocName:"replicationDocName",replicationSource:"replicationSource",replicationTarget:"replicationTarget",localSource:"localSource",sourceAuthType:"sourceAuthType",sourceAuth:"sourceAuth",targetAuthType:"targetAuthType",targetAuth:"targetAuth",targetDatabasePartitioned:"targetDatabasePartitioned"},wk={loading:!1,databases:[],replicationSource:"",localSource:"",remoteSource:"",sourceAuthType:gC.REPLICATION_AUTH_METHOD.NO_AUTH,sourceAuth:{},replicationTarget:"",localTarget:"",remoteTarget:"",targetAuthType:gC.REPLICATION_AUTH_METHOD.NO_AUTH,targetAuth:{},targetDatabasePartitioned:!1,isConflictModalVisible:!1,replicationType:gC.REPLICATION_TYPE.ONE_TIME,replicationDocName:"",submittedNoChange:!1,statusDocs:[],statusFilteredStatusDocs:[],statusFilter:"",replicateFilter:"",allDocsSelected:!1,allReplicateSelected:!1,username:"",password:"",activityLoading:!1,tabSection:"new replication",supportNewApi:!1,fetchingReplicateInfo:!1,replicateInfo:[],checkingAPI:!0,activitySort:vk()},Ok=function(e){var t=bk({},e);return Object.values(Ek).forEach((function(e){t[e]="sourceAuth"===e||"targetAuth"===e?{}:"targetDatabasePartitioned"!==e&&""})),t.sourceAuthType=gC.REPLICATION_AUTH_METHOD.NO_AUTH,t.targetAuthType=gC.REPLICATION_AUTH_METHOD.NO_AUTH,t},Sk=function(e,t,n){var r=bk(bk({},e),{},{submittedNoChange:!1});if(r[Ek[t]]=n,t===Ek.sourceAuthType||t===Ek.replicationSource){var o=r[Ek.sourceAuthType]===gC.REPLICATION_AUTH_METHOD.BASIC,a=r[Ek.replicationSource]===gC.REPLICATION_SOURCE.LOCAL,i=!r[Ek.sourceAuth]||!r[Ek.sourceAuth].username;o&&a&&i&&(r[Ek.sourceAuth]={username:ae.session.user().name,password:""})}else if(t===Ek.targetAuthType||t===Ek.replicationTarget){var s=r[Ek.targetAuthType]===gC.REPLICATION_AUTH_METHOD.BASIC,c=r[Ek.replicationTarget]===gC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE||r[Ek.replicationTarget]===gC.REPLICATION_TARGET.NEW_LOCAL_DATABASE,u=!r[Ek.targetAuth]||!r[Ek.targetAuth].username;s&&c&&u&&(r[Ek.targetAuth]={username:ae.session.user().name,password:""})}return r},Nk=function(e,t){var n=e.statusDocs.find((function(e){return e._id===t}));return n?(n.selected=!n.selected,bk(bk({},e),{},{allDocsSelected:!1})):e},Dk=function(e){var t=bk(bk({},e),{},{allDocsSelected:!e.allDocsSelected});return zk(t).forEach((function(e){return e.selected=t.allDocsSelected})),t},Rk=function(e,t){var n=bk({},e),r=n._replicateInfo.find((function(e){return e._id===t}));if(!r)return n;r.selected=!r.selected,n._allReplicateSelected=!1},Ck=function(e){var t=bk(bk({},e),{},{allReplicateSelected:!e.allReplicateSelected});return rx(t).forEach((function(e){return e.selected=t.allReplicateSelected})),t},Pk=function(e,t){var n=bk(bk({},e),{},{loading:!1});return Object.keys(t).reduce((function(e,n){return Sk(e,n,t[n])}),n)},Tk=function(e){return e.activityLoading},kk=function(e){return e.databases},xk=function(e){return e.replicationSource},Ik=function(e){return e.localSource},Ak=function(e){return-1!==_.indexOf(e.databases,e.localSource)},jk=function(e){return e.remoteSource},Lk=function(e){return e.replicationTarget},Mk=function(e){return e.localTarget},Uk=function(e){return-1!==_.indexOf(e.databases,e.localTarget)},qk=function(e){return e.remoteTarget},Bk=function(e){return e.isConflictModalVisible},Vk=function(e){return e.replicationType},Fk=function(e){return e.replicationDocName},Kk=function(e){return e.submittedNoChange},zk=function(e){return e.statusDocs.filter((function(t){return Object.values(t).filter((function(t){return t?t.toString().toLowerCase().match(e.statusFilter):null})).length>0}))},Hk=function(e){return e.statusFilter},Gk=function(e){return e.replicateFilter},Wk=function(e){return e.allDocsSelected},Xk=function(e){return zk(e).some((function(e){return e.selected}))},Qk=function(e){return e.username},Jk=function(e){return e.password},Yk=function(e){return e.activitySort},$k=function(e){return e.checkingAPI},Zk=function(e){return e.supportNewApi},ex=function(e){return e.fetchingReplicateInfo},tx=function(e){return e.allReplicateSelected},nx=function(e){return rx(e).some((function(e){return e.selected}))},rx=function(e){return e.replicateInfo.filter((function(t){return Object.values(t).filter((function(t){return!!t&&t.toString().toLowerCase().match(e._replicateFilter)})).length>0}))},ox=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wk,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.options;switch(n){case UT:var o=bk(bk({},e),{},{loading:!0});return r.localSource&&(o.localSource=r.localSource,o.replicationSource=gC.REPLICATION_SOURCE.LOCAL,o.remoteSource="",o.replicationTarget="",o.localTarget="",o.remoteTarget=""),o;case qT:return bk(bk({},e),{},{loading:!1,databases:r.databases});case sk:return bk(bk({},e),{},{loading:!0});case BT:return Sk(e,r.fieldName,r.value);case VT:return Ok(e);case FT:return bk(bk({},e),{},{submittedNoChange:!0});case zT:return bk(bk({},e),{},{activityLoading:!0});case KT:return bk(bk({},e),{},{activityLoading:!1,statusDocs:r});case HT:return bk(bk({},e),{},{statusFilter:r});case rk:return bk(bk({},e),{},{replicateFilter:r});case WT:return Nk(e,r);case GT:return Dk(e);case ak:return Rk(e,r);case ok:return Ck(e);case XT:return Pk(e,r);case QT:return bk(bk({},e),{},{isConflictModalVisible:!0});case JT:return bk(bk({},e),{},{isConflictModalVisible:!1});case YT:return _k(r),bk(bk({},e),{},{activitySort:vk()});case $T:return bk(bk({},e),{},{allDocsSelected:!1});case ZT:return bk(bk({},e),{},{tabSection:r});case nk:return bk(bk({},e),{},{checkingApi:!1,supportNewApi:r});case ek:return bk(bk({},e),{},{fetchingReplicateInfo:!0});case tk:return bk(bk({},e),{},{fetchingReplicateInfo:!1,replicateInfo:r});case ik:return bk(bk({},e),{},{allReplicateSelected:!1});default:return e}},ax=Object(Pt.b)((function(e,t){var n,r=e.replication;return{allowNewPartitionedLocalDbs:e.databases.partitionedDatabasesAvailable,routeLocalSource:t.routeLocalSource,replicationId:t.replicationId,tabSection:t.section,loading:(n=r,n.isLoading),activityLoading:Tk(r),databases:kk(r),replicationSource:xk(r),localSource:Ik(r),localSourceKnown:Ak(r),remoteSource:jk(r),sourceAuthType:r.sourceAuthType,sourceAuth:r.sourceAuth,replicationTarget:Lk(r),localTarget:Mk(r),localTargetKnown:Uk(r),remoteTarget:qk(r),targetAuthType:r.targetAuthType,targetAuth:r.targetAuth,targetDatabasePartitioned:r.targetDatabasePartitioned,isConflictModalVisible:Bk(r),replicationType:Vk(r),replicationDocName:Fk(r),submittedNoChange:Kk(r),statusDocs:zk(r),statusFilter:Hk(r),replicateFilter:Gk(r),allDocsSelected:Wk(r),someDocsSelected:Xk(r),username:Qk(r),password:Jk(r),activitySort:Yk(r),checkingApi:$k(r),supportNewApi:Zk(r),replicateLoading:ex(r),replicateInfo:rx(r),allReplicateSelected:tx(r),someReplicateSelected:nx(r)}}),(function(e){return{checkForNewApi:function(){return e(mk())},updateFormField:function(t){return function(n){e(function(e,t){return{type:BT,options:{fieldName:e,value:t}}}(t,n))}},clearReplicationForm:function(){return e({type:VT})},initReplicator:function(t){return e(function(e,t){return function(n){e&&e!==t&&n({type:UT,options:{localSource:e}})}}(t))},getReplicationActivity:function(){return e(lk())},getReplicateActivity:function(){return e(pk())},getReplicationStateFrom:function(t){return e(function(e){return function(t){t({type:sk});var n=R.getServerUrl("/_replicator/".concat(encodeURIComponent(e)));E(n).then((function(e){var n={replicationDocName:e._id,replicationType:e.continuous?gC.REPLICATION_TYPE.CONTINUOUS:gC.REPLICATION_TYPE.ONE_TIME},r=_.isObject(e.source)?e.source.url:e.source,o=_.isObject(e.target)?e.target.url:e.target;if(r.indexOf(window.location.hostname)>-1){var a=new URL(r);n.replicationSource=gC.REPLICATION_SOURCE.LOCAL,n.localSource=decodeURIComponent(a.pathname.slice(1))}else n.replicationSource=gC.REPLICATION_SOURCE.REMOTE,n.remoteSource=jP(r);var i=hk(e.source);if(n.sourceAuthType=i.type,n.sourceAuth=i.creds,o.indexOf(window.location.hostname)>-1){var s=new URL(o);n.replicationTarget=gC.REPLICATION_TARGET.EXISTING_LOCAL_DATABASE,n.localTarget=decodeURIComponent(s.pathname.slice(1))}else n.replicationTarget=gC.REPLICATION_TARGET.EXISTING_REMOTE_DATABASE,n.remoteTarget=jP(o);var c,u=hk(e.target);n.targetAuthType=u.type,n.targetAuth=u.creds,n.targetDatabasePartitioned=!(!(c=e.create_target_params)||!0!==c.partitioned),t({type:XT,options:n})})).catch((function(e){ae.addNotification({msg:e.reason||e.message,type:"error",clear:!0})}))}}(t))},getDatabasesList:function(){return e((function(e){var t=R.getServerUrl("/_all_dbs");E(t).then((function(t){e({type:qT,options:{databases:t}})}))}))},replicate:function(t){return e(uk(t))},showConflictModal:function(){return e({type:QT})},hideConflictModal:function(){return e({type:JT})},filterReplicate:function(t){return e(function(e){return{type:rk,options:e}}(t))},filterDocs:function(t){return e(function(e){return{type:HT,options:e}}(t))},selectDoc:function(t){return e({type:WT,options:t})},deleteDocs:function(t){return e(fk(t))},selectAllDocs:function(){return e({type:GT})},changeActivitySort:function(t){return e(function(e){return{type:YT,options:e}}(t))},selectAllReplicates:function(){return e({type:ok})},deleteReplicates:function(t){return e(dk(t))},selectReplicate:function(t){return e({type:ak,options:t})}}}))(MT),ix={RouteObjects:[ae.RouteObject.extend({routes:{"replication/_create":"createView","replication/_create/:dbname":"createView","replication/id/:id":"createViewFromId",replication:"activityView","replication/_replicate":"replicateView"},selectedHeader:"Replication",roles:["fx_loggedIn"],setActivityCrumbs:function(){this.crumbs=[{name:"Replication"}]},setCreateReplicationCrumbs:function(){this.crumbs=[{name:"Replication",link:"replication"},{name:"New Replication"}]},createView:function(e){var t=e||"";return ue.a.createElement(ax,{routeLocalSource:t,section:"new replication"})},createViewFromId:function(e){return ue.a.createElement(ax,{replicationId:e,section:"new replication"})},activityView:function(){return ue.a.createElement(ax,{section:"activity"})},replicateView:function(){return ue.a.createElement(ax,{section:"_replicate"})}})]};n(446);ix.initialize=function(){ae.addHeaderLink({title:"Replication",href:"#/replication",icon:"fonticon-replicate"}),ae.session.isAuthenticated().then((function(){mk()}))},ae.addReducers({replication:ox}),ae.registerUrls("replication",{app:function(e){return"#/replication/_create/"+e},api:function(){return R.getApiUrl("/_replicator")}});var sx=ix,cx="SEARCH_INDEX_DESIGN_DOCS_LOADED",ux="SEARCH_INDEX_INIT",lx="SEARCH_INDEX_SELECT_TAB",px="SEARCH_INDEX_SET_NAME",fx="SEARCH_INDEX_SET_ANALYZER_TYPE",dx="SEARCH_INDEX_ADD_ANALYZER_ROW",hx="SEARCH_INDEX_REMOVE_ANALYZER_ROW",mx="SEARCH_INDEX_SET_ANALYZER_ROW_FIELD_NAME",yx="SEARCH_INDEX_SET_ANALYZER_ROW",bx="SEARCH_INDEX_SET_DEFAULT_MULTIPLE_ANALYZER",gx="SEARCH_INDEX_INIT_EDIT_SEARCH_INDEX",_x="SEARCH_INDEX_PREVIEW_MODEL_UPDATED",vx="SEARCH_INDEX_PREVIEW_REQUEST_MADE",Ex="PREVIEW_MODEL_REQUEST_ERROR",wx="SEARCH_INDEX_SELECT_DESIGN_DOC",Ox="SEARCH_INDEX_SET_SINGLE_ANALYZER",Sx="SEARCH_INDEX_SET_SEARCH_QUERY",Nx="SEARCH_INDEX_SET_LOADING",Dx="SEARCH_INDEX_CLEAR",Rx="SEARCH_INDEX_NEW_DESIGN_DOC_NAME_UPDATED",Cx="SEARCH_INDEX_NEW_DESIGN_DOC_PARTITONED_UPDATED",Px="SEARCH_INDEX_PARTITION_PARAM_NOT_SUPPORTED",Tx="SEARCH_INDEX_PARTITION_PARAM_MANDATORY",kx="single",xx="multiple",Ix="newSearch",Ax="single",jx="standard",Lx='function (doc) {\n  index("name", doc.name);\n}',Mx=[{label:"Single field (json)",code:{index:{fields:["foo"]},name:"foo-json-index",type:"json"}},{label:"Multiple fields (json)",code:{index:{fields:["foo","bar"]},name:"foo-bar-json-index",type:"json"}},{label:"Single field (text)",code:{index:{fields:[{name:"foo",type:"string"}]},name:"foo-text",type:"text"}},{label:"All fields (text)",code:{index:{default_field:{enabled:!1},index_array_lengths:!1},name:"all-text",type:"text"}},{label:"All fields with default field (text)",code:{index:{index_array_lengths:!1},name:"all-text",type:"text"}}];function Ux(e){return(Ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qx={};qx.Doc=ft.Doc.extend({setIndex:function(e,t,n){if(!this.isDdoc())return!1;var r=this.get("indexes");return r||(r={}),r[e]||(r[e]={}),n&&(r[e].analyzer=n),r[e].index=t,this.set({indexes:r})},getIndex:function(e){return this.get("indexes")[e].index},getAnalyzer:function(e){return this.get("indexes")[e].analyzer},analyzerType:function(e){return"object"===Ux(this.getAnalyzer(e))?xx:kx},dDocModel:function(){if(!this.isDdoc())return!1;var e=this.get("doc");return!!e&&new qx.Doc(e,{database:this.database})}}),qx.AllDocs=ft.AllDocs.extend({model:qx.Doc});var Bx=qx;var Vx=function(e,t,n,r,o){var a=function(e,t,n,r,o){var a=t?encodeURIComponent(t):"";return ae.urls("search","server",encodeURIComponent(e),a,encodeURIComponent(n),encodeURIComponent(r),"?limit=10&q="+encodeURIComponent(o))}(e,t,n,r,o);return E(a).then((function(e){if(e.error)throw new Error(e.reason);return e.rows}))},Fx=function(e,t,n,r,o,a){return a({type:vx}),Vx(e,t,n,r,o).then((function(e){a({type:_x,options:{searchResults:e}})})).catch((function(t){a({type:Ex}),t&&-1!==t.message.indexOf("`partition` not supported")?a(Kx()):t&&-1!==t.message.indexOf("`partition` parameter is mandatory")?a(zx()):ae.addNotification({msg:"Search failed: "+t.message,type:"error",clear:!0}),-1!==t.message.indexOf("not found")&&ae.navigate(ae.urls("allDocsSanitized","app",e),{trigger:!0})}))},Kx=function(){return{type:Px}},zx=function(){return{type:Tx}};var Hx={dispatchInitNewSearchIndex:function(e){ae.reduxDispatch({type:Dx}),ae.reduxDispatch({type:Nx,options:{loading:!0}}),e.designDocs.fetch().then((function(){ae.reduxDispatch({type:cx,options:{designDocs:e.designDocs,defaultDDoc:e.defaultDDoc,database:e.database}})}))},dispatchInitSearchIndex:function(e){if(ae.reduxDispatch({type:Nx,options:{loading:!0}}),ae.reduxDispatch({type:ux,options:{databaseName:e.databaseName,partitionKey:e.partitionKey,ddocName:e.designDoc,indexName:e.indexName,searchQuery:e.query?e.query:""}}),e.query)return Fx(e.databaseName,e.partitionKey,e.designDoc,e.indexName,e.query,ae.reduxDispatch)},dispatchEditSearchIndex:function(e){var t=e.database,n=e.ddocID,r=e.designDocs,o=e.indexName;ae.reduxDispatch({type:Nx,options:{loading:!0}}),r.fetch().then((function(e){var a=e.rows.find((function(e){return e._id===n})).doc;if(!a.indexes||!a.indexes[o])throw Error('Index "'.concat(o,'" not found'));ae.reduxDispatch({type:gx,options:{indexName:o,database:t,ddocID:n,designDocs:r}})})).catch((function(e){var t=e.message?e.message:"";ae.addNotification({msg:'There was a problem editing the search index "'.concat(o,'". ')+t,type:"error",clear:!0})}))},selectTab:function(e){return function(t){t({type:lx,options:{tab:e}})}},setSearchIndexName:function(e){return function(t){t({type:px,options:{value:e}})}},setAnalyzerType:function(e){return function(t){t({type:fx,options:{value:e}})}},addAnalyzerRow:function(e){return function(t){t({type:dx,options:{analyzer:e}})}},removeAnalyzerRow:function(e){return function(t){t({type:hx,options:{rowIndex:e}})}},setAnalyzerRowFieldName:function(e){return function(t){t({type:mx,options:{rowIndex:e.rowIndex,fieldName:e.fieldName}})}},setAnalyzer:function(e){return function(t){t({type:yx,options:{rowIndex:e.rowIndex,analyzer:e.analyzer}})}},setDefaultMultipleAnalyzer:function(e){return function(t){t({type:bx,options:{analyzer:e}})}},selectDesignDoc:function(e){return function(t){t({type:wx,options:{value:e}})}},saveSearchIndex:function(e,t,n){if(e.setIndex(t.indexName,t.indexFunction,t.analyzerInfo),t.lastSavedDesignDocName===e.id&&t.lastSavedSearchIndexName!==t.indexName){var r=e.get("indexes")||{};delete r[t.lastSavedSearchIndexName],e.set({indexes:r})}e.save().then((function(){if(t.designDocs.add(e,{merge:!0}),ae.addNotification({msg:"The search index has been saved.",type:"success",clear:!0}),!t.isCreatingIndex&&t.lastSavedDesignDocName!==e.id){var r=nu.helpers.findDesignDoc(t.designDocs,t.lastSavedDesignDocName);nu.safeDeleteIndex(r,t.designDocs,"indexes",t.lastSavedSearchIndexName,{onSuccess:function(){Hs(t.designDocs)}})}Hs(t.designDocs),ae.navigate(n,{trigger:!0})}),(function(e){var t=JSON.parse(e.responseText).reason;ae.addNotification({msg:"Save failed: "+t,type:"error",clear:!0})}))},cloneSearchIndex:function(e){var t=function(e,t,n,r){if("new-doc"===t){var o={_id:"_design/"+n,indexes:{},language:"javascript"};return new Bx.Doc(o,{database:r})}var a=e.find((function(e){return e.id===t}));return a?a.dDocModel():null}(e.designDocs,e.targetDesignDocName,e.newDesignDocName,e.database),n=t.get("indexes");if(n&&_.has(n,e.newIndexName))ae.addNotification({msg:"That index name is already used in this design doc. Please enter a new name.",type:"error",clear:!0});else{n||(n={});var r=nu.helpers.findDesignDoc(e.designDocs,"_design/"+e.sourceDesignDocName).toJSON();n[e.newIndexName]=r.indexes[e.sourceIndexName],t.set({indexes:n}),t.save().then((function(){e.onComplete(),ae.addNotification({msg:"The search index has been cloned.",type:"success",clear:!0}),Hs(e.designDocs)}),(function(t){e.onComplete();var n=JSON.parse(t.responseText).reason;ae.addNotification({msg:"Clone failed: "+n,type:"error",clear:!0})}))}},deleteSearchIndex:function(e){nu.safeDeleteIndex(e.designDoc,e.designDocs,"indexes",e.indexName,{onSuccess:function(){if(e.isOnIndex){var t=ae.urls("allDocs","app",e.database.safeID());ae.navigate(t)}Hs(e.designDocs),ae.addNotification({msg:"The <code>"+_.escape(e.indexName)+"</code> search index has been deleted.",type:"info",escape:!1,clear:!0}),Qs()}})},gotoEditSearchIndexPage:function(e,t,n,r){var o=t?encodeURIComponent(t):"";ae.navigate("#"+ae.urls("search","edit",encodeURIComponent(e),o,encodeURIComponent(n),encodeURIComponent(r)))},querySearch:function(e,t,n,r,o){var a=encodeURIComponent(e),i=encodeURIComponent(t),s=encodeURIComponent(n),c=encodeURIComponent(r),u=encodeURIComponent(o),l=t?ae.urls("partitioned_search","app",a,i,s,c):ae.urls("search","app",a,s,c);ae.navigate("".concat(l).concat(c,"?").concat(u),{trigger:!0})},setSearchQuery:function(e){return function(t){t({type:Sx,options:{query:e}})}},setSingleAnalyzer:function(e){return function(t){t({type:Ox,options:{analyzer:e}})}},updateNewDesignDocName:function(e){return function(t){t({type:Rx,options:{value:e}})}},updateNewDesignDocPartitioned:function(e){return function(t){t({type:Cx,options:{value:e}})}},partitionParamNotSupported:Kx,partitionParamIsMandatory:zx};function Gx(e){return(Gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qx(e,t){return(Qx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zx(e);if(t){var o=Zx(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yx(this,n)}}function Yx(e,t){return!t||"object"!==Gx(t)&&"function"!=typeof t?$x(e):t}function $x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zx(e){return(Zx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qx(e,t)}(a,e);var t,n,r,o=Jx(a);function a(){var e;Wx(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return eI($x(e=o.call.apply(o,[this].concat(n))),"querySearch",(function(t){if(t.preventDefault(),""===e.props.searchQuery.trim())return ae.addNotification({msg:"Please enter a search term.",type:"error",clear:!0}),void e.searchInput.focus();var n=e.props,r=n.databaseName,o=n.partitionKey,a=n.ddocName,i=n.indexName,s=n.searchQuery;e.props.querySearch(r,o,a,i,s)})),eI($x(e),"getRows",(function(){var t=encodeURIComponent(e.props.databaseName);return e.props.searchResults.map((function(n){var r={header:n.id,content:JSON.stringify(n,null,"  "),url:ae.urls("document","app",t,encodeURIComponent(n.id))};return ue.a.createElement(vi.Document,{key:n.id,keylabel:"id:",doc:r,header:n.id,isDeletable:!1,docContent:r.content,onClick:e.onClick,docChecked:function(){},docIdentifier:n.id})}))})),eI($x(e),"onClick",(function(e,t){t.url&&ae.navigate(t.url)})),eI($x(e),"onType",(function(t){e.props.setSearchQuery(t.target.value)})),eI($x(e),"getResults",(function(){return e.props.hasActiveQuery?ue.a.createElement(vi.LoadLines,null):e.props.noResultsWarning?ue.a.createElement("div",{"data-select":"search-result-set"},e.props.noResultsWarning):!!e.props.searchResults&&(0===e.props.searchResults.length?ue.a.createElement("div",{"data-select":"search-result-set"},"No results found."):ue.a.createElement("div",{id:"doc-list","data-select":"search-result-set"},e.getRows()))})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.searchInput.focus()}},{key:"componentDidUpdate",value:function(){prettyPrint()}},{key:"render",value:function(){var e=this,t=this.props.hasActiveQuery?"Querying...":"Query";return ue.a.createElement("div",null,ue.a.createElement("form",{id:"search-index-preview-form"},ue.a.createElement("span",{className:"input-append"},ue.a.createElement("input",{className:"span4",ref:function(t){return e.searchInput=t},type:"text",placeholder:"Enter your search query",onChange:this.onType,value:this.props.searchQuery}),ue.a.createElement("button",{className:"btn btn-primary",id:"search-index-query-button",type:"submit",disabled:this.props.hasActiveQuery,onClick:this.querySearch},t)),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:ae.constants.DOC_URLS.SEARCH_INDEX_QUERIES,target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"}))),this.getResults())}}])&&Xx(t.prototype,n),r&&Xx(t,r),a}(ue.a.Component);eI(tI,"propTypes",{hasActiveQuery:Ct.a.bool.isRequired,searchQuery:Ct.a.string.isRequired,searchPerformed:Ct.a.bool.isRequired,querySearch:Ct.a.func.isRequired,setSearchQuery:Ct.a.func.isRequired,searchResults:Ct.a.array});var nI=Object(Pt.b)((function(e){var t=e.search;return{databaseName:t.databaseName,partitionKey:t.partitionKey,ddocName:t.ddocName,indexName:t.indexName,hasActiveQuery:t.hasActiveQuery,searchQuery:t.searchQuery,searchPerformed:t.searchPerformed,searchResults:t.searchResults,noResultsWarning:t.noResultsWarning}}),(function(e){return{querySearch:function(e,t,n,r,o){Hx.querySearch(e,t,n,r,o)},setSearchQuery:function(t){e(Hx.setSearchQuery(t))}}}))(tI);function rI(e){return(rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iI(e,t){return(iI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lI(e);if(t){var o=lI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cI(this,n)}}function cI(e,t){return!t||"object"!==rI(t)&&"function"!=typeof t?uI(e):t}function uI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lI(e){return(lI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fI=vi.StyledSelect,dI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iI(e,t)}(a,e);var t,n,r,o=sI(a);function a(){var e;oI(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pI(uI(e=o.call.apply(o,[this].concat(n))),"getAnalyzers",(function(){return["Standard","Keyword","Simple","Whitespace","Classic","Email"].map((function(e){return ue.a.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),pI(uI(e),"getLanguages",(function(){return["Arabic","Armenian","Basque","Bulgarian","Brazilian","Catalan","Cjk","Chinese","Czech","Danish","Dutch","English","Finnish","French","Galician","German","Greek","Hindi","Hungarian","Indonesian","Irish","Italian","Japanese","Latvian","Norwegian","Persian","Polish","Portuguese","Romanian","Russian","Spanish","Swedish","Thai","Turkish"].map((function(e){return ue.a.createElement("option",{value:e.toLowerCase(),key:e},e)}))})),pI(uI(e),"getLabel",(function(){return""===e.props.label?null:ue.a.createElement("label",{htmlFor:e.props.id},e.props.label)})),e}return t=a,(n=[{key:"render",value:function(){var e=ue.a.createElement("optgroup",{label:"Language-specific",key:"languages"},this.getLanguages());return ue.a.createElement("div",{className:this.props.classes},this.getLabel(),ue.a.createElement(fI,{selectChange:this.props.onChange,selectValue:this.props.defaultSelected,selectId:this.props.id,selectContent:[this.getAnalyzers(),e]}))}}])&&aI(t.prototype,n),r&&aI(t,r),a}(ue.a.Component);function hI(e){return(hI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bI(e,t){return(bI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=EI(e);if(t){var o=EI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _I(this,n)}}function _I(e,t){return!t||"object"!==hI(t)&&"function"!=typeof t?vI(e):t}function vI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EI(e){return(EI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}pI(dI,"defaultProps",{defaultSelected:"standard",label:"Type",id:"analyzer-default",classes:"",onChange:function(){}}),pI(dI,"propTypes",{defaultSelected:Ct.a.string.isRequired,label:Ct.a.string.isRequired,id:Ct.a.string.isRequired,classes:Ct.a.string.isRequired,onChange:Ct.a.func.isRequired});var OI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bI(e,t)}(a,e);var t,n,r,o=gI(a);function a(){var e;mI(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wI(vI(e=o.call.apply(o,[this].concat(n))),"deleteRow",(function(t){t.preventDefault(),e.props.removeAnalyzerRow(e.props.rowIndex)})),wI(vI(e),"getFieldNameHeading",(function(t){return 0===e.props.rowIndex&&ue.a.createElement("label",{htmlFor:t},"Fieldname")})),wI(vI(e),"changeFieldName",(function(t){e.props.setAnalyzerRowFieldName({rowIndex:e.props.rowIndex,fieldName:t.target.value})})),wI(vI(e),"selectAnalyzer",(function(t){e.props.setAnalyzer({rowIndex:e.props.rowIndex,analyzer:t.target.value})})),e}return t=a,(n=[{key:"render",value:function(){var e="analyzer-row-"+this.props.rowIndex,t=0===this.props.rowIndex?"Analyzer":"",n="span12";return this.props.showErrors&&!this.props.row.valid&&(n+=" unhappy"),ue.a.createElement("li",null,ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span4"},this.getFieldNameHeading(e),ue.a.createElement("input",{type:"text",value:this.props.row.fieldName,className:n,onChange:this.changeFieldName})),ue.a.createElement(dI,{id:e,label:t,defaultSelected:this.props.row.analyzer,classes:"span4",onChange:this.selectAnalyzer}),ue.a.createElement("div",{className:"span4"},ue.a.createElement("button",{className:"btn btn-danger delete-analyzer",onClick:this.deleteRow},"delete"))))}}])&&yI(t.prototype,n),r&&yI(t,r),a}(ue.a.Component);function SI(e){return(SI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DI(e,t){return(DI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TI(e);if(t){var o=TI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return CI(this,n)}}function CI(e,t){return!t||"object"!==SI(t)&&"function"!=typeof t?PI(e):t}function PI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TI(e){return(TI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}wI(OI,"propTypes",{rowIndex:Ct.a.number.isRequired,row:Ct.a.object.isRequired,showErrors:Ct.a.bool.isRequired,removeAnalyzerRow:Ct.a.func.isRequired,setAnalyzerRowFieldName:Ct.a.func.isRequired,setAnalyzer:Ct.a.func.isRequired});var xI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DI(e,t)}(a,e);var t,n,r,o=RI(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),kI(PI(t=o.call(this,e)),"addRow",(function(e){e.preventDefault(),t.props.addAnalyzerRow(t.props.defaultAnalyzer)})),kI(PI(t),"getRows",(function(){return t.props.fields.map((function(e,n){return ue.a.createElement(OI,{row:e,key:e.key,rowIndex:n,showErrors:t.state.showErrors,setAnalyzer:t.props.setAnalyzer,setAnalyzerRowFieldName:t.props.setAnalyzerRowFieldName,removeAnalyzerRow:t.props.removeAnalyzerRow})}))})),kI(PI(t),"validate",(function(){t.setState({showErrors:!0});var e=!1,n=[],r=t.props.fields.every((function(t){return-1!==n.indexOf(t.fieldName)&&(e=!0),n.push(t.fieldName),t.valid}));return r&&!e||ae.addNotification({msg:"Fieldnames cannot be empty and must be unique.",type:"error",clear:!0}),r})),t.state={showErrors:!1},t}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement(dI,{label:"Default",id:"defaultAnalyzer",defaultSelected:this.props.defaultAnalyzer,onChange:this.props.selectDefaultMultipleAnalyzer,isValidating:this.validate}),ue.a.createElement("ul",{id:"analyzer-fields",className:"unstyled"},this.getRows()),ue.a.createElement("button",{className:"addfield btn btn-small btn-primary",onClick:this.addRow},"Add Field"))}}])&&NI(t.prototype,n),r&&NI(t,r),a}(ue.a.Component);function II(e){return(II="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LI(e,t){return(LI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function MI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BI(e);if(t){var o=BI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return UI(this,n)}}function UI(e,t){return!t||"object"!==II(t)&&"function"!=typeof t?qI(e):t}function qI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BI(e){return(BI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}kI(xI,"propTypes",{addAnalyzerRow:Ct.a.func.isRequired,defaultAnalyzer:Ct.a.string.isRequired,selectDefaultMultipleAnalyzer:Ct.a.func.isRequired,fields:Ct.a.array.isRequired});var FI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LI(e,t)}(a,e);var t,n,r,o=MI(a);function a(){var e;AI(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return VI(qI(e=o.call.apply(o,[this].concat(n))),"selectAnalyzerType",(function(t){e.props.setAnalyzerType(t.target.value)})),VI(qI(e),"validate",(function(){return e.props.analyzerType===kx||e.analyzerMultiple.validate()})),VI(qI(e),"getAnalyzerFieldsAsObject",(function(){return e.props.analyzerFields.reduce((function(e,t){return e[t.fieldName.replace(/["']/g,"")]=t.analyzer,e}),{})})),VI(qI(e),"getInfo",(function(){return e.props.analyzerType===kx?e.props.singleAnalyzer:{name:"perfield",default:e.props.defaultMultipleAnalyzer,fields:e.getAnalyzerFieldsAsObject()}})),VI(qI(e),"selectSingleAnalyzer",(function(t){e.props.setSingleAnalyzer(t.target.value)})),VI(qI(e),"selectDefaultMultipleAnalyzer",(function(t){e.props.setDefaultMultipleAnalyzer(t.target.value)})),VI(qI(e),"getAnalyzerType",(function(){return e.props.analyzerType===kx?ue.a.createElement(dI,{label:"Type",defaultSelected:e.props.singleAnalyzer,onChange:e.selectSingleAnalyzer}):ue.a.createElement(xI,{ref:function(t){return e.analyzerMultiple=t},defaultAnalyzer:e.props.defaultMultipleAnalyzer,selectDefaultMultipleAnalyzer:e.selectDefaultMultipleAnalyzer,fields:e.props.analyzerFields,addAnalyzerRow:e.props.addAnalyzerRow,removeAnalyzerRow:e.props.removeAnalyzerRow,setAnalyzerRowFieldName:e.props.setAnalyzerRowFieldName,setAnalyzer:e.props.setAnalyzer})})),e}return t=a,(n=[{key:"render",value:function(){var e="btn";this.props.analyzerType===xx&&(e+=" active");var t="btn";return this.props.analyzerType===kx&&(t+=" active"),ue.a.createElement("div",{className:"well"},ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"search-analyzer"},"Analyzer"),ue.a.createElement("div",{className:"btn-group toggle-btns",id:"analyzer"},ue.a.createElement("label",{style:{width:"82px"},htmlFor:"single-analyzer",className:t},"Single"),ue.a.createElement("input",{type:"radio",id:"single-analyzer",name:"search-analyzer",value:"single",checked:this.props.analyzerType===kx,onChange:this.selectAnalyzerType}),ue.a.createElement("input",{type:"radio",id:"multiple-analyzer",name:"search-analyzer",value:"multiple",checked:this.props.analyzerType===xx,onChange:this.selectAnalyzerType}),ue.a.createElement("label",{style:{width:"82px"},htmlFor:"multiple-analyzer",className:e},"Multiple"))),this.getAnalyzerType())}}])&&jI(t.prototype,n),r&&jI(t,r),a}(ue.a.Component);function KI(e){return(KI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zI(){return(zI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function HI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WI(e,t){return(WI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=YI(e);if(t){var o=YI(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return QI(this,n)}}function QI(e,t){return!t||"object"!==KI(t)&&"function"!=typeof t?JI(e):t}function JI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YI(e){return(YI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}VI(FI,"propTypes",{analyzerType:Ct.a.string.isRequired,analyzerFields:Ct.a.array.isRequired,defaultMultipleAnalyzer:Ct.a.string.isRequired,singleAnalyzer:Ct.a.string.isRequired,setAnalyzerType:Ct.a.func.isRequired,setSingleAnalyzer:Ct.a.func.isRequired,setDefaultMultipleAnalyzer:Ct.a.func.isRequired,addAnalyzerRow:Ct.a.func.isRequired});var ZI=yu.DesignDocSelector,eA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WI(e,t)}(a,e);var t,n,r,o=XI(a);function a(){var e;HI(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $I(JI(e=o.call.apply(o,[this].concat(n))),"updateSearchIndexName",(function(t){e.props.setSearchIndexName(t.target.value)})),$I(JI(e),"saveIndex",(function(t){if(t.preventDefault(),e.designDocSelector.validate()&&e.analyzer.validate())if(e.props.searchIndexName.trim()){var n=e.props.saveDoc.id.replace(/_design\//,""),r=e.props.partitionKey?encodeURIComponent(e.props.partitionKey):"",o=ae.urls("search","fragment",encodeURIComponent(e.props.database.id),r,encodeURIComponent(n),encodeURIComponent(e.props.searchIndexName));e.props.saveSearchIndex(e.props.saveDoc,{isCreatingIndex:e.props.isCreatingIndex,indexName:e.props.searchIndexName,designDocs:e.props.designDocs,database:e.props.database,indexFunction:e.getIndexFunction(),analyzerInfo:e.analyzer.getInfo(),lastSavedSearchIndexName:e.props.lastSavedSearchIndexName,lastSavedDesignDocName:e.props.lastSavedDesignDocName},o)}else ae.addNotification({msg:"Please enter the index name.",type:"error",clear:!0})})),$I(JI(e),"getIndexFunction",(function(){return e.searchIndexEditor.getValue()})),$I(JI(e),"getDesignDocList",(function(){return e.props.designDocs.map((function(e){return e.id}))})),e}return t=a,(n=[{key:"getCancelLink",value:function(){var e=encodeURIComponent(this.props.database.id),t=this.props.partitionKey?encodeURIComponent(this.props.partitionKey):"";if(!this.props.lastSavedDesignDocName||this.props.isCreatingIndex)return"#"+ae.urls("allDocs","app",e,t);var n=se.utils.getSafeIdForDoc(this.props.lastSavedDesignDocName),r=encodeURIComponent(this.props.lastSavedSearchIndexName);return"#"+ae.urls("search","showIndex",e,t,n,r)}},{key:"render",value:function(){var e=this;if(this.props.isLoading)return ue.a.createElement("div",{className:"search-index-page-loading"},ue.a.createElement(vi.LoadLines,null));if(!this.props.database)return null;var t=this.props.isCreatingIndex?"New Search Index":"Edit Search Index",n=this.props.isCreatingIndex?"Create Document and Build Index":"Save Document and Build Index";return ue.a.createElement("form",{className:"form-horizontal search-query-save",id:"search-index"},ue.a.createElement("h3",{className:"simple-header"},t),ue.a.createElement(ZI,{ref:function(t){return e.designDocSelector=t},designDocLabel:"Save to design document",designDocList:this.getDesignDocList(),isDbPartitioned:this.props.isDbPartitioned,newDesignDocName:this.props.newDesignDocName,newDesignDocPartitioned:this.props.newDesignDocPartitioned,selectedDesignDocName:this.props.ddocName,selectedDesignDocPartitioned:this.props.ddocPartitioned,onSelectDesignDoc:this.props.selectDesignDoc,onChangeNewDesignDocName:this.props.updateNewDesignDocName,onChangeNewDesignDocPartitioned:this.props.updateNewDesignDocPartitioned,docLink:se.helpers.getDocUrl("DOC_URL_DESIGN_DOCS")}),ue.a.createElement("div",{className:"control-group"},ue.a.createElement("label",{htmlFor:"search-name"},"Index name"),ue.a.createElement("input",{type:"text",id:"search-name",value:this.props.searchIndexName,onChange:this.updateSearchIndexName})),ue.a.createElement(vi.CodeEditorPanel,{id:"search-function",className:"ace-editor-section",ref:function(t){return e.searchIndexEditor=t},title:"Search index function",allowZenMode:!1,docLink:se.helpers.getDocUrl("SEARCH_INDEXES"),defaultCode:this.props.searchIndexFunction,blur:this.props.blur}),ue.a.createElement(FI,zI({ref:function(t){return e.analyzer=t}},this.props)),ue.a.createElement("div",{className:"control-group"},ue.a.createElement("button",{id:"save-index",className:"btn btn-primary save",onClick:this.saveIndex},ue.a.createElement("i",{className:"icon fonticon-ok-circled"}),n),ue.a.createElement("a",{href:this.getCancelLink(),className:"index-cancel-link"},"Cancel")))}}])&&GI(t.prototype,n),r&&GI(t,r),a}(ue.a.Component);function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tA(Object(n),!0).forEach((function(t){rA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$I(eA,"defaultProps",{isCreatingIndex:!0,blur:function(){},isLoading:!0}),$I(eA,"propTypes",{isLoading:Ct.a.bool,isCreatingIndex:Ct.a.bool,database:Ct.a.object.isRequired,saveDoc:Ct.a.object.isRequired,newDesignDocName:Ct.a.string,blur:Ct.a.func,setSearchIndexName:Ct.a.func.isRequired,searchIndexFunction:Ct.a.string.isRequired,saveSearchIndex:Ct.a.func.isRequired,selectDesignDoc:Ct.a.func.isRequired,updateNewDesignDocName:Ct.a.func.isRequired});var oA=nA({designDocs:new Backbone.Collection,database:{},loading:!0,ddocName:"new-doc",partitionKey:"",indexName:"",databaseName:""},sA()),aA=[];function iA(){function e(){return Math.random().toString(36).substring(7)}for(var t=e();-1!==aA.indexOf(t);)t=e();return aA.push(t),t}function sA(){return{noResultsWarning:"",hasActiveQuery:!1,searchQuery:"",searchResults:void 0,searchPerformed:!1,newDesignDocName:"",newDesignDocPartitioned:!0,lastSavedSearchIndexName:"",searchIndexFunction:Lx,searchIndexName:Ix,analyzerType:Ax,analyzerFields:[],singleAnalyzer:jx,defaultMultipleAnalyzer:jx}}function cA(e,t){var n=t.analyzer,r=t.fieldName,o=e.analyzerFields.slice();return o.push({key:iA(),fieldName:r||"",analyzer:n,valid:r&&r.trim().length>0}),o}function uA(e,t){var n=e.analyzerFields.slice();return t=parseInt(t,10),n.splice(t,1),n}function lA(e,t){var n=t.fieldName,r=t.rowIndex,o=e.analyzerFields.slice(),a=parseInt(r,10);return o[a].fieldName=n,o[a].valid=""!==n,o}function pA(e,t){var n=t.analyzer,r=t.rowIndex,o=e.analyzerFields.slice();return o[parseInt(r,10)].analyzer=n,o}function fA(e,t){var n,r=t.database,o=t.designDocs,a=t.ddocID,i=t.indexName,s=o.find((function(e){return e.id===a})).dDocModel(),c=s.getAnalyzer(i);n=_.isString(c)?c:_.has(c,"default")?c.default:jx;var u=[];return c&&c.fields&&Object.keys(c.fields).forEach((function(e){u.push({key:iA(),fieldName:e||"",analyzer:c.fields[e],valid:!_.isUndefined(e)&&!_.isEmpty(e)})})),{loading:!1,searchPerformed:!1,database:r,designDocs:o,searchIndexName:i,ddocName:a,lastSavedSearchIndexName:i,lastSavedDesignDocName:a,searchIndexFunction:s.getIndex(i),analyzerType:s.analyzerType(i),singleAnalyzer:n,defaultMultipleAnalyzer:n,analyzerFields:u}}function dA(e,t){if("new-doc"===e.ddocName){var n={_id:"_design/"+e.newDesignDocName,views:{},language:"javascript"},r=new Bx.Doc(n,{database:e.database});return t&&r.setDDocPartitionedOption(e.newDesignDocPartitioned),r}var o=e.designDocs.find((function(t){return t.id===e.ddocName||t.id==="_design/"+e.ddocName}));return o?o.dDocModel():null}var hA=Object(Pt.b)((function(e,t){var n,r,o,a=e.search,i=e.databases,s=(n=a,r=i.isDbPartitioned,!!(o=n.designDocs.find((function(e){return e.id===n.ddocName||e.id==="_design/"+n.ddocName})))&&sr.isDDocPartitioned(o.get("doc"),r));return{isCreatingIndex:t.isCreatingIndex,isLoading:a.loading,database:a.database,designDocs:a.designDocs,searchIndexFunction:a.searchIndexFunction,ddocName:a.ddocName,ddocPartitioned:s,lastSavedDesignDocName:a.lastSavedDesignDocName,lastSavedSearchIndexName:a.lastSavedSearchIndexName,searchIndexName:a.searchIndexName,analyzerType:a.analyzerType,analyzerFields:a.analyzerFields,analyzerFieldsObj:a.analyzerFieldsObj,defaultMultipleAnalyzer:a.defaultMultipleAnalyzer,singleAnalyzer:a.singleAnalyzer,saveDoc:dA(a,i.isDbPartitioned),newDesignDocName:a.newDesignDocName,newDesignDocPartitioned:a.newDesignDocPartitioned,isDbPartitioned:i.isDbPartitioned,partitionKey:t.partitionKey}}),(function(e){return{setSearchIndexName:function(t){e(Hx.setSearchIndexName(t))},saveSearchIndex:function(e,t,n){Hx.saveSearchIndex(e,t,n)},selectDesignDoc:function(t){e(Hx.selectDesignDoc(t))},updateNewDesignDocName:function(t){e(Hx.updateNewDesignDocName(t))},updateNewDesignDocPartitioned:function(t){e(Hx.updateNewDesignDocPartitioned(t))},setAnalyzerType:function(t){e(Hx.setAnalyzerType(t))},setSingleAnalyzer:function(t){e(Hx.setSingleAnalyzer(t))},setDefaultMultipleAnalyzer:function(t){e(Hx.setDefaultMultipleAnalyzer(t))},addAnalyzerRow:function(t){e(Hx.addAnalyzerRow(t))},removeAnalyzerRow:function(t){e(Hx.removeAnalyzerRow(t))},setAnalyzerRowFieldName:function(t){e(Hx.setAnalyzerRowFieldName(t))},setAnalyzer:function(t){e(Hx.setAnalyzer(t))}}}))(eA),mA=function(e){var t=e.section,n=e.database,r=e.indexName,o=e.ddocName,a=e.docURL,i=e.endpoint,s=e.dropDownLinks,c=e.designDocs,u=e.ddoc,l=e.selectedNavItem,p=e.partitionKey,f=e.onPartitionKeySelected,d=e.onGlobalModeSelected,h=e.globalMode;return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(_y,{hideQueryOptions:!0,docURL:a,endpoint:i,dbName:n.id,dropDownLinks:s,database:n,showPartitionKeySelector:"search"===t,partitionKey:p,onPartitionKeySelected:f,onGlobalModeSelected:d,globalMode:h}),ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(Vl,{selectedNavItem:l,selectedPartitionKey:p})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement("div",{className:"flex-body",id:"dashboard-lower-content"},ue.a.createElement("div",{className:"search-index-content"},ue.a.createElement("div",{className:"tab-content search-index-tab-content"},function(e,t,n,r,o,a,i){return"create"===e?ue.a.createElement(hA,{designDocs:o,ddoc:a,database:t,isCreatingIndex:!0,partitionKey:i}):"edit"===e?ue.a.createElement(hA,{database:t,indexName:n,ddocName:r,isCreatingIndex:!1,partitionKey:i}):ue.a.createElement(nI,null)}(t,n,r,o,c,u,p)))))))};mA.propTypes={section:Ct.a.string.isRequired,docURL:Ct.a.string,endpoint:Ct.a.string,ddocName:Ct.a.string,indexName:Ct.a.string,dropDownLinks:Ct.a.array.isRequired,database:Ct.a.object.isRequired};var yA=mA,bA=rc.extend({routes:{"database/:database/_design/:ddoc/_search/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"searchNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_indexes/:search(?*searchQuery)":{route:"search",roles:["fx_loggedIn"]},"database/:database/_design/:ddoc/_search/:search/edit":{route:"editNoPartition",roles:["fx_loggedIn"]},"database/:database/_partition/:partitionkey/_design/:ddoc/_search/:search/edit":{route:"edit",roles:["fx_loggedIn"]},"database/:database/new_search":"createNoPartition","database/:database/_partition/:partitionkey/new_search":"create","database/:database/new_search/:designDoc":"createNoPartition","database/:database/_partition/:partitionkey/new_search/:designDoc":"create"},initialize:function(e,t){this.databaseName=t[0],this.database=new Ts.Model({id:this.databaseName}),this.data={database:new Ts.Model({id:this.databaseName})},this.data.designDocs=new Bx.AllDocs(null,{database:this.data.database,params:{startkey:'"_design"',endkey:'"_design1"',include_docs:!0}}),zs({database:this.data.database,designDocs:this.data.designDocs})},searchNoPartition:function(e,t,n,r){return this.search(e,"",t,n,r)},search:function(e,t,n,r,o){this.databaseName=e,this.ddocName=n,this.indexName=r;var a=new oc("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});nc(a);var i=this.getCrumbs(this.database);Hx.dispatchInitSearchIndex({databaseName:e,partitionKey:t,designDoc:n,indexName:r,query:o}),Dt.fetchSelectedDatabaseInfo(e);var s=t?encodeURIComponent(t):"",c=ae.urls("search","apiurl",this.databaseName,s,this.ddocName,this.indexName,o||"*:*"),u=o?"?".concat(encodeURIComponent(o)):"";return ue.a.createElement(yA,{section:"search",dropDownLinks:i,endpoint:c,docURL:ae.constants.DOC_URLS.SEARCH_INDEXES,database:this.database,indexName:r,selectedNavItem:a,partitionKey:t,onPartitionKeySelected:function(t){var o=ae.urls("partitioned_search","app",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n));ae.navigate("#/"+o+encodeURIComponent(r)+u)},onGlobalModeSelected:function(){var t=ae.urls("search","app",encodeURIComponent(e),encodeURIComponent(n));ae.navigate("#/"+t+encodeURIComponent(r)+u)},globalMode:""===t})},editNoPartition:function(e,t,n){return this.edit(e,"",t,n)},edit:function(e,t,n,r){var o=new oc("designDoc",{designDocName:n,designDocSection:"Search Indexes",indexName:r});nc(o),Hx.dispatchEditSearchIndex({ddocID:"_design/"+n,database:this.database,indexName:r,designDocs:this.data.designDocs}),Dt.fetchSelectedDatabaseInfo(e);var a=this.getCrumbs(this.database);return ue.a.createElement(yA,{section:"edit",dropDownLinks:a,database:this.database,indexName:r,ddocName:n,selectedNavItem:o,partitionKey:t})},createNoPartition:function(e,t){return this.create(e,"",t)},create:function(e,t,n){var r=new oc("");Hx.dispatchInitNewSearchIndex({database:this.database,designDocs:this.data.designDocs,defaultDDoc:n}),Dt.fetchSelectedDatabaseInfo(e);var o=this.getCrumbs(this.database);return ue.a.createElement(yA,{section:"create",dropDownLinks:o,database:this.database,designDocs:this.data.designDocs,ddoc:n,selectedNavItem:r,partitionKey:t})},getCrumbs:function(e){return[{type:"back",link:"/_all_dbs"},{name:e.id}]}});Bx.RouteObjects=[bA];var gA=Bx;n(447);function _A(e){return e?"/_partition/"+e:""}gA.initialize=function(){E(R.getServerUrl("/")).then((function(e){return e.features&&-1!==e.features.indexOf("search")})).catch((function(){return!1})).then((function(e){e&&(ae.registerExtension("sidebar:list",{selector:"indexes",name:"Search Indexes",urlNamespace:"search",indexLabel:"search index",onDelete:Hx.deleteSearchIndex,onClone:Hx.cloneSearchIndex,onEdit:Hx.gotoEditSearchIndexPage}),ae.registerExtension("sidebar:links",{title:"New Search Index",url:"new_search",icon:"fonticon-plus-circled",showForPartitionedDDocs:!0}),ae.registerExtension("sidebar:newLinks",{url:"new_search",name:"Search Index"}),ae.registerExtension("IndexTypes:propNames","indexes"),ae.registerExtension("mango:indexTemplates",Mx))}))},ae.registerUrls("partitioned_search",{app:function(e,t,n){return"database/"+e+_A(t)+"/_design/"+n+"/_search/"}}),ae.registerUrls("search",{server:function(e,t,n,r,o){return R.getServerUrl("/"+e+_A(t)+"/_design/"+n+"/_search/"+r+o)},app:function(e,t){return"database/"+e+"/_design/"+t+"/_search/"},edit:function(e,t,n,r){return"database/"+e+_A(t)+"/_design/"+n+"/_search/"+r+"/edit"},fragment:function(e,t,n,r){return"database/"+e+_A(t)+"/_design/"+n+"/_search/"+r},showIndex:function(e,t,n,r){return"database/"+e+_A(t)+"/"+n+"/_search/"+r},apiurl:function(e,t,n,r,o){return window.location.origin+"/"+encodeURIComponent(e)+"/_design/"+encodeURIComponent(n)+"/_search/"+encodeURIComponent(r)+"?q="+encodeURIComponent(o)}}),ae.addReducers({search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oA,t=arguments.length>1?arguments[1]:void 0,n=t.options;switch(t.type){case Nx:return nA(nA({},e),{},{loading:n.loading});case cx:var r=nA(nA({},e),{},{loading:!1,designDocs:n.designDocs,database:n.database},sA());return n.defaultDDoc&&(r.ddocName="_design/"+n.defaultDDoc),r;case px:return nA(nA({},e),{},{searchIndexName:n.value});case fx:return nA(nA({},e),{},{analyzerType:n.value});case Ox:return nA(nA({},e),{},{singleAnalyzer:n.analyzer});case dx:return nA(nA({},e),{},{analyzerFields:cA(e,n)});case vx:return nA(nA({},e),{},{hasActiveQuery:!0});case Ex:return nA(nA({},e),{},{hasActiveQuery:!1,searchResults:[]});case Sx:return nA(nA({},e),{},{searchQuery:n.query});case _x:return nA(nA({},e),{},{searchResults:n.searchResults,hasActiveQuery:!1,searchPerformed:!0});case hx:return nA(nA({},e),{},{analyzerFields:uA(e,n.rowIndex)});case mx:return nA(nA({},e),{},{analyzerFields:lA(e,n)});case yx:return nA(nA({},e),{},{analyzerFields:pA(e,n)});case bx:return nA(nA({},e),{},{defaultMultipleAnalyzer:n.analyzer});case gx:return nA(nA({},e),fA(0,n));case wx:return nA(nA({},e),{},{ddocName:n.value});case Dx:return nA(nA({},oA),{},{designDocs:new Backbone.Collection});case ux:return nA(nA({},e),{},{loading:!1,databaseName:n.databaseName,partitionKey:n.partitionKey,ddocName:n.ddocName,indexName:n.indexName,searchQuery:n.searchQuery,searchResults:""===n.searchQuery?void 0:e.searchResults,noResultsWarning:""});case Rx:return nA(nA({},e),{},{newDesignDocName:n.value});case Cx:return nA(nA({},e),{},{newDesignDocPartitioned:n.value});case Px:return nA(nA({},e),{},{noResultsWarning:"The selected index does not support partitions. Switch back to global mode."});case Tx:return nA(nA({},e),{},{noResultsWarning:"The selected index requires a partition key. Use the selector at the top to enter a partition key."});default:return e}}});var vA=gA;n(448);function EA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EA(Object(n),!0).forEach((function(t){OA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SA={corsEnabled:!1,origins:[],isAllOrigins:!1,configChanged:!1,shouldSaveChange:!1,node:"",isLoading:!0,deleteDomainModalVisible:!1,domainToDelete:""};var NA=ae.addon();NA.initialize=function(){},ae.addReducers({cors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SA,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case JR:var n=t.options;return wA(wA({},e),{},{isLoading:!1,node:n.node,corsEnabled:n.corsEnabled,isAllOrigins:-1!==s.a.indexOf(n.origins,"*"),origins:n.origins,deleteDomainModalVisible:!1,domainToDelete:""});case $R:return wA(wA({},e),{},{deleteDomainModalVisible:!0,domainToDelete:t.domainToDelete});case ZR:return wA(wA({},e),{},{deleteDomainModalVisible:!1,domainToDelete:""});case YR:return wA(wA({},e),{},{isLoading:t.isLoading});default:return e}}});var DA=NA,RA=function(e){var t=e.removeItem,n=e.section,r=e.type,o=e.value;return ue.a.createElement("li",{className:"permissions__entry"},ue.a.createElement("span",null,o),ue.a.createElement("button",{onClick:function(){return t(n,r,o)},type:"button",className:"pull-right close"},""))};RA.propTypes={value:Ct.a.string.isRequired,removeItem:Ct.a.func.isRequired};var CA=RA;function PA(e){return(PA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xA(e,t){return(xA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function IA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=LA(e);if(t){var o=LA(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return AA(this,n)}}function AA(e,t){return!t||"object"!==PA(t)&&"function"!=typeof t?jA(e):t}function jA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LA(e){return(LA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var UA=se.helpers.getDocUrl,qA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xA(e,t)}(a,e);var t,n,r,o=IA(a);function a(){var e;TA(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return MA(jA(e=o.call.apply(o,[this].concat(n))),"state",{newRole:"",newName:""}),MA(jA(e),"getHelp",(function(){return e.props.section,"Database members can access the database. If no members are defined, the database is public. "})),MA(jA(e),"isEmptyValue",(function(e,t){return!!s.a.isEmpty(e)&&(ae.addNotification({msg:"Cannot add an empty value for "+t+".",type:"error"}),!0)})),MA(jA(e),"addNames",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newName,"names")||(e.props.addItem({type:"names",section:e.props.section,value:e.state.newName}),e.setState({newName:""}))})),MA(jA(e),"addRoles",(function(t){t.preventDefault(),e.isEmptyValue(e.state.newRole,"roles")||(e.props.addItem({type:"roles",section:e.props.section,value:e.state.newRole}),e.setState({newRole:""}))})),MA(jA(e),"getItems",(function(t,n){return t.map((function(t,r){return ue.a.createElement(CA,{key:r,value:t,section:e.props.section,type:n,removeItem:e.props.removeItem})}))})),MA(jA(e),"getNames",(function(){return e.getItems(e.props.names,"names")})),MA(jA(e),"getRoles",(function(){return e.getItems(e.props.roles,"roles")})),MA(jA(e),"nameChange",(function(t){e.setState({newName:t.target.value})})),MA(jA(e),"roleChange",(function(t){e.setState({newRole:t.target.value})})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.section;return ue.a.createElement("div",{className:"permissions__"+e},ue.a.createElement("header",{className:"page-header"},ue.a.createElement("h3",null,e),ue.a.createElement("p",{className:"help"},this.getHelp(),ue.a.createElement("a",{className:"help-link","data-bypass":"true",href:UA("DB_PERMISSION"),target:"_blank",rel:"noopener noreferrer"},ue.a.createElement("i",{className:"icon-question-sign"})))),ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span6"},ue.a.createElement("header",null,ue.a.createElement("h4",null,"Users"),ue.a.createElement("p",null,"Specify users who will have ",this.props.section," access to this database.")),ue.a.createElement("form",{onSubmit:this.addNames,className:"permission-item-form permissions-add-user form-inline"},ue.a.createElement("input",{onChange:this.nameChange,value:this.state.newName,type:"text",className:"item input-small",placeholder:"Username"}),ue.a.createElement("button",{type:"submit",className:"btn btn-primary"},ue.a.createElement("i",{className:"icon fonticon-plus-circled"})," Add User")),ue.a.createElement("ul",{className:"unstyled permission-items span10"},this.getNames())),ue.a.createElement("div",{className:"span6"},ue.a.createElement("header",null,ue.a.createElement("h4",null,"Roles"),ue.a.createElement("p",null,"Users with any of the following role(s) will have ",this.props.section," access.")),ue.a.createElement("form",{onSubmit:this.addRoles,className:"permission-item-form permissions-add-role form-inline"},ue.a.createElement("input",{onChange:this.roleChange,value:this.state.newRole,type:"text",className:"item input-small",placeholder:"Role"}),ue.a.createElement("button",{type:"submit",className:"btn btn-primary"},ue.a.createElement("i",{className:"icon fonticon-plus-circled"})," Add Role")),ue.a.createElement("ul",{className:"unstyled permission-items span10"},this.getRoles()))))}}])&&kA(t.prototype,n),r&&kA(t,r),a}(ue.a.Component);MA(qA,"defaultProps",{names:[],roles:[]});var BA=qA;function VA(e,t,n,r){return!!e[t]&&(!!e[t][n]&&-1!==e[t][n].indexOf(r))}var FA=function(e){return{type:"PERMISSIONS_UPDATE",permissions:e}},KA=function(e,t,n,r,o){return function(a){!function(e,t,n,r){if(VA(e,t,n,r))throw new Error("Role/Name has already been added");(function(e,t,n,r){e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(r)})(e,t,n,r)}(t,n,r,o),HA(e,t,a).catch((function(e){ae.addNotification({msg:e.message,type:"error"})}))}},zA=function(e,t,n,r,o){return function(a){!function(e,t,n,r){if(!VA(e,t,n,r))throw new Error("Role/Name does not exist");e[t][n]=e[t][n].filter((function(e){return e!==r}))}(t,n,r,o),HA(e,t,a).catch((function(e){ae.addNotification({msg:e.message,type:"error"})}))}},HA=function(e,t,n){return fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!e.ok)throw new Error(e.reason);return e})).then((function(){return ae.addNotification({msg:"Database permissions has been updated."}),n(FA(t))})).catch((function(e){ae.addNotification({msg:"Could not update permissions - reason: "+e,type:"error"})}))};function GA(e){return(GA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XA(e,t){return(XA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function QA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$A(e);if(t){var o=$A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return JA(this,n)}}function JA(e,t){return!t||"object"!==GA(t)&&"function"!=typeof t?YA(e):t}function YA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $A(e){return($A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XA(e,t)}(a,e);var t,n,r,o=QA(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).addItem=t.addItem.bind(YA(t)),t.removeItem=t.removeItem.bind(YA(t)),t}return t=a,(n=[{key:"addItem",value:function(e){var t=e.section,n=e.type,r=e.value;if(VA(this.props.security,t,n,r))return ae.addNotification({msg:"Role/Name has already been added",type:"error"}),null;this.props.dispatch(KA(this.props.url,this.props.security,t,n,r))}},{key:"removeItem",value:function(e,t,n){this.props.dispatch(zA(this.props.url,this.props.security,e,t,n))}},{key:"render",value:function(){var e=this.props,t=e.adminRoles,n=e.adminNames,r=e.memberRoles,o=e.memberNames;return ue.a.createElement("div",{className:"permissions-page flex-body"},ue.a.createElement("div",null,ue.a.createElement(BA,{roles:t,names:n,addItem:this.addItem,removeItem:this.removeItem,section:"admins"}),ue.a.createElement(BA,{roles:r,names:o,addItem:this.addItem,removeItem:this.removeItem,section:"members"})))}}])&&WA(t.prototype,n),r&&WA(t,r),a}(ce.Component);function ej(e){return(ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nj(e,t){return(nj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=aj(e);if(t){var o=aj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oj(this,n)}}function oj(e,t){return!t||"object"!==ej(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aj(e){return(aj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ZA.propTypes={security:Ct.a.object.isRequired};var ij=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nj(e,t)}(a,e);var t,n,r,o=rj(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.dispatch)(function(e){return function(t){return fetch(e,{headers:{Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){if(e.error&&e.reason)throw t(FA({admins:{roles:["_admin"]},members:{roles:["_admin"]}})),new Error(e.reason);t(FA(e))})).catch((function(e){ae.addNotification({msg:"Failed to retrieve permissions. Please try again. Reason:"+e.message,type:"error"})}))}}(e.url))}},{key:"render",value:function(){return this.props.isLoading?ue.a.createElement(ko,null):ue.a.createElement(ZA,this.props)}}])&&tj(t.prototype,n),r&&tj(t,r),a}(ce.Component);function sj(){return(sj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}ij.propTypes={isLoading:Ct.a.bool.isRequired,adminRoles:Ct.a.array.isRequired,adminNames:Ct.a.array.isRequired,memberNames:Ct.a.array.isRequired,memberRoles:Ct.a.array.isRequired,security:Ct.a.object.isRequired};var cj={isLoading:!0,security:{},adminRoles:[],adminNames:[],memberNames:[],memberRoles:[]};function uj(e,t){return t[e]&&t[e].roles?t[e].roles:[]}function lj(e,t){return t[e]&&t[e].names?t[e].names:[]}var pj=function(e){return e.security},fj=function(e){return e.adminRoles},dj=function(e){return e.adminNames},hj=function(e){return e.memberNames},mj=function(e){return e.memberRoles},yj=Object(Pt.b)((function(e){var t,n=e.permissions;return{isLoading:(t=n,t.isLoading),adminRoles:fj(n),adminNames:dj(n),memberNames:hj(n),memberRoles:mj(n),security:pj(n)}}))(ij),bj=function(e){var t=e.docURL,n=e.database,r=e.endpoint,o=e.dbName,a=e.dropDownLinks,i=e.partitionKey,s=new oc("permissions");return ue.a.createElement("div",{id:"dashboard",className:"with-sidebar"},ue.a.createElement(_y,{hideQueryOptions:!0,hideJumpToDoc:!0,docURL:t,endpoint:r,dbName:o,dropDownLinks:a,database:n}),ue.a.createElement("div",{className:"with-sidebar tabs-with-sidebar content-area"},ue.a.createElement("aside",{id:"sidebar-content",className:"scrollable"},ue.a.createElement(Vl,{selectedNavItem:s,selectedPartitionKey:i})),ue.a.createElement("section",{id:"dashboard-content",className:"flex-layout flex-col"},ue.a.createElement(yj,{url:r}))))},gj={RouteObjects:[rc.extend({roles:["fx_loggedIn"],routes:{"database/:database/_partition/:partitionKey/permissions":{route:"permissions",roles:["fx_loggedIn"]},"database/:database/permissions":{route:"permissions",roles:["fx_loggedIn"]}},initialize:function(){se.getParams().include_docs=!0},permissions:function(e,t){this.database=new Ts.Model({id:e}),this.createDesignDocsCollection(),this.addSidebar("permissions");var n=[{name:this.database.id,link:Ts.databaseUrl(e)},{name:"Permissions"}],r=encodeURIComponent(e),o=ae.urls("permissions","server",r);return ue.a.createElement(bj,{docURL:ae.constants.DOC_URLS.DB_PERMISSION,endpoint:o,dbName:this.database.id,dropDownLinks:n,database:this.database,partitionKey:t})}})]};n(449);gj.initialize=function(){},ae.addReducers({permissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PERMISSIONS_UPDATE":var n=t.permissions;return sj({},e,{isLoading:!1,security:n,adminRoles:uj("admins",n),adminNames:lj("admins",n),memberRoles:uj("members",n),memberNames:lj("members",n)});default:return e}}});var _j=gj,vj=function(e){var t=e.message;ae.addNotification({msg:t,type:"error"})},Ej=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e}))},wj=function(e,t){return Ej(!_.isEmpty(e),!_.isEmpty(t))},Oj=function(){ae.dispatch({type:"AUTH_HIDE_PASSWORD_MODAL"})};function Sj(e){return(Sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dj(e,t){return(Dj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pj(e);if(t){var o=Pj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cj(this,n)}}function Cj(e,t){return!t||"object"!==Sj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pj(e){return(Pj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dj(e,t)}(a,e);var t,n,r,o=Rj(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).state={username:"",password:""},e}return t=a,(n=[{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"submit",value:function(e){e.preventDefault(),this.checkUnrecognizedAutoFill()||this.login(this.state.username,this.state.password)}},{key:"checkUnrecognizedAutoFill",value:function(){if(""!==this.state.username||""!==this.state.password)return!1;var e=this.props.testBlankUsername?this.props.testBlankUsername:this.usernameField.value,t=this.props.testBlankPassword?this.props.testBlankPassword:this.passwordField.value;return this.setState({username:e,password:t}),this.login(e,t),!0}},{key:"login",value:function(e,t){!function(e,t,n){wj(e,t)?cw.login({name:e,password:t}).then((function(e){if(e.error)return vj({message:e.reason}),e;var t=se.i18n.en_US["auth-logged-in"];if(t&&ae.addNotification({msg:t}),n&&-1===n.indexOf("login"))return ae.navigate(n);ae.navigate("/")})).catch(vj):vj({message:se.i18n.en_US["auth-missing-credentials"]})}(e,t,this.props.urlBack)}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"couch-login-wrapper"},ue.a.createElement("div",{className:"row-fluid"},ue.a.createElement("div",{className:"span12"},ue.a.createElement("form",{id:"login",onSubmit:this.submit.bind(this)},ue.a.createElement("p",{className:"help-block"},"Enter your username and password."),ue.a.createElement("input",{id:"username",type:"text",name:"username",ref:function(t){return e.usernameField=t},placeholder:"Username",size:"24",onChange:this.onUsernameChange.bind(this),value:this.state.username}),ue.a.createElement("br",null),ue.a.createElement("input",{id:"password",type:"password",name:"password",ref:function(t){return e.passwordField=t},placeholder:"Password",size:"24",onChange:this.onPasswordChange.bind(this),value:this.state.password}),ue.a.createElement("br",null),ue.a.createElement("button",{id:"submit",className:"btn btn-success",type:"submit"},"Log In")))))}}])&&Nj(t.prototype,n),r&&Nj(t,r),a}(ue.a.Component);Tj.defaultProps={urlBack:""},Tj.propTypes={urlBack:Ct.a.string.isRequired};var kj=Tj;function xj(e){return(xj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ij(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aj(e,t){return(Aj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Uj(e);if(t){var o=Uj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lj(this,n)}}function Lj(e,t){return!t||"object"!==xj(t)&&"function"!=typeof t?Mj(e):t}function Mj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uj(e){return(Uj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aj(e,t)}(a,e);var t,n,r,o=jj(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={password:""},t.authenticate=t.authenticate.bind(Mj(t)),t.onKeyPress=t.onKeyPress.bind(Mj(t)),t}return t=a,(n=[{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.authenticate()}},{key:"authenticate",value:function(){var e=ae.session.user().name;this.props.onSubmit(e,this.state.password,this.props.onSuccess)}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.onClose,o=t.submitBtnLabel,a=t.headerTitle,i=t.modalMessage;return this.props.visible?ue.a.createElement(rn.f,{dialogClassName:"enter-password-modal",show:n,onHide:function(){return r()}},ue.a.createElement(rn.f.Header,{closeButton:!0},ue.a.createElement(rn.f.Title,null,a)),ue.a.createElement(rn.f.Body,null,i,ue.a.createElement("input",{style:{width:"385px"},type:"password",className:"password-modal-input",placeholder:"Enter your password",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},onKeyPress:this.onKeyPress})),ue.a.createElement(rn.f.Footer,null,ue.a.createElement("a",{className:"cancel-link",onClick:function(){return r()}},"Cancel"),ue.a.createElement(vi.ConfirmButton,{text:o,onClick:this.authenticate}))):null}}])&&Ij(t.prototype,n),r&&Ij(t,r),a}(ue.a.Component);qj.propTypes={visible:Ct.a.bool.isRequired,modalMessage:Ct.a.oneOfType([Ct.a.string,Ct.a.element]),onSubmit:Ct.a.func.isRequired,onClose:Ct.a.func.isRequired,submitBtnLabel:Ct.a.string},qj.defaultProps={headerTitle:"Enter Password",visible:!1,modalMessage:"",onClose:Oj,onSubmit:function(e,t,n){cw.login({name:e,password:t}).then((function(r){if(r.error)throw r;Oj(),n(e,t)})).catch((function(){ae.addNotification({msg:"Your username or password is incorrect.",type:"error",clear:!0})}))},onSuccess:function(){},submitBtnLabel:"Continue"};var Bj=qj;function Vj(e){return(Vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kj(e,t){return(Kj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gj(e);if(t){var o=Gj(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hj(this,n)}}function Hj(e,t){return!t||"object"!==Vj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gj(e){return(Gj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kj(e,t)}(a,e);var t,n,r,o=zj(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={username:"",password:""},t}return t=a,(n=[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"componentDidMount",value:function(){this.usernameField.focus()}},{key:"createAdmin",value:function(e){e.preventDefault(),this.props.createAdmin(this.state.username,this.state.password,this.props.loginAfter,this.props.nodes)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"faux__auth-page"},ue.a.createElement("h3",null,"Create Admins"),ue.a.createElement("p",null,"Before a server admin is configured, all clients have admin privileges. This is fine when HTTP access is restricted to trusted users. ",ue.a.createElement("strong",null,"If end-users will be accessing this CouchDB, you must create an admin account to prevent accidental (or malicious) data loss.")),ue.a.createElement("p",null,"Server admins can create and destroy databases, install and update _design documents, run the test suite, and edit all aspects of CouchDB configuration."),ue.a.createElement("form",{id:"create-admin-form",onSubmit:this.createAdmin.bind(this)},ue.a.createElement("input",{id:"username",type:"text",ref:function(t){return e.usernameField=t},name:"name",placeholder:"Username",size:"24",onChange:this.onChangeUsername.bind(this)}),ue.a.createElement("br",null),ue.a.createElement("input",{id:"password",type:"password",name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this)}),ue.a.createElement("p",null,"Non-admin users have read and write access to all databases, which are controlled by validation. CouchDB can be configured to block all access to anonymous users."),ue.a.createElement("button",{type:"submit",id:"create-admin",className:"btn btn-primary"},"Create Admin")))}}])&&Fj(t.prototype,n),r&&Fj(t,r),a}(ue.a.Component);Wj.propTypes={loginAfter:Ct.a.bool.isRequired},Wj.defaultProps={loginAfter:!1};var Xj=Object(Pt.b)((function(e){return{nodes:e.clusters.nodes}}),{createAdmin:function(e,t,n,r){return function(){var o=r[0].node;if(!wj(e,t))return vj({message:se.i18n.en_US["auth-missing-credentials"]});cw.createAdmin({name:e,password:t,node:o}).then((function(e){return e.error?vj({message:"".concat(se.i18n.en_US["auth-admin-creation-failed-prefix"]," ").concat(e.reason)}):(ae.addNotification({msg:se.i18n.en_US["auth-admin-created"]}),n?ae.navigate("/login"):void 0)}))}}})(Wj);function Qj(e){return(Qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yj(e,t){return(Yj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eL(e);if(t){var o=eL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zj(this,n)}}function Zj(e,t){return!t||"object"!==Qj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eL(e){return(eL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yj(e,t)}(a,e);var t,n,r,o=$j(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={password:"",passwordConfirm:""},t}return t=a,(n=[{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangePasswordConfirm",value:function(e){this.setState({passwordConfirm:e.target.value})}},{key:"componentDidMount",value:function(){this.passwordField.focus()}},{key:"changePassword",value:function(e){e.preventDefault(),this.props.changePassword(this.props.username,this.state.password,this.state.passwordConfirm,this.props.nodes)}},{key:"render",value:function(){var e=this;return ue.a.createElement("div",{className:"faux__auth-page"},ue.a.createElement("h3",null,"Change Password"),ue.a.createElement("form",{id:"change-password",onSubmit:this.changePassword.bind(this)},ue.a.createElement("p",null,"Enter your new password."),ue.a.createElement("input",{id:"password",type:"password",ref:function(t){return e.passwordField=t},name:"password",placeholder:"Password",size:"24",onChange:this.onChangePassword.bind(this),value:this.state.password}),ue.a.createElement("br",null),ue.a.createElement("input",{id:"password-confirm",type:"password",name:"password_confirm",placeholder:"Verify Password",size:"24",onChange:this.onChangePasswordConfirm.bind(this),value:this.state.passwordConfirm}),ue.a.createElement("br",null),ue.a.createElement("p",null,ue.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Change"))))}}])&&Jj(t.prototype,n),r&&Jj(t,r),a}(ue.a.Component),nL={LoginForm:kj,PasswordModal:Bj,CreateAdminForm:Xj,ChangePasswordForm:Object(Pt.b)((function(e){return{nodes:e.clusters.nodes,username:ae.session.user().name}}),{changePassword:function(e,t,n,r){return function(){if(!function(e,t){return Ej(!_.isEmpty(e),!_.isEmpty(t),e===t)}(t,n))return vj({message:se.i18n.en_US["auth-passwords-not-matching"]});cw.createAdmin({name:e,password:t,node:r[0].node}).then((function(){ae.addNotification({msg:se.i18n.en_US["auth-change-password"]})}),vj)}}})(tL)},rL=nL.CreateAdminForm,oL=nL.ChangePasswordForm,aL=function(e){var t=e.crumbs;return ue.a.createElement("header",null,ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("div",{id:"breadcrumbs",className:"flex-body"},ue.a.createElement(zt,{crumbs:t}))))},iL=function(e){var t=e.crumbs,n=e.component;return ue.a.createElement(Xt,null,ue.a.createElement(aL,{crumbs:t}),ue.a.createElement(Jt,null,n))},sL=function(e){var t=e.changePassword;return ue.a.createElement(xa,null,ue.a.createElement(Ta,{key:1,selected:t,text:"Change Password",onChange:function(){ae.navigate("#changePassword")}}),ue.a.createElement(Ta,{key:2,selected:!t,text:"Create Server Admin",onChange:function(){ae.navigate("#addAdmin")}}))},cL=function(e){var t=e.crumbs,n=e.changePassword,r=n?ue.a.createElement(oL,null):ue.a.createElement(rL,{loginAfter:!1});return ue.a.createElement(Xt,null,ue.a.createElement(aL,{crumbs:t}),ue.a.createElement(Jt,null,ue.a.createElement("div",{className:"template-content flex-body flex-layout flex-col"},ue.a.createElement(sL,{changePassword:n}),ue.a.createElement("div",{id:"dashboard-conten1t",className:"flex-layout flex-col"},r))))},uL=nL.LoginForm,lL=nL.CreateAdminForm,pL=[{name:"Log In to CouchDB"}],fL=[ae.RouteObject.extend({routes:{"login?*extra":"login",login:"login",logout:"logout",createAdmin:"checkNodes","createAdmin/:node":"createAdminForNode"},checkNodes:function(){EE.navigateToNodeBasedOnNodeCount("/createAdmin/")},login:function(){return ue.a.createElement(iL,{crumbs:pL,component:ue.a.createElement(uL,{urlBack:se.getParams().urlback})})},logout:function(){ae.addNotification({msg:"You have been logged out."}),cw.logout().then(cw.getSession).then((function(){return ae.navigate("/")})).catch(vj)},createAdminForNode:function(){EE.fetchNodes();return ue.a.createElement(iL,{crumbs:[{name:"Create Admin"}],component:ue.a.createElement(lL,{loginAfter:!0})})}}),ae.RouteObject.extend({hideNotificationCenter:!0,hideApiBar:!0,selectedHeader:"Your Account",routes:{changePassword:{route:"checkNodesForPasswordChange",roles:["fx_loggedIn"]},"changePassword/:node":{route:"changePassword",roles:["fx_loggedIn"]},addAdmin:{route:"checkNodesForAddAdmin",roles:["_admin"]},"addAdmin/:node":{route:"addAdmin",roles:["_admin"]}},checkNodesForPasswordChange:function(){EE.navigateToNodeBasedOnNodeCount("/changePassword/")},checkNodesForAddAdmin:function(){EE.navigateToNodeBasedOnNodeCount("/addAdmin/")},changePassword:function(){return EE.fetchNodes(),ue.a.createElement(cL,{crumbs:[{name:"User Management"}],changePassword:!0})},addAdmin:function(){return EE.fetchNodes(),ue.a.createElement(cL,{crumbs:[{name:"User Management"}],changePassword:!1})}})];n(450);function dL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(i.includes)(e,"_admin")}var mL=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._user={name:!1,roles:[]},this._onChange={},this._authenticatedPromise=new q.a((function(e,t){n._authenticateResolve=e,n._authenticateReject=t})),this._allowAdminParty=t.allowAdminParty}var t,n,r;return t=e,(n=[{key:"isAuthenticated",value:function(){return this._authenticatedPromise}},{key:"setUser",value:function(e){var t=this;return this._user.name!==e.name&&(this._user={name:e.name,roles:e.roles,isAdmin:hL(e.roles)},Object(i.each)(this._onChange,(function(e){return e(t._user)}))),this._user}},{key:"user",value:function(){return this._user}},{key:"getSession",value:function(){var e=this;return cw.getSession().then((function(t){e.setUser(t),e.isLoggedIn()&&e._authenticateResolve(e.user())})).catch((function(t){e._authenticateReject(t)}))}},{key:"isAdminParty",value:function(){return!!this._allowAdminParty&&!this._user.name&&this._user.isAdmin}},{key:"isLoggedIn",value:function(){return!_.isNull(this._user.name)}},{key:"userRoles",value:function(){var e=this._user;return this.isLoggedIn()?(-1===e.roles.indexOf("fx_loggedIn")&&e.roles.push("fx_loggedIn"),e.roles):[]}},{key:"onChange",value:function(e){var t=this,n=Object(i.uniqueId)();return this._onChange[n]=e,function(){delete t._onChange[n]}}},{key:"matchesRoles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return!0;var t=_.intersection(this.userRoles(),e).length;return t>0}}])&&dL(t.prototype,n),r&&dL(t,r),e}(),yL=function(){ae.removeHeaderLink({id:"auth",bottomNav:!0})};ae.setSession(new mL({allowAdminParty:!0}));var bL,gL,_L={initialize:function(){ae.addHeaderLink({id:"auth",title:"Login",href:"#/login",icon:"fonticon-user",bottomNav:!0}),ae.session.onChange((function(){var e,t=ae.session;t.isAdminParty()?(e={id:"auth",title:"Admin Party!",href:"#/createAdmin",icon:"fonticon-user",bottomNav:!0},yL(),ae.addHeaderLink(e),ae.hideLogin()):t.isLoggedIn()?(e={id:"auth",title:"Your Account",href:"#/changePassword",icon:"fonticon-user",bottomNav:!0},yL(),ae.addHeaderLink(e),ae.showLogout()):(yL(),ae.showLogin())}))},RouteObjects:fL},vL=ae.addon(),EL=new ht.Model({id:"verifytestdb",name:"verifytestdb"}),wL=new ht.Model({id:"verifytestdb_replicate",name:"verifytestdb_replicate"});vL.testProcess={saveDoc:function(){return(bL=new ft.Doc({_id:"test_doc_1",a:1},{database:EL})).save()},destroyDoc:function(){return bL.destroy()},updateDoc:function(){return bL.set({b:"hello"}),bL.save()},saveDB:function(){return EL.save()},setupDB:function(e){return new ae.Promise((function(t,n){e.fetch().then((function(){return e.destroy()}),(function(){t()})).then((function(){t()}),(function(e,t,r){n(new Error(r))}))}))},setup:function(){return ae.Promise.all([this.setupDB(EL),this.setupDB(wL)])},testView:function(){var e,t,n=new ae.Promise((function(n,r){e=n,t=r}));return E(gL.url()+"/_view/testview").then((function(e){if(e.error)throw new Error(e.reason||e.error);return e})).then((function(n){var r=(n=_.isString(n)?JSON.parse(n):n).rows[0];6===r.value&&e(),t(new Error("Values expect 6, got "+r.value))}),t),n},setupView:function(){var e=new ft.Doc({_id:"test_doc_10",a:1},{database:EL}),t=new ft.Doc({_id:"test_doc_20",a:2},{database:EL}),n=new ft.Doc({_id:"test_doc_30",a:3},{database:EL});return gL=new ft.Doc({_id:"_design/view_check",views:{testview:{map:"function (doc) { emit(doc._id, doc.a); }",reduce:"_sum"}}},{database:EL}),ae.Promise.all([e.save(),t.save(),n.save(),gL.save()])},setupReplicate:function(){return O(R.getServerUrl("/_replicate"),{create_target:!0,source:"verifytestdb",target:"verifytestdb_replicate"}).then((function(e){if(e.error)throw new Error(e.reason||e.error);return e}))},testReplicate:function(){return new ae.Promise((function(e,t){wL.fetch().then((function(){var n=wL.get("doc_count");4!==n?t(new Error("Replication Failed, expected 4 docs got "+n)):e()}),t)}))},removeDBs:function(){wL.destroy(),EL.destroy()}};var OL=vL;function SL(e){return(SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RL(e,t){return(RL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function CL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=TL(e);if(t){var o=TL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return PL(this,n)}}function PL(e,t){return!t||"object"!==SL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TL(e){return(TL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RL(e,t)}(a,e);var t,n,r,o=CL(a);function a(){return NL(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("button",{id:"start",className:"btn btn-primary",onClick:this.props.verify,disabled:this.props.isVerifying},this.props.isVerifying?"Verifying":"Verify Installation")}}])&&DL(t.prototype,n),r&&DL(t,r),a}(ue.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(kL,"propTypes",{verify:Ct.a.func.isRequired,isVerifying:Ct.a.bool.isRequired});var xL={TESTS:{CREATE_DATABASE:"TEST_CREATE_DATABASE",CREATE_DOCUMENT:"TEST_CREATE_DOCUMENT",UPDATE_DOCUMENT:"TEST_UPDATE_DOCUMENT",DELETE_DOCUMENT:"TEST_DELETE_DOCUMENT",CREATE_VIEW:"TEST_CREATE_VIEW",REPLICATION:"TEST_REPLICATION"}};function IL(e){return(IL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LL(e,t){return(LL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ML(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=BL(e);if(t){var o=BL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return UL(this,n)}}function UL(e,t){return!t||"object"!==IL(t)&&"function"!=typeof t?qL(e):t}function qL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BL(e){return(BL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LL(e,t)}(a,e);var t,n,r,o=ML(a);function a(){var e;AL(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return VL(qL(e=o.call.apply(o,[this].concat(n))),"showTestResult",(function(t){return e.props.testResults[t].complete?e.props.testResults[t].success?ue.a.createElement("span",null,""):ue.a.createElement("span",null,""):""})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("table",{className:"table table-striped table-bordered"},ue.a.createElement("thead",null,ue.a.createElement("tr",null,ue.a.createElement("th",null,"Test"),ue.a.createElement("th",null,"Status"))),ue.a.createElement("tbody",null,ue.a.createElement("tr",null,ue.a.createElement("td",null,"Create Database"),ue.a.createElement("td",{id:"js-test-create-db"},this.showTestResult(xL.TESTS.CREATE_DATABASE))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Create Document"),ue.a.createElement("td",{id:"js-test-create-doc"},this.showTestResult(xL.TESTS.CREATE_DOCUMENT))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Update Document"),ue.a.createElement("td",{id:"js-test-update-doc"},this.showTestResult(xL.TESTS.UPDATE_DOCUMENT))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Delete Document"),ue.a.createElement("td",{id:"js-test-delete-doc"},this.showTestResult(xL.TESTS.DELETE_DOCUMENT))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Create View"),ue.a.createElement("td",{id:"js-test-create-view"},this.showTestResult(xL.TESTS.CREATE_VIEW))),ue.a.createElement("tr",null,ue.a.createElement("td",null,"Replication"),ue.a.createElement("td",{id:"js-test-replication"},this.showTestResult(xL.TESTS.REPLICATION)))))}}])&&jL(t.prototype,n),r&&jL(t,r),a}(ue.a.Component);function KL(e){return(KL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HL(e,t){return(HL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=XL(e);if(t){var o=XL(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return WL(this,n)}}function WL(e,t){return!t||"object"!==KL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XL(e){return(XL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}VL(FL,"propTypes",{testResults:Ct.a.object.isRequired});var QL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HL(e,t)}(a,e);var t,n,r,o=GL(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).props.resetTests(),t}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement("div",null,ue.a.createElement(kL,{verify:this.props.startVerification,isVerifying:this.props.isVerifying}),ue.a.createElement(FL,{testResults:this.props.testResults}))}}])&&zL(t.prototype,n),r&&zL(t,r),a}(ue.a.Component),JL="VERIFY_INSTALL_START",YL="VERIFY_INSTALL_RESET",$L="VERIFY_INSTALL_SINGLE_TEST_COMPLETE",ZL="VERIFY_INSTALL_ALL_TESTS_COMPLETE",eM=function(e,t){return function(){t({type:$L,test:e,success:!0})}},tM=!0,nM=function(e,t){return function(n){if(tM=!1,n){t({type:$L,test:e,success:!1});var r="n/a";n.responseText?r=JSON.parse(n.responseText).reason:n.message&&(r=n.message),ae.addNotification({msg:"Error: "+r,type:"error"})}}},rM=function(){return function(e){e({type:YL})}},oM=Object(Pt.b)((function(e){var t=e.verifyinstall;return{isVerifying:t.isVerifying,testResults:t.tests}}),(function(e){return{resetTests:function(){e(rM())},startVerification:function(){e(rM()),e((function(e){e({type:JL});var t=OL.testProcess;t.setup().then((function(){return t.saveDB().then(eM(xL.TESTS.CREATE_DATABASE,e))}),nM(xL.TESTS.CREATE_DATABASE,e)).then((function(){return t.saveDoc().then(eM(xL.TESTS.CREATE_DOCUMENT,e))}),nM(xL.TESTS.CREATE_DATABASE,e)).then((function(){return t.updateDoc().then(eM(xL.TESTS.UPDATE_DOCUMENT,e))}),nM(xL.TESTS.CREATE_DOCUMENT,e)).then((function(){return t.destroyDoc().then(eM(xL.TESTS.DELETE_DOCUMENT,e))}),nM(xL.TESTS.UPDATE_DOCUMENT,e)).then((function(){return t.setupView().then((function(){return t.testView().then(eM(xL.TESTS.CREATE_VIEW,e))}))}),nM(xL.TESTS.DELETE_DOCUMENT,e)).then((function(){return t.setupReplicate().then((function(){return t.testReplicate().then(eM(xL.TESTS.REPLICATION,e))}))}),nM(xL.TESTS.CREATE_VIEW,e)).then((function(){}),nM(xL.TESTS.REPLICATION,e)).then((function(){e({type:ZL}),tM&&ae.addNotification({msg:"Success! Your CouchDB installation is working. Time to Relax.",type:"success"}),t.removeDBs()}))}))}}}))(QL),aM=ae.RouteObject.extend({routes:{verifyinstall:"verifyInstall"},selectedHeader:"Verify",verifyInstall:function(){return ue.a.createElement($t,{component:ue.a.createElement(oM,null),crumbs:[{name:"Verify CouchDB Installation"}]})}});OL.RouteObjects=[aM];var iM=OL;function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sM(Object(n),!0).forEach((function(t){uM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lM={isVerifying:!1,tests:{}};function pM(e){var t=cM({},e);return Object.keys(t).forEach((function(e){t[e]={complete:!1}})),t}function fM(e,t,n){var r=cM({},e);if(!_.has(r,t))throw new Error("Invalid test name passed to updateTestStatus()");return r[t]={complete:!0,success:n},r}Object.keys(xL.TESTS).forEach((function(e){lM.tests[xL.TESTS[e]]={complete:!1}}));n(451);iM.initialize=function(){ae.addHeaderLink({title:"Verify",href:"#/verifyinstall",icon:"fonticon-ok-circled",bottomNav:!0})},ae.addReducers({verifyinstall:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lM,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case JL:return cM(cM({},e),{},{isVerifying:!0});case YL:return cM(cM({},e),{},{tests:pM(e.tests)});case $L:return cM(cM({},e),{},{tests:fM(e.tests,t.test,t.success)});case ZL:return cM(cM({},e),{},{isVerifying:!1});default:return e}}});var dM=iM,hM=[{title:"CouchDB Official Documentation  Online",link:"http://docs.couchdb.org/en/latest/",iconClassName:"couchdb-icon"},{title:"CouchDB Official Documentation  Offline",link:"./docs/index.html",iconClassName:"couchdb-icon"},{title:"CouchDB Weekly News",link:"http://blog.couchdb.org/",iconClassName:"couchdb-icon"},{title:"CouchDB Homepage",link:"https://couchdb.apache.org/",iconClassName:"couchdb-icon"},{title:"CouchDB on GitHub",link:"https://github.com/apache/couchdb",iconClassName:"github-icon"},{title:"Fauxton on GitHub",link:"https://github.com/apache/couchdb-fauxton",iconClassName:"github-icon"},{title:"Fauxton Visual Guide",link:"https://couchdb.apache.org/fauxton-visual-guide/index.html",iconClassName:"couchdb-icon"},{title:"The Apache Software Foundation",link:"http://www.apache.org/",iconClassName:"asf-feather-icon"},{title:"Follow CouchDB on Twitter",link:"https://twitter.com/couchdb",iconClassName:"twitter-icon"},{title:"Follow CouchDB on Google Plus",link:"https://plus.google.com/+CouchDB",iconClassName:"google-plus-icon"},{title:"Follow CouchDB on LinkedIn",link:"https://www.linkedin.com/company/apache-couchdb",iconClassName:"linkedin-icon"}],mM=function(e){var t=e.links,n=void 0===t?hM:t;return ue.a.createElement("div",{id:"documentation-page",className:"scrollable"},ue.a.createElement("div",{className:"links"},ue.a.createElement("table",null,ue.a.createElement("tbody",null,n.map((function(e){return ue.a.createElement("tr",{key:e.title},ue.a.createElement("td",{className:"icons-container"},ue.a.createElement("div",{className:"icon "+e.iconClassName}," ")),ue.a.createElement("td",null,ue.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer","data-bypass":"true"},e.title)))}))))))},yM=ae.RouteObject.extend({selectedHeader:"Documentation",hideApiBar:!0,hideNotificationCenter:!0,routes:{documentation:"documentation"},roles:["fx_loggedIn"],documentation:function(){return ue.a.createElement($t,{component:ue.a.createElement(mM,null),crumbs:[{name:"Documentation"}]})}});yM.RouteObjects=[yM];var bM=yM;n(452);bM.initialize=function(){ae.addHeaderLink({id:"Documentation",title:"Documentation",icon:"fonticon-bookmark",href:"#/documentation",bottomNav:!0,top:!0})};var gM=bM;function _M(e){return(_M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EM(e,t){return(EM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=NM(e);if(t){var o=NM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return OM(this,n)}}function OM(e,t){return!t||"object"!==_M(t)&&"function"!=typeof t?SM(e):t}function SM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DM=function(e){var t=e.showNews,n=e.isChecked,r=e.toggleChange;return ue.a.createElement("div",null,ue.a.createElement("p",null,"When you click this button, you are requesting content and sharing your IP address with ",ue.a.createElement("a",{href:"https://blog.couchdb.org/"},"blog.couchdb.org")," which is edited by the Apache CouchDB PMC and maintained by ",ue.a.createElement("a",{href:"https://wordpress.com/"},"wordpress.com"),"."),ue.a.createElement("p",null,"If you dont want to share your IP address, do not click the button."),ue.a.createElement("button",{className:"btn btn-primary",onClick:t},"Load News"),ue.a.createElement("label",{className:"news-checkbox"},ue.a.createElement("input",{type:"checkbox",checked:n,onChange:r}),"Remember my choice"))},RM={NewsPage:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EM(e,t)}(a,e);var t,n,r,o=wM(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).showNews=t.showNews.bind(SM(t)),t.toggleChange=t.toggleChange.bind(SM(t));var n=!!se.utils.localStorageGet("allow-IP-sharing");return t.state={showNews:!!n,allowsIpSharing:n},t}return t=a,(n=[{key:"showNews",value:function(){this.setState({showNews:!0})}},{key:"toggleChange",value:function(){var e=this.state.allowsIpSharing;this.setState({allowsIpSharing:!e}),se.utils.localStorageSet("allow-IP-sharing",!e)}},{key:"render",value:function(){var e=ue.a.createElement(DM,{showNews:this.showNews,toggleChange:this.toggleChange,isChecked:this.state.allowsIpSharing});return this.state.showNews&&(e=ue.a.createElement("iframe",{src:"https://blog.couchdb.org",width:"100%",height:"100%"})),ue.a.createElement("div",{className:"news-page"},e)}}])&&vM(t.prototype,n),r&&vM(t,r),a}(ue.a.Component)},CM=ae.RouteObject.extend({selectedHeader:"News",hideApiBar:!0,hideNotificationCenter:!0,routes:{news:"news"},roles:["fx_loggedIn"],news:function(){return ue.a.createElement($t,{component:ue.a.createElement(RM.NewsPage,null),crumbs:[{name:"News"}]})}});CM.RouteObjects=[CM];var PM=CM;n(453);PM.initialize=function(){ae.addHeaderLink({id:"News",title:"News",icon:"fonticon-clipboard",href:"#/news",bottomNav:!0,top:!0})};var TM=[Ye,{initialize:function(){}},Ts,gE,vO,lN,NN,mC,sx,vA,DA,_j,_L,dM,gM,PM];function kM(e){return(kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AM(e,t){return(AM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=UM(e);if(t){var o=UM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return LM(this,n)}}function LM(e,t){return!t||"object"!==kM(t)&&"function"!=typeof t?MM(e):t}function MM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UM(e){return(UM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var BM=vi.Copy,VM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AM(e,t)}(a,e);var t,n,r,o=jM(a);function a(){var e;xM(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qM(MM(e=o.call.apply(o,[this].concat(n))),"clearNotification",(function(){var t=e.props.item.toastId;e.props.clearSingleNotification(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this.props.item.time.fromNow(),t="fonticon "+{success:"fonticon-ok-circled",error:"fonticon-attention-circled",info:"fonticon-info-circled"}[this.props.item.type],n="all"!==this.props.filter&&this.props.filter!==this.props.item.type,r=this.props.style,o=r.opacity,a=r.height;return 0===o&&0===a?null:ue.a.createElement("li",{style:{opactiy:o,height:a+"px",borderBottomColor:"rgba(34, 34, 34, ".concat(o,")")},"aria-hidden":n},ue.a.createElement("div",{className:"flex-layout flex-row"},ue.a.createElement("span",{className:t}),ue.a.createElement("div",{className:"flex-body"},ue.a.createElement("p",null,this.props.item.cleanMsg),ue.a.createElement("div",{className:"notification-actions"},ue.a.createElement("span",{className:"time-elapsed"},e),ue.a.createElement("span",{className:"divider"},"|"),ue.a.createElement(BM,{uniqueKey:Object(Gl.a)(),text:this.props.item.cleanMsg,displayType:"text"}))),ue.a.createElement("button",{type:"button",onClick:this.clearNotification},"")))}}])&&IM(t.prototype,n),r&&IM(t,r),a}(ue.a.Component);function FM(e){return(FM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HM(e,t){return(HM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=QM(e);if(t){var o=QM(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return WM(this,n)}}function WM(e,t){return!t||"object"!==FM(t)&&"function"!=typeof t?XM(e):t}function XM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QM(e){return(QM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qM(VM,"propTypes",{item:Ct.a.object.isRequired,filter:Ct.a.string.isRequired,clearSingleNotification:Ct.a.func.isRequired});var YM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HM(e,t)}(a,e);var t,n,r,o=GM(a);function a(){var e;KM(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return JM(XM(e=o.call.apply(o,[this].concat(n))),"getNotifications",(function(t){var n;return n=t.length||e.props.notifications.length?t.map((function(t){var n=t.key,r=t.data,o=t.style;return ue.a.createElement(VM,{item:r,filter:e.props.filter,clearSingleNotification:e.props.clearSingleNotification,key:n,style:o})})):ue.a.createElement("li",{className:"no-notifications"},"No notifications."),ue.a.createElement("ul",{className:"notification-list"},n)})),JM(XM(e),"getStyles",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.props.notifications.map((function(n){var r=!t.find((function(e){return e.key===n.toastId.toString()}))&&{opacity:0,height:0};return r||n.type!==e.props.filter&&"all"!==e.props.filter?n.type!==e.props.filter&&(r={opacity:Object(aa.spring)(0,aa.presets.stiff),height:Object(aa.spring)(0,aa.presets.stiff)}):r={opacity:Object(aa.spring)(1,aa.presets.stiff),height:Object(aa.spring)(61,aa.presets.stiff)},{key:n.toastId.toString(),style:r,data:n}}));return n})),e}return t=a,(n=[{key:"render",value:function(){var e=this;if(!this.props.isVisible&&0===this.props.style.x)return null;var t={all:"flex-body",success:"flex-body",error:"flex-body",info:"flex-body"};t[this.props.filter]+=" selected";var n="notification-page-mask ".concat(this.props.isVisible?" visible":"");return ue.a.createElement("div",{id:"notification-center"},ue.a.createElement("div",{className:"notification-center-panel flex-layout flex-col visible",style:{transform:"translate(".concat(this.props.style.x,"px)")}},ue.a.createElement("header",{className:"flex-layout flex-row"},ue.a.createElement("span",{className:"fonticon fonticon-bell"}),ue.a.createElement("h1",{className:"flex-body"},"Notifications"),ue.a.createElement("button",{"aria-label":"Hide Notifications Center",type:"button",onClick:this.props.hideNotificationCenter},"")),ue.a.createElement("ul",{"aria-label":"Filters",className:"notification-filter flex-layout flex-row"},ue.a.createElement("li",{className:t.all,title:"All notifications","data-filter":"all",onClick:function(){return e.props.selectNotificationFilter("all")}},"All"),ue.a.createElement("li",{className:t.success,title:"Success notifications","data-filter":"success",onClick:function(){return e.props.selectNotificationFilter("success")}},ue.a.createElement("span",{className:"fonticon fonticon-ok-circled"})),ue.a.createElement("li",{className:t.error,title:"Error notifications","data-filter":"error",onClick:function(){return e.props.selectNotificationFilter("error")}},ue.a.createElement("span",{className:"fonticon fonticon-attention-circled"})),ue.a.createElement("li",{className:t.info,title:"Info notifications","data-filter":"info",onClick:function(){return e.props.selectNotificationFilter("info")}},ue.a.createElement("span",{className:"fonticon fonticon-info-circled"}))),ue.a.createElement("div",{className:"flex-body"},ue.a.createElement(aa.TransitionMotion,{styles:this.getStyles},this.getNotifications)),ue.a.createElement("footer",null,ue.a.createElement("input",{type:"button",value:"Clear All",className:"btn btn-small btn-secondary",onClick:this.props.clearAllNotifications}))),ue.a.createElement("div",{className:n,onClick:this.props.hideNotificationCenter}))}}])&&zM(t.prototype,n),r&&zM(t,r),a}(ue.a.Component);function $M(e){return($M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZM(){return(ZM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function eU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nU(e,t){return(nU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iU(e);if(t){var o=iU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oU(this,n)}}function oU(e,t){return!t||"object"!==$M(t)&&"function"!=typeof t?aU(e):t}function aU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iU(e){return(iU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}JM(YM,"propTypes",{isVisible:Ct.a.bool.isRequired,filter:Ct.a.string.isRequired,notifications:Ct.a.array.isRequired,hideNotificationCenter:Ct.a.func.isRequired,selectNotificationFilter:Ct.a.func.isRequired,clearAllNotifications:Ct.a.func.isRequired,clearSingleNotification:Ct.a.func.isRequired});var cU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nU(e,t)}(a,e);var t,n,r,o=rU(a);function a(){var e;eU(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sU(aU(e=o.call.apply(o,[this].concat(n))),"getStyles",(function(){var t={key:"1",style:{x:320}};return e.props.isVisible?t.style={x:Object(aa.spring)(0)}:t.style={x:Object(aa.spring)(320)},[t]})),sU(aU(e),"getNotificationCenterPanel",(function(t){var n=t.map((function(t){var n=t.style;return ue.a.createElement(YM,ZM({key:"1",style:n},e.props))}));return ue.a.createElement("aside",{"aria-label":"Notifications"},n)})),e}return t=a,(n=[{key:"render",value:function(){return ue.a.createElement(aa.TransitionMotion,{styles:this.getStyles},this.getNotificationCenterPanel)}}])&&tU(t.prototype,n),r&&tU(t,r),a}(ue.a.Component),uU=Object(Pt.b)((function(e){var t=e.notifications;return{isVisible:t.notificationCenterVisible,filter:t.selectedNotificationFilter,notifications:t.notifications}}),(function(e){return{hideNotificationCenter:function(){e((function(e){e({type:Ae})}))},selectNotificationFilter:function(t){e(function(e){return function(t){t({type:Me,options:{filter:e}})}}(t))},clearAllNotifications:function(){e((function(e){e({type:Le})}))},clearSingleNotification:function(t){e(function(e){return function(t){t({type:je,options:{toastId:e}})}}(t))}}}))(cU);function lU(e){return(lU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fU(e,t){return(fU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mU(e);if(t){var o=mU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hU(this,n)}}function hU(e,t){return!t||"object"!==lU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mU(e){return(mU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fU(e,t)}(a,e);var t,n,r,o=dU(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"getMsg",value:function(){return{__html:this.props.message}}},{key:"getContent",value:function(){return this.props.visible&&this.props.message?ue.a.createElement("p",{className:"perma-warning__content",dangerouslySetInnerHTML:this.getMsg()}):null}},{key:"render",value:function(){return ue.a.createElement("div",{id:"perma-warning"},this.getContent())}}])&&pU(t.prototype,n),r&&pU(t,r),a}(ue.a.Component);yU(bU,"defaultProps",{visible:!1}),yU(bU,"propTypes",{visible:Ct.a.bool.isRequired,message:Ct.a.string});var gU=Object(Pt.b)((function(e){var t=e.notifications;return{visible:t.permanentNotificationVisible,message:t.permanentNotificationMessage}}))(bU),_U=function(e){var t=e.version;return t?ue.a.createElement("div",{className:"faux-navbar__version-footer"},"Fauxton on ",ue.a.createElement("a",{href:"http://couchdb.apache.org/"},"Apache CouchDB"),ue.a.createElement("div",null,"v. ",t)):null};_U.propTypes={version:Ct.a.string};var vU=_U,EU=function(e){var t=e.toggleMenu,n=e.isMinimized,r=nn()("faux-navbar__burger",{"faux-navbar--wide":!n},{"faux-navbar--narrow":n}),o=n?"icon-resize-horizontal":"icon-signin faux-navbar__burger__icon--flipped";return ue.a.createElement("div",{"aria-expanded":!n,"aria-label":"Toggle Navigation Menu",className:r,onClick:t,role:"button",tabIndex:"0"},ue.a.createElement("i",{"aria-hidden":"true",className:"faux-navbar__burger__icon "+o}))};EU.propTypes={toggleMenu:Ct.a.func.isRequired,isMinimized:Ct.a.bool.isRequired};var wU=EU,OU=function(e){var t=e.link,n=e.active,r=e.isMinimized,o=n===t.title,a=nn()("faux-navbar__link",{"faux-navbar__link--active":o},{"faux-navbar__link--inactive":!o},{"faux-navbar--wide":!r},{"faux-navbar--narrow":r}),i=r?null:ue.a.createElement("span",{className:"faux-navbar__text"},t.title),s=null;return t.icon&&(s=ue.a.createElement("i",{"aria-hidden":"true",className:nn()(t.icon,"fonticon faux-navbar__icon",{"faux-navbar__icon-badge":t.badge})})),ue.a.createElement("a",{"aria-current":o?"page":null,"aria-label":t.title,className:a,href:t.href,target:t.target?"_blank":null,rel:"noreferrer noopener","data-bypass":t.target?"true":null},ue.a.createElement("div",{"data-nav-name":t.title,className:"faux-navbar__itemarea"},s,i))};OU.propTypes={link:Ct.a.object.isRequired,active:Ct.a.string,isMinimized:Ct.a.bool.isRequired};var SU=OU,NU=function(e){var t=e.isMinimized,n=nn()("faux-navbar__brand-logo",{"faux-navbar__brand-logo--wide":!t},{"faux-navbar__brand-logo--narrow":t});return ue.a.createElement("div",{className:"faux-navbar__brand"},ue.a.createElement("div",{className:n}))};NU.propTypes={isMinimized:Ct.a.bool.isRequired};var DU=NU,RU=function(e){var t=e.username,n=e.isMinimized,r=nn()("faux-navbar__logout__textcontainer",{"faux-navbar__logout__textcontainer--narrow":n},{"faux-navbar__logout__textcontainer--wide":!n});return ue.a.createElement("a",{className:"faux-logout__link",href:"#/logout"},ue.a.createElement("div",{className:r},ue.a.createElement("span",{className:"faux-navbar__logout__text"},"Log Out"),"",n?null:ue.a.createElement("span",{className:"faux-navbar__logout__username"},s.a.escape(t))))};RU.propTypes={username:Ct.a.string,isMinimized:Ct.a.bool.isRequired};var CU=RU,PU=function(e){var t=e.isMinimized,n=nn()("faux-navbar__login__textcontainer",{"faux-navbar__login__textcontainer--narrow":t},{"faux-navbar__login__textcontainer--wide":!t});return ue.a.createElement("a",{className:"faux-login__link",href:"#/login"},ue.a.createElement("div",{className:n},ue.a.createElement("span",{className:"faux-navbar__logout__text"},"Login")))};PU.propTypes={isMinimized:Ct.a.bool.isRequired};var TU=PU;function kU(e){return(kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IU(e,t){return(IU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=LU(e);if(t){var o=LU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jU(this,n)}}function jU(e,t){return!t||"object"!==kU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LU(e){return(LU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IU(e,t)}(a,e);var t,n,r,o=AU(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"createLinks",value:function(e){var t=this.props,n=t.activeLink,r=t.isMinimized;return e.map((function(e,t){return ue.a.createElement(SU,{key:t,link:e,active:n,isMinimized:r})}))}},{key:"render",value:function(){var e=this.props,t=e.isMinimized,n=e.version,r=e.isLoginSectionVisible,o=e.isLoginVisibleInsteadOfLogout,a=e.activeLink,i=e.username,s=e.isNavBarVisible,c=e.toggleNavbarMenu;if(!s)return null;var u=this.createLinks(this.props.navLinks),l=this.createLinks(this.props.bottomNavLinks),p=this.createLinks(this.props.footerNavLinks),f=nn()("faux-navbar",{"faux-navbar--wide":!t},{"faux-navbar--narrow":t}),d=o?ue.a.createElement(TU,{active:a,isMinimized:t}):ue.a.createElement(CU,{username:i,isMinimized:t});return ue.a.createElement("div",{className:f},ue.a.createElement("nav",null,ue.a.createElement("div",{className:"faux-navbar__linkcontainer"},ue.a.createElement(wU,{isMinimized:t,toggleMenu:c}),ue.a.createElement("div",{className:"faux-navbar__links"},u,l),ue.a.createElement("div",{className:"faux-navbar__footer"},ue.a.createElement(DU,{isMinimized:t}),ue.a.createElement("div",null,p),ue.a.createElement(vU,{version:n}),r?d:null))))}}])&&xU(t.prototype,n),r&&xU(t,r),a}(ce.Component);MU.propTypes={activeLink:Ct.a.string,isMinimized:Ct.a.bool.isRequired,version:Ct.a.string,username:Ct.a.string,navLinks:Ct.a.array,bottomNavLinks:Ct.a.array,footerNavLinks:Ct.a.array,isNavBarVisible:Ct.a.bool,isLoginSectionVisible:Ct.a.bool.isRequired,isLoginVisibleInsteadOfLogout:Ct.a.bool.isRequired,toggleNavbarMenu:Ct.a.func.isRequired};var UU=MU,qU=Object(Pt.b)((function(e){var t=e.navigation,n=ae.session.user();return{navLinks:t.navLinks,bottomNavLinks:t.bottomNavLinks,footerNavLinks:t.footerNavLinks,activeLink:t.activeLink,version:t.version,isMinimized:t.isMinimized,isNavBarVisible:t.navBarVisible,isLoginSectionVisible:t.loginSectionVisible,isLoginVisibleInsteadOfLogout:t.loginVisibleInsteadOfLogout,username:n&&n.name?n.name:""}}),(function(e){return{toggleNavbarMenu:function(){e((function(e){e({type:pe})}))}}}))(UU);function BU(e){return(BU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KU(e,t,n){return t&&FU(e.prototype,t),n&&FU(e,n),e}function zU(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HU(e,t)}function HU(e,t){return(HU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=QU(e);if(t){var o=QU(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return WU(this,n)}}function WU(e,t){return!t||"object"!==BU(t)&&"function"!=typeof t?XU(e):t}function XU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QU(e){return(QU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var JU=function(e){zU(n,e);var t=GU(n);function n(e){var r;return VU(this,n),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(XU(r=t.call(this,e)),"onKeydown",(function(e){27===(e.keyCode||e.which)&&Be.b.dismiss()})),r.state={routerOptions:e.router.currentRouteOptions},e.router.currentRouteOptions&&e.router.currentRouteOptions.selectedHeader&&r.props.setNavbarActiveLink(r.state.routerOptions.selectedHeader),r}return KU(n,[{key:"componentDidMount",value:function(){var e=this;this.props.router.on("new-component",(function(t){e.setState({routerOptions:t}),e.props.setNavbarActiveLink(e.state.routerOptions.selectedHeader)})),this.props.router.on("trigger-update",(function(){e.forceUpdate()})),document.addEventListener("keydown",this.onKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeydown)}},{key:"render",value:function(){if(!this.state.routerOptions)return null;var e=this.state.routerOptions.component;return e||null}}]),n}(ue.a.Component),YU=function(e){zU(n,e);var t=GU(n);function n(e){return VU(this,n),t.call(this,e)}return KU(n,[{key:"render",value:function(){var e=nn()({closeMenu:this.props.isPrimaryNavMinimized});return ue.a.createElement("div",null,ue.a.createElement(Be.a,{className:"toast-container",position:"top-right",autoClose:5e3,closeButton:!1,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),ue.a.createElement(gU,null),ue.a.createElement("div",{id:"notifications"},ue.a.createElement(uU,null)),ue.a.createElement("div",{id:"main",className:e},ue.a.createElement("div",{id:"app-container"},ue.a.createElement("div",{className:"wrapper"},ue.a.createElement("div",{role:"main",className:"pusher"},ue.a.createElement(JU,{router:this.props.router,setNavbarActiveLink:this.props.setNavbarActiveLink})),ue.a.createElement("div",{id:"primary-navbar"},ue.a.createElement(qU,null))))))}}]),n}(ue.a.Component),$U=Object(Pt.b)((function(e){return{isPrimaryNavMinimized:e.navigation.isMinimized}}),(function(e){return{setNavbarActiveLink:function(t){var n;e((n=t,function(e){e({type:be,name:n})}))}}}))(YU),ZU=n(120),eq=n(230);function tq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ae.addMiddleware(eq.a);var nq,rq=Object(ZU.c)(Object(ZU.b)(ae.reducers),ZU.a.apply(void 0,function(e){if(Array.isArray(e))return tq(e)}(nq=ae.middlewares)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(nq)||function(e,t){if(e){if("string"==typeof e)return tq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tq(e,t):void 0}}(nq)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));ae.reduxDispatch=function(e){rq.dispatch(e)},ae.reduxState=function(){return rq.getState()},se.addons=TM,ae.router=se.router=new ae.Router(se.addons),P.a.history.start({pushState:!1,root:se.root}),"ActiveXObject"in window&&o.a.ajaxSetup({cache:!1});document.addEventListener("click",(function(e){var t=function e(t){return t?"A"===t.tagName?t:e(t.parentNode):null}(e.target);if(t&&!t.getAttribute("data-bypass")){var n={prop:t.href,attr:t.getAttribute("href")};if(n.prop){var r=location.protocol+"//"+location.host;n.prop&&n.prop.slice(0,r.length)===r&&(e.preventDefault(),se.router.navigate(n.attr,!0))}}})),G.a.render(ue.a.createElement(Pt.a,{store:rq},ue.a.createElement($U,{router:se.router})),document.getElementById("app"))}},[[232,1,2]]]);